# Source Tree Integration

The project structure has been optimized to separate React source files from built output, resolving Vite build process issues. The `electron/` directory contains the Electron main process and built renderer output, while React source files are located in `src/renderer/` to prevent build deletion.

```plaintext
project-root/
├── index.html              # Vite entry point
├── electron/               # Electron main process and built output
│   ├── main.js             # Electron main process entry point
│   ├── preload.js          # IPC bridge
│   └── renderer/           # Built UI output (auto-generated)
│       ├── index.html      # Built HTML template
│       └── assets/         # Built assets
├── src/                    # Source code (backend + frontend)
│   ├── renderer/           # React source files
│   │   ├── main.jsx        # React entry point
│   │   ├── App.jsx         # Main React component
│   │   ├── index.css       # Base CSS with Tailwind
│   │   └── components/     # React components
│   │       └── Settings/   # Settings UI components
│   │           ├── SettingsPanel.tsx
│   │           ├── ApiKeysSection.tsx
│   │           ├── FilePathsSection.tsx
│   │           ├── ParametersSection.tsx
│   │           ├── SettingsSection.tsx
│   │           ├── SecureInput.tsx
│   │           ├── FileSelector.tsx
│   │           ├── CostIndicator.tsx
│   │           └── __tests__/     # Co-located component tests
│   │               ├── SettingsPanel.test.tsx
│   │               ├── ApiKeysSection.test.tsx
│   │               ├── FilePathsSection.test.tsx
│   │               ├── ParametersSection.test.tsx
│   │               ├── SettingsSection.test.tsx
│   │               ├── SecureInput.test.tsx
│   │               ├── FileSelector.test.tsx
│   │               └── CostIndicator.test.tsx
│   ├── adapter/            # Backend Adapter (future)
│   ├── database/           # Database service and models (future)
│   ├── aiVision.js         # AI vision processing
│   ├── paramsGeneratorModule.js
│   ├── producePictureModule.js
│   ├── index.js            # Main backend entry point
│   └── ...
├── tests/                  # Testing framework and test files
│   ├── unit/               # Unit tests
│   │   ├── backend/        # Backend service tests
│   │   │   ├── services/   # Service layer tests
│   │   │   ├── adapter/    # Adapter layer tests
│   │   │   └── utils/      # Utility function tests
│   │   └── frontend/       # React component tests
│   │       └── components/ # Component-specific tests
│   ├── integration/        # Integration tests
│   │   ├── api/            # API integration tests
│   │   └── database/       # Database integration tests
│   └── e2e/                # End-to-end tests
│       ├── workflows/      # User workflow tests
│       └── cross-platform/ # Platform-specific tests
├── vite.config.ts          # Vite configuration
├── vitest.config.ts        # Vitest testing configuration
├── playwright.config.ts    # Playwright E2E testing configuration
├── tailwind.config.js      # Tailwind CSS configuration
├── tsconfig.json           # TypeScript configuration
└── package.json            # Project dependencies and scripts
```

## Key Structural Changes

### React Source Files Location
- **Source**: `src/renderer/` - Contains all React components and source files
- **Built Output**: `electron/renderer/` - Auto-generated by Vite build process
- **Entry Point**: `index.html` in project root serves as Vite entry point

### Build Process
1. Vite builds React source from `src/renderer/` 
2. Output is generated to `electron/renderer/`
3. Electron main process loads the built files from `electron/renderer/`

### Development Workflow
- **Development**: `npm run dev` - Starts Vite dev server with hot reload
- **Build**: `npm run build` - Builds React app to `electron/renderer/`
- **Electron**: `npm run electron:dev` - Launches Electron with built files

This structure ensures source files are preserved during builds while maintaining clean separation between source code and built output.

## Component Testing Structure

### Co-located Test Pattern
Component tests are co-located with their components in `__tests__` directories. This pattern has been implemented and approved for all future component development.

**Benefits**:
- **Maintainability**: Tests are located next to their components, making them easier to find and update
- **Developer Experience**: When modifying a component, the test file is immediately visible
- **Industry Standard**: Follows React community best practices and modern testing patterns

**Implementation Pattern**:
```
src/renderer/components/[ComponentName]/
├── ComponentName.tsx
├── ComponentName.module.css (if applicable)
└── __tests__/
    ├── ComponentName.test.tsx
    └── ComponentName.integration.test.tsx (if needed)
```

**Current Implementation**: The Settings components demonstrate this pattern with all 8 components having co-located tests in `src/renderer/components/Settings/__tests__/`. 