# Story 1.14: UI Cosmetic Polish & Minor Fixes (Ongoing Small PR Lane)

## Status
Ready for Review

## Story
As a product owner and end user,
I want incremental cosmetic improvements delivered continuously via small commits,
so that the UI feels consistent, tidy, and professional without risk to functionality.

## Acceptance Criteria
1. Scope limited to non‑functional visual polish unless explicitly approved (no behavior changes).
2. Approved focus areas include:
   - Alignment, spacing, typography, icon sizes, and color consistency
   - Status badge styles and label capitalization
   - Hover/focus states and interactive affordances
   - Microcopy clarity (grammar, punctuation), without changing meaning
3. No layout regressions (visual diff or manual spot check across dashboard, job management, settings, and results views).
4. Commits are small, well‑scoped, and easy to review (< ~150 lines changed where possible).
5. Each commit updates a brief change log entry (what changed, why, before/after screenshot when helpful).
6. Visual changes pass existing unit/E2E tests and eslint/style checks.

## Process
- Intake: PO will provide an ongoing list of small tweaks; maintain a running checklist in this story.
- Execution: Submit small commits continuously; each commit references this story with a checklist item.
- Validation: Reviewer confirms no behavior changes and no layout regressions; merge behind regular safeguards.

## Tasks / Subtasks
- [x] Align 'Add to Retry' blue button size in Failed Image Review modal with Single Job View action buttons.
- [x] Override inherited/global styles via custom class to ensure consistent button sizing in Failed Image Review modal.
- [x] Add Delete button to Image Gallery Single Image modal header; wire to cascading delete (DB + filesystem) via parent handler.
- [x] Keep Image Gallery modal open after delete and navigate to next (or previous if last).
  - [x] Fix type mismatch bug in ID comparisons (String conversion)
  - [x] Implement synchronous modal state updates via flushSync
  - [x] Create separate delete flow to bypass parent refresh
  - [x] Add modal lock mechanism to prevent premature closure
  - [x] Implement deferred background refresh for gallery grid
- [x] Apply same delete navigation behavior to Failed Images Review Single Image Modal.
- [x] Match delete button sizing with Failed Images Review modal (shared class).
- [x] Fix visual flash/zoom reset issue in Failed Images Review Single Image Modal.
  - [x] Eliminate modal unmount/remount cycle during navigation
  - [x] Extract modal to separate container component with React Portal
  - [x] Implement optimistic UI updates to prevent infinite loops on delete
  - [x] Extend auto-navigation behavior to Approve and Add to Retry actions
  - [x] Unified workflow: all three actions (Delete/Approve/Retry) navigate to next image
- [x] Align bulk action button heights in Failed Images Review gallery (Approve/Retry/Delete Selected).
  - [x] Add flex items-center to all three buttons for consistent vertical alignment
  - [x] Increase padding from py-1 to py-2 for better visual balance
- [x] Remove duplicate "Delete Selected" button from Overview tab's Job Progress header.
  - [x] Fix button bleeding through tabs when images selected in Gallery
- [x] Align Export ZIP and Delete Selected button heights in Image Gallery tab with modal action buttons.
  - [x] Update padding from px-3 py-1 to px-4 py-2 for consistency
  - [x] Increase icon size from w-3 h-3 to w-4 h-4 (16px)
  - [x] Replace space-x-1 with gap-2 for better spacing
- [x] Update Processing Settings Modal (Failed Images Review) text for clarity.
  - [x] Update Important Note: "Quality Controlled" instead of "QC"
  - [x] Update helper text for "Retry with Original Settings" (remove "QC,")
  - [x] Update helper text for "Retry with Modified Settings" (remove "QC,")
- [x] Add "Image Control Info" button to Failed Image Review Single Image modal header.
  - [x] Add showHelp state and toggle button
  - [x] Add help popup with viewer controls (Pan, Zoom, Fit, Toolbar)
  - [x] Position between Delete button and navigation arrows
- [x] Add "File Path" field to Failed Image Review modal Details tab.
  - [x] Display after Date field in Generation Details section
  - [x] Show finalImagePath or tempImagePath with monospace font
- [x] Make Image Gallery filter controls responsive for narrow viewports.
  - [x] Add flex-wrap to filter controls container (View, Job, Date, Search, Sort)
  - [x] Add flex-wrap to action buttons container (Select All, Clear, Export, Delete)
  - [x] Change space-x utilities to gap for proper wrapping behavior
- [x] Fix modal layout responsiveness for minimized/default window sizes.
  - [x] Keep side-by-side layout at all viewport widths (no vertical stacking)
  - [x] Image panel: w-1/2 at narrow, w-2/3 at xl+ breakpoint
  - [x] Details panel: w-1/2 at narrow, w-1/3 at xl+ breakpoint
  - [x] Make tab content area scrollable (overflow-y-auto) while keeping tabs and image fixed
  - [x] Apply consistent border-l to separate panels at all breakpoints
  - [x] Replicate working Image Gallery modal structure to Failed Image Review modal for consistent scrolling behavior
  - [x] Remove border and bg-white from Failed Image Review modal image container to match Image Gallery modal
  - [x] Remove p-6 padding from panel and mb-4 margin from tabs to make tabs flush with borders like Image Gallery modal
- [x] Add top pagination ribbon in Job Management panel.
  - [x] Position ribbon between filters and table with subtle background
  - [x] Include navigation buttons (previous/next) with page indicator
  - [x] Include items per page dropdown (25, 50, 100)
  - [x] Omit total jobs count (already visible in statistics bar)
  - [x] Fix pagination bug: fetch all jobs from API instead of passing pagination params (was doing double pagination)
- [x] Add labels to Job Management filters for clarity.
  - [x] Add "By Status:" label before status dropdown
  - [x] Add "Search:" label before search input field
- [x] Add batch action buttons to filter summary section for better accessibility.
  - [x] Show Rerun, Export, Delete buttons after pipe character when jobs are selected
  - [x] Display selection count alongside buttons
  - [x] Use standard button sizing (px-4 py-2) consistent with other interfaces
  - [x] Prevents users from having to scroll to bottom for batch actions on long lists
- [x] Make Job Management page fixed-height with only job table scrollable.
  - [x] Change main container from min-h-screen to h-screen
  - [x] Keep header, statistics, filters, and pagination always visible
  - [x] Only job table scrolls internally (already had flex-1 and overflow setup in CSS)
  - [x] Eliminates need for whole-page scrolling
- [x] Remove redundant bottom pagination and batch action toolbar.
  - [x] Remove bottom pagination controls (duplicate of top pagination ribbon)
  - [x] Remove bottom batch operations toolbar (duplicate of filter section buttons)
  - [x] Simplifies UI since fixed-height page keeps all controls accessible at top
  - [x] Reduces clutter and maintains single source of truth for actions

## Definition of Done
- [x] A first batch of small UI polish PRs merged with no regressions.
- [x] Checklist in this story seeded and trackable for next iterations.
- [x] Visual consistency improved across at least 3 major surfaces (dashboard, job management, settings, results).
- [x] Tests and lints remain green.

## Risks
- Small PRs may accumulate unnoticed style drift; keep a brief design token reference and component examples.
- Avoid functional changes unless explicitly approved to reduce regression risk.

## Story Points
2 (ongoing lane)

## Backlog
- (empty; add incoming cosmetic tweaks here, to be promoted into Tasks/Subtasks as executed)

