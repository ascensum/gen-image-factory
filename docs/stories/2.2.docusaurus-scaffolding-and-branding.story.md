# Story 2.2: Docusaurus Scaffolding & Branding

## Status: Done

## Story

**As a** project maintainer,
**I want** a Docusaurus site scaffolded and configured to consume from `docs/public_docs/`,
**so that** we have a branded, functional documentation website ready for deployment.

## Acceptance Criteria

1. **Docusaurus Installation & Scaffolding**:
   - Docusaurus is installed in `/website` directory (separate from main app)
   - Initial Docusaurus site is scaffolded with standard configuration
   - Site is configured to consume content from `../docs/public_docs/`
   - Basic site structure (sidebar, navigation, footer) is functional

2. **Branding & Theme**:
   - Tauri Dark Mode theme is applied to match the desktop application
   - Site logo and favicon are configured (if available)
   - Color scheme matches application branding
   - Typography and spacing are consistent with application UI

3. **Configuration**:
   - `docusaurus.config.js` is configured with:
     - Site metadata (title, tagline, URL, baseUrl)
     - Theme configuration (dark mode, color scheme)
     - Plugin configuration (if needed)
     - Sidebar configuration pointing to `docs/public_docs/`
   - `package.json` in `/website` includes necessary Docusaurus dependencies and scripts

4. **Content Integration**:
   - Content from `docs/public_docs/` is properly integrated into Docusaurus structure
   - Sidebar navigation reflects the `docs/public_docs/` directory structure
   - Markdown files are properly rendered with Docusaurus features (code blocks, admonitions, etc.)
   - Internal links and cross-references work correctly

5. **Local Development**:
   - `npm start` in `/website` launches local development server
   - Hot reload works for content changes
   - Build process (`npm run build`) produces static site in `/website/build/`
   - Build output is validated and ready for deployment

## Scope

- **In scope**:
  - Install and scaffold Docusaurus in `/website`
  - Configure site to consume from `../docs/public_docs/`
  - Apply Tauri Dark Mode theme and branding
  - Set up basic site structure and navigation
  - Validate local development and build process

- **Out of scope (future stories)**:
  - Website deployment (Story 2.3)
  - Advanced Docusaurus features (search, versioning, i18n)
  - Custom React components for documentation
  - Analytics integration
  - Content authoring beyond what exists in `docs/public_docs/`

## Tasks / Subtasks

- **Docusaurus Installation**
  - [x] Create `/website` directory in project root
  - [x] Initialize Docusaurus: `npx create-docusaurus@latest website classic --typescript false` (or manual setup)
  - [x] Verify Docusaurus installation and dependencies
  - [x] Test that `npm start` launches development server

- **Configuration Setup**
  - [x] Configure `docusaurus.config.js`:
    - [x] Set site metadata (title, tagline, URL, baseUrl)
    - [x] Configure `presets` to point to `../public_docs/` (note: actual path is `../public_docs/`, not `../docs/public_docs/`)
    - [x] Set up sidebar configuration to reflect `public_docs/` structure
    - [x] Configure theme settings for dark mode
  - [x] Update `package.json` scripts if needed
  - [x] Verify configuration loads without errors

- **Theme & Branding**
  - [x] Research Tauri Dark Mode color scheme and typography
  - [x] Apply dark mode theme configuration in `docusaurus.config.js`
  - [x] Configure color scheme to match application branding
  - [x] Add logo and favicon (if available) or use Docusaurus defaults
  - [x] Customize typography and spacing to match application UI
  - [x] Test theme in both light and dark mode (if both supported)

- **Content Integration**
  - [x] Verify that content from `../public_docs/` is accessible
  - [x] Configure sidebar to reflect `public_docs/` directory structure:
    - [x] `getting-started/` section
    - [x] `user-guide/` section
    - [x] `troubleshooting/` section
    - [x] `api/` section (if applicable)
  - [x] Test markdown rendering (code blocks, admonitions, links)
  - [x] Verify internal links and cross-references work correctly
  - [x] Test that excluded internal documentation is not accessible

- **Local Development Validation**
  - [x] Test `npm start` launches development server successfully
  - [x] Verify hot reload works for content changes
  - [x] Test navigation and sidebar functionality
  - [x] Validate that build process (`npm run build`) completes successfully
  - [x] Check build output in `/website/build/` is valid static site
  - [x] Test that build output can be served locally (e.g., `npx serve website/build`)

- **Documentation**
  - [x] Document Docusaurus setup in project README or `docs/`
  - [x] Document how to add/edit content in `public_docs/`
  - [x] Document local development workflow
  - [x] Document build process and output location

## Developer Notes

- **Reference**: `docs/prd/technical-constraints-and-integration-requirements.md`
  - Docusaurus is in the technology stack
  - Site must consume from `docs/public_docs/` only (privacy firewall from Story 2.1)

- **Docusaurus Setup Options**:
  - Classic template: Full-featured with blog and docs
  - Docs-only: Minimal setup for documentation only
  - Manual setup: Full control over configuration
  - Recommendation: Start with classic template, remove blog if not needed

- **Theme Customization**:
  - Docusaurus supports CSS variables for theming
  - Dark mode can be configured via `colorMode` in config
  - Custom CSS can override default styles
  - Tauri Dark Mode colors should be extracted from application theme

- **Content Path Configuration**:
  - Docusaurus `presets` configuration controls content source
  - `path` option in preset config points to documentation directory
  - Sidebar is typically auto-generated from directory structure
  - Manual sidebar configuration may be needed for custom organization

- **Build Output**:
  - Static site is generated in `/website/build/`
  - Output is ready for deployment to GitHub Pages, Netlify, Vercel, etc.
  - Build process validates content and reports errors

## Testing Plan

- **Local Development**:
  - `npm start` in `/website` launches dev server
  - Content changes trigger hot reload
  - Navigation and sidebar work correctly
  - All pages from `docs/public_docs/` are accessible

- **Build Validation**:
  - `npm run build` completes without errors
  - Build output in `/website/build/` is valid
  - Static site can be served locally and functions correctly
  - No broken links or missing assets

- **Theme Validation**:
  - Dark mode theme matches application branding
  - Color scheme is consistent
  - Typography and spacing are appropriate
  - Responsive design works on mobile/tablet/desktop

- **Privacy Firewall Validation**:
  - Internal documentation (`docs/prd/`, `docs/stories/`, etc.) is not accessible
  - Only content from `docs/public_docs/` is included in build
  - No internal references leak into public site

## Risks

- **Theme mismatch with application**: Mitigated by extracting exact colors and typography from application
- **Content path configuration issues**: Mitigated by thorough testing of content integration
- **Build process failures**: Mitigated by validating build output and documenting common issues

## Dependencies

- **Story 2.1**: Docs Structure Migration & Firewall (must be complete; provides `docs/public_docs/` content)
- **NFR-Docs**: Docusaurus in technology stack

## Related Requirements

- **NFR-Docs**: Docusaurus is in the technology stack (Technical Constraints)

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5 (via Cursor)

### Completion Notes
- Docusaurus successfully installed and configured in `/website` directory
- Site configured to consume content from `../public_docs/` (note: actual path is `public_docs/` at root, not `docs/public_docs/`)
- Site URL configured for subdomain: `https://genimage.shiftlinetools.com`
- CNAME file created in `website/static/CNAME` for subdomain deployment
- Dark mode theme applied with modern color scheme matching Tauri application
- Logo and favicon configured from application assets
- All markdown links fixed to use Docusaurus-compatible absolute paths
- Build process validated and working correctly
- Documentation created in `website/README.md`

### File List
**New Files:**
- `website/docusaurus.config.js` - Main Docusaurus configuration (URL: genimage.shiftlinetools.com)
- `website/sidebars.js` - Sidebar configuration
- `website/package.json` - Dependencies and scripts (updated)
- `website/src/css/custom.css` - Custom dark mode theme
- `website/README.md` - Documentation for Docusaurus setup
- `website/static/CNAME` - Subdomain configuration (genimage.shiftlinetools.com)
- `website/static/img/logo.svg` - Application logo
- `website/static/img/favicon.png` - Favicon

**Modified Files:**
- `public_docs/README.md` - Fixed internal links to use Docusaurus paths
- `public_docs/user-guide/export.md` - Fixed troubleshooting link
- `public_docs/user-guide/failed-images-review.md` - Fixed troubleshooting link
- `public_docs/user-guide/dashboard.md` - Fixed troubleshooting link
- `public_docs/troubleshooting/common-issues.md` - Fixed user guide link
- `public_docs/getting-started/installation.md` - Fixed user guide link

**Deleted Files:**
- `website/docusaurus.config.ts` - Replaced with JavaScript version
- `website/sidebars.ts` - Replaced with JavaScript version
- `website/tsconfig.json` - Not needed for JavaScript config
- `website/src/pages/index.tsx` - Removed to avoid route conflict
- `website/blog/` - Removed (blog disabled)
- `website/docs/` - Removed (using `../public_docs/` instead)

### Debug Log References
- Fixed duplicate route issue by removing `src/pages/index.tsx`
- Fixed broken markdown links by converting relative paths to absolute Docusaurus paths
- Updated deprecated `onBrokenMarkdownLinks` config to use new `markdown.hooks` API
- Resolved content path: using `../public_docs/` (actual location) instead of `../docs/public_docs/`

## Change Log

| Date       | Version | Description                                | Author |
|------------|---------|--------------------------------------------|--------|
| 2025-01-XX | 1.0     | Initial story draft (Docusaurus scaffolding & branding) | SM     |
| 2025-12-25 | 1.1     | Story implementation completed - Docusaurus site scaffolded and configured | James (Dev Agent) |
| 2025-12-25 | 1.2     | Story marked as Done - all acceptance criteria met | James (Dev Agent) |

## QA Results

To be completed by QA upon completion.
