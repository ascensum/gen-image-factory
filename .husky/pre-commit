#!/bin/sh
set -e

echo "[husky] Running critical regression suite (non-interactive)"

# 1) Core backend/job management suites
npm run -s test:job-management
npm run -s test:retry

# 2) Focused UI and utils guards (fast)
npx vitest run \
  src/renderer/components/Jobs/__tests__/SingleJobView.settings-save.test.tsx \
  src/renderer/components/Jobs/__tests__/SingleJobView.statistics.test.tsx \
  src/renderer/components/Jobs/__tests__/SingleJobView.delete-refresh.test.tsx \
  src/renderer/components/Jobs/__tests__/JobLabelDisplay.test.tsx \
  src/renderer/components/Settings/__tests__/Parameters.behavior.test.tsx \
  tests/unit/utils/processing.normalizer.test.ts --reporter=dot

echo "[husky] All critical tests passed"
