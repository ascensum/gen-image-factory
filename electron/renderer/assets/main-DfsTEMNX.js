(function(){const b=document.createElement("link").relList;if(b&&b.supports&&b.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))c(p);new MutationObserver(p=>{for(const m of p)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function u(p){const m={};return p.integrity&&(m.integrity=p.integrity),p.referrerPolicy&&(m.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?m.credentials="include":p.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(p){if(p.ep)return;p.ep=!0;const m=u(p);fetch(p.href,m)}})();function sm(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Bo={exports:{}},Qs={};var Gf;function kx(){if(Gf)return Qs;Gf=1;var o=Symbol.for("react.transitional.element"),b=Symbol.for("react.fragment");function u(c,p,m){var f=null;if(m!==void 0&&(f=""+m),p.key!==void 0&&(f=""+p.key),"key"in p){m={};for(var k in p)k!=="key"&&(m[k]=p[k])}else m=p;return p=m.ref,{$$typeof:o,type:c,key:f,ref:p!==void 0?p:null,props:m}}return Qs.Fragment=b,Qs.jsx=u,Qs.jsxs=u,Qs}var Qf;function Ax(){return Qf||(Qf=1,Bo.exports=kx()),Bo.exports}var a=Ax(),Io={exports:{}},ye={};var Yf;function Ex(){if(Yf)return ye;Yf=1;var o=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),f=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),B=Symbol.iterator;function P(x){return x===null||typeof x!="object"?null:(x=B&&x[B]||x["@@iterator"],typeof x=="function"?x:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,se={};function re(x,g,D){this.props=x,this.context=g,this.refs=se,this.updater=D||I}re.prototype.isReactComponent={},re.prototype.setState=function(x,g){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,g,"setState")},re.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function ie(){}ie.prototype=re.prototype;function ce(x,g,D){this.props=x,this.context=g,this.refs=se,this.updater=D||I}var le=ce.prototype=new ie;le.constructor=ce,F(le,re.prototype),le.isPureReactComponent=!0;var ue=Array.isArray;function ae(){}var z={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function H(x,g,D){var Y=D.ref;return{$$typeof:o,type:x,key:g,ref:Y!==void 0?Y:null,props:D}}function Q(x,g){return H(x.type,g,x.props)}function M(x){return typeof x=="object"&&x!==null&&x.$$typeof===o}function G(x){var g={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(D){return g[D]})}var _=/\/+/g;function de(x,g){return typeof x=="object"&&x!==null&&x.key!=null?G(""+x.key):g.toString(36)}function oe(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(ae,ae):(x.status="pending",x.then(function(g){x.status==="pending"&&(x.status="fulfilled",x.value=g)},function(g){x.status==="pending"&&(x.status="rejected",x.reason=g)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function v(x,g,D,Y,J){var $=typeof x;($==="undefined"||$==="boolean")&&(x=null);var K=!1;if(x===null)K=!0;else switch($){case"bigint":case"string":case"number":K=!0;break;case"object":switch(x.$$typeof){case o:case b:K=!0;break;case E:return K=x._init,v(K(x._payload),g,D,Y,J)}}if(K)return J=J(x),K=Y===""?"."+de(x,0):Y,ue(J)?(D="",K!=null&&(D=K.replace(_,"$&/")+"/"),v(J,g,D,"",function(Ee){return Ee})):J!=null&&(M(J)&&(J=Q(J,D+(J.key==null||x&&x.key===J.key?"":(""+J.key).replace(_,"$&/")+"/")+K)),g.push(J)),1;K=0;var pe=Y===""?".":Y+":";if(ue(x))for(var me=0;me<x.length;me++)Y=x[me],$=pe+de(Y,me),K+=v(Y,g,D,$,J);else if(me=P(x),typeof me=="function")for(x=me.call(x),me=0;!(Y=x.next()).done;)Y=Y.value,$=pe+de(Y,me++),K+=v(Y,g,D,$,J);else if($==="object"){if(typeof x.then=="function")return v(oe(x),g,D,Y,J);throw g=String(x),Error("Objects are not valid as a React child (found: "+(g==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.")}return K}function w(x,g,D){if(x==null)return x;var Y=[],J=0;return v(x,Y,"","",function($){return g.call(D,$,J++)}),Y}function X(x){if(x._status===-1){var g=x._result;g=g(),g.then(function(D){(x._status===0||x._status===-1)&&(x._status=1,x._result=D)},function(D){(x._status===0||x._status===-1)&&(x._status=2,x._result=D)}),x._status===-1&&(x._status=0,x._result=g)}if(x._status===1)return x._result.default;throw x._result}var fe=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},y={map:w,forEach:function(x,g,D){w(x,function(){g.apply(this,arguments)},D)},count:function(x){var g=0;return w(x,function(){g++}),g},toArray:function(x){return w(x,function(g){return g})||[]},only:function(x){if(!M(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return ye.Activity=L,ye.Children=y,ye.Component=re,ye.Fragment=u,ye.Profiler=p,ye.PureComponent=ce,ye.StrictMode=c,ye.Suspense=N,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,ye.__COMPILER_RUNTIME={__proto__:null,c:function(x){return z.H.useMemoCache(x)}},ye.cache=function(x){return function(){return x.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(x,g,D){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var Y=F({},x.props),J=x.key;if(g!=null)for($ in g.key!==void 0&&(J=""+g.key),g)!T.call(g,$)||$==="key"||$==="__self"||$==="__source"||$==="ref"&&g.ref===void 0||(Y[$]=g[$]);var $=arguments.length-2;if($===1)Y.children=D;else if(1<$){for(var K=Array($),pe=0;pe<$;pe++)K[pe]=arguments[pe+2];Y.children=K}return H(x.type,J,Y)},ye.createContext=function(x){return x={$$typeof:f,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:m,_context:x},x},ye.createElement=function(x,g,D){var Y,J={},$=null;if(g!=null)for(Y in g.key!==void 0&&($=""+g.key),g)T.call(g,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(J[Y]=g[Y]);var K=arguments.length-2;if(K===1)J.children=D;else if(1<K){for(var pe=Array(K),me=0;me<K;me++)pe[me]=arguments[me+2];J.children=pe}if(x&&x.defaultProps)for(Y in K=x.defaultProps,K)J[Y]===void 0&&(J[Y]=K[Y]);return H(x,$,J)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(x){return{$$typeof:k,render:x}},ye.isValidElement=M,ye.lazy=function(x){return{$$typeof:E,_payload:{_status:-1,_result:x},_init:X}},ye.memo=function(x,g){return{$$typeof:j,type:x,compare:g===void 0?null:g}},ye.startTransition=function(x){var g=z.T,D={};z.T=D;try{var Y=x(),J=z.S;J!==null&&J(D,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(ae,fe)}catch($){fe($)}finally{g!==null&&D.types!==null&&(g.types=D.types),z.T=g}},ye.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},ye.use=function(x){return z.H.use(x)},ye.useActionState=function(x,g,D){return z.H.useActionState(x,g,D)},ye.useCallback=function(x,g){return z.H.useCallback(x,g)},ye.useContext=function(x){return z.H.useContext(x)},ye.useDebugValue=function(){},ye.useDeferredValue=function(x,g){return z.H.useDeferredValue(x,g)},ye.useEffect=function(x,g){return z.H.useEffect(x,g)},ye.useEffectEvent=function(x){return z.H.useEffectEvent(x)},ye.useId=function(){return z.H.useId()},ye.useImperativeHandle=function(x,g,D){return z.H.useImperativeHandle(x,g,D)},ye.useInsertionEffect=function(x,g){return z.H.useInsertionEffect(x,g)},ye.useLayoutEffect=function(x,g){return z.H.useLayoutEffect(x,g)},ye.useMemo=function(x,g){return z.H.useMemo(x,g)},ye.useOptimistic=function(x,g){return z.H.useOptimistic(x,g)},ye.useReducer=function(x,g,D){return z.H.useReducer(x,g,D)},ye.useRef=function(x){return z.H.useRef(x)},ye.useState=function(x){return z.H.useState(x)},ye.useSyncExternalStore=function(x,g,D){return z.H.useSyncExternalStore(x,g,D)},ye.useTransition=function(){return z.H.useTransition()},ye.version="19.2.3",ye}var Vf;function Go(){return Vf||(Vf=1,Io.exports=Ex()),Io.exports}var h=Go();const Te=sm(h);var _o={exports:{}},Ys={},Oo={exports:{}},Uo={};var Zf;function Dx(){return Zf||(Zf=1,(function(o){function b(v,w){var X=v.length;v.push(w);e:for(;0<X;){var fe=X-1>>>1,y=v[fe];if(0<p(y,w))v[fe]=w,v[X]=y,X=fe;else break e}}function u(v){return v.length===0?null:v[0]}function c(v){if(v.length===0)return null;var w=v[0],X=v.pop();if(X!==w){v[0]=X;e:for(var fe=0,y=v.length,x=y>>>1;fe<x;){var g=2*(fe+1)-1,D=v[g],Y=g+1,J=v[Y];if(0>p(D,X))Y<y&&0>p(J,D)?(v[fe]=J,v[Y]=X,fe=Y):(v[fe]=D,v[g]=X,fe=g);else if(Y<y&&0>p(J,X))v[fe]=J,v[Y]=X,fe=Y;else break e}}return w}function p(v,w){var X=v.sortIndex-w.sortIndex;return X!==0?X:v.id-w.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;o.unstable_now=function(){return m.now()}}else{var f=Date,k=f.now();o.unstable_now=function(){return f.now()-k}}var N=[],j=[],E=1,L=null,B=3,P=!1,I=!1,F=!1,se=!1,re=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function le(v){for(var w=u(j);w!==null;){if(w.callback===null)c(j);else if(w.startTime<=v)c(j),w.sortIndex=w.expirationTime,b(N,w);else break;w=u(j)}}function ue(v){if(F=!1,le(v),!I)if(u(N)!==null)I=!0,ae||(ae=!0,G());else{var w=u(j);w!==null&&oe(ue,w.startTime-v)}}var ae=!1,z=-1,T=5,H=-1;function Q(){return se?!0:!(o.unstable_now()-H<T)}function M(){if(se=!1,ae){var v=o.unstable_now();H=v;var w=!0;try{e:{I=!1,F&&(F=!1,ie(z),z=-1),P=!0;var X=B;try{t:{for(le(v),L=u(N);L!==null&&!(L.expirationTime>v&&Q());){var fe=L.callback;if(typeof fe=="function"){L.callback=null,B=L.priorityLevel;var y=fe(L.expirationTime<=v);if(v=o.unstable_now(),typeof y=="function"){L.callback=y,le(v),w=!0;break t}L===u(N)&&c(N),le(v)}else c(N);L=u(N)}if(L!==null)w=!0;else{var x=u(j);x!==null&&oe(ue,x.startTime-v),w=!1}}break e}finally{L=null,B=X,P=!1}w=void 0}}finally{w?G():ae=!1}}}var G;if(typeof ce=="function")G=function(){ce(M)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,de=_.port2;_.port1.onmessage=M,G=function(){de.postMessage(null)}}else G=function(){re(M,0)};function oe(v,w){z=re(function(){v(o.unstable_now())},w)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(v){v.callback=null},o.unstable_forceFrameRate=function(v){0>v||125<v?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<v?Math.floor(1e3/v):5},o.unstable_getCurrentPriorityLevel=function(){return B},o.unstable_next=function(v){switch(B){case 1:case 2:case 3:var w=3;break;default:w=B}var X=B;B=w;try{return v()}finally{B=X}},o.unstable_requestPaint=function(){se=!0},o.unstable_runWithPriority=function(v,w){switch(v){case 1:case 2:case 3:case 4:case 5:break;default:v=3}var X=B;B=v;try{return w()}finally{B=X}},o.unstable_scheduleCallback=function(v,w,X){var fe=o.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?fe+X:fe):X=fe,v){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=X+y,v={id:E++,callback:w,priorityLevel:v,startTime:X,expirationTime:y,sortIndex:-1},X>fe?(v.sortIndex=X,b(j,v),u(N)===null&&v===u(j)&&(F?(ie(z),z=-1):F=!0,oe(ue,X-fe))):(v.sortIndex=y,b(N,v),I||P||(I=!0,ae||(ae=!0,G()))),v},o.unstable_shouldYield=Q,o.unstable_wrapCallback=function(v){var w=B;return function(){var X=B;B=w;try{return v.apply(this,arguments)}finally{B=X}}}})(Uo)),Uo}var Ff;function Tx(){return Ff||(Ff=1,Oo.exports=Dx()),Oo.exports}var Ho={exports:{}},dt={};var Xf;function zx(){if(Xf)return dt;Xf=1;var o=Go();function b(N){var j="https://react.dev/errors/"+N;if(1<arguments.length){j+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)j+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+N+"; visit "+j+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var c={d:{f:u,r:function(){throw Error(b(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},p=Symbol.for("react.portal");function m(N,j,E){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:L==null?null:""+L,children:N,containerInfo:j,implementation:E}}var f=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function k(N,j){if(N==="font")return"";if(typeof j=="string")return j==="use-credentials"?j:""}return dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,dt.createPortal=function(N,j){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j||j.nodeType!==1&&j.nodeType!==9&&j.nodeType!==11)throw Error(b(299));return m(N,j,null,E)},dt.flushSync=function(N){var j=f.T,E=c.p;try{if(f.T=null,c.p=2,N)return N()}finally{f.T=j,c.p=E,c.d.f()}},dt.preconnect=function(N,j){typeof N=="string"&&(j?(j=j.crossOrigin,j=typeof j=="string"?j==="use-credentials"?j:"":void 0):j=null,c.d.C(N,j))},dt.prefetchDNS=function(N){typeof N=="string"&&c.d.D(N)},dt.preinit=function(N,j){if(typeof N=="string"&&j&&typeof j.as=="string"){var E=j.as,L=k(E,j.crossOrigin),B=typeof j.integrity=="string"?j.integrity:void 0,P=typeof j.fetchPriority=="string"?j.fetchPriority:void 0;E==="style"?c.d.S(N,typeof j.precedence=="string"?j.precedence:void 0,{crossOrigin:L,integrity:B,fetchPriority:P}):E==="script"&&c.d.X(N,{crossOrigin:L,integrity:B,fetchPriority:P,nonce:typeof j.nonce=="string"?j.nonce:void 0})}},dt.preinitModule=function(N,j){if(typeof N=="string")if(typeof j=="object"&&j!==null){if(j.as==null||j.as==="script"){var E=k(j.as,j.crossOrigin);c.d.M(N,{crossOrigin:E,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0})}}else j==null&&c.d.M(N)},dt.preload=function(N,j){if(typeof N=="string"&&typeof j=="object"&&j!==null&&typeof j.as=="string"){var E=j.as,L=k(E,j.crossOrigin);c.d.L(N,E,{crossOrigin:L,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0,type:typeof j.type=="string"?j.type:void 0,fetchPriority:typeof j.fetchPriority=="string"?j.fetchPriority:void 0,referrerPolicy:typeof j.referrerPolicy=="string"?j.referrerPolicy:void 0,imageSrcSet:typeof j.imageSrcSet=="string"?j.imageSrcSet:void 0,imageSizes:typeof j.imageSizes=="string"?j.imageSizes:void 0,media:typeof j.media=="string"?j.media:void 0})}},dt.preloadModule=function(N,j){if(typeof N=="string")if(j){var E=k(j.as,j.crossOrigin);c.d.m(N,{as:typeof j.as=="string"&&j.as!=="script"?j.as:void 0,crossOrigin:E,integrity:typeof j.integrity=="string"?j.integrity:void 0})}else c.d.m(N)},dt.requestFormReset=function(N){c.d.r(N)},dt.unstable_batchedUpdates=function(N,j){return N(j)},dt.useFormState=function(N,j,E){return f.H.useFormState(N,j,E)},dt.useFormStatus=function(){return f.H.useHostTransitionStatus()},dt.version="19.2.3",dt}var Wf;function nm(){if(Wf)return Ho.exports;Wf=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(b){console.error(b)}}return o(),Ho.exports=zx(),Ho.exports}var Pf;function Lx(){if(Pf)return Ys;Pf=1;var o=Tx(),b=Go(),u=nm();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function k(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function N(e){if(m(e)!==e)throw Error(c(188))}function j(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(c(188));return t!==e?null:e}for(var l=e,s=t;;){var n=l.return;if(n===null)break;var r=n.alternate;if(r===null){if(s=n.return,s!==null){l=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===l)return N(n),e;if(r===s)return N(n),t;r=r.sibling}throw Error(c(188))}if(l.return!==s.return)l=n,s=r;else{for(var i=!1,d=n.child;d;){if(d===l){i=!0,l=n,s=r;break}if(d===s){i=!0,s=n,l=r;break}d=d.sibling}if(!i){for(d=r.child;d;){if(d===l){i=!0,l=r,s=n;break}if(d===s){i=!0,s=r,l=n;break}d=d.sibling}if(!i)throw Error(c(189))}}if(l.alternate!==s)throw Error(c(190))}if(l.tag!==3)throw Error(c(188));return l.stateNode.current===l?e:t}function E(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=E(e),t!==null)return t;e=e.sibling}return null}var L=Object.assign,B=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function G(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var _=Symbol.for("react.client.reference");function de(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===_?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case re:return"Profiler";case se:return"StrictMode";case ue:return"Suspense";case ae:return"SuspenseList";case H:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case I:return"Portal";case ce:return e.displayName||"Context";case ie:return(e._context.displayName||"Context")+".Consumer";case le:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return t=e.displayName||null,t!==null?t:de(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return de(e(t))}catch{}}return null}var oe=Array.isArray,v=b.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},fe=[],y=-1;function x(e){return{current:e}}function g(e){0>y||(e.current=fe[y],fe[y]=null,y--)}function D(e,t){y++,fe[y]=e.current,e.current=t}var Y=x(null),J=x(null),$=x(null),K=x(null);function pe(e,t){switch(D($,t),D(J,e),D(Y,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ff(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ff(t),e=mf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}g(Y),D(Y,e)}function me(){g(Y),g(J),g($)}function Ee(e){e.memoizedState!==null&&D(K,e);var t=Y.current,l=mf(t,e.type);t!==l&&(D(J,e),D(Y,l))}function Me(e){J.current===e&&(g(Y),g(J)),K.current===e&&(g(K),Hs._currentValue=X)}var Ze,qe;function ze(e){if(Ze===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);Ze=t&&t[1]||"",qe=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ze+e+qe}var ft=!1;function qa(e,t){if(!e||ft)return"";ft=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(V){var q=V}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(V){q=V}e.call(ee.prototype)}}else{try{throw Error()}catch(V){q=V}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(V){if(V&&q&&typeof V.stack=="string")return[V.stack,q.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),i=r[0],d=r[1];if(i&&d){var C=i.split(`
`),U=d.split(`
`);for(n=s=0;s<C.length&&!C[s].includes("DetermineComponentFrameRoot");)s++;for(;n<U.length&&!U[n].includes("DetermineComponentFrameRoot");)n++;if(s===C.length||n===U.length)for(s=C.length-1,n=U.length-1;1<=s&&0<=n&&C[s]!==U[n];)n--;for(;1<=s&&0<=n;s--,n--)if(C[s]!==U[n]){if(s!==1||n!==1)do if(s--,n--,0>n||C[s]!==U[n]){var Z=`
`+C[s].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=s&&0<=n);break}}}finally{ft=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?ze(l):""}function br(e,t){switch(e.tag){case 26:case 27:case 5:return ze(e.type);case 16:return ze("Lazy");case 13:return e.child!==t&&t!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return qa(e.type,!1);case 11:return qa(e.type.render,!1);case 1:return qa(e.type,!0);case 31:return ze("Activity");default:return""}}function Wl(e){try{var t="",l=null;do t+=br(e,l),l=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var ha=Object.prototype.hasOwnProperty,cl=o.unstable_scheduleCallback,Pl=o.unstable_cancelCallback,vr=o.unstable_shouldYield,Zs=o.unstable_requestPaint,je=o.unstable_now,Xt=o.unstable_getCurrentPriorityLevel,ga=o.unstable_ImmediatePriority,Fs=o.unstable_UserBlockingPriority,Ga=o.unstable_NormalPriority,yr=o.unstable_LowPriority,Xs=o.unstable_IdlePriority,Kl=o.log,jr=o.unstable_setDisableYieldValue,Qa=null,S=null;function te(e){if(typeof Kl=="function"&&jr(e),S&&typeof S.setStrictMode=="function")try{S.setStrictMode(Qa,e)}catch{}}var ne=Math.clz32?Math.clz32:Tt,ve=Math.log,Oe=Math.LN2;function Tt(e){return e>>>=0,e===0?32:31-(ve(e)/Oe|0)|0}var Nt=256,Ws=262144,Ps=4194304;function Ya(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ks(e,t,l){var s=e.pendingLanes;if(s===0)return 0;var n=0,r=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var d=s&134217727;return d!==0?(s=d&~r,s!==0?n=Ya(s):(i&=d,i!==0?n=Ya(i):l||(l=d&~e,l!==0&&(n=Ya(l))))):(d=s&~r,d!==0?n=Ya(d):i!==0?n=Ya(i):l||(l=s&~e,l!==0&&(n=Ya(l)))),n===0?0:t!==0&&t!==n&&(t&r)===0&&(r=n&-n,l=t&-t,r>=l||r===32&&(l&4194048)!==0)?t:n}function $l(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function xm(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vo(){var e=Ps;return Ps<<=1,(Ps&62914560)===0&&(Ps=4194304),e}function Nr(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function es(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function hm(e,t,l,s,n,r){var i=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var d=e.entanglements,C=e.expirationTimes,U=e.hiddenUpdates;for(l=i&~l;0<l;){var Z=31-ne(l),ee=1<<Z;d[Z]=0,C[Z]=-1;var q=U[Z];if(q!==null)for(U[Z]=null,Z=0;Z<q.length;Z++){var V=q[Z];V!==null&&(V.lane&=-536870913)}l&=~ee}s!==0&&Zo(e,s,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(i&~t))}function Zo(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-ne(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|l&261930}function Fo(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var s=31-ne(l),n=1<<s;n&t|e[s]&t&&(e[s]|=t),l&=~n}}function Xo(e,t){var l=t&-t;return l=(l&42)!==0?1:wr(l),(l&(e.suspendedLanes|t))!==0?0:l}function wr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Sr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wo(){var e=w.p;return e!==0?e:(e=window.event,e===void 0?32:If(e.type))}function Po(e,t){var l=w.p;try{return w.p=e,t()}finally{w.p=l}}var pa=Math.random().toString(36).slice(2),rt="__reactFiber$"+pa,xt="__reactProps$"+pa,ul="__reactContainer$"+pa,Cr="__reactEvents$"+pa,gm="__reactListeners$"+pa,pm="__reactHandles$"+pa,Ko="__reactResources$"+pa,ts="__reactMarker$"+pa;function Mr(e){delete e[rt],delete e[xt],delete e[Cr],delete e[gm],delete e[pm]}function dl(e){var t=e[rt];if(t)return t;for(var l=e.parentNode;l;){if(t=l[ul]||l[rt]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=yf(e);e!==null;){if(l=e[rt])return l;e=yf(e)}return t}e=l,l=e.parentNode}return null}function fl(e){if(e=e[rt]||e[ul]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function as(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function ml(e){var t=e[Ko];return t||(t=e[Ko]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function st(e){e[ts]=!0}var $o=new Set,ec={};function Va(e,t){xl(e,t),xl(e+"Capture",t)}function xl(e,t){for(ec[e]=t,e=0;e<t.length;e++)$o.add(t[e])}var bm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tc={},ac={};function vm(e){return ha.call(ac,e)?!0:ha.call(tc,e)?!1:bm.test(e)?ac[e]=!0:(tc[e]=!0,!1)}function $s(e,t,l){if(vm(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function en(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function Wt(e,t,l,s){if(s===null)e.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+s)}}function zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ym(e,t,l){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(i){l=""+i,r.call(this,i)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(i){l=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kr(e){if(!e._valueTracker){var t=lc(e)?"checked":"value";e._valueTracker=ym(e,t,""+e[t])}}function sc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),s="";return e&&(s=lc(e)?e.checked?"true":"false":e.value),e=s,e!==l?(t.setValue(e),!0):!1}function tn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var jm=/[\n"\\]/g;function Lt(e){return e.replace(jm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ar(e,t,l,s,n,r,i,d){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+zt(t)):e.value!==""+zt(t)&&(e.value=""+zt(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?Er(e,i,zt(t)):l!=null?Er(e,i,zt(l)):s!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.name=""+zt(d):e.removeAttribute("name")}function nc(e,t,l,s,n,r,i,d){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||l!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){kr(e);return}l=l!=null?""+zt(l):"",t=t!=null?""+zt(t):l,d||t===e.value||(e.value=t),e.defaultValue=t}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=d?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i),kr(e)}function Er(e,t,l){t==="number"&&tn(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function hl(e,t,l,s){if(e=e.options,t){t={};for(var n=0;n<l.length;n++)t["$"+l[n]]=!0;for(l=0;l<e.length;l++)n=t.hasOwnProperty("$"+e[l].value),e[l].selected!==n&&(e[l].selected=n),n&&s&&(e[l].defaultSelected=!0)}else{for(l=""+zt(l),t=null,n=0;n<e.length;n++){if(e[n].value===l){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function rc(e,t,l){if(t!=null&&(t=""+zt(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+zt(l):""}function ic(e,t,l,s){if(t==null){if(s!=null){if(l!=null)throw Error(c(92));if(oe(s)){if(1<s.length)throw Error(c(93));s=s[0]}l=s}l==null&&(l=""),t=l}l=zt(t),e.defaultValue=l,s=e.textContent,s===l&&s!==""&&s!==null&&(e.value=s),kr(e)}function gl(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var Nm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oc(e,t,l){var s=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,l):typeof l!="number"||l===0||Nm.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function cc(e,t,l){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&l[n]!==s&&oc(e,n,s)}else for(var r in t)t.hasOwnProperty(r)&&oc(e,r,t[r])}function Dr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function an(e){return Sm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var Tr=null;function zr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pl=null,bl=null;function uc(e){var t=fl(e);if(t&&(e=t.stateNode)){var l=e[xt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ar(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Lt(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var s=l[t];if(s!==e&&s.form===e.form){var n=s[xt]||null;if(!n)throw Error(c(90));Ar(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<l.length;t++)s=l[t],s.form===e.form&&sc(s)}break e;case"textarea":rc(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&hl(e,!!l.multiple,t,!1)}}}var Lr=!1;function dc(e,t,l){if(Lr)return e(t,l);Lr=!0;try{var s=e(t);return s}finally{if(Lr=!1,(pl!==null||bl!==null)&&(Qn(),pl&&(t=pl,e=bl,bl=pl=null,uc(t),e)))for(t=0;t<e.length;t++)uc(e[t])}}function ls(e,t){var l=e.stateNode;if(l===null)return null;var s=l[xt]||null;if(s===null)return null;l=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(c(231,t,typeof l));return l}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rr=!1;if(Kt)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){Rr=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{Rr=!1}var ba=null,Br=null,ln=null;function fc(){if(ln)return ln;var e,t=Br,l=t.length,s,n="value"in ba?ba.value:ba.textContent,r=n.length;for(e=0;e<l&&t[e]===n[e];e++);var i=l-e;for(s=1;s<=i&&t[l-s]===n[r-s];s++);return ln=n.slice(e,1<s?1-s:void 0)}function sn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nn(){return!0}function mc(){return!1}function ht(e){function t(l,s,n,r,i){this._reactName=l,this._targetInst=n,this.type=s,this.nativeEvent=r,this.target=i,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(l=e[d],this[d]=l?l(r):r[d]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?nn:mc,this.isPropagationStopped=mc,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rn=ht(Za),ns=L({},Za,{view:0,detail:0}),Cm=ht(ns),Ir,_r,rs,on=L({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rs&&(rs&&e.type==="mousemove"?(Ir=e.screenX-rs.screenX,_r=e.screenY-rs.screenY):_r=Ir=0,rs=e),Ir)},movementY:function(e){return"movementY"in e?e.movementY:_r}}),xc=ht(on),Mm=L({},on,{dataTransfer:0}),km=ht(Mm),Am=L({},ns,{relatedTarget:0}),Or=ht(Am),Em=L({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),Dm=ht(Em),Tm=L({},Za,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zm=ht(Tm),Lm=L({},Za,{data:0}),hc=ht(Lm),Rm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Im={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _m(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Im[e])?!!t[e]:!1}function Ur(){return _m}var Om=L({},ns,{key:function(e){if(e.key){var t=Rm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(e){return e.type==="keypress"?sn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Um=ht(Om),Hm=L({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gc=ht(Hm),Jm=L({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),qm=ht(Jm),Gm=L({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qm=ht(Gm),Ym=L({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vm=ht(Ym),Zm=L({},Za,{newState:0,oldState:0}),Fm=ht(Zm),Xm=[9,13,27,32],Hr=Kt&&"CompositionEvent"in window,is=null;Kt&&"documentMode"in document&&(is=document.documentMode);var Wm=Kt&&"TextEvent"in window&&!is,pc=Kt&&(!Hr||is&&8<is&&11>=is),bc=" ",vc=!1;function yc(e,t){switch(e){case"keyup":return Xm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vl=!1;function Pm(e,t){switch(e){case"compositionend":return jc(t);case"keypress":return t.which!==32?null:(vc=!0,bc);case"textInput":return e=t.data,e===bc&&vc?null:e;default:return null}}function Km(e,t){if(vl)return e==="compositionend"||!Hr&&yc(e,t)?(e=fc(),ln=Br=ba=null,vl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pc&&t.locale!=="ko"?null:t.data;default:return null}}var $m={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$m[e.type]:t==="textarea"}function wc(e,t,l,s){pl?bl?bl.push(s):bl=[s]:pl=s,t=Pn(t,"onChange"),0<t.length&&(l=new rn("onChange","change",null,l,s),e.push({event:l,listeners:t}))}var os=null,cs=null;function e0(e){nf(e,0)}function cn(e){var t=as(e);if(sc(t))return e}function Sc(e,t){if(e==="change")return t}var Cc=!1;if(Kt){var Jr;if(Kt){var qr="oninput"in document;if(!qr){var Mc=document.createElement("div");Mc.setAttribute("oninput","return;"),qr=typeof Mc.oninput=="function"}Jr=qr}else Jr=!1;Cc=Jr&&(!document.documentMode||9<document.documentMode)}function kc(){os&&(os.detachEvent("onpropertychange",Ac),cs=os=null)}function Ac(e){if(e.propertyName==="value"&&cn(cs)){var t=[];wc(t,cs,e,zr(e)),dc(e0,t)}}function t0(e,t,l){e==="focusin"?(kc(),os=t,cs=l,os.attachEvent("onpropertychange",Ac)):e==="focusout"&&kc()}function a0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cn(cs)}function l0(e,t){if(e==="click")return cn(t)}function s0(e,t){if(e==="input"||e==="change")return cn(t)}function n0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wt=typeof Object.is=="function"?Object.is:n0;function us(e,t){if(wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),s=Object.keys(t);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var n=l[s];if(!ha.call(t,n)||!wt(e[n],t[n]))return!1}return!0}function Ec(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dc(e,t){var l=Ec(e);e=0;for(var s;l;){if(l.nodeType===3){if(s=e+l.textContent.length,e<=t&&s>=t)return{node:l,offset:t-e};e=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ec(l)}}function Tc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=tn(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=tn(e.document)}return t}function Gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var r0=Kt&&"documentMode"in document&&11>=document.documentMode,yl=null,Qr=null,ds=null,Yr=!1;function Lc(e,t,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Yr||yl==null||yl!==tn(s)||(s=yl,"selectionStart"in s&&Gr(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ds&&us(ds,s)||(ds=s,s=Pn(Qr,"onSelect"),0<s.length&&(t=new rn("onSelect","select",null,t,l),e.push({event:t,listeners:s}),t.target=yl)))}function Fa(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var jl={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},Vr={},Rc={};Kt&&(Rc=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function Xa(e){if(Vr[e])return Vr[e];if(!jl[e])return e;var t=jl[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in Rc)return Vr[e]=t[l];return e}var Bc=Xa("animationend"),Ic=Xa("animationiteration"),_c=Xa("animationstart"),i0=Xa("transitionrun"),o0=Xa("transitionstart"),c0=Xa("transitioncancel"),Oc=Xa("transitionend"),Uc=new Map,Zr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zr.push("scrollEnd");function qt(e,t){Uc.set(e,t),Va(t,[e])}var un=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rt=[],Nl=0,Fr=0;function dn(){for(var e=Nl,t=Fr=Nl=0;t<e;){var l=Rt[t];Rt[t++]=null;var s=Rt[t];Rt[t++]=null;var n=Rt[t];Rt[t++]=null;var r=Rt[t];if(Rt[t++]=null,s!==null&&n!==null){var i=s.pending;i===null?n.next=n:(n.next=i.next,i.next=n),s.pending=n}r!==0&&Hc(l,n,r)}}function fn(e,t,l,s){Rt[Nl++]=e,Rt[Nl++]=t,Rt[Nl++]=l,Rt[Nl++]=s,Fr|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Xr(e,t,l,s){return fn(e,t,l,s),mn(e)}function Wa(e,t){return fn(e,null,null,t),mn(e)}function Hc(e,t,l){e.lanes|=l;var s=e.alternate;s!==null&&(s.lanes|=l);for(var n=!1,r=e.return;r!==null;)r.childLanes|=l,s=r.alternate,s!==null&&(s.childLanes|=l),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&t!==null&&(n=31-ne(l),e=r.hiddenUpdates,s=e[n],s===null?e[n]=[t]:s.push(t),t.lane=l|536870912),r):null}function mn(e){if(50<Ls)throw Ls=0,so=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var wl={};function u0(e,t,l,s){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,l,s){return new u0(e,t,l,s)}function Wr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $t(e,t){var l=e.alternate;return l===null?(l=St(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Jc(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function xn(e,t,l,s,n,r){var i=0;if(s=e,typeof e=="function")Wr(e)&&(i=1);else if(typeof e=="string")i=hx(e,l,Y.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case H:return e=St(31,l,t,n),e.elementType=H,e.lanes=r,e;case F:return Pa(l.children,n,r,t);case se:i=8,n|=24;break;case re:return e=St(12,l,t,n|2),e.elementType=re,e.lanes=r,e;case ue:return e=St(13,l,t,n),e.elementType=ue,e.lanes=r,e;case ae:return e=St(19,l,t,n),e.elementType=ae,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ce:i=10;break e;case ie:i=9;break e;case le:i=11;break e;case z:i=14;break e;case T:i=16,s=null;break e}i=29,l=Error(c(130,e===null?"null":typeof e,"")),s=null}return t=St(i,l,t,n),t.elementType=e,t.type=s,t.lanes=r,t}function Pa(e,t,l,s){return e=St(7,e,s,t),e.lanes=l,e}function Pr(e,t,l){return e=St(6,e,null,t),e.lanes=l,e}function qc(e){var t=St(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,l){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gc=new WeakMap;function Bt(e,t){if(typeof e=="object"&&e!==null){var l=Gc.get(e);return l!==void 0?l:(t={value:e,source:t,stack:Wl(t)},Gc.set(e,t),t)}return{value:e,source:t,stack:Wl(t)}}var Sl=[],Cl=0,hn=null,fs=0,It=[],_t=0,va=null,Yt=1,Vt="";function ea(e,t){Sl[Cl++]=fs,Sl[Cl++]=hn,hn=e,fs=t}function Qc(e,t,l){It[_t++]=Yt,It[_t++]=Vt,It[_t++]=va,va=e;var s=Yt;e=Vt;var n=32-ne(s)-1;s&=~(1<<n),l+=1;var r=32-ne(t)+n;if(30<r){var i=n-n%5;r=(s&(1<<i)-1).toString(32),s>>=i,n-=i,Yt=1<<32-ne(t)+n|l<<n|s,Vt=r+e}else Yt=1<<r|l<<n|s,Vt=e}function $r(e){e.return!==null&&(ea(e,1),Qc(e,1,0))}function ei(e){for(;e===hn;)hn=Sl[--Cl],Sl[Cl]=null,fs=Sl[--Cl],Sl[Cl]=null;for(;e===va;)va=It[--_t],It[_t]=null,Vt=It[--_t],It[_t]=null,Yt=It[--_t],It[_t]=null}function Yc(e,t){It[_t++]=Yt,It[_t++]=Vt,It[_t++]=va,Yt=t.id,Vt=t.overflow,va=e}var it=null,Qe=null,De=!1,ya=null,Ot=!1,ti=Error(c(519));function ja(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ms(Bt(t,e)),ti}function Vc(e){var t=e.stateNode,l=e.type,s=e.memoizedProps;switch(t[rt]=e,t[xt]=s,l){case"dialog":Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":case"embed":Ce("load",t);break;case"video":case"audio":for(l=0;l<Bs.length;l++)Ce(Bs[l],t);break;case"source":Ce("error",t);break;case"img":case"image":case"link":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"input":Ce("invalid",t),nc(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ce("invalid",t);break;case"textarea":Ce("invalid",t),ic(t,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||s.suppressHydrationWarning===!0||uf(t.textContent,l)?(s.popover!=null&&(Ce("beforetoggle",t),Ce("toggle",t)),s.onScroll!=null&&Ce("scroll",t),s.onScrollEnd!=null&&Ce("scrollend",t),s.onClick!=null&&(t.onclick=Pt),t=!0):t=!1,t||ja(e,!0)}function Zc(e){for(it=e.return;it;)switch(it.tag){case 5:case 31:case 13:Ot=!1;return;case 27:case 3:Ot=!0;return;default:it=it.return}}function Ml(e){if(e!==it)return!1;if(!De)return Zc(e),De=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||yo(e.type,e.memoizedProps)),l=!l),l&&Qe&&ja(e),Zc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Qe=vf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Qe=vf(e)}else t===27?(t=Qe,Ba(e.type)?(e=Co,Co=null,Qe=e):Qe=t):Qe=it?Ht(e.stateNode.nextSibling):null;return!0}function Ka(){Qe=it=null,De=!1}function ai(){var e=ya;return e!==null&&(vt===null?vt=e:vt.push.apply(vt,e),ya=null),e}function ms(e){ya===null?ya=[e]:ya.push(e)}var li=x(null),$a=null,ta=null;function Na(e,t,l){D(li,t._currentValue),t._currentValue=l}function aa(e){e._currentValue=li.current,g(li)}function si(e,t,l){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===l)break;e=e.return}}function ni(e,t,l,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var i=n.child;r=r.firstContext;e:for(;r!==null;){var d=r;r=n;for(var C=0;C<t.length;C++)if(d.context===t[C]){r.lanes|=l,d=r.alternate,d!==null&&(d.lanes|=l),si(r.return,l,e),s||(i=null);break e}r=d.next}}else if(n.tag===18){if(i=n.return,i===null)throw Error(c(341));i.lanes|=l,r=i.alternate,r!==null&&(r.lanes|=l),si(i,l,e),i=null}else i=n.child;if(i!==null)i.return=n;else for(i=n;i!==null;){if(i===e){i=null;break}if(n=i.sibling,n!==null){n.return=i.return,i=n;break}i=i.return}n=i}}function kl(e,t,l,s){e=null;for(var n=t,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var i=n.alternate;if(i===null)throw Error(c(387));if(i=i.memoizedProps,i!==null){var d=n.type;wt(n.pendingProps.value,i.value)||(e!==null?e.push(d):e=[d])}}else if(n===K.current){if(i=n.alternate,i===null)throw Error(c(387));i.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(Hs):e=[Hs])}n=n.return}e!==null&&ni(t,e,l,s),t.flags|=262144}function gn(e){for(e=e.firstContext;e!==null;){if(!wt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function el(e){$a=e,ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ot(e){return Fc($a,e)}function pn(e,t){return $a===null&&el(e),Fc(e,t)}function Fc(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},ta===null){if(e===null)throw Error(c(308));ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ta=ta.next=t;return l}var d0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},f0=o.unstable_scheduleCallback,m0=o.unstable_NormalPriority,$e={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ri(){return{controller:new d0,data:new Map,refCount:0}}function xs(e){e.refCount--,e.refCount===0&&f0(m0,function(){e.controller.abort()})}var hs=null,ii=0,Al=0,El=null;function x0(e,t){if(hs===null){var l=hs=[];ii=0,Al=uo(),El={status:"pending",value:void 0,then:function(s){l.push(s)}}}return ii++,t.then(Xc,Xc),t}function Xc(){if(--ii===0&&hs!==null){El!==null&&(El.status="fulfilled");var e=hs;hs=null,Al=0,El=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function h0(e,t){var l=[],s={status:"pending",value:null,reason:null,then:function(n){l.push(n)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var n=0;n<l.length;n++)(0,l[n])(t)},function(n){for(s.status="rejected",s.reason=n,n=0;n<l.length;n++)(0,l[n])(void 0)}),s}var Wc=v.S;v.S=function(e,t){Ld=je(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&x0(e,t),Wc!==null&&Wc(e,t)};var tl=x(null);function oi(){var e=tl.current;return e!==null?e:Ge.pooledCache}function bn(e,t){t===null?D(tl,tl.current):D(tl,t.pool)}function Pc(){var e=oi();return e===null?null:{parent:$e._currentValue,pool:e}}var Dl=Error(c(460)),ci=Error(c(474)),vn=Error(c(542)),yn={then:function(){}};function Kc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function $c(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(Pt,Pt),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,tu(e),e;default:if(typeof t.status=="string")t.then(Pt,Pt);else{if(e=Ge,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=s}},function(s){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,tu(e),e}throw ll=t,Dl}}function al(e){try{var t=e._init;return t(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ll=l,Dl):l}}var ll=null;function eu(){if(ll===null)throw Error(c(459));var e=ll;return ll=null,e}function tu(e){if(e===Dl||e===vn)throw Error(c(483))}var Tl=null,gs=0;function jn(e){var t=gs;return gs+=1,Tl===null&&(Tl=[]),$c(Tl,e,t)}function ps(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Nn(e,t){throw t.$$typeof===B?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function au(e){function t(R,A){if(e){var O=R.deletions;O===null?(R.deletions=[A],R.flags|=16):O.push(A)}}function l(R,A){if(!e)return null;for(;A!==null;)t(R,A),A=A.sibling;return null}function s(R){for(var A=new Map;R!==null;)R.key!==null?A.set(R.key,R):A.set(R.index,R),R=R.sibling;return A}function n(R,A){return R=$t(R,A),R.index=0,R.sibling=null,R}function r(R,A,O){return R.index=O,e?(O=R.alternate,O!==null?(O=O.index,O<A?(R.flags|=67108866,A):O):(R.flags|=67108866,A)):(R.flags|=1048576,A)}function i(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function d(R,A,O,W){return A===null||A.tag!==6?(A=Pr(O,R.mode,W),A.return=R,A):(A=n(A,O),A.return=R,A)}function C(R,A,O,W){var ge=O.type;return ge===F?Z(R,A,O.props.children,W,O.key):A!==null&&(A.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===T&&al(ge)===A.type)?(A=n(A,O.props),ps(A,O),A.return=R,A):(A=xn(O.type,O.key,O.props,null,R.mode,W),ps(A,O),A.return=R,A)}function U(R,A,O,W){return A===null||A.tag!==4||A.stateNode.containerInfo!==O.containerInfo||A.stateNode.implementation!==O.implementation?(A=Kr(O,R.mode,W),A.return=R,A):(A=n(A,O.children||[]),A.return=R,A)}function Z(R,A,O,W,ge){return A===null||A.tag!==7?(A=Pa(O,R.mode,W,ge),A.return=R,A):(A=n(A,O),A.return=R,A)}function ee(R,A,O){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Pr(""+A,R.mode,O),A.return=R,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case P:return O=xn(A.type,A.key,A.props,null,R.mode,O),ps(O,A),O.return=R,O;case I:return A=Kr(A,R.mode,O),A.return=R,A;case T:return A=al(A),ee(R,A,O)}if(oe(A)||G(A))return A=Pa(A,R.mode,O,null),A.return=R,A;if(typeof A.then=="function")return ee(R,jn(A),O);if(A.$$typeof===ce)return ee(R,pn(R,A),O);Nn(R,A)}return null}function q(R,A,O,W){var ge=A!==null?A.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return ge!==null?null:d(R,A,""+O,W);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case P:return O.key===ge?C(R,A,O,W):null;case I:return O.key===ge?U(R,A,O,W):null;case T:return O=al(O),q(R,A,O,W)}if(oe(O)||G(O))return ge!==null?null:Z(R,A,O,W,null);if(typeof O.then=="function")return q(R,A,jn(O),W);if(O.$$typeof===ce)return q(R,A,pn(R,O),W);Nn(R,O)}return null}function V(R,A,O,W,ge){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return R=R.get(O)||null,d(A,R,""+W,ge);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case P:return R=R.get(W.key===null?O:W.key)||null,C(A,R,W,ge);case I:return R=R.get(W.key===null?O:W.key)||null,U(A,R,W,ge);case T:return W=al(W),V(R,A,O,W,ge)}if(oe(W)||G(W))return R=R.get(O)||null,Z(A,R,W,ge,null);if(typeof W.then=="function")return V(R,A,O,jn(W),ge);if(W.$$typeof===ce)return V(R,A,O,pn(A,W),ge);Nn(A,W)}return null}function xe(R,A,O,W){for(var ge=null,Le=null,he=A,we=A=0,Ae=null;he!==null&&we<O.length;we++){he.index>we?(Ae=he,he=null):Ae=he.sibling;var Re=q(R,he,O[we],W);if(Re===null){he===null&&(he=Ae);break}e&&he&&Re.alternate===null&&t(R,he),A=r(Re,A,we),Le===null?ge=Re:Le.sibling=Re,Le=Re,he=Ae}if(we===O.length)return l(R,he),De&&ea(R,we),ge;if(he===null){for(;we<O.length;we++)he=ee(R,O[we],W),he!==null&&(A=r(he,A,we),Le===null?ge=he:Le.sibling=he,Le=he);return De&&ea(R,we),ge}for(he=s(he);we<O.length;we++)Ae=V(he,R,we,O[we],W),Ae!==null&&(e&&Ae.alternate!==null&&he.delete(Ae.key===null?we:Ae.key),A=r(Ae,A,we),Le===null?ge=Ae:Le.sibling=Ae,Le=Ae);return e&&he.forEach(function(Ha){return t(R,Ha)}),De&&ea(R,we),ge}function be(R,A,O,W){if(O==null)throw Error(c(151));for(var ge=null,Le=null,he=A,we=A=0,Ae=null,Re=O.next();he!==null&&!Re.done;we++,Re=O.next()){he.index>we?(Ae=he,he=null):Ae=he.sibling;var Ha=q(R,he,Re.value,W);if(Ha===null){he===null&&(he=Ae);break}e&&he&&Ha.alternate===null&&t(R,he),A=r(Ha,A,we),Le===null?ge=Ha:Le.sibling=Ha,Le=Ha,he=Ae}if(Re.done)return l(R,he),De&&ea(R,we),ge;if(he===null){for(;!Re.done;we++,Re=O.next())Re=ee(R,Re.value,W),Re!==null&&(A=r(Re,A,we),Le===null?ge=Re:Le.sibling=Re,Le=Re);return De&&ea(R,we),ge}for(he=s(he);!Re.done;we++,Re=O.next())Re=V(he,R,we,Re.value,W),Re!==null&&(e&&Re.alternate!==null&&he.delete(Re.key===null?we:Re.key),A=r(Re,A,we),Le===null?ge=Re:Le.sibling=Re,Le=Re);return e&&he.forEach(function(Mx){return t(R,Mx)}),De&&ea(R,we),ge}function Je(R,A,O,W){if(typeof O=="object"&&O!==null&&O.type===F&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case P:e:{for(var ge=O.key;A!==null;){if(A.key===ge){if(ge=O.type,ge===F){if(A.tag===7){l(R,A.sibling),W=n(A,O.props.children),W.return=R,R=W;break e}}else if(A.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===T&&al(ge)===A.type){l(R,A.sibling),W=n(A,O.props),ps(W,O),W.return=R,R=W;break e}l(R,A);break}else t(R,A);A=A.sibling}O.type===F?(W=Pa(O.props.children,R.mode,W,O.key),W.return=R,R=W):(W=xn(O.type,O.key,O.props,null,R.mode,W),ps(W,O),W.return=R,R=W)}return i(R);case I:e:{for(ge=O.key;A!==null;){if(A.key===ge)if(A.tag===4&&A.stateNode.containerInfo===O.containerInfo&&A.stateNode.implementation===O.implementation){l(R,A.sibling),W=n(A,O.children||[]),W.return=R,R=W;break e}else{l(R,A);break}else t(R,A);A=A.sibling}W=Kr(O,R.mode,W),W.return=R,R=W}return i(R);case T:return O=al(O),Je(R,A,O,W)}if(oe(O))return xe(R,A,O,W);if(G(O)){if(ge=G(O),typeof ge!="function")throw Error(c(150));return O=ge.call(O),be(R,A,O,W)}if(typeof O.then=="function")return Je(R,A,jn(O),W);if(O.$$typeof===ce)return Je(R,A,pn(R,O),W);Nn(R,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,A!==null&&A.tag===6?(l(R,A.sibling),W=n(A,O),W.return=R,R=W):(l(R,A),W=Pr(O,R.mode,W),W.return=R,R=W),i(R)):l(R,A)}return function(R,A,O,W){try{gs=0;var ge=Je(R,A,O,W);return Tl=null,ge}catch(he){if(he===Dl||he===vn)throw he;var Le=St(29,he,null,R.mode);return Le.lanes=W,Le.return=R,Le}}}var sl=au(!0),lu=au(!1),wa=!1;function ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Sa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ca(e,t,l){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Be&2)!==0){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=mn(e),Hc(e,null,l),t}return fn(e,s,t,l),mn(e)}function bs(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,Fo(e,l)}}function fi(e,t){var l=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var n=null,r=null;if(l=l.firstBaseUpdate,l!==null){do{var i={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};r===null?n=r=i:r=r.next=i,l=l.next}while(l!==null);r===null?n=r=t:r=r.next=t}else n=r=t;l={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var mi=!1;function vs(){if(mi){var e=El;if(e!==null)throw e}}function ys(e,t,l,s){mi=!1;var n=e.updateQueue;wa=!1;var r=n.firstBaseUpdate,i=n.lastBaseUpdate,d=n.shared.pending;if(d!==null){n.shared.pending=null;var C=d,U=C.next;C.next=null,i===null?r=U:i.next=U,i=C;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,d=Z.lastBaseUpdate,d!==i&&(d===null?Z.firstBaseUpdate=U:d.next=U,Z.lastBaseUpdate=C))}if(r!==null){var ee=n.baseState;i=0,Z=U=C=null,d=r;do{var q=d.lane&-536870913,V=q!==d.lane;if(V?(ke&q)===q:(s&q)===q){q!==0&&q===Al&&(mi=!0),Z!==null&&(Z=Z.next={lane:0,tag:d.tag,payload:d.payload,callback:null,next:null});e:{var xe=e,be=d;q=t;var Je=l;switch(be.tag){case 1:if(xe=be.payload,typeof xe=="function"){ee=xe.call(Je,ee,q);break e}ee=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=be.payload,q=typeof xe=="function"?xe.call(Je,ee,q):xe,q==null)break e;ee=L({},ee,q);break e;case 2:wa=!0}}q=d.callback,q!==null&&(e.flags|=64,V&&(e.flags|=8192),V=n.callbacks,V===null?n.callbacks=[q]:V.push(q))}else V={lane:q,tag:d.tag,payload:d.payload,callback:d.callback,next:null},Z===null?(U=Z=V,C=ee):Z=Z.next=V,i|=q;if(d=d.next,d===null){if(d=n.shared.pending,d===null)break;V=d,d=V.next,V.next=null,n.lastBaseUpdate=V,n.shared.pending=null}}while(!0);Z===null&&(C=ee),n.baseState=C,n.firstBaseUpdate=U,n.lastBaseUpdate=Z,r===null&&(n.shared.lanes=0),Da|=i,e.lanes=i,e.memoizedState=ee}}function su(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function nu(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)su(l[e],t)}var zl=x(null),wn=x(0);function ru(e,t){e=da,D(wn,e),D(zl,t),da=e|t.baseLanes}function xi(){D(wn,da),D(zl,zl.current)}function hi(){da=wn.current,g(zl),g(wn)}var Ct=x(null),Ut=null;function Ma(e){var t=e.alternate;D(Pe,Pe.current&1),D(Ct,e),Ut===null&&(t===null||zl.current!==null||t.memoizedState!==null)&&(Ut=e)}function gi(e){D(Pe,Pe.current),D(Ct,e),Ut===null&&(Ut=e)}function iu(e){e.tag===22?(D(Pe,Pe.current),D(Ct,e),Ut===null&&(Ut=e)):ka()}function ka(){D(Pe,Pe.current),D(Ct,Ct.current)}function Mt(e){g(Ct),Ut===e&&(Ut=null),g(Pe)}var Pe=x(0);function Sn(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||wo(l)||So(l)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=0,Ne=null,Ue=null,et=null,Cn=!1,Ll=!1,nl=!1,Mn=0,js=0,Rl=null,g0=0;function Fe(){throw Error(c(321))}function pi(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!wt(e[l],t[l]))return!1;return!0}function bi(e,t,l,s,n,r){return la=r,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,v.H=e===null||e.memoizedState===null?Qu:Li,nl=!1,r=l(s,n),nl=!1,Ll&&(r=cu(t,l,s,n)),ou(e),r}function ou(e){v.H=Ss;var t=Ue!==null&&Ue.next!==null;if(la=0,et=Ue=Ne=null,Cn=!1,js=0,Rl=null,t)throw Error(c(300));e===null||tt||(e=e.dependencies,e!==null&&gn(e)&&(tt=!0))}function cu(e,t,l,s){Ne=e;var n=0;do{if(Ll&&(Rl=null),js=0,Ll=!1,25<=n)throw Error(c(301));if(n+=1,et=Ue=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}v.H=Yu,r=t(l,s)}while(Ll);return r}function p0(){var e=v.H,t=e.useState()[0];return t=typeof t.then=="function"?Ns(t):t,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(Ne.flags|=1024),t}function vi(){var e=Mn!==0;return Mn=0,e}function yi(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function ji(e){if(Cn){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Cn=!1}la=0,et=Ue=Ne=null,Ll=!1,js=Mn=0,Rl=null}function mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ne.memoizedState=et=e:et=et.next=e,et}function Ke(){if(Ue===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=et===null?Ne.memoizedState:et.next;if(t!==null)et=t,Ue=e;else{if(e===null)throw Ne.alternate===null?Error(c(467)):Error(c(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},et===null?Ne.memoizedState=et=e:et=et.next=e}return et}function kn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ns(e){var t=js;return js+=1,Rl===null&&(Rl=[]),e=$c(Rl,e,t),t=Ne,(et===null?t.memoizedState:et.next)===null&&(t=t.alternate,v.H=t===null||t.memoizedState===null?Qu:Li),e}function An(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ns(e);if(e.$$typeof===ce)return ot(e)}throw Error(c(438,String(e)))}function Ni(e){var t=null,l=Ne.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var s=Ne.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=kn(),Ne.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),s=0;s<e;s++)l[s]=Q;return t.index++,l}function sa(e,t){return typeof t=="function"?t(e):t}function En(e){var t=Ke();return wi(t,Ue,e)}function wi(e,t,l){var s=e.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=l;var n=e.baseQueue,r=s.pending;if(r!==null){if(n!==null){var i=n.next;n.next=r.next,r.next=i}t.baseQueue=n=r,s.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{t=n.next;var d=i=null,C=null,U=t,Z=!1;do{var ee=U.lane&-536870913;if(ee!==U.lane?(ke&ee)===ee:(la&ee)===ee){var q=U.revertLane;if(q===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),ee===Al&&(Z=!0);else if((la&q)===q){U=U.next,q===Al&&(Z=!0);continue}else ee={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(d=C=ee,i=r):C=C.next=ee,Ne.lanes|=q,Da|=q;ee=U.action,nl&&l(r,ee),r=U.hasEagerState?U.eagerState:l(r,ee)}else q={lane:ee,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(d=C=q,i=r):C=C.next=q,Ne.lanes|=ee,Da|=ee;U=U.next}while(U!==null&&U!==t);if(C===null?i=r:C.next=d,!wt(r,e.memoizedState)&&(tt=!0,Z&&(l=El,l!==null)))throw l;e.memoizedState=r,e.baseState=i,e.baseQueue=C,s.lastRenderedState=r}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Si(e){var t=Ke(),l=t.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=e;var s=l.dispatch,n=l.pending,r=t.memoizedState;if(n!==null){l.pending=null;var i=n=n.next;do r=e(r,i.action),i=i.next;while(i!==n);wt(r,t.memoizedState)||(tt=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),l.lastRenderedState=r}return[r,s]}function uu(e,t,l){var s=Ne,n=Ke(),r=De;if(r){if(l===void 0)throw Error(c(407));l=l()}else l=t();var i=!wt((Ue||n).memoizedState,l);if(i&&(n.memoizedState=l,tt=!0),n=n.queue,ki(mu.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||et!==null&&et.memoizedState.tag&1){if(s.flags|=2048,Bl(9,{destroy:void 0},fu.bind(null,s,n,l,t),null),Ge===null)throw Error(c(349));r||(la&127)!==0||du(s,t,l)}return l}function du(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=Ne.updateQueue,t===null?(t=kn(),Ne.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function fu(e,t,l,s){t.value=l,t.getSnapshot=s,xu(t)&&hu(e)}function mu(e,t,l){return l(function(){xu(t)&&hu(e)})}function xu(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!wt(e,l)}catch{return!0}}function hu(e){var t=Wa(e,2);t!==null&&yt(t,e,2)}function Ci(e){var t=mt();if(typeof e=="function"){var l=e;if(e=l(),nl){te(!0);try{l()}finally{te(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:e},t}function gu(e,t,l,s){return e.baseState=l,wi(e,Ue,typeof s=="function"?s:sa)}function b0(e,t,l,s,n){if(zn(e))throw Error(c(485));if(e=t.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){r.listeners.push(i)}};v.T!==null?l(!0):r.isTransition=!1,s(r),l=t.pending,l===null?(r.next=t.pending=r,pu(t,r)):(r.next=l.next,t.pending=l.next=r)}}function pu(e,t){var l=t.action,s=t.payload,n=e.state;if(t.isTransition){var r=v.T,i={};v.T=i;try{var d=l(n,s),C=v.S;C!==null&&C(i,d),bu(e,t,d)}catch(U){Mi(e,t,U)}finally{r!==null&&i.types!==null&&(r.types=i.types),v.T=r}}else try{r=l(n,s),bu(e,t,r)}catch(U){Mi(e,t,U)}}function bu(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){vu(e,t,s)},function(s){return Mi(e,t,s)}):vu(e,t,l)}function vu(e,t,l){t.status="fulfilled",t.value=l,yu(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,pu(e,l)))}function Mi(e,t,l){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=l,yu(t),t=t.next;while(t!==s)}e.action=null}function yu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ju(e,t){return t}function Nu(e,t){if(De){var l=Ge.formState;if(l!==null){e:{var s=Ne;if(De){if(Qe){t:{for(var n=Qe,r=Ot;n.nodeType!==8;){if(!r){n=null;break t}if(n=Ht(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){Qe=Ht(n.nextSibling),s=n.data==="F!";break e}}ja(s)}s=!1}s&&(t=l[0])}}return l=mt(),l.memoizedState=l.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ju,lastRenderedState:t},l.queue=s,l=Ju.bind(null,Ne,s),s.dispatch=l,s=Ci(!1),r=zi.bind(null,Ne,!1,s.queue),s=mt(),n={state:t,dispatch:null,action:e,pending:null},s.queue=n,l=b0.bind(null,Ne,n,r,l),n.dispatch=l,s.memoizedState=e,[t,l,!1]}function wu(e){var t=Ke();return Su(t,Ue,e)}function Su(e,t,l){if(t=wi(e,t,ju)[0],e=En(sa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Ns(t)}catch(i){throw i===Dl?vn:i}else s=t;t=Ke();var n=t.queue,r=n.dispatch;return l!==t.memoizedState&&(Ne.flags|=2048,Bl(9,{destroy:void 0},v0.bind(null,n,l),null)),[s,r,e]}function v0(e,t){e.action=t}function Cu(e){var t=Ke(),l=Ue;if(l!==null)return Su(t,l,e);Ke(),t=t.memoizedState,l=Ke();var s=l.queue.dispatch;return l.memoizedState=e,[t,s,!1]}function Bl(e,t,l,s){return e={tag:e,create:l,deps:s,inst:t,next:null},t=Ne.updateQueue,t===null&&(t=kn(),Ne.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(s=l.next,l.next=e,e.next=s,t.lastEffect=e),e}function Mu(){return Ke().memoizedState}function Dn(e,t,l,s){var n=mt();Ne.flags|=e,n.memoizedState=Bl(1|t,{destroy:void 0},l,s===void 0?null:s)}function Tn(e,t,l,s){var n=Ke();s=s===void 0?null:s;var r=n.memoizedState.inst;Ue!==null&&s!==null&&pi(s,Ue.memoizedState.deps)?n.memoizedState=Bl(t,r,l,s):(Ne.flags|=e,n.memoizedState=Bl(1|t,r,l,s))}function ku(e,t){Dn(8390656,8,e,t)}function ki(e,t){Tn(2048,8,e,t)}function y0(e){Ne.flags|=4;var t=Ne.updateQueue;if(t===null)t=kn(),Ne.updateQueue=t,t.events=[e];else{var l=t.events;l===null?t.events=[e]:l.push(e)}}function Au(e){var t=Ke().memoizedState;return y0({ref:t,nextImpl:e}),function(){if((Be&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function Eu(e,t){return Tn(4,2,e,t)}function Du(e,t){return Tn(4,4,e,t)}function Tu(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zu(e,t,l){l=l!=null?l.concat([e]):null,Tn(4,4,Tu.bind(null,t,e),l)}function Ai(){}function Lu(e,t){var l=Ke();t=t===void 0?null:t;var s=l.memoizedState;return t!==null&&pi(t,s[1])?s[0]:(l.memoizedState=[e,t],e)}function Ru(e,t){var l=Ke();t=t===void 0?null:t;var s=l.memoizedState;if(t!==null&&pi(t,s[1]))return s[0];if(s=e(),nl){te(!0);try{e()}finally{te(!1)}}return l.memoizedState=[s,t],s}function Ei(e,t,l){return l===void 0||(la&1073741824)!==0&&(ke&261930)===0?e.memoizedState=t:(e.memoizedState=l,e=Bd(),Ne.lanes|=e,Da|=e,l)}function Bu(e,t,l,s){return wt(l,t)?l:zl.current!==null?(e=Ei(e,l,s),wt(e,t)||(tt=!0),e):(la&42)===0||(la&1073741824)!==0&&(ke&261930)===0?(tt=!0,e.memoizedState=l):(e=Bd(),Ne.lanes|=e,Da|=e,t)}function Iu(e,t,l,s,n){var r=w.p;w.p=r!==0&&8>r?r:8;var i=v.T,d={};v.T=d,zi(e,!1,t,l);try{var C=n(),U=v.S;if(U!==null&&U(d,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Z=h0(C,s);ws(e,t,Z,Et(e))}else ws(e,t,s,Et(e))}catch(ee){ws(e,t,{then:function(){},status:"rejected",reason:ee},Et())}finally{w.p=r,i!==null&&d.types!==null&&(i.types=d.types),v.T=i}}function j0(){}function Di(e,t,l,s){if(e.tag!==5)throw Error(c(476));var n=_u(e).queue;Iu(e,n,t,X,l===null?j0:function(){return Ou(e),l(s)})}function _u(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:X},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ou(e){var t=_u(e);t.next===null&&(t=e.alternate.memoizedState),ws(e,t.next.queue,{},Et())}function Ti(){return ot(Hs)}function Uu(){return Ke().memoizedState}function Hu(){return Ke().memoizedState}function N0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=Et();e=Sa(l);var s=Ca(t,e,l);s!==null&&(yt(s,t,l),bs(s,t,l)),t={cache:ri()},e.payload=t;return}t=t.return}}function w0(e,t,l){var s=Et();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},zn(e)?qu(t,l):(l=Xr(e,t,l,s),l!==null&&(yt(l,e,s),Gu(l,t,s)))}function Ju(e,t,l){var s=Et();ws(e,t,l,s)}function ws(e,t,l,s){var n={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(zn(e))qu(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var i=t.lastRenderedState,d=r(i,l);if(n.hasEagerState=!0,n.eagerState=d,wt(d,i))return fn(e,t,n,0),Ge===null&&dn(),!1}catch{}if(l=Xr(e,t,n,s),l!==null)return yt(l,e,s),Gu(l,t,s),!0}return!1}function zi(e,t,l,s){if(s={lane:2,revertLane:uo(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},zn(e)){if(t)throw Error(c(479))}else t=Xr(e,l,s,2),t!==null&&yt(t,e,2)}function zn(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function qu(e,t){Ll=Cn=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function Gu(e,t,l){if((l&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,Fo(e,l)}}var Ss={readContext:ot,use:An,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};Ss.useEffectEvent=Fe;var Qu={readContext:ot,use:An,useCallback:function(e,t){return mt().memoizedState=[e,t===void 0?null:t],e},useContext:ot,useEffect:ku,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,Dn(4194308,4,Tu.bind(null,t,e),l)},useLayoutEffect:function(e,t){return Dn(4194308,4,e,t)},useInsertionEffect:function(e,t){Dn(4,2,e,t)},useMemo:function(e,t){var l=mt();t=t===void 0?null:t;var s=e();if(nl){te(!0);try{e()}finally{te(!1)}}return l.memoizedState=[s,t],s},useReducer:function(e,t,l){var s=mt();if(l!==void 0){var n=l(t);if(nl){te(!0);try{l(t)}finally{te(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=w0.bind(null,Ne,e),[s.memoizedState,e]},useRef:function(e){var t=mt();return e={current:e},t.memoizedState=e},useState:function(e){e=Ci(e);var t=e.queue,l=Ju.bind(null,Ne,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:Ai,useDeferredValue:function(e,t){var l=mt();return Ei(l,e,t)},useTransition:function(){var e=Ci(!1);return e=Iu.bind(null,Ne,e.queue,!0,!1),mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var s=Ne,n=mt();if(De){if(l===void 0)throw Error(c(407));l=l()}else{if(l=t(),Ge===null)throw Error(c(349));(ke&127)!==0||du(s,t,l)}n.memoizedState=l;var r={value:l,getSnapshot:t};return n.queue=r,ku(mu.bind(null,s,r,e),[e]),s.flags|=2048,Bl(9,{destroy:void 0},fu.bind(null,s,r,l,t),null),l},useId:function(){var e=mt(),t=Ge.identifierPrefix;if(De){var l=Vt,s=Yt;l=(s&~(1<<32-ne(s)-1)).toString(32)+l,t="_"+t+"R_"+l,l=Mn++,0<l&&(t+="H"+l.toString(32)),t+="_"}else l=g0++,t="_"+t+"r_"+l.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ti,useFormState:Nu,useActionState:Nu,useOptimistic:function(e){var t=mt();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=zi.bind(null,Ne,!0,l),l.dispatch=t,[e,t]},useMemoCache:Ni,useCacheRefresh:function(){return mt().memoizedState=N0.bind(null,Ne)},useEffectEvent:function(e){var t=mt(),l={impl:e};return t.memoizedState=l,function(){if((Be&2)!==0)throw Error(c(440));return l.impl.apply(void 0,arguments)}}},Li={readContext:ot,use:An,useCallback:Lu,useContext:ot,useEffect:ki,useImperativeHandle:zu,useInsertionEffect:Eu,useLayoutEffect:Du,useMemo:Ru,useReducer:En,useRef:Mu,useState:function(){return En(sa)},useDebugValue:Ai,useDeferredValue:function(e,t){var l=Ke();return Bu(l,Ue.memoizedState,e,t)},useTransition:function(){var e=En(sa)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:Ns(e),t]},useSyncExternalStore:uu,useId:Uu,useHostTransitionStatus:Ti,useFormState:wu,useActionState:wu,useOptimistic:function(e,t){var l=Ke();return gu(l,Ue,e,t)},useMemoCache:Ni,useCacheRefresh:Hu};Li.useEffectEvent=Au;var Yu={readContext:ot,use:An,useCallback:Lu,useContext:ot,useEffect:ki,useImperativeHandle:zu,useInsertionEffect:Eu,useLayoutEffect:Du,useMemo:Ru,useReducer:Si,useRef:Mu,useState:function(){return Si(sa)},useDebugValue:Ai,useDeferredValue:function(e,t){var l=Ke();return Ue===null?Ei(l,e,t):Bu(l,Ue.memoizedState,e,t)},useTransition:function(){var e=Si(sa)[0],t=Ke().memoizedState;return[typeof e=="boolean"?e:Ns(e),t]},useSyncExternalStore:uu,useId:Uu,useHostTransitionStatus:Ti,useFormState:Cu,useActionState:Cu,useOptimistic:function(e,t){var l=Ke();return Ue!==null?gu(l,Ue,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Ni,useCacheRefresh:Hu};Yu.useEffectEvent=Au;function Ri(e,t,l,s){t=e.memoizedState,l=l(s,t),l=l==null?t:L({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Bi={enqueueSetState:function(e,t,l){e=e._reactInternals;var s=Et(),n=Sa(s);n.payload=t,l!=null&&(n.callback=l),t=Ca(e,n,s),t!==null&&(yt(t,e,s),bs(t,e,s))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var s=Et(),n=Sa(s);n.tag=1,n.payload=t,l!=null&&(n.callback=l),t=Ca(e,n,s),t!==null&&(yt(t,e,s),bs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=Et(),s=Sa(l);s.tag=2,t!=null&&(s.callback=t),t=Ca(e,s,l),t!==null&&(yt(t,e,l),bs(t,e,l))}};function Vu(e,t,l,s,n,r,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,r,i):t.prototype&&t.prototype.isPureReactComponent?!us(l,s)||!us(n,r):!0}function Zu(e,t,l,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,s),t.state!==e&&Bi.enqueueReplaceState(t,t.state,null)}function rl(e,t){var l=t;if("ref"in t){l={};for(var s in t)s!=="ref"&&(l[s]=t[s])}if(e=e.defaultProps){l===t&&(l=L({},l));for(var n in e)l[n]===void 0&&(l[n]=e[n])}return l}function Fu(e){un(e)}function Xu(e){console.error(e)}function Wu(e){un(e)}function Ln(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Pu(e,t,l){try{var s=e.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Ii(e,t,l){return l=Sa(l),l.tag=3,l.payload={element:null},l.callback=function(){Ln(e,t)},l}function Ku(e){return e=Sa(e),e.tag=3,e}function $u(e,t,l,s){var n=l.type.getDerivedStateFromError;if(typeof n=="function"){var r=s.value;e.payload=function(){return n(r)},e.callback=function(){Pu(t,l,s)}}var i=l.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){Pu(t,l,s),typeof n!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var d=s.stack;this.componentDidCatch(s.value,{componentStack:d!==null?d:""})})}function S0(e,t,l,s,n){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=l.alternate,t!==null&&kl(t,l,n,!0),l=Ct.current,l!==null){switch(l.tag){case 31:case 13:return Ut===null?Yn():l.alternate===null&&Xe===0&&(Xe=3),l.flags&=-257,l.flags|=65536,l.lanes=n,s===yn?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([s]):t.add(s),io(e,s,n)),!1;case 22:return l.flags|=65536,s===yn?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([s]):l.add(s)),io(e,s,n)),!1}throw Error(c(435,l.tag))}return io(e,s,n),Yn(),!1}if(De)return t=Ct.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==ti&&(e=Error(c(422),{cause:s}),ms(Bt(e,l)))):(s!==ti&&(t=Error(c(423),{cause:s}),ms(Bt(t,l))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Bt(s,l),n=Ii(e.stateNode,s,n),fi(e,n),Xe!==4&&(Xe=2)),!1;var r=Error(c(520),{cause:s});if(r=Bt(r,l),zs===null?zs=[r]:zs.push(r),Xe!==4&&(Xe=2),t===null)return!0;s=Bt(s,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=n&-n,l.lanes|=e,e=Ii(l.stateNode,s,e),fi(l,e),!1;case 1:if(t=l.type,r=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Ta===null||!Ta.has(r))))return l.flags|=65536,n&=-n,l.lanes|=n,n=Ku(n),$u(n,e,l,s),fi(l,n),!1}l=l.return}while(l!==null);return!1}var _i=Error(c(461)),tt=!1;function ct(e,t,l,s){t.child=e===null?lu(t,null,l,s):sl(t,e.child,l,s)}function ed(e,t,l,s,n){l=l.render;var r=t.ref;if("ref"in s){var i={};for(var d in s)d!=="ref"&&(i[d]=s[d])}else i=s;return el(t),s=bi(e,t,l,i,r,n),d=vi(),e!==null&&!tt?(yi(e,t,n),na(e,t,n)):(De&&d&&$r(t),t.flags|=1,ct(e,t,s,n),t.child)}function td(e,t,l,s,n){if(e===null){var r=l.type;return typeof r=="function"&&!Wr(r)&&r.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=r,ad(e,t,r,s,n)):(e=xn(l.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Yi(e,n)){var i=r.memoizedProps;if(l=l.compare,l=l!==null?l:us,l(i,s)&&e.ref===t.ref)return na(e,t,n)}return t.flags|=1,e=$t(r,s),e.ref=t.ref,e.return=t,t.child=e}function ad(e,t,l,s,n){if(e!==null){var r=e.memoizedProps;if(us(r,s)&&e.ref===t.ref)if(tt=!1,t.pendingProps=s=r,Yi(e,n))(e.flags&131072)!==0&&(tt=!0);else return t.lanes=e.lanes,na(e,t,n)}return Oi(e,t,l,s,n)}function ld(e,t,l,s){var n=s.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|l:l,e!==null){for(s=t.child=e.child,n=0;s!==null;)n=n|s.lanes|s.childLanes,s=s.sibling;s=n&~r}else s=0,t.child=null;return sd(e,t,r,l,s)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&bn(t,r!==null?r.cachePool:null),r!==null?ru(t,r):xi(),iu(t);else return s=t.lanes=536870912,sd(e,t,r!==null?r.baseLanes|l:l,l,s)}else r!==null?(bn(t,r.cachePool),ru(t,r),ka(),t.memoizedState=null):(e!==null&&bn(t,null),xi(),ka());return ct(e,t,n,l),t.child}function Cs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function sd(e,t,l,s,n){var r=oi();return r=r===null?null:{parent:$e._currentValue,pool:r},t.memoizedState={baseLanes:l,cachePool:r},e!==null&&bn(t,null),xi(),iu(t),e!==null&&kl(e,t,s,!0),t.childLanes=n,null}function Rn(e,t){return t=In({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function nd(e,t,l){return sl(t,e.child,null,l),e=Rn(t,t.pendingProps),e.flags|=2,Mt(t),t.memoizedState=null,e}function C0(e,t,l){var s=t.pendingProps,n=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(De){if(s.mode==="hidden")return e=Rn(t,s),t.lanes=536870912,Cs(null,e);if(gi(t),(e=Qe)?(e=bf(e,Ot),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Yt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},l=qc(e),l.return=t,t.child=l,it=t,Qe=null)):e=null,e===null)throw ja(t);return t.lanes=536870912,null}return Rn(t,s)}var r=e.memoizedState;if(r!==null){var i=r.dehydrated;if(gi(t),n)if(t.flags&256)t.flags&=-257,t=nd(e,t,l);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(tt||kl(e,t,l,!1),n=(l&e.childLanes)!==0,tt||n){if(s=Ge,s!==null&&(i=Xo(s,l),i!==0&&i!==r.retryLane))throw r.retryLane=i,Wa(e,i),yt(s,e,i),_i;Yn(),t=nd(e,t,l)}else e=r.treeContext,Qe=Ht(i.nextSibling),it=t,De=!0,ya=null,Ot=!1,e!==null&&Yc(t,e),t=Rn(t,s),t.flags|=4096;return t}return e=$t(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Bn(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(c(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function Oi(e,t,l,s,n){return el(t),l=bi(e,t,l,s,void 0,n),s=vi(),e!==null&&!tt?(yi(e,t,n),na(e,t,n)):(De&&s&&$r(t),t.flags|=1,ct(e,t,l,n),t.child)}function rd(e,t,l,s,n,r){return el(t),t.updateQueue=null,l=cu(t,s,l,n),ou(e),s=vi(),e!==null&&!tt?(yi(e,t,r),na(e,t,r)):(De&&s&&$r(t),t.flags|=1,ct(e,t,l,r),t.child)}function id(e,t,l,s,n){if(el(t),t.stateNode===null){var r=wl,i=l.contextType;typeof i=="object"&&i!==null&&(r=ot(i)),r=new l(s,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Bi,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=s,r.state=t.memoizedState,r.refs={},ui(t),i=l.contextType,r.context=typeof i=="object"&&i!==null?ot(i):wl,r.state=t.memoizedState,i=l.getDerivedStateFromProps,typeof i=="function"&&(Ri(t,l,i,s),r.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(i=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),i!==r.state&&Bi.enqueueReplaceState(r,r.state,null),ys(t,s,r,n),vs(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){r=t.stateNode;var d=t.memoizedProps,C=rl(l,d);r.props=C;var U=r.context,Z=l.contextType;i=wl,typeof Z=="object"&&Z!==null&&(i=ot(Z));var ee=l.getDerivedStateFromProps;Z=typeof ee=="function"||typeof r.getSnapshotBeforeUpdate=="function",d=t.pendingProps!==d,Z||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(d||U!==i)&&Zu(t,r,s,i),wa=!1;var q=t.memoizedState;r.state=q,ys(t,s,r,n),vs(),U=t.memoizedState,d||q!==U||wa?(typeof ee=="function"&&(Ri(t,l,ee,s),U=t.memoizedState),(C=wa||Vu(t,l,C,s,q,U,i))?(Z||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=U),r.props=s,r.state=U,r.context=i,s=C):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,di(e,t),i=t.memoizedProps,Z=rl(l,i),r.props=Z,ee=t.pendingProps,q=r.context,U=l.contextType,C=wl,typeof U=="object"&&U!==null&&(C=ot(U)),d=l.getDerivedStateFromProps,(U=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(i!==ee||q!==C)&&Zu(t,r,s,C),wa=!1,q=t.memoizedState,r.state=q,ys(t,s,r,n),vs();var V=t.memoizedState;i!==ee||q!==V||wa||e!==null&&e.dependencies!==null&&gn(e.dependencies)?(typeof d=="function"&&(Ri(t,l,d,s),V=t.memoizedState),(Z=wa||Vu(t,l,Z,s,q,V,C)||e!==null&&e.dependencies!==null&&gn(e.dependencies))?(U||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,V,C),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,V,C)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||i===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=V),r.props=s,r.state=V,r.context=C,s=Z):(typeof r.componentDidUpdate!="function"||i===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),s=!1)}return r=s,Bn(e,t),s=(t.flags&128)!==0,r||s?(r=t.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&s?(t.child=sl(t,e.child,null,n),t.child=sl(t,null,l,n)):ct(e,t,l,n),t.memoizedState=r.state,e=t.child):e=na(e,t,n),e}function od(e,t,l,s){return Ka(),t.flags|=256,ct(e,t,l,s),t.child}var Ui={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hi(e){return{baseLanes:e,cachePool:Pc()}}function Ji(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=At),e}function cd(e,t,l){var s=t.pendingProps,n=!1,r=(t.flags&128)!==0,i;if((i=r)||(i=e!==null&&e.memoizedState===null?!1:(Pe.current&2)!==0),i&&(n=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(De){if(n?Ma(t):ka(),(e=Qe)?(e=bf(e,Ot),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Yt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},l=qc(e),l.return=t,t.child=l,it=t,Qe=null)):e=null,e===null)throw ja(t);return So(e)?t.lanes=32:t.lanes=536870912,null}var d=s.children;return s=s.fallback,n?(ka(),n=t.mode,d=In({mode:"hidden",children:d},n),s=Pa(s,n,l,null),d.return=t,s.return=t,d.sibling=s,t.child=d,s=t.child,s.memoizedState=Hi(l),s.childLanes=Ji(e,i,l),t.memoizedState=Ui,Cs(null,s)):(Ma(t),qi(t,d))}var C=e.memoizedState;if(C!==null&&(d=C.dehydrated,d!==null)){if(r)t.flags&256?(Ma(t),t.flags&=-257,t=Gi(e,t,l)):t.memoizedState!==null?(ka(),t.child=e.child,t.flags|=128,t=null):(ka(),d=s.fallback,n=t.mode,s=In({mode:"visible",children:s.children},n),d=Pa(d,n,l,null),d.flags|=2,s.return=t,d.return=t,s.sibling=d,t.child=s,sl(t,e.child,null,l),s=t.child,s.memoizedState=Hi(l),s.childLanes=Ji(e,i,l),t.memoizedState=Ui,t=Cs(null,s));else if(Ma(t),So(d)){if(i=d.nextSibling&&d.nextSibling.dataset,i)var U=i.dgst;i=U,s=Error(c(419)),s.stack="",s.digest=i,ms({value:s,source:null,stack:null}),t=Gi(e,t,l)}else if(tt||kl(e,t,l,!1),i=(l&e.childLanes)!==0,tt||i){if(i=Ge,i!==null&&(s=Xo(i,l),s!==0&&s!==C.retryLane))throw C.retryLane=s,Wa(e,s),yt(i,e,s),_i;wo(d)||Yn(),t=Gi(e,t,l)}else wo(d)?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,Qe=Ht(d.nextSibling),it=t,De=!0,ya=null,Ot=!1,e!==null&&Yc(t,e),t=qi(t,s.children),t.flags|=4096);return t}return n?(ka(),d=s.fallback,n=t.mode,C=e.child,U=C.sibling,s=$t(C,{mode:"hidden",children:s.children}),s.subtreeFlags=C.subtreeFlags&65011712,U!==null?d=$t(U,d):(d=Pa(d,n,l,null),d.flags|=2),d.return=t,s.return=t,s.sibling=d,t.child=s,Cs(null,s),s=t.child,d=e.child.memoizedState,d===null?d=Hi(l):(n=d.cachePool,n!==null?(C=$e._currentValue,n=n.parent!==C?{parent:C,pool:C}:n):n=Pc(),d={baseLanes:d.baseLanes|l,cachePool:n}),s.memoizedState=d,s.childLanes=Ji(e,i,l),t.memoizedState=Ui,Cs(e.child,s)):(Ma(t),l=e.child,e=l.sibling,l=$t(l,{mode:"visible",children:s.children}),l.return=t,l.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=l,t.memoizedState=null,l)}function qi(e,t){return t=In({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function In(e,t){return e=St(22,e,null,t),e.lanes=0,e}function Gi(e,t,l){return sl(t,e.child,null,l),e=qi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ud(e,t,l){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),si(e.return,t,l)}function Qi(e,t,l,s,n,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:n,treeForkCount:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=l,i.tailMode=n,i.treeForkCount=r)}function dd(e,t,l){var s=t.pendingProps,n=s.revealOrder,r=s.tail;s=s.children;var i=Pe.current,d=(i&2)!==0;if(d?(i=i&1|2,t.flags|=128):i&=1,D(Pe,i),ct(e,t,s,l),s=De?fs:0,!d&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ud(e,l,t);else if(e.tag===19)ud(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(l=t.child,n=null;l!==null;)e=l.alternate,e!==null&&Sn(e)===null&&(n=l),l=l.sibling;l=n,l===null?(n=t.child,t.child=null):(n=l.sibling,l.sibling=null),Qi(t,!1,n,l,r,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Sn(e)===null){t.child=n;break}e=n.sibling,n.sibling=l,l=n,n=e}Qi(t,!0,l,null,r,s);break;case"together":Qi(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function na(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),Da|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(kl(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,l=$t(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=$t(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function Yi(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&gn(e)))}function M0(e,t,l){switch(t.tag){case 3:pe(t,t.stateNode.containerInfo),Na(t,$e,e.memoizedState.cache),Ka();break;case 27:case 5:Ee(t);break;case 4:pe(t,t.stateNode.containerInfo);break;case 10:Na(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,gi(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Ma(t),t.flags|=128,null):(l&t.child.childLanes)!==0?cd(e,t,l):(Ma(t),e=na(e,t,l),e!==null?e.sibling:null);Ma(t);break;case 19:var n=(e.flags&128)!==0;if(s=(l&t.childLanes)!==0,s||(kl(e,t,l,!1),s=(l&t.childLanes)!==0),n){if(s)return dd(e,t,l);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),D(Pe,Pe.current),s)break;return null;case 22:return t.lanes=0,ld(e,t,l,t.pendingProps);case 24:Na(t,$e,e.memoizedState.cache)}return na(e,t,l)}function fd(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)tt=!0;else{if(!Yi(e,l)&&(t.flags&128)===0)return tt=!1,M0(e,t,l);tt=(e.flags&131072)!==0}else tt=!1,De&&(t.flags&1048576)!==0&&Qc(t,fs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=al(t.elementType),t.type=e,typeof e=="function")Wr(e)?(s=rl(e,s),t.tag=1,t=id(null,t,e,s,l)):(t.tag=0,t=Oi(null,t,e,s,l));else{if(e!=null){var n=e.$$typeof;if(n===le){t.tag=11,t=ed(null,t,e,s,l);break e}else if(n===z){t.tag=14,t=td(null,t,e,s,l);break e}}throw t=de(e)||e,Error(c(306,t,""))}}return t;case 0:return Oi(e,t,t.type,t.pendingProps,l);case 1:return s=t.type,n=rl(s,t.pendingProps),id(e,t,s,n,l);case 3:e:{if(pe(t,t.stateNode.containerInfo),e===null)throw Error(c(387));s=t.pendingProps;var r=t.memoizedState;n=r.element,di(e,t),ys(t,s,null,l);var i=t.memoizedState;if(s=i.cache,Na(t,$e,s),s!==r.cache&&ni(t,[$e],l,!0),vs(),s=i.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=od(e,t,s,l);break e}else if(s!==n){n=Bt(Error(c(424)),t),ms(n),t=od(e,t,s,l);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Qe=Ht(e.firstChild),it=t,De=!0,ya=null,Ot=!0,l=lu(t,null,s,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ka(),s===n){t=na(e,t,l);break e}ct(e,t,s,l)}t=t.child}return t;case 26:return Bn(e,t),e===null?(l=Sf(t.type,null,t.pendingProps,null))?t.memoizedState=l:De||(l=t.type,e=t.pendingProps,s=Kn($.current).createElement(l),s[rt]=t,s[xt]=e,ut(s,l,e),st(s),t.stateNode=s):t.memoizedState=Sf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ee(t),e===null&&De&&(s=t.stateNode=jf(t.type,t.pendingProps,$.current),it=t,Ot=!0,n=Qe,Ba(t.type)?(Co=n,Qe=Ht(s.firstChild)):Qe=n),ct(e,t,t.pendingProps.children,l),Bn(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&De&&((n=s=Qe)&&(s=ax(s,t.type,t.pendingProps,Ot),s!==null?(t.stateNode=s,it=t,Qe=Ht(s.firstChild),Ot=!1,n=!0):n=!1),n||ja(t)),Ee(t),n=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,s=r.children,yo(n,r)?s=null:i!==null&&yo(n,i)&&(t.flags|=32),t.memoizedState!==null&&(n=bi(e,t,p0,null,null,l),Hs._currentValue=n),Bn(e,t),ct(e,t,s,l),t.child;case 6:return e===null&&De&&((e=l=Qe)&&(l=lx(l,t.pendingProps,Ot),l!==null?(t.stateNode=l,it=t,Qe=null,e=!0):e=!1),e||ja(t)),null;case 13:return cd(e,t,l);case 4:return pe(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=sl(t,null,s,l):ct(e,t,s,l),t.child;case 11:return ed(e,t,t.type,t.pendingProps,l);case 7:return ct(e,t,t.pendingProps,l),t.child;case 8:return ct(e,t,t.pendingProps.children,l),t.child;case 12:return ct(e,t,t.pendingProps.children,l),t.child;case 10:return s=t.pendingProps,Na(t,t.type,s.value),ct(e,t,s.children,l),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,el(t),n=ot(n),s=s(n),t.flags|=1,ct(e,t,s,l),t.child;case 14:return td(e,t,t.type,t.pendingProps,l);case 15:return ad(e,t,t.type,t.pendingProps,l);case 19:return dd(e,t,l);case 31:return C0(e,t,l);case 22:return ld(e,t,l,t.pendingProps);case 24:return el(t),s=ot($e),e===null?(n=oi(),n===null&&(n=Ge,r=ri(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=l),n=r),t.memoizedState={parent:s,cache:n},ui(t),Na(t,$e,n)):((e.lanes&l)!==0&&(di(e,t),ys(t,null,null,l),vs()),n=e.memoizedState,r=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),Na(t,$e,s)):(s=r.cache,Na(t,$e,s),s!==n.cache&&ni(t,[$e],l,!0))),ct(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function ra(e){e.flags|=4}function Vi(e,t,l,s,n){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(Ud())e.flags|=8192;else throw ll=yn,ci}else e.flags&=-16777217}function md(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ef(t))if(Ud())e.flags|=8192;else throw ll=yn,ci}function _n(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Vo():536870912,e.lanes|=t,Ul|=t)}function Ms(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,s=0;if(t)for(var n=e.child;n!==null;)l|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)l|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=l,t}function k0(e,t,l){var s=t.pendingProps;switch(ei(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return Ye(t),null;case 3:return l=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),aa($e),me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Ml(t)?ra(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ai())),Ye(t),null;case 26:var n=t.type,r=t.memoizedState;return e===null?(ra(t),r!==null?(Ye(t),md(t,r)):(Ye(t),Vi(t,n,null,s,l))):r?r!==e.memoizedState?(ra(t),Ye(t),md(t,r)):(Ye(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&ra(t),Ye(t),Vi(t,n,e,s,l)),null;case 27:if(Me(t),l=$.current,n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ra(t);else{if(!s){if(t.stateNode===null)throw Error(c(166));return Ye(t),null}e=Y.current,Ml(t)?Vc(t):(e=jf(n,s,l),t.stateNode=e,ra(t))}return Ye(t),null;case 5:if(Me(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ra(t);else{if(!s){if(t.stateNode===null)throw Error(c(166));return Ye(t),null}if(r=Y.current,Ml(t))Vc(t);else{var i=Kn($.current);switch(r){case 1:r=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":r=i.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?i.createElement("select",{is:s.is}):i.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?i.createElement(n,{is:s.is}):i.createElement(n)}}r[rt]=t,r[xt]=s;e:for(i=t.child;i!==null;){if(i.tag===5||i.tag===6)r.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=r;e:switch(ut(r,n,s),n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ra(t)}}return Ye(t),Vi(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,l),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ra(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(c(166));if(e=$.current,Ml(t)){if(e=t.stateNode,l=t.memoizedProps,s=null,n=it,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[rt]=t,e=!!(e.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||uf(e.nodeValue,l)),e||ja(t,!0)}else e=Kn(e).createTextNode(s),e[rt]=t,t.stateNode=e}return Ye(t),null;case 31:if(l=t.memoizedState,e===null||e.memoizedState!==null){if(s=Ml(t),l!==null){if(e===null){if(!s)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[rt]=t}else Ka(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),e=!1}else l=ai(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return t.flags&256?(Mt(t),t):(Mt(t),null);if((t.flags&128)!==0)throw Error(c(558))}return Ye(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Ml(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(c(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(c(317));n[rt]=t}else Ka(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),n=!1}else n=ai(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Mt(t),t):(Mt(t),null)}return Mt(t),(t.flags&128)!==0?(t.lanes=l,t):(l=s!==null,e=e!==null&&e.memoizedState!==null,l&&(s=t.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==n&&(s.flags|=2048)),l!==e&&l&&(t.child.flags|=8192),_n(t,t.updateQueue),Ye(t),null);case 4:return me(),e===null&&ho(t.stateNode.containerInfo),Ye(t),null;case 10:return aa(t.type),Ye(t),null;case 19:if(g(Pe),s=t.memoizedState,s===null)return Ye(t),null;if(n=(t.flags&128)!==0,r=s.rendering,r===null)if(n)Ms(s,!1);else{if(Xe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Sn(e),r!==null){for(t.flags|=128,Ms(s,!1),e=r.updateQueue,t.updateQueue=e,_n(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)Jc(l,e),l=l.sibling;return D(Pe,Pe.current&1|2),De&&ea(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&je()>qn&&(t.flags|=128,n=!0,Ms(s,!1),t.lanes=4194304)}else{if(!n)if(e=Sn(r),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,_n(t,e),Ms(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!De)return Ye(t),null}else 2*je()-s.renderingStartTime>qn&&l!==536870912&&(t.flags|=128,n=!0,Ms(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=je(),e.sibling=null,l=Pe.current,D(Pe,n?l&1|2:l&1),De&&ea(t,s.treeForkCount),e):(Ye(t),null);case 22:case 23:return Mt(t),hi(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(l&536870912)!==0&&(t.flags&128)===0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),l=t.updateQueue,l!==null&&_n(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==l&&(t.flags|=2048),e!==null&&g(tl),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),aa($e),Ye(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function A0(e,t){switch(ei(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return aa($e),me(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Me(t),null;case 31:if(t.memoizedState!==null){if(Mt(t),t.alternate===null)throw Error(c(340));Ka()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Mt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));Ka()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return g(Pe),null;case 4:return me(),null;case 10:return aa(t.type),null;case 22:case 23:return Mt(t),hi(),e!==null&&g(tl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return aa($e),null;case 25:return null;default:return null}}function xd(e,t){switch(ei(t),t.tag){case 3:aa($e),me();break;case 26:case 27:case 5:Me(t);break;case 4:me();break;case 31:t.memoizedState!==null&&Mt(t);break;case 13:Mt(t);break;case 19:g(Pe);break;case 10:aa(t.type);break;case 22:case 23:Mt(t),hi(),e!==null&&g(tl);break;case 24:aa($e)}}function ks(e,t){try{var l=t.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var n=s.next;l=n;do{if((l.tag&e)===e){s=void 0;var r=l.create,i=l.inst;s=r(),i.destroy=s}l=l.next}while(l!==n)}}catch(d){_e(t,t.return,d)}}function Aa(e,t,l){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var r=n.next;s=r;do{if((s.tag&e)===e){var i=s.inst,d=i.destroy;if(d!==void 0){i.destroy=void 0,n=t;var C=l,U=d;try{U()}catch(Z){_e(n,C,Z)}}}s=s.next}while(s!==r)}}catch(Z){_e(t,t.return,Z)}}function hd(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{nu(t,l)}catch(s){_e(e,e.return,s)}}}function gd(e,t,l){l.props=rl(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(s){_e(e,t,s)}}function As(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof l=="function"?e.refCleanup=l(s):l.current=s}}catch(n){_e(e,t,n)}}function Zt(e,t){var l=e.ref,s=e.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(n){_e(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(n){_e(e,t,n)}else l.current=null}function pd(e){var t=e.type,l=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(n){_e(e,e.return,n)}}function Zi(e,t,l){try{var s=e.stateNode;W0(s,e.type,l,t),s[xt]=t}catch(n){_e(e,e.return,n)}}function bd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ba(e.type)||e.tag===4}function Fi(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ba(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xi(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=Pt));else if(s!==4&&(s===27&&Ba(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(Xi(e,t,l),e=e.sibling;e!==null;)Xi(e,t,l),e=e.sibling}function On(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(s!==4&&(s===27&&Ba(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(On(e,t,l),e=e.sibling;e!==null;)On(e,t,l),e=e.sibling}function vd(e){var t=e.stateNode,l=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ut(t,s,l),t[rt]=e,t[xt]=l}catch(r){_e(e,e.return,r)}}var ia=!1,at=!1,Wi=!1,yd=typeof WeakSet=="function"?WeakSet:Set,nt=null;function E0(e,t){if(e=e.containerInfo,bo=nr,e=zc(e),Gr(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{l.nodeType,r.nodeType}catch{l=null;break e}var i=0,d=-1,C=-1,U=0,Z=0,ee=e,q=null;t:for(;;){for(var V;ee!==l||n!==0&&ee.nodeType!==3||(d=i+n),ee!==r||s!==0&&ee.nodeType!==3||(C=i+s),ee.nodeType===3&&(i+=ee.nodeValue.length),(V=ee.firstChild)!==null;)q=ee,ee=V;for(;;){if(ee===e)break t;if(q===l&&++U===n&&(d=i),q===r&&++Z===s&&(C=i),(V=ee.nextSibling)!==null)break;ee=q,q=ee.parentNode}ee=V}l=d===-1||C===-1?null:{start:d,end:C}}else l=null}l=l||{start:0,end:0}}else l=null;for(vo={focusedElem:e,selectionRange:l},nr=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){switch(t=nt,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)n=e[l],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,l=t,n=r.memoizedProps,r=r.memoizedState,s=l.stateNode;try{var xe=rl(l.type,n);e=s.getSnapshotBeforeUpdate(xe,r),s.__reactInternalSnapshotBeforeUpdate=e}catch(be){_e(l,l.return,be)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)No(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":No(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}}function jd(e,t,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:ca(e,l),s&4&&ks(5,l);break;case 1:if(ca(e,l),s&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(i){_e(l,l.return,i)}else{var n=rl(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){_e(l,l.return,i)}}s&64&&hd(l),s&512&&As(l,l.return);break;case 3:if(ca(e,l),s&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{nu(e,t)}catch(i){_e(l,l.return,i)}}break;case 27:t===null&&s&4&&vd(l);case 26:case 5:ca(e,l),t===null&&s&4&&pd(l),s&512&&As(l,l.return);break;case 12:ca(e,l);break;case 31:ca(e,l),s&4&&Sd(e,l);break;case 13:ca(e,l),s&4&&Cd(e,l),s&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=O0.bind(null,l),sx(e,l))));break;case 22:if(s=l.memoizedState!==null||ia,!s){t=t!==null&&t.memoizedState!==null||at,n=ia;var r=at;ia=s,(at=t)&&!r?ua(e,l,(l.subtreeFlags&8772)!==0):ca(e,l),ia=n,at=r}break;case 30:break;default:ca(e,l)}}function Nd(e){var t=e.alternate;t!==null&&(e.alternate=null,Nd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Mr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ve=null,gt=!1;function oa(e,t,l){for(l=l.child;l!==null;)wd(e,t,l),l=l.sibling}function wd(e,t,l){if(S&&typeof S.onCommitFiberUnmount=="function")try{S.onCommitFiberUnmount(Qa,l)}catch{}switch(l.tag){case 26:at||Zt(l,t),oa(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:at||Zt(l,t);var s=Ve,n=gt;Ba(l.type)&&(Ve=l.stateNode,gt=!1),oa(e,t,l),_s(l.stateNode),Ve=s,gt=n;break;case 5:at||Zt(l,t);case 6:if(s=Ve,n=gt,Ve=null,oa(e,t,l),Ve=s,gt=n,Ve!==null)if(gt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(l.stateNode)}catch(r){_e(l,t,r)}else try{Ve.removeChild(l.stateNode)}catch(r){_e(l,t,r)}break;case 18:Ve!==null&&(gt?(e=Ve,gf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Zl(e)):gf(Ve,l.stateNode));break;case 4:s=Ve,n=gt,Ve=l.stateNode.containerInfo,gt=!0,oa(e,t,l),Ve=s,gt=n;break;case 0:case 11:case 14:case 15:Aa(2,l,t),at||Aa(4,l,t),oa(e,t,l);break;case 1:at||(Zt(l,t),s=l.stateNode,typeof s.componentWillUnmount=="function"&&gd(l,t,s)),oa(e,t,l);break;case 21:oa(e,t,l);break;case 22:at=(s=at)||l.memoizedState!==null,oa(e,t,l),at=s;break;default:oa(e,t,l)}}function Sd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Zl(e)}catch(l){_e(t,t.return,l)}}}function Cd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Zl(e)}catch(l){_e(t,t.return,l)}}function D0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new yd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new yd),t;default:throw Error(c(435,e.tag))}}function Un(e,t){var l=D0(e);t.forEach(function(s){if(!l.has(s)){l.add(s);var n=U0.bind(null,e,s);s.then(n,n)}})}function pt(e,t){var l=t.deletions;if(l!==null)for(var s=0;s<l.length;s++){var n=l[s],r=e,i=t,d=i;e:for(;d!==null;){switch(d.tag){case 27:if(Ba(d.type)){Ve=d.stateNode,gt=!1;break e}break;case 5:Ve=d.stateNode,gt=!1;break e;case 3:case 4:Ve=d.stateNode.containerInfo,gt=!0;break e}d=d.return}if(Ve===null)throw Error(c(160));wd(r,i,n),Ve=null,gt=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Md(t,e),t=t.sibling}var Gt=null;function Md(e,t){var l=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pt(t,e),bt(e),s&4&&(Aa(3,e,e.return),ks(3,e),Aa(5,e,e.return));break;case 1:pt(t,e),bt(e),s&512&&(at||l===null||Zt(l,l.return)),s&64&&ia&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var n=Gt;if(pt(t,e),bt(e),s&512&&(at||l===null||Zt(l,l.return)),s&4){var r=l!==null?l.memoizedState:null;if(s=e.memoizedState,l===null)if(s===null)if(e.stateNode===null){e:{s=e.type,l=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":r=n.getElementsByTagName("title")[0],(!r||r[ts]||r[rt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(s),n.head.insertBefore(r,n.querySelector("head > title"))),ut(r,s,l),r[rt]=e,st(r),s=r;break e;case"link":var i=kf("link","href",n).get(s+(l.href||""));if(i){for(var d=0;d<i.length;d++)if(r=i[d],r.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&r.getAttribute("rel")===(l.rel==null?null:l.rel)&&r.getAttribute("title")===(l.title==null?null:l.title)&&r.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){i.splice(d,1);break t}}r=n.createElement(s),ut(r,s,l),n.head.appendChild(r);break;case"meta":if(i=kf("meta","content",n).get(s+(l.content||""))){for(d=0;d<i.length;d++)if(r=i[d],r.getAttribute("content")===(l.content==null?null:""+l.content)&&r.getAttribute("name")===(l.name==null?null:l.name)&&r.getAttribute("property")===(l.property==null?null:l.property)&&r.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&r.getAttribute("charset")===(l.charSet==null?null:l.charSet)){i.splice(d,1);break t}}r=n.createElement(s),ut(r,s,l),n.head.appendChild(r);break;default:throw Error(c(468,s))}r[rt]=e,st(r),s=r}e.stateNode=s}else Af(n,e.type,e.stateNode);else e.stateNode=Mf(n,s,e.memoizedProps);else r!==s?(r===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):r.count--,s===null?Af(n,e.type,e.stateNode):Mf(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Zi(e,e.memoizedProps,l.memoizedProps)}break;case 27:pt(t,e),bt(e),s&512&&(at||l===null||Zt(l,l.return)),l!==null&&s&4&&Zi(e,e.memoizedProps,l.memoizedProps);break;case 5:if(pt(t,e),bt(e),s&512&&(at||l===null||Zt(l,l.return)),e.flags&32){n=e.stateNode;try{gl(n,"")}catch(xe){_e(e,e.return,xe)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,Zi(e,n,l!==null?l.memoizedProps:n)),s&1024&&(Wi=!0);break;case 6:if(pt(t,e),bt(e),s&4){if(e.stateNode===null)throw Error(c(162));s=e.memoizedProps,l=e.stateNode;try{l.nodeValue=s}catch(xe){_e(e,e.return,xe)}}break;case 3:if(tr=null,n=Gt,Gt=$n(t.containerInfo),pt(t,e),Gt=n,bt(e),s&4&&l!==null&&l.memoizedState.isDehydrated)try{Zl(t.containerInfo)}catch(xe){_e(e,e.return,xe)}Wi&&(Wi=!1,kd(e));break;case 4:s=Gt,Gt=$n(e.stateNode.containerInfo),pt(t,e),bt(e),Gt=s;break;case 12:pt(t,e),bt(e);break;case 31:pt(t,e),bt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Un(e,s)));break;case 13:pt(t,e),bt(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Jn=je()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Un(e,s)));break;case 22:n=e.memoizedState!==null;var C=l!==null&&l.memoizedState!==null,U=ia,Z=at;if(ia=U||n,at=Z||C,pt(t,e),at=Z,ia=U,bt(e),s&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(l===null||C||ia||at||il(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){C=l=t;try{if(r=C.stateNode,n)i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{d=C.stateNode;var ee=C.memoizedProps.style,q=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;d.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(xe){_e(C,C.return,xe)}}}else if(t.tag===6){if(l===null){C=t;try{C.stateNode.nodeValue=n?"":C.memoizedProps}catch(xe){_e(C,C.return,xe)}}}else if(t.tag===18){if(l===null){C=t;try{var V=C.stateNode;n?pf(V,!0):pf(C.stateNode,!1)}catch(xe){_e(C,C.return,xe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,Un(e,l))));break;case 19:pt(t,e),bt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Un(e,s)));break;case 30:break;case 21:break;default:pt(t,e),bt(e)}}function bt(e){var t=e.flags;if(t&2){try{for(var l,s=e.return;s!==null;){if(bd(s)){l=s;break}s=s.return}if(l==null)throw Error(c(160));switch(l.tag){case 27:var n=l.stateNode,r=Fi(e);On(e,r,n);break;case 5:var i=l.stateNode;l.flags&32&&(gl(i,""),l.flags&=-33);var d=Fi(e);On(e,d,i);break;case 3:case 4:var C=l.stateNode.containerInfo,U=Fi(e);Xi(e,U,C);break;default:throw Error(c(161))}}catch(Z){_e(e,e.return,Z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;kd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ca(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)jd(e,t.alternate,t),t=t.sibling}function il(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Aa(4,t,t.return),il(t);break;case 1:Zt(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&gd(t,t.return,l),il(t);break;case 27:_s(t.stateNode);case 26:case 5:Zt(t,t.return),il(t);break;case 22:t.memoizedState===null&&il(t);break;case 30:il(t);break;default:il(t)}e=e.sibling}}function ua(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,n=e,r=t,i=r.flags;switch(r.tag){case 0:case 11:case 15:ua(n,r,l),ks(4,r);break;case 1:if(ua(n,r,l),s=r,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(U){_e(s,s.return,U)}if(s=r,n=s.updateQueue,n!==null){var d=s.stateNode;try{var C=n.shared.hiddenCallbacks;if(C!==null)for(n.shared.hiddenCallbacks=null,n=0;n<C.length;n++)su(C[n],d)}catch(U){_e(s,s.return,U)}}l&&i&64&&hd(r),As(r,r.return);break;case 27:vd(r);case 26:case 5:ua(n,r,l),l&&s===null&&i&4&&pd(r),As(r,r.return);break;case 12:ua(n,r,l);break;case 31:ua(n,r,l),l&&i&4&&Sd(n,r);break;case 13:ua(n,r,l),l&&i&4&&Cd(n,r);break;case 22:r.memoizedState===null&&ua(n,r,l),As(r,r.return);break;case 30:break;default:ua(n,r,l)}t=t.sibling}}function Pi(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&xs(l))}function Ki(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&xs(e))}function Qt(e,t,l,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ad(e,t,l,s),t=t.sibling}function Ad(e,t,l,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Qt(e,t,l,s),n&2048&&ks(9,t);break;case 1:Qt(e,t,l,s);break;case 3:Qt(e,t,l,s),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&xs(e)));break;case 12:if(n&2048){Qt(e,t,l,s),e=t.stateNode;try{var r=t.memoizedProps,i=r.id,d=r.onPostCommit;typeof d=="function"&&d(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){_e(t,t.return,C)}}else Qt(e,t,l,s);break;case 31:Qt(e,t,l,s);break;case 13:Qt(e,t,l,s);break;case 23:break;case 22:r=t.stateNode,i=t.alternate,t.memoizedState!==null?r._visibility&2?Qt(e,t,l,s):Es(e,t):r._visibility&2?Qt(e,t,l,s):(r._visibility|=2,Il(e,t,l,s,(t.subtreeFlags&10256)!==0||!1)),n&2048&&Pi(i,t);break;case 24:Qt(e,t,l,s),n&2048&&Ki(t.alternate,t);break;default:Qt(e,t,l,s)}}function Il(e,t,l,s,n){for(n=n&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,i=t,d=l,C=s,U=i.flags;switch(i.tag){case 0:case 11:case 15:Il(r,i,d,C,n),ks(8,i);break;case 23:break;case 22:var Z=i.stateNode;i.memoizedState!==null?Z._visibility&2?Il(r,i,d,C,n):Es(r,i):(Z._visibility|=2,Il(r,i,d,C,n)),n&&U&2048&&Pi(i.alternate,i);break;case 24:Il(r,i,d,C,n),n&&U&2048&&Ki(i.alternate,i);break;default:Il(r,i,d,C,n)}t=t.sibling}}function Es(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,s=t,n=s.flags;switch(s.tag){case 22:Es(l,s),n&2048&&Pi(s.alternate,s);break;case 24:Es(l,s),n&2048&&Ki(s.alternate,s);break;default:Es(l,s)}t=t.sibling}}var Ds=8192;function _l(e,t,l){if(e.subtreeFlags&Ds)for(e=e.child;e!==null;)Ed(e,t,l),e=e.sibling}function Ed(e,t,l){switch(e.tag){case 26:_l(e,t,l),e.flags&Ds&&e.memoizedState!==null&&gx(l,Gt,e.memoizedState,e.memoizedProps);break;case 5:_l(e,t,l);break;case 3:case 4:var s=Gt;Gt=$n(e.stateNode.containerInfo),_l(e,t,l),Gt=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Ds,Ds=16777216,_l(e,t,l),Ds=s):_l(e,t,l));break;default:_l(e,t,l)}}function Dd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ts(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];nt=s,zd(s,e)}Dd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Td(e),e=e.sibling}function Td(e){switch(e.tag){case 0:case 11:case 15:Ts(e),e.flags&2048&&Aa(9,e,e.return);break;case 3:Ts(e);break;case 12:Ts(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Hn(e)):Ts(e);break;default:Ts(e)}}function Hn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];nt=s,zd(s,e)}Dd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Aa(8,t,t.return),Hn(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,Hn(t));break;default:Hn(t)}e=e.sibling}}function zd(e,t){for(;nt!==null;){var l=nt;switch(l.tag){case 0:case 11:case 15:Aa(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:xs(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,nt=s;else e:for(l=e;nt!==null;){s=nt;var n=s.sibling,r=s.return;if(Nd(s),s===l){nt=null;break e}if(n!==null){n.return=r,nt=n;break e}nt=r}}}var T0={getCacheForType:function(e){var t=ot($e),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l},cacheSignal:function(){return ot($e).controller.signal}},z0=typeof WeakMap=="function"?WeakMap:Map,Be=0,Ge=null,Se=null,ke=0,Ie=0,kt=null,Ea=!1,Ol=!1,$i=!1,da=0,Xe=0,Da=0,ol=0,eo=0,At=0,Ul=0,zs=null,vt=null,to=!1,Jn=0,Ld=0,qn=1/0,Gn=null,Ta=null,lt=0,za=null,Hl=null,fa=0,ao=0,lo=null,Rd=null,Ls=0,so=null;function Et(){return(Be&2)!==0&&ke!==0?ke&-ke:v.T!==null?uo():Wo()}function Bd(){if(At===0)if((ke&536870912)===0||De){var e=Ws;Ws<<=1,(Ws&3932160)===0&&(Ws=262144),At=e}else At=536870912;return e=Ct.current,e!==null&&(e.flags|=32),At}function yt(e,t,l){(e===Ge&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)&&(Jl(e,0),La(e,ke,At,!1)),es(e,l),((Be&2)===0||e!==Ge)&&(e===Ge&&((Be&2)===0&&(ol|=l),Xe===4&&La(e,ke,At,!1)),Ft(e))}function Id(e,t,l){if((Be&6)!==0)throw Error(c(327));var s=!l&&(t&127)===0&&(t&e.expiredLanes)===0||$l(e,t),n=s?B0(e,t):ro(e,t,!0),r=s;do{if(n===0){Ol&&!s&&La(e,t,0,!1);break}else{if(l=e.current.alternate,r&&!L0(l)){n=ro(e,t,!1),r=!1;continue}if(n===2){if(r=t,e.errorRecoveryDisabledLanes&r)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var d=e;n=zs;var C=d.current.memoizedState.isDehydrated;if(C&&(Jl(d,i).flags|=256),i=ro(d,i,!1),i!==2){if($i&&!C){d.errorRecoveryDisabledLanes|=r,ol|=r,n=4;break e}r=vt,vt=n,r!==null&&(vt===null?vt=r:vt.push.apply(vt,r))}n=i}if(r=!1,n!==2)continue}}if(n===1){Jl(e,0),La(e,t,0,!0);break}e:{switch(s=e,r=n,r){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:La(s,t,At,!Ea);break e;case 2:vt=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(n=Jn+300-je(),10<n)){if(La(s,t,At,!Ea),Ks(s,0,!0)!==0)break e;fa=t,s.timeoutHandle=xf(_d.bind(null,s,l,vt,Gn,to,t,At,ol,Ul,Ea,r,"Throttled",-0,0),n);break e}_d(s,l,vt,Gn,to,t,At,ol,Ul,Ea,r,null,-0,0)}}break}while(!0);Ft(e)}function _d(e,t,l,s,n,r,i,d,C,U,Z,ee,q,V){if(e.timeoutHandle=-1,ee=t.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt},Ed(t,r,ee);var xe=(r&62914560)===r?Jn-je():(r&4194048)===r?Ld-je():0;if(xe=px(ee,xe),xe!==null){fa=r,e.cancelPendingCommit=xe(Yd.bind(null,e,t,r,l,s,n,i,d,C,Z,ee,null,q,V)),La(e,r,i,!U);return}}Yd(e,t,r,l,s,n,i,d,C)}function L0(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var n=l[s],r=n.getSnapshot;n=n.value;try{if(!wt(r(),n))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t,l,s){t&=~eo,t&=~ol,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var r=31-ne(n),i=1<<r;s[r]=-1,n&=~i}l!==0&&Zo(e,l,t)}function Qn(){return(Be&6)===0?(Rs(0),!1):!0}function no(){if(Se!==null){if(Ie===0)var e=Se.return;else e=Se,ta=$a=null,ji(e),Tl=null,gs=0,e=Se;for(;e!==null;)xd(e.alternate,e),e=e.return;Se=null}}function Jl(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,$0(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),fa=0,no(),Ge=e,Se=l=$t(e.current,null),ke=t,Ie=0,kt=null,Ea=!1,Ol=$l(e,t),$i=!1,Ul=At=eo=ol=Da=Xe=0,vt=zs=null,to=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var n=31-ne(s),r=1<<n;t|=e[n],s&=~r}return da=t,dn(),l}function Od(e,t){Ne=null,v.H=Ss,t===Dl||t===vn?(t=eu(),Ie=3):t===ci?(t=eu(),Ie=4):Ie=t===_i?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,kt=t,Se===null&&(Xe=1,Ln(e,Bt(t,e.current)))}function Ud(){var e=Ct.current;return e===null?!0:(ke&4194048)===ke?Ut===null:(ke&62914560)===ke||(ke&536870912)!==0?e===Ut:!1}function Hd(){var e=v.H;return v.H=Ss,e===null?Ss:e}function Jd(){var e=v.A;return v.A=T0,e}function Yn(){Xe=4,Ea||(ke&4194048)!==ke&&Ct.current!==null||(Ol=!0),(Da&134217727)===0&&(ol&134217727)===0||Ge===null||La(Ge,ke,At,!1)}function ro(e,t,l){var s=Be;Be|=2;var n=Hd(),r=Jd();(Ge!==e||ke!==t)&&(Gn=null,Jl(e,t)),t=!1;var i=Xe;e:do try{if(Ie!==0&&Se!==null){var d=Se,C=kt;switch(Ie){case 8:no(),i=6;break e;case 3:case 2:case 9:case 6:Ct.current===null&&(t=!0);var U=Ie;if(Ie=0,kt=null,ql(e,d,C,U),l&&Ol){i=0;break e}break;default:U=Ie,Ie=0,kt=null,ql(e,d,C,U)}}R0(),i=Xe;break}catch(Z){Od(e,Z)}while(!0);return t&&e.shellSuspendCounter++,ta=$a=null,Be=s,v.H=n,v.A=r,Se===null&&(Ge=null,ke=0,dn()),i}function R0(){for(;Se!==null;)qd(Se)}function B0(e,t){var l=Be;Be|=2;var s=Hd(),n=Jd();Ge!==e||ke!==t?(Gn=null,qn=je()+500,Jl(e,t)):Ol=$l(e,t);e:do try{if(Ie!==0&&Se!==null){t=Se;var r=kt;t:switch(Ie){case 1:Ie=0,kt=null,ql(e,t,r,1);break;case 2:case 9:if(Kc(r)){Ie=0,kt=null,Gd(t);break}t=function(){Ie!==2&&Ie!==9||Ge!==e||(Ie=7),Ft(e)},r.then(t,t);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:Kc(r)?(Ie=0,kt=null,Gd(t)):(Ie=0,kt=null,ql(e,t,r,7));break;case 5:var i=null;switch(Se.tag){case 26:i=Se.memoizedState;case 5:case 27:var d=Se;if(i?Ef(i):d.stateNode.complete){Ie=0,kt=null;var C=d.sibling;if(C!==null)Se=C;else{var U=d.return;U!==null?(Se=U,Vn(U)):Se=null}break t}}Ie=0,kt=null,ql(e,t,r,5);break;case 6:Ie=0,kt=null,ql(e,t,r,6);break;case 8:no(),Xe=6;break e;default:throw Error(c(462))}}I0();break}catch(Z){Od(e,Z)}while(!0);return ta=$a=null,v.H=s,v.A=n,Be=l,Se!==null?0:(Ge=null,ke=0,dn(),Xe)}function I0(){for(;Se!==null&&!vr();)qd(Se)}function qd(e){var t=fd(e.alternate,e,da);e.memoizedProps=e.pendingProps,t===null?Vn(e):Se=t}function Gd(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=rd(l,t,t.pendingProps,t.type,void 0,ke);break;case 11:t=rd(l,t,t.pendingProps,t.type.render,t.ref,ke);break;case 5:ji(t);default:xd(l,t),t=Se=Jc(t,da),t=fd(l,t,da)}e.memoizedProps=e.pendingProps,t===null?Vn(e):Se=t}function ql(e,t,l,s){ta=$a=null,ji(t),Tl=null,gs=0;var n=t.return;try{if(S0(e,n,t,l,ke)){Xe=1,Ln(e,Bt(l,e.current)),Se=null;return}}catch(r){if(n!==null)throw Se=n,r;Xe=1,Ln(e,Bt(l,e.current)),Se=null;return}t.flags&32768?(De||s===1?e=!0:Ol||(ke&536870912)!==0?e=!1:(Ea=e=!0,(s===2||s===9||s===3||s===6)&&(s=Ct.current,s!==null&&s.tag===13&&(s.flags|=16384))),Qd(t,e)):Vn(t)}function Vn(e){var t=e;do{if((t.flags&32768)!==0){Qd(t,Ea);return}e=t.return;var l=k0(t.alternate,t,da);if(l!==null){Se=l;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Xe===0&&(Xe=5)}function Qd(e,t){do{var l=A0(e.alternate,e);if(l!==null){l.flags&=32767,Se=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=l}while(e!==null);Xe=6,Se=null}function Yd(e,t,l,s,n,r,i,d,C){e.cancelPendingCommit=null;do Zn();while(lt!==0);if((Be&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(r=t.lanes|t.childLanes,r|=Fr,hm(e,l,r,i,d,C),e===Ge&&(Se=Ge=null,ke=0),Hl=t,za=e,fa=l,ao=r,lo=n,Rd=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,H0(Ga,function(){return Wd(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=v.T,v.T=null,n=w.p,w.p=2,i=Be,Be|=4;try{E0(e,t,l)}finally{Be=i,w.p=n,v.T=s}}lt=1,Vd(),Zd(),Fd()}}function Vd(){if(lt===1){lt=0;var e=za,t=Hl,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=v.T,v.T=null;var s=w.p;w.p=2;var n=Be;Be|=4;try{Md(t,e);var r=vo,i=zc(e.containerInfo),d=r.focusedElem,C=r.selectionRange;if(i!==d&&d&&d.ownerDocument&&Tc(d.ownerDocument.documentElement,d)){if(C!==null&&Gr(d)){var U=C.start,Z=C.end;if(Z===void 0&&(Z=U),"selectionStart"in d)d.selectionStart=U,d.selectionEnd=Math.min(Z,d.value.length);else{var ee=d.ownerDocument||document,q=ee&&ee.defaultView||window;if(q.getSelection){var V=q.getSelection(),xe=d.textContent.length,be=Math.min(C.start,xe),Je=C.end===void 0?be:Math.min(C.end,xe);!V.extend&&be>Je&&(i=Je,Je=be,be=i);var R=Dc(d,be),A=Dc(d,Je);if(R&&A&&(V.rangeCount!==1||V.anchorNode!==R.node||V.anchorOffset!==R.offset||V.focusNode!==A.node||V.focusOffset!==A.offset)){var O=ee.createRange();O.setStart(R.node,R.offset),V.removeAllRanges(),be>Je?(V.addRange(O),V.extend(A.node,A.offset)):(O.setEnd(A.node,A.offset),V.addRange(O))}}}}for(ee=[],V=d;V=V.parentNode;)V.nodeType===1&&ee.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<ee.length;d++){var W=ee[d];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}nr=!!bo,vo=bo=null}finally{Be=n,w.p=s,v.T=l}}e.current=t,lt=2}}function Zd(){if(lt===2){lt=0;var e=za,t=Hl,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=v.T,v.T=null;var s=w.p;w.p=2;var n=Be;Be|=4;try{jd(e,t.alternate,t)}finally{Be=n,w.p=s,v.T=l}}lt=3}}function Fd(){if(lt===4||lt===3){lt=0,Zs();var e=za,t=Hl,l=fa,s=Rd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?lt=5:(lt=0,Hl=za=null,Xd(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Ta=null),Sr(l),t=t.stateNode,S&&typeof S.onCommitFiberRoot=="function")try{S.onCommitFiberRoot(Qa,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=v.T,n=w.p,w.p=2,v.T=null;try{for(var r=e.onRecoverableError,i=0;i<s.length;i++){var d=s[i];r(d.value,{componentStack:d.stack})}}finally{v.T=t,w.p=n}}(fa&3)!==0&&Zn(),Ft(e),n=e.pendingLanes,(l&261930)!==0&&(n&42)!==0?e===so?Ls++:(Ls=0,so=e):Ls=0,Rs(0)}}function Xd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,xs(t)))}function Zn(){return Vd(),Zd(),Fd(),Wd()}function Wd(){if(lt!==5)return!1;var e=za,t=ao;ao=0;var l=Sr(fa),s=v.T,n=w.p;try{w.p=32>l?32:l,v.T=null,l=lo,lo=null;var r=za,i=fa;if(lt=0,Hl=za=null,fa=0,(Be&6)!==0)throw Error(c(331));var d=Be;if(Be|=4,Td(r.current),Ad(r,r.current,i,l),Be=d,Rs(0,!1),S&&typeof S.onPostCommitFiberRoot=="function")try{S.onPostCommitFiberRoot(Qa,r)}catch{}return!0}finally{w.p=n,v.T=s,Xd(e,t)}}function Pd(e,t,l){t=Bt(l,t),t=Ii(e.stateNode,t,2),e=Ca(e,t,2),e!==null&&(es(e,2),Ft(e))}function _e(e,t,l){if(e.tag===3)Pd(e,e,l);else for(;t!==null;){if(t.tag===3){Pd(t,e,l);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ta===null||!Ta.has(s))){e=Bt(l,e),l=Ku(2),s=Ca(t,l,2),s!==null&&($u(l,s,t,e),es(s,2),Ft(s));break}}t=t.return}}function io(e,t,l){var s=e.pingCache;if(s===null){s=e.pingCache=new z0;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(l)||($i=!0,n.add(l),e=_0.bind(null,e,t,l),t.then(e,e))}function _0(e,t,l){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Ge===e&&(ke&l)===l&&(Xe===4||Xe===3&&(ke&62914560)===ke&&300>je()-Jn?(Be&2)===0&&Jl(e,0):eo|=l,Ul===ke&&(Ul=0)),Ft(e)}function Kd(e,t){t===0&&(t=Vo()),e=Wa(e,t),e!==null&&(es(e,t),Ft(e))}function O0(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),Kd(e,l)}function U0(e,t){var l=0;switch(e.tag){case 31:case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(l=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(c(314))}s!==null&&s.delete(t),Kd(e,l)}function H0(e,t){return cl(e,t)}var Fn=null,Gl=null,oo=!1,Xn=!1,co=!1,Ra=0;function Ft(e){e!==Gl&&e.next===null&&(Gl===null?Fn=Gl=e:Gl=Gl.next=e),Xn=!0,oo||(oo=!0,q0())}function Rs(e,t){if(!co&&Xn){co=!0;do for(var l=!1,s=Fn;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var r=0;else{var i=s.suspendedLanes,d=s.pingedLanes;r=(1<<31-ne(42|e)+1)-1,r&=n&~(i&~d),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(l=!0,af(s,r))}else r=ke,r=Ks(s,s===Ge?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(r&3)===0||$l(s,r)||(l=!0,af(s,r));s=s.next}while(l);co=!1}}function J0(){$d()}function $d(){Xn=oo=!1;var e=0;Ra!==0&&K0()&&(e=Ra);for(var t=je(),l=null,s=Fn;s!==null;){var n=s.next,r=ef(s,t);r===0?(s.next=null,l===null?Fn=n:l.next=n,n===null&&(Gl=l)):(l=s,(e!==0||(r&3)!==0)&&(Xn=!0)),s=n}lt!==0&&lt!==5||Rs(e),Ra!==0&&(Ra=0)}function ef(e,t){for(var l=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var i=31-ne(r),d=1<<i,C=n[i];C===-1?((d&l)===0||(d&s)!==0)&&(n[i]=xm(d,t)):C<=t&&(e.expiredLanes|=d),r&=~d}if(t=Ge,l=ke,l=Ks(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,l===0||e===t&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Pl(s),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||$l(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(s!==null&&Pl(s),Sr(l)){case 2:case 8:l=Fs;break;case 32:l=Ga;break;case 268435456:l=Xs;break;default:l=Ga}return s=tf.bind(null,e),l=cl(l,s),e.callbackPriority=t,e.callbackNode=l,t}return s!==null&&s!==null&&Pl(s),e.callbackPriority=2,e.callbackNode=null,2}function tf(e,t){if(lt!==0&&lt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Zn()&&e.callbackNode!==l)return null;var s=ke;return s=Ks(e,e===Ge?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Id(e,s,t),ef(e,je()),e.callbackNode!=null&&e.callbackNode===l?tf.bind(null,e):null)}function af(e,t){if(Zn())return null;Id(e,t,!0)}function q0(){ex(function(){(Be&6)!==0?cl(ga,J0):$d()})}function uo(){if(Ra===0){var e=Al;e===0&&(e=Nt,Nt<<=1,(Nt&261888)===0&&(Nt=256)),Ra=e}return Ra}function lf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:an(""+e)}function sf(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function G0(e,t,l,s,n){if(t==="submit"&&l&&l.stateNode===n){var r=lf((n[xt]||null).action),i=s.submitter;i&&(t=(t=i[xt]||null)?lf(t.formAction):i.getAttribute("formAction"),t!==null&&(r=t,i=null));var d=new rn("action","action",null,s,n);e.push({event:d,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ra!==0){var C=i?sf(n,i):new FormData(n);Di(l,{pending:!0,data:C,method:n.method,action:r},null,C)}}else typeof r=="function"&&(d.preventDefault(),C=i?sf(n,i):new FormData(n),Di(l,{pending:!0,data:C,method:n.method,action:r},r,C))},currentTarget:n}]})}}for(var fo=0;fo<Zr.length;fo++){var mo=Zr[fo],Q0=mo.toLowerCase(),Y0=mo[0].toUpperCase()+mo.slice(1);qt(Q0,"on"+Y0)}qt(Bc,"onAnimationEnd"),qt(Ic,"onAnimationIteration"),qt(_c,"onAnimationStart"),qt("dblclick","onDoubleClick"),qt("focusin","onFocus"),qt("focusout","onBlur"),qt(i0,"onTransitionRun"),qt(o0,"onTransitionStart"),qt(c0,"onTransitionCancel"),qt(Oc,"onTransitionEnd"),xl("onMouseEnter",["mouseout","mouseover"]),xl("onMouseLeave",["mouseout","mouseover"]),xl("onPointerEnter",["pointerout","pointerover"]),xl("onPointerLeave",["pointerout","pointerover"]),Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Va("onBeforeInput",["compositionend","keypress","textInput","paste"]),Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bs));function nf(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var s=e[l],n=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var i=s.length-1;0<=i;i--){var d=s[i],C=d.instance,U=d.currentTarget;if(d=d.listener,C!==r&&n.isPropagationStopped())break e;r=d,n.currentTarget=U;try{r(n)}catch(Z){un(Z)}n.currentTarget=null,r=C}else for(i=0;i<s.length;i++){if(d=s[i],C=d.instance,U=d.currentTarget,d=d.listener,C!==r&&n.isPropagationStopped())break e;r=d,n.currentTarget=U;try{r(n)}catch(Z){un(Z)}n.currentTarget=null,r=C}}}}function Ce(e,t){var l=t[Cr];l===void 0&&(l=t[Cr]=new Set);var s=e+"__bubble";l.has(s)||(rf(t,e,2,!1),l.add(s))}function xo(e,t,l){var s=0;t&&(s|=4),rf(l,e,s,t)}var Wn="_reactListening"+Math.random().toString(36).slice(2);function ho(e){if(!e[Wn]){e[Wn]=!0,$o.forEach(function(l){l!=="selectionchange"&&(V0.has(l)||xo(l,!1,e),xo(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wn]||(t[Wn]=!0,xo("selectionchange",!1,t))}}function rf(e,t,l,s){switch(If(t)){case 2:var n=yx;break;case 8:n=jx;break;default:n=Do}l=n.bind(null,t,l,e),n=void 0,!Rr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,l,{capture:!0,passive:n}):e.addEventListener(t,l,!0):n!==void 0?e.addEventListener(t,l,{passive:n}):e.addEventListener(t,l,!1)}function go(e,t,l,s,n){var r=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var d=s.stateNode.containerInfo;if(d===n)break;if(i===4)for(i=s.return;i!==null;){var C=i.tag;if((C===3||C===4)&&i.stateNode.containerInfo===n)return;i=i.return}for(;d!==null;){if(i=dl(d),i===null)return;if(C=i.tag,C===5||C===6||C===26||C===27){s=r=i;continue e}d=d.parentNode}}s=s.return}dc(function(){var U=r,Z=zr(l),ee=[];e:{var q=Uc.get(e);if(q!==void 0){var V=rn,xe=e;switch(e){case"keypress":if(sn(l)===0)break e;case"keydown":case"keyup":V=Um;break;case"focusin":xe="focus",V=Or;break;case"focusout":xe="blur",V=Or;break;case"beforeblur":case"afterblur":V=Or;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=qm;break;case Bc:case Ic:case _c:V=Dm;break;case Oc:V=Qm;break;case"scroll":case"scrollend":V=Cm;break;case"wheel":V=Vm;break;case"copy":case"cut":case"paste":V=zm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=gc;break;case"toggle":case"beforetoggle":V=Fm}var be=(t&4)!==0,Je=!be&&(e==="scroll"||e==="scrollend"),R=be?q!==null?q+"Capture":null:q;be=[];for(var A=U,O;A!==null;){var W=A;if(O=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||O===null||R===null||(W=ls(A,R),W!=null&&be.push(Is(A,W,O))),Je)break;A=A.return}0<be.length&&(q=new V(q,xe,null,l,Z),ee.push({event:q,listeners:be}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",q&&l!==Tr&&(xe=l.relatedTarget||l.fromElement)&&(dl(xe)||xe[ul]))break e;if((V||q)&&(q=Z.window===Z?Z:(q=Z.ownerDocument)?q.defaultView||q.parentWindow:window,V?(xe=l.relatedTarget||l.toElement,V=U,xe=xe?dl(xe):null,xe!==null&&(Je=m(xe),be=xe.tag,xe!==Je||be!==5&&be!==27&&be!==6)&&(xe=null)):(V=null,xe=U),V!==xe)){if(be=xc,W="onMouseLeave",R="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(be=gc,W="onPointerLeave",R="onPointerEnter",A="pointer"),Je=V==null?q:as(V),O=xe==null?q:as(xe),q=new be(W,A+"leave",V,l,Z),q.target=Je,q.relatedTarget=O,W=null,dl(Z)===U&&(be=new be(R,A+"enter",xe,l,Z),be.target=O,be.relatedTarget=Je,W=be),Je=W,V&&xe)t:{for(be=Z0,R=V,A=xe,O=0,W=R;W;W=be(W))O++;W=0;for(var ge=A;ge;ge=be(ge))W++;for(;0<O-W;)R=be(R),O--;for(;0<W-O;)A=be(A),W--;for(;O--;){if(R===A||A!==null&&R===A.alternate){be=R;break t}R=be(R),A=be(A)}be=null}else be=null;V!==null&&of(ee,q,V,be,!1),xe!==null&&Je!==null&&of(ee,Je,xe,be,!0)}}e:{if(q=U?as(U):window,V=q.nodeName&&q.nodeName.toLowerCase(),V==="select"||V==="input"&&q.type==="file")var Le=Sc;else if(Nc(q))if(Cc)Le=s0;else{Le=a0;var he=t0}else V=q.nodeName,!V||V.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?U&&Dr(U.elementType)&&(Le=Sc):Le=l0;if(Le&&(Le=Le(e,U))){wc(ee,Le,l,Z);break e}he&&he(e,q,U),e==="focusout"&&U&&q.type==="number"&&U.memoizedProps.value!=null&&Er(q,"number",q.value)}switch(he=U?as(U):window,e){case"focusin":(Nc(he)||he.contentEditable==="true")&&(yl=he,Qr=U,ds=null);break;case"focusout":ds=Qr=yl=null;break;case"mousedown":Yr=!0;break;case"contextmenu":case"mouseup":case"dragend":Yr=!1,Lc(ee,l,Z);break;case"selectionchange":if(r0)break;case"keydown":case"keyup":Lc(ee,l,Z)}var we;if(Hr)e:{switch(e){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else vl?yc(e,l)&&(Ae="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Ae="onCompositionStart");Ae&&(pc&&l.locale!=="ko"&&(vl||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&vl&&(we=fc()):(ba=Z,Br="value"in ba?ba.value:ba.textContent,vl=!0)),he=Pn(U,Ae),0<he.length&&(Ae=new hc(Ae,e,null,l,Z),ee.push({event:Ae,listeners:he}),we?Ae.data=we:(we=jc(l),we!==null&&(Ae.data=we)))),(we=Wm?Pm(e,l):Km(e,l))&&(Ae=Pn(U,"onBeforeInput"),0<Ae.length&&(he=new hc("onBeforeInput","beforeinput",null,l,Z),ee.push({event:he,listeners:Ae}),he.data=we)),G0(ee,e,U,l,Z)}nf(ee,t)})}function Is(e,t,l){return{instance:e,listener:t,currentTarget:l}}function Pn(e,t){for(var l=t+"Capture",s=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=ls(e,l),n!=null&&s.unshift(Is(e,n,r)),n=ls(e,t),n!=null&&s.push(Is(e,n,r))),e.tag===3)return s;e=e.return}return[]}function Z0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function of(e,t,l,s,n){for(var r=t._reactName,i=[];l!==null&&l!==s;){var d=l,C=d.alternate,U=d.stateNode;if(d=d.tag,C!==null&&C===s)break;d!==5&&d!==26&&d!==27||U===null||(C=U,n?(U=ls(l,r),U!=null&&i.unshift(Is(l,U,C))):n||(U=ls(l,r),U!=null&&i.push(Is(l,U,C)))),l=l.return}i.length!==0&&e.push({event:t,listeners:i})}var F0=/\r\n?/g,X0=/\u0000|\uFFFD/g;function cf(e){return(typeof e=="string"?e:""+e).replace(F0,`
`).replace(X0,"")}function uf(e,t){return t=cf(t),cf(e)===t}function He(e,t,l,s,n,r){switch(l){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||gl(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&gl(e,""+s);break;case"className":en(e,"class",s);break;case"tabIndex":en(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":en(e,l,s);break;case"style":cc(e,s,r);break;case"data":if(t!=="object"){en(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=an(""+s),e.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(l==="formAction"?(t!=="input"&&He(e,t,"name",n.name,n,null),He(e,t,"formEncType",n.formEncType,n,null),He(e,t,"formMethod",n.formMethod,n,null),He(e,t,"formTarget",n.formTarget,n,null)):(He(e,t,"encType",n.encType,n,null),He(e,t,"method",n.method,n,null),He(e,t,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=an(""+s),e.setAttribute(l,s);break;case"onClick":s!=null&&(e.onclick=Pt);break;case"onScroll":s!=null&&Ce("scroll",e);break;case"onScrollEnd":s!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(c(61));if(l=s.__html,l!=null){if(n.children!=null)throw Error(c(60));e.innerHTML=l}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}l=an(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""+s):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":s===!0?e.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,s):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(l,s):e.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(l):e.setAttribute(l,s);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),$s(e,"popover",s);break;case"xlinkActuate":Wt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Wt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Wt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Wt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Wt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Wt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Wt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Wt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Wt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":$s(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=wm.get(l)||l,$s(e,l,s))}}function po(e,t,l,s,n,r){switch(l){case"style":cc(e,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(c(61));if(l=s.__html,l!=null){if(n.children!=null)throw Error(c(60));e.innerHTML=l}}break;case"children":typeof s=="string"?gl(e,s):(typeof s=="number"||typeof s=="bigint")&&gl(e,""+s);break;case"onScroll":s!=null&&Ce("scroll",e);break;case"onScrollEnd":s!=null&&Ce("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ec.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(n=l.endsWith("Capture"),t=l.slice(2,n?l.length-7:void 0),r=e[xt]||null,r=r!=null?r[l]:null,typeof r=="function"&&e.removeEventListener(t,r,n),typeof s=="function")){typeof r!="function"&&r!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,s,n);break e}l in e?e[l]=s:s===!0?e.setAttribute(l,""):$s(e,l,s)}}}function ut(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var s=!1,n=!1,r;for(r in l)if(l.hasOwnProperty(r)){var i=l[r];if(i!=null)switch(r){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:He(e,t,r,i,l,null)}}n&&He(e,t,"srcSet",l.srcSet,l,null),s&&He(e,t,"src",l.src,l,null);return;case"input":Ce("invalid",e);var d=r=i=n=null,C=null,U=null;for(s in l)if(l.hasOwnProperty(s)){var Z=l[s];if(Z!=null)switch(s){case"name":n=Z;break;case"type":i=Z;break;case"checked":C=Z;break;case"defaultChecked":U=Z;break;case"value":r=Z;break;case"defaultValue":d=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(c(137,t));break;default:He(e,t,s,Z,l,null)}}nc(e,r,d,C,U,i,n,!1);return;case"select":Ce("invalid",e),s=i=r=null;for(n in l)if(l.hasOwnProperty(n)&&(d=l[n],d!=null))switch(n){case"value":r=d;break;case"defaultValue":i=d;break;case"multiple":s=d;default:He(e,t,n,d,l,null)}t=r,l=i,e.multiple=!!s,t!=null?hl(e,!!s,t,!1):l!=null&&hl(e,!!s,l,!0);return;case"textarea":Ce("invalid",e),r=n=s=null;for(i in l)if(l.hasOwnProperty(i)&&(d=l[i],d!=null))switch(i){case"value":s=d;break;case"defaultValue":n=d;break;case"children":r=d;break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(c(91));break;default:He(e,t,i,d,l,null)}ic(e,s,n,r);return;case"option":for(C in l)l.hasOwnProperty(C)&&(s=l[C],s!=null)&&(C==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":He(e,t,C,s,l,null));return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(s=0;s<Bs.length;s++)Ce(Bs[s],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in l)if(l.hasOwnProperty(U)&&(s=l[U],s!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:He(e,t,U,s,l,null)}return;default:if(Dr(t)){for(Z in l)l.hasOwnProperty(Z)&&(s=l[Z],s!==void 0&&po(e,t,Z,s,l,void 0));return}}for(d in l)l.hasOwnProperty(d)&&(s=l[d],s!=null&&He(e,t,d,s,l,null))}function W0(e,t,l,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,i=null,d=null,C=null,U=null,Z=null;for(V in l){var ee=l[V];if(l.hasOwnProperty(V)&&ee!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":C=ee;default:s.hasOwnProperty(V)||He(e,t,V,null,s,ee)}}for(var q in s){var V=s[q];if(ee=l[q],s.hasOwnProperty(q)&&(V!=null||ee!=null))switch(q){case"type":r=V;break;case"name":n=V;break;case"checked":U=V;break;case"defaultChecked":Z=V;break;case"value":i=V;break;case"defaultValue":d=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(c(137,t));break;default:V!==ee&&He(e,t,q,V,s,ee)}}Ar(e,i,d,C,U,Z,r,n);return;case"select":V=i=d=q=null;for(r in l)if(C=l[r],l.hasOwnProperty(r)&&C!=null)switch(r){case"value":break;case"multiple":V=C;default:s.hasOwnProperty(r)||He(e,t,r,null,s,C)}for(n in s)if(r=s[n],C=l[n],s.hasOwnProperty(n)&&(r!=null||C!=null))switch(n){case"value":q=r;break;case"defaultValue":d=r;break;case"multiple":i=r;default:r!==C&&He(e,t,n,r,s,C)}t=d,l=i,s=V,q!=null?hl(e,!!l,q,!1):!!s!=!!l&&(t!=null?hl(e,!!l,t,!0):hl(e,!!l,l?[]:"",!1));return;case"textarea":V=q=null;for(d in l)if(n=l[d],l.hasOwnProperty(d)&&n!=null&&!s.hasOwnProperty(d))switch(d){case"value":break;case"children":break;default:He(e,t,d,null,s,n)}for(i in s)if(n=s[i],r=l[i],s.hasOwnProperty(i)&&(n!=null||r!=null))switch(i){case"value":q=n;break;case"defaultValue":V=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(c(91));break;default:n!==r&&He(e,t,i,n,s,r)}rc(e,q,V);return;case"option":for(var xe in l)q=l[xe],l.hasOwnProperty(xe)&&q!=null&&!s.hasOwnProperty(xe)&&(xe==="selected"?e.selected=!1:He(e,t,xe,null,s,q));for(C in s)q=s[C],V=l[C],s.hasOwnProperty(C)&&q!==V&&(q!=null||V!=null)&&(C==="selected"?e.selected=q&&typeof q!="function"&&typeof q!="symbol":He(e,t,C,q,s,V));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in l)q=l[be],l.hasOwnProperty(be)&&q!=null&&!s.hasOwnProperty(be)&&He(e,t,be,null,s,q);for(U in s)if(q=s[U],V=l[U],s.hasOwnProperty(U)&&q!==V&&(q!=null||V!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(c(137,t));break;default:He(e,t,U,q,s,V)}return;default:if(Dr(t)){for(var Je in l)q=l[Je],l.hasOwnProperty(Je)&&q!==void 0&&!s.hasOwnProperty(Je)&&po(e,t,Je,void 0,s,q);for(Z in s)q=s[Z],V=l[Z],!s.hasOwnProperty(Z)||q===V||q===void 0&&V===void 0||po(e,t,Z,q,s,V);return}}for(var R in l)q=l[R],l.hasOwnProperty(R)&&q!=null&&!s.hasOwnProperty(R)&&He(e,t,R,null,s,q);for(ee in s)q=s[ee],V=l[ee],!s.hasOwnProperty(ee)||q===V||q==null&&V==null||He(e,t,ee,q,s,V)}function df(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function P0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var n=l[s],r=n.transferSize,i=n.initiatorType,d=n.duration;if(r&&d&&df(i)){for(i=0,d=n.responseEnd,s+=1;s<l.length;s++){var C=l[s],U=C.startTime;if(U>d)break;var Z=C.transferSize,ee=C.initiatorType;Z&&df(ee)&&(C=C.responseEnd,i+=Z*(C<d?1:(d-U)/(C-U)))}if(--s,t+=8*(r+i)/(n.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var bo=null,vo=null;function Kn(e){return e.nodeType===9?e:e.ownerDocument}function ff(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function yo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jo=null;function K0(){var e=window.event;return e&&e.type==="popstate"?e===jo?!1:(jo=e,!0):(jo=null,!1)}var xf=typeof setTimeout=="function"?setTimeout:void 0,$0=typeof clearTimeout=="function"?clearTimeout:void 0,hf=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof hf<"u"?function(e){return hf.resolve(null).then(e).catch(tx)}:xf;function tx(e){setTimeout(function(){throw e})}function Ba(e){return e==="head"}function gf(e,t){var l=t,s=0;do{var n=l.nextSibling;if(e.removeChild(l),n&&n.nodeType===8)if(l=n.data,l==="/$"||l==="/&"){if(s===0){e.removeChild(n),Zl(t);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")_s(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,_s(l);for(var r=l.firstChild;r;){var i=r.nextSibling,d=r.nodeName;r[ts]||d==="SCRIPT"||d==="STYLE"||d==="LINK"&&r.rel.toLowerCase()==="stylesheet"||l.removeChild(r),r=i}}else l==="body"&&_s(e.ownerDocument.body);l=n}while(l);Zl(t)}function pf(e,t){var l=e;e=0;do{var s=l.nextSibling;if(l.nodeType===1?t?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(t?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=s}while(l)}function No(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":No(l),Mr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function ax(e,t,l,s){for(;e.nodeType===1;){var n=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[ts])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Ht(e.nextSibling),e===null)break}return null}function lx(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Ht(e.nextSibling),e===null))return null;return e}function bf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ht(e.nextSibling),e===null))return null;return e}function wo(e){return e.data==="$?"||e.data==="$~"}function So(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function sx(e,t){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||l.readyState!=="loading")t();else{var s=function(){t(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Ht(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Co=null;function vf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(t===0)return Ht(e.nextSibling);t--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||t++}e=e.nextSibling}return null}function yf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(t===0)return e;t--}else l!=="/$"&&l!=="/&"||t++}e=e.previousSibling}return null}function jf(e,t,l){switch(t=Kn(l),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function _s(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Mr(e)}var Jt=new Map,Nf=new Set;function $n(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ma=w.d;w.d={f:nx,r:rx,D:ix,C:ox,L:cx,m:ux,X:fx,S:dx,M:mx};function nx(){var e=ma.f(),t=Qn();return e||t}function rx(e){var t=fl(e);t!==null&&t.tag===5&&t.type==="form"?Ou(t):ma.r(e)}var Ql=typeof document>"u"?null:document;function wf(e,t,l){var s=Ql;if(s&&typeof t=="string"&&t){var n=Lt(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof l=="string"&&(n+='[crossorigin="'+l+'"]'),Nf.has(n)||(Nf.add(n),e={rel:e,crossOrigin:l,href:t},s.querySelector(n)===null&&(t=s.createElement("link"),ut(t,"link",e),st(t),s.head.appendChild(t)))}}function ix(e){ma.D(e),wf("dns-prefetch",e,null)}function ox(e,t){ma.C(e,t),wf("preconnect",e,t)}function cx(e,t,l){ma.L(e,t,l);var s=Ql;if(s&&e&&t){var n='link[rel="preload"][as="'+Lt(t)+'"]';t==="image"&&l&&l.imageSrcSet?(n+='[imagesrcset="'+Lt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(n+='[imagesizes="'+Lt(l.imageSizes)+'"]')):n+='[href="'+Lt(e)+'"]';var r=n;switch(t){case"style":r=Yl(e);break;case"script":r=Vl(e)}Jt.has(r)||(e=L({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),Jt.set(r,e),s.querySelector(n)!==null||t==="style"&&s.querySelector(Os(r))||t==="script"&&s.querySelector(Us(r))||(t=s.createElement("link"),ut(t,"link",e),st(t),s.head.appendChild(t)))}}function ux(e,t){ma.m(e,t);var l=Ql;if(l&&e){var s=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+Lt(s)+'"][href="'+Lt(e)+'"]',r=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Vl(e)}if(!Jt.has(r)&&(e=L({rel:"modulepreload",href:e},t),Jt.set(r,e),l.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Us(r)))return}s=l.createElement("link"),ut(s,"link",e),st(s),l.head.appendChild(s)}}}function dx(e,t,l){ma.S(e,t,l);var s=Ql;if(s&&e){var n=ml(s).hoistableStyles,r=Yl(e);t=t||"default";var i=n.get(r);if(!i){var d={loading:0,preload:null};if(i=s.querySelector(Os(r)))d.loading=5;else{e=L({rel:"stylesheet",href:e,"data-precedence":t},l),(l=Jt.get(r))&&Mo(e,l);var C=i=s.createElement("link");st(C),ut(C,"link",e),C._p=new Promise(function(U,Z){C.onload=U,C.onerror=Z}),C.addEventListener("load",function(){d.loading|=1}),C.addEventListener("error",function(){d.loading|=2}),d.loading|=4,er(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:d},n.set(r,i)}}}function fx(e,t){ma.X(e,t);var l=Ql;if(l&&e){var s=ml(l).hoistableScripts,n=Vl(e),r=s.get(n);r||(r=l.querySelector(Us(n)),r||(e=L({src:e,async:!0},t),(t=Jt.get(n))&&ko(e,t),r=l.createElement("script"),st(r),ut(r,"link",e),l.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}function mx(e,t){ma.M(e,t);var l=Ql;if(l&&e){var s=ml(l).hoistableScripts,n=Vl(e),r=s.get(n);r||(r=l.querySelector(Us(n)),r||(e=L({src:e,async:!0,type:"module"},t),(t=Jt.get(n))&&ko(e,t),r=l.createElement("script"),st(r),ut(r,"link",e),l.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}function Sf(e,t,l,s){var n=(n=$.current)?$n(n):null;if(!n)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=Yl(l.href),l=ml(n).hoistableStyles,s=l.get(t),s||(s={type:"style",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Yl(l.href);var r=ml(n).hoistableStyles,i=r.get(e);if(i||(n=n.ownerDocument||n,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,i),(r=n.querySelector(Os(e)))&&!r._p&&(i.instance=r,i.state.loading=5),Jt.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Jt.set(e,l),r||xx(n,e,l,i.state))),t&&s===null)throw Error(c(528,""));return i}if(t&&s!==null)throw Error(c(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Vl(l),l=ml(n).hoistableScripts,s=l.get(t),s||(s={type:"script",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function Yl(e){return'href="'+Lt(e)+'"'}function Os(e){return'link[rel="stylesheet"]['+e+"]"}function Cf(e){return L({},e,{"data-precedence":e.precedence,precedence:null})}function xx(e,t,l,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),ut(t,"link",l),st(t),e.head.appendChild(t))}function Vl(e){return'[src="'+Lt(e)+'"]'}function Us(e){return"script[async]"+e}function Mf(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Lt(l.href)+'"]');if(s)return t.instance=s,st(s),s;var n=L({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),st(s),ut(s,"style",n),er(s,l.precedence,e),t.instance=s;case"stylesheet":n=Yl(l.href);var r=e.querySelector(Os(n));if(r)return t.state.loading|=4,t.instance=r,st(r),r;s=Cf(l),(n=Jt.get(n))&&Mo(s,n),r=(e.ownerDocument||e).createElement("link"),st(r);var i=r;return i._p=new Promise(function(d,C){i.onload=d,i.onerror=C}),ut(r,"link",s),t.state.loading|=4,er(r,l.precedence,e),t.instance=r;case"script":return r=Vl(l.src),(n=e.querySelector(Us(r)))?(t.instance=n,st(n),n):(s=l,(n=Jt.get(r))&&(s=L({},l),ko(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),st(n),ut(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,er(s,l.precedence,e));return t.instance}function er(e,t,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,r=n,i=0;i<s.length;i++){var d=s[i];if(d.dataset.precedence===t)r=d;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function Mo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ko(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var tr=null;function kf(e,t,l){if(tr===null){var s=new Map,n=tr=new Map;n.set(l,s)}else n=tr,s=n.get(l),s||(s=new Map,n.set(l,s));if(s.has(e))return s;for(s.set(e,null),l=l.getElementsByTagName(e),n=0;n<l.length;n++){var r=l[n];if(!(r[ts]||r[rt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var i=r.getAttribute(t)||"";i=e+i;var d=s.get(i);d?d.push(r):s.set(i,[r])}}return s}function Af(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function hx(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ef(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function gx(e,t,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var n=Yl(s.href),r=t.querySelector(Os(n));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ar.bind(e),t.then(e,e)),l.state.loading|=4,l.instance=r,st(r);return}r=t.ownerDocument||t,s=Cf(s),(n=Jt.get(n))&&Mo(s,n),r=r.createElement("link"),st(r);var i=r;i._p=new Promise(function(d,C){i.onload=d,i.onerror=C}),ut(r,"link",s),l.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,t),(t=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=ar.bind(e),t.addEventListener("load",l),t.addEventListener("error",l))}}var Ao=0;function px(e,t){return e.stylesheets&&e.count===0&&sr(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var s=setTimeout(function(){if(e.stylesheets&&sr(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&Ao===0&&(Ao=62500*P0());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&sr(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>Ao?50:800)+t);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(n)}}:null}function ar(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lr=null;function sr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lr=new Map,t.forEach(bx,e),lr=null,ar.call(e))}function bx(e,t){if(!(t.state.loading&4)){var l=lr.get(e);if(l)var s=l.get(null);else{l=new Map,lr.set(e,l);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var i=n[r];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(l.set(i.dataset.precedence,i),s=i)}s&&l.set(null,s)}n=t.instance,i=n.getAttribute("data-precedence"),r=l.get(i)||s,r===s&&l.set(null,n),l.set(i,n),this.count++,s=ar.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var Hs={$$typeof:ce,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function vx(e,t,l,s,n,r,i,d,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nr(0),this.hiddenUpdates=Nr(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Df(e,t,l,s,n,r,i,d,C,U,Z,ee){return e=new vx(e,t,l,i,C,U,Z,ee,d),t=1,r===!0&&(t|=24),r=St(3,null,null,t),e.current=r,r.stateNode=e,t=ri(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:s,isDehydrated:l,cache:t},ui(r),e}function Tf(e){return e?(e=wl,e):wl}function zf(e,t,l,s,n,r){n=Tf(n),s.context===null?s.context=n:s.pendingContext=n,s=Sa(t),s.payload={element:l},r=r===void 0?null:r,r!==null&&(s.callback=r),l=Ca(e,s,t),l!==null&&(yt(l,e,t),bs(l,e,t))}function Lf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function Eo(e,t){Lf(e,t),(e=e.alternate)&&Lf(e,t)}function Rf(e){if(e.tag===13||e.tag===31){var t=Wa(e,67108864);t!==null&&yt(t,e,67108864),Eo(e,67108864)}}function Bf(e){if(e.tag===13||e.tag===31){var t=Et();t=wr(t);var l=Wa(e,t);l!==null&&yt(l,e,t),Eo(e,t)}}var nr=!0;function yx(e,t,l,s){var n=v.T;v.T=null;var r=w.p;try{w.p=2,Do(e,t,l,s)}finally{w.p=r,v.T=n}}function jx(e,t,l,s){var n=v.T;v.T=null;var r=w.p;try{w.p=8,Do(e,t,l,s)}finally{w.p=r,v.T=n}}function Do(e,t,l,s){if(nr){var n=To(s);if(n===null)go(e,t,s,rr,l),_f(e,s);else if(wx(n,e,t,l,s))s.stopPropagation();else if(_f(e,s),t&4&&-1<Nx.indexOf(e)){for(;n!==null;){var r=fl(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var i=Ya(r.pendingLanes);if(i!==0){var d=r;for(d.pendingLanes|=2,d.entangledLanes|=2;i;){var C=1<<31-ne(i);d.entanglements[1]|=C,i&=~C}Ft(r),(Be&6)===0&&(qn=je()+500,Rs(0))}}break;case 31:case 13:d=Wa(r,2),d!==null&&yt(d,r,2),Qn(),Eo(r,2)}if(r=To(s),r===null&&go(e,t,s,rr,l),r===n)break;n=r}n!==null&&s.stopPropagation()}else go(e,t,s,null,l)}}function To(e){return e=zr(e),zo(e)}var rr=null;function zo(e){if(rr=null,e=dl(e),e!==null){var t=m(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=f(t),e!==null)return e;e=null}else if(l===31){if(e=k(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rr=e,null}function If(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xt()){case ga:return 2;case Fs:return 8;case Ga:case yr:return 32;case Xs:return 268435456;default:return 32}default:return 32}}var Lo=!1,Ia=null,_a=null,Oa=null,Js=new Map,qs=new Map,Ua=[],Nx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _f(e,t){switch(e){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":Js.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qs.delete(t.pointerId)}}function Gs(e,t,l,s,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:l,eventSystemFlags:s,nativeEvent:r,targetContainers:[n]},t!==null&&(t=fl(t),t!==null&&Rf(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function wx(e,t,l,s,n){switch(t){case"focusin":return Ia=Gs(Ia,e,t,l,s,n),!0;case"dragenter":return _a=Gs(_a,e,t,l,s,n),!0;case"mouseover":return Oa=Gs(Oa,e,t,l,s,n),!0;case"pointerover":var r=n.pointerId;return Js.set(r,Gs(Js.get(r)||null,e,t,l,s,n)),!0;case"gotpointercapture":return r=n.pointerId,qs.set(r,Gs(qs.get(r)||null,e,t,l,s,n)),!0}return!1}function Of(e){var t=dl(e.target);if(t!==null){var l=m(t);if(l!==null){if(t=l.tag,t===13){if(t=f(l),t!==null){e.blockedOn=t,Po(e.priority,function(){Bf(l)});return}}else if(t===31){if(t=k(l),t!==null){e.blockedOn=t,Po(e.priority,function(){Bf(l)});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ir(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=To(e.nativeEvent);if(l===null){l=e.nativeEvent;var s=new l.constructor(l.type,l);Tr=s,l.target.dispatchEvent(s),Tr=null}else return t=fl(l),t!==null&&Rf(t),e.blockedOn=l,!1;t.shift()}return!0}function Uf(e,t,l){ir(e)&&l.delete(t)}function Sx(){Lo=!1,Ia!==null&&ir(Ia)&&(Ia=null),_a!==null&&ir(_a)&&(_a=null),Oa!==null&&ir(Oa)&&(Oa=null),Js.forEach(Uf),qs.forEach(Uf)}function or(e,t){e.blockedOn===t&&(e.blockedOn=null,Lo||(Lo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Sx)))}var cr=null;function Hf(e){cr!==e&&(cr=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){cr===e&&(cr=null);for(var t=0;t<e.length;t+=3){var l=e[t],s=e[t+1],n=e[t+2];if(typeof s!="function"){if(zo(s||l)===null)continue;break}var r=fl(l);r!==null&&(e.splice(t,3),t-=3,Di(r,{pending:!0,data:n,method:l.method,action:s},s,n))}}))}function Zl(e){function t(C){return or(C,e)}Ia!==null&&or(Ia,e),_a!==null&&or(_a,e),Oa!==null&&or(Oa,e),Js.forEach(t),qs.forEach(t);for(var l=0;l<Ua.length;l++){var s=Ua[l];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ua.length&&(l=Ua[0],l.blockedOn===null);)Of(l),l.blockedOn===null&&Ua.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var n=l[s],r=l[s+1],i=n[xt]||null;if(typeof r=="function")i||Hf(l);else if(i){var d=null;if(r&&r.hasAttribute("formAction")){if(n=r,i=r[xt]||null)d=i.formAction;else if(zo(n)!==null)continue}else d=i.action;typeof d=="function"?l[s+1]=d:(l.splice(s,3),s-=3),Hf(l)}}}function Jf(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(i){return n=i})},focusReset:"manual",scroll:"manual"})}function t(){n!==null&&(n(),n=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),n!==null&&(n(),n=null)}}}function Ro(e){this._internalRoot=e}ur.prototype.render=Ro.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var l=t.current,s=Et();zf(l,s,e,t,null,null)},ur.prototype.unmount=Ro.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zf(e.current,2,null,e,null,null),Qn(),t[ul]=null}};function ur(e){this._internalRoot=e}ur.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wo();e={blockedOn:null,target:e,priority:t};for(var l=0;l<Ua.length&&t!==0&&t<Ua[l].priority;l++);Ua.splice(l,0,e),l===0&&Of(e)}};var qf=b.version;if(qf!=="19.2.3")throw Error(c(527,qf,"19.2.3"));w.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=j(t),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var Cx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:v,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dr.isDisabled&&dr.supportsFiber)try{Qa=dr.inject(Cx),S=dr}catch{}}return Ys.createRoot=function(e,t){if(!p(e))throw Error(c(299));var l=!1,s="",n=Fu,r=Xu,i=Wu;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Df(e,1,!1,null,null,l,s,null,n,r,i,Jf),e[ul]=t.current,ho(e),new Ro(t)},Ys.hydrateRoot=function(e,t,l){if(!p(e))throw Error(c(299));var s=!1,n="",r=Fu,i=Xu,d=Wu,C=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(n=l.identifierPrefix),l.onUncaughtError!==void 0&&(r=l.onUncaughtError),l.onCaughtError!==void 0&&(i=l.onCaughtError),l.onRecoverableError!==void 0&&(d=l.onRecoverableError),l.formState!==void 0&&(C=l.formState)),t=Df(e,1,!0,t,l??null,s,n,C,r,i,d,Jf),t.context=Tf(null),l=t.current,s=Et(),s=wr(s),n=Sa(s),n.callback=null,Ca(l,n,s),l=s,t.current.lanes=l,es(t,l),Ft(t),e[ul]=t.current,ho(e),new ur(t)},Ys.version="19.2.3",Ys}var Kf;function Rx(){if(Kf)return _o.exports;Kf=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(b){console.error(b)}}return o(),_o.exports=Lx(),_o.exports}var Bx=Rx();const Ix=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_x=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(b,u,c)=>c?c.toUpperCase():u.toLowerCase()),$f=o=>{const b=_x(o);return b.charAt(0).toUpperCase()+b.slice(1)},rm=(...o)=>o.filter((b,u,c)=>!!b&&b.trim()!==""&&c.indexOf(b)===u).join(" ").trim(),Ox=o=>{for(const b in o)if(b.startsWith("aria-")||b==="role"||b==="title")return!0};var Ux={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hx=h.forwardRef(({color:o="currentColor",size:b=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:p="",children:m,iconNode:f,...k},N)=>h.createElement("svg",{ref:N,...Ux,width:b,height:b,stroke:o,strokeWidth:c?Number(u)*24/Number(b):u,className:rm("lucide",p),...!m&&!Ox(k)&&{"aria-hidden":"true"},...k},[...f.map(([j,E])=>h.createElement(j,E)),...Array.isArray(m)?m:[m]]));const jt=(o,b)=>{const u=h.forwardRef(({className:c,...p},m)=>h.createElement(Hx,{ref:m,iconNode:b,className:rm(`lucide-${Ix($f(o))}`,`lucide-${o}`,c),...p}));return u.displayName=$f(o),u};const Jx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gr=jt("circle-alert",Jx);const qx=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],im=jt("circle-check-big",qx);const Gx=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],om=jt("cog",Gx);const Qx=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Yx=jt("eye-off",Qx);const Vx=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zx=jt("eye",Vx);const Fx=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Xx=jt("file",Fx);const Wx=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Qo=jt("folder-open",Wx);const Px=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],cm=jt("key",Px);const Kx=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],em=jt("loader-circle",Kx);const $x=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],um=jt("refresh-cw",$x);const eh=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],th=jt("save",eh);const ah=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vs=jt("settings",ah);const lh=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],sh=jt("sliders-vertical",lh);const nh=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hr=jt("x",nh),rh=({isOpen:o,title:b="Reset to Defaults",description:u="Choose how you want to reset. You can reset everything (including API keys) or keep your API keys and reset all other settings.",onClose:c,onFullReset:p,onSoftReset:m})=>o?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:b}),a.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u&&a.jsx("p",{className:"text-gray-600 mb-4",children:u}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:p,className:"w-full box-border bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-normal break-words text-center",children:"Full Reset (clear API keys)"}),a.jsx("button",{onClick:m,className:"w-full box-border bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-normal break-words text-center",children:"Reset (keep API keys)"}),a.jsx("button",{onClick:c,className:"w-full box-border bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors whitespace-normal break-words text-center",children:"Cancel"})]})]})}):null,fr={apiKeys:{openai:"",piapi:"",runware:"",removeBg:""},filePaths:{outputDirectory:"",tempDirectory:"",systemPromptFile:"",keywordsFile:"",qualityCheckPromptFile:"",metadataPromptFile:""},parameters:{processMode:"relax",aspectRatios:["1:1","16:9","9:16"],mjVersion:"6.1",openaiModel:"gpt-4o",runwareModel:"runware:101@1",runwareDimensionsCsv:"",runwareFormat:"png",variations:1,runwareAdvancedEnabled:!1,loraEnabled:!1,label:"",pollingTimeout:15,pollingInterval:1,enablePollingTimeout:!0,keywordRandom:!1,count:1,generationRetryAttempts:1,generationRetryBackoffMs:0},processing:{removeBg:!1,removeBgFailureMode:"soft",imageConvert:!1,imageEnhancement:!1,sharpening:5,saturation:1.4,convertToJpg:!1,convertToWebp:!1,trimTransparentBackground:!1,jpgBackground:"white",jpgQuality:85,pngQuality:100,webpQuality:85,removeBgSize:"auto"},ai:{runQualityCheck:!0,runMetadataGen:!0},advanced:{debugMode:!1}};function ih(o={}){const{onSave:b,onReset:u,error:c,success:p}=o,[m,f]=h.useState(fr),[k,N]=h.useState(fr),[j,E]=h.useState(0),[L,B]=h.useState("api-keys"),[P,I]=h.useState(!1),[F,se]=h.useState(!1),[re,ie]=h.useState(!1),[ce,le]=h.useState(null),[ue,ae]=h.useState(null),[z,T]=h.useState(!1),H=h.useCallback(async()=>{try{if(typeof window<"u"&&window.electronAPI?.getSettings){const oe=await window.electronAPI.getSettings();oe&&oe.success&&oe.settings&&(f(oe.settings),N(oe.settings),E(v=>v+1),I(!1))}}catch(oe){console.error("Error loading settings:",oe),le("Failed to load settings"),se(!0),setTimeout(()=>se(!1),3e3)}},[]);h.useEffect(()=>{H()},[H]),h.useEffect(()=>{c&&(le(c),se(!0))},[c]),h.useEffect(()=>{p&&(ae(p),ie(!0),setTimeout(()=>ie(!1),3e3))},[p]),h.useEffect(()=>{const oe=v=>{v.key==="Escape"&&(se(!1),ie(!1))};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[]);const Q=h.useCallback((oe,v)=>w=>{const X=w.target,y=X.type==="number"?X.value===""?"":parseInt(X.value,10):X.value;N(x=>({...x,[oe]:{...x[oe],[v]:y}})),I(!0)},[]),M=h.useCallback((oe,v)=>w=>{N(X=>({...X,[oe]:{...X[oe],[v]:w}})),I(!0)},[]),G=h.useCallback(async()=>{try{typeof window<"u"&&window.electronAPI?.saveSettings&&await window.electronAPI.saveSettings(k),f(k),I(!1),ae("Settings saved"),ie(!0),setTimeout(()=>ie(!1),3e3),b?.(k)}catch(oe){console.error("Error saving settings:",oe),le("Failed to save settings"),se(!0),setTimeout(()=>se(!1),3e3)}},[k,b]),_=h.useCallback(()=>{T(!0)},[]),de=h.useCallback(oe=>{const v=oe?fr.apiKeys:k.apiKeys,w={...fr,apiKeys:v};f(w),N(w),I(!0),E(X=>X+1),T(!1),u?.()},[k.apiKeys,u]);return{settings:m,form:k,setForm:N,formVersion:j,setFormVersion:E,activeTab:L,setActiveTab:B,hasUnsavedChanges:P,setHasUnsavedChanges:I,showError:F,setShowError:se,showSuccess:re,setShowSuccess:ie,localError:ce,setLocalError:le,localSuccess:ue,setLocalSuccess:ae,showResetDialog:z,setShowResetDialog:T,loadSettings:H,handleInputChange:Q,handleToggleChange:M,handleSave:G,handleResetClick:_,executeReset:de}}const oh={openai:!1,piapi:!1,runware:!1,removeBg:!1};function ch(){const[o,b]=h.useState({...oh}),u=h.useCallback(c=>{b(p=>({...p,[c]:!p[c]}))},[]);return{showPasswords:o,setShowPasswords:b,togglePasswordVisibility:u}}function uh(o){return{updateFilePath:h.useCallback((u,c)=>{o(p=>({...p,filePaths:{...p.filePaths,[u]:c}}))},[o])}}function dh({form:o,setForm:b,setHasUnsavedChanges:u,showPasswords:c,togglePasswordVisibility:p,inputRefs:m}){return a.jsxs("div",{className:"space-y-6","data-testid":"api-keys-section",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"API Keys"}),a.jsx(cm,{className:"h-5 w-5 text-gray-400"})]}),a.jsx("div",{className:"space-y-4",children:Object.entries({openai:"OpenAI API Key",runware:"Runware API Key",removeBg:"Remove.bg API Key"}).map(([f,k])=>{const N=`apiKeys-${f}`;return a.jsxs("div",{children:[a.jsx("label",{htmlFor:`${f}-key`,className:"block text-sm font-medium text-gray-700 mb-2",children:k}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:`${f}-key`,"data-testid":`${f}-api-key-input`,ref:j=>{m.current[N]=j},type:c[f]?"text":"password",defaultValue:o.apiKeys[f],onBlur:j=>{const E=j.currentTarget.value;b(L=>({...L,apiKeys:{...L.apiKeys,[f]:E}})),u(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`Enter ${f} API key...`}),a.jsx("button",{type:"button",onClick:()=>p(f),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c[f]?a.jsx(Yx,{className:"h-4 w-4 text-gray-400"}):a.jsx(Zx,{className:"h-4 w-4 text-gray-400"})})]})]},f)})})]})}const Fl=({label:o,value:b,onChange:u,onValidation:c,type:p,fileTypes:m=[],accept:f,placeholder:k="Select file or directory",disabled:N=!1,required:j=!1,className:E,error:L})=>{const[B,P]=h.useState("idle"),[I,F]=h.useState(""),[se,re]=h.useState("idle"),[ie,ce]=h.useState([]),[le,ue]=h.useState(!1),[ae,z]=h.useState(!1),T=h.useRef(null),H=h.useRef(null),Q=h.useRef(null),M=h.useMemo(()=>f?f.split(",").map(y=>y.trim().startsWith(".")?y.trim():`.${y.trim()}`):m,[f,m]);h.useEffect(()=>{},[]),h.useEffect(()=>{b&&window.electronAPI?.validatePath?_(b):(P("idle"),F(""),c?.(!1))},[b,c]),h.useEffect(()=>{const y=x=>{Q.current&&!Q.current.contains(x.target)&&ue(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const G=async y=>{},_=h.useCallback(async y=>{if(!y||y.trim()==="")return{isValid:!1,message:j?"Path is required":""};P("validating");try{if(window.electronAPI?.validatePath){const x=await window.electronAPI.validatePath(y,p,M);return x.isValid?(P("valid"),F(""),c?.(!0),{isValid:!0}):(P("invalid"),F(x.message||"Invalid path"),c?.(!1),{isValid:!1,message:x.message})}else{const x=y.length>0;return P(x?"valid":"invalid"),F(x?"":"Invalid path"),c?.(x),{isValid:x}}}catch{return P("invalid"),F("Error validating path"),c?.(!1),{isValid:!1,message:"Error validating path"}}},[p,M,j,c]),de=h.useCallback(async()=>{if(!(N||ae))try{if(z(!0),window.electronAPI?.selectFile){const y=await window.electronAPI.selectFile({type:p,fileTypes:M.length>0?M:void 0,title:`Select ${p==="directory"?"Directory":"File"}`});y.success&&y.filePath&&(u(y.filePath),await G(y.filePath))}else console.warn("Electron API not available - file dialog not supported in test environment")}catch(y){console.error("Error opening file dialog:",y),F("Error opening file dialog")}finally{z(!1)}},[N,ae,p,M,b,u]),oe=h.useCallback(y=>{const x=y.target.value;u(x)},[u]);h.useCallback(y=>{y.preventDefault(),y.stopPropagation(),N||re("dragover")},[N]),h.useCallback(y=>{y.preventDefault(),y.stopPropagation(),T.current?.contains(y.relatedTarget)||re("idle")},[]),h.useCallback(async y=>{if(y.preventDefault(),y.stopPropagation(),re("idle"),!N)try{const x=Array.from(y.dataTransfer.files);if(x.length===0)return;if(M.length>0){const Y=x[0].name.toLowerCase();if(!M.some($=>Y.endsWith($.toLowerCase()))){F("Unsupported file type"),c?.(!1);return}}const g=x[0];if(window.electronAPI?.selectFile){console.log("Drag-and-drop detected, but using file dialog for path selection"),F("Please use the Browse button to select files"),c?.(!1);return}else{console.log("Drag-and-drop not supported in web environment"),F("Drag-and-drop not supported in this environment"),c?.(!1);return}}catch(x){console.error("Error handling dropped files:",x),F("Error processing dropped files")}},[N,p,u,M,c]),h.useCallback(async y=>{u(y),ue(!1),await G()},[u]);const v=h.useCallback(()=>{u(""),ue(!1)},[u]),w=()=>{const y="flex-1 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors",x=E||"";return N?`${y} bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed ${x}`:L||B==="invalid"&&I?`${y} border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500 ${x}`:B==="valid"?`${y} border-green-300 text-green-900 focus:ring-green-500 focus:border-green-500 ${x}`:`${y} border-gray-300 focus:ring-blue-500 focus:border-blue-500 ${x}`},X=()=>null,fe=()=>B==="validating"?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[a.jsx(em,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Validating path..."})]}):B==="valid"?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[a.jsx(im,{className:"w-4 h-4"}),a.jsx("span",{children:"Valid path"})]}):B==="invalid"&&I?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",role:"alert",children:[a.jsx(gr,{className:"w-4 h-4"}),a.jsx("span",{children:I})]}):null;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{htmlFor:`file-selector-${o.replace(/\s+/g,"-").toLowerCase()}`,className:"block text-sm font-medium text-gray-700",children:[o,j&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:H,id:`file-selector-${o.replace(/\s+/g,"-").toLowerCase()}`,type:"text",value:b,onChange:oe,className:w(),placeholder:k,disabled:N,readOnly:p!=="file"&&p!=="directory","aria-describedby":`${o}-help ${o}-error`,"aria-invalid":B==="invalid"}),b&&a.jsx("button",{type:"button",onClick:v,disabled:N,className:"px-3 py-2 border border-gray-300 rounded-md text-gray-600 hover:text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Clear path",children:a.jsx(hr,{className:"w-4 h-4"})}),a.jsxs("button",{type:"button",onClick:de,disabled:N||ae,className:"px-4 py-2 bg-blue-600 text-white border border-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[ae?a.jsx(em,{className:"w-4 h-4 animate-spin"}):p==="directory"?a.jsx(Qo,{className:"w-4 h-4"}):a.jsx(Xx,{className:"w-4 h-4"}),"Browse"]})]}),a.jsx(X,{}),a.jsx(fe,{}),L&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",role:"alert",children:[a.jsx(gr,{className:"w-4 h-4"}),a.jsx("span",{children:L})]}),a.jsx("div",{id:`${o}-help`,className:"text-xs text-gray-500",children:p==="directory"?"Select a directory":"Select a file"})]})};function fh({form:o,handleInputChange:b}){return a.jsxs("div",{className:"space-y-6","data-testid":"file-paths-section",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"File Paths"}),a.jsx(Qo,{className:"h-5 w-5 text-gray-400"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Fl,{label:"Output Directory",value:o.filePaths.outputDirectory,onChange:u=>b("filePaths","outputDirectory")({target:{value:u}}),type:"directory",placeholder:"Select directory for processed images",required:!1}),a.jsx(Fl,{label:"Temp Directory",value:o.filePaths.tempDirectory,onChange:u=>b("filePaths","tempDirectory")({target:{value:u}}),type:"directory",placeholder:"Select directory for temporary files",required:!1}),a.jsx(Fl,{label:"System Prompt File",value:o.filePaths.systemPromptFile,onChange:u=>b("filePaths","systemPromptFile")({target:{value:u}}),type:"file",fileTypes:[".txt"],placeholder:"Select system prompt file (.txt only)",required:!1}),a.jsx(Fl,{label:"Keywords File",value:o.filePaths.keywordsFile,onChange:u=>b("filePaths","keywordsFile")({target:{value:u}}),type:"file",fileTypes:[".txt",".csv"],placeholder:"Select keywords file (.txt or .csv)",required:!1}),a.jsx(Fl,{label:"Quality Check Prompt File",value:o.filePaths.qualityCheckPromptFile,onChange:u=>b("filePaths","qualityCheckPromptFile")({target:{value:u}}),type:"file",fileTypes:[".txt"],placeholder:"Select quality check prompt file (.txt only)",required:!1}),a.jsx(Fl,{label:"Metadata Prompt File",value:o.filePaths.metadataPromptFile,onChange:u=>b("filePaths","metadataPromptFile")({target:{value:u}}),type:"file",fileTypes:[".txt"],placeholder:"Select metadata prompt file (.txt only)",required:!1})]})]})}function mh({form:o,setForm:b,setHasUnsavedChanges:u}){return a.jsxs("div",{className:"space-y-6","data-testid":"parameters-section",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI Model Parameters"}),a.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure parameters for Runware and OpenAI."})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Generation Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"count",className:"block text-sm font-medium text-gray-700 mb-2",children:"Generations count"}),a.jsx("input",{id:"count",type:"number",defaultValue:String(o.parameters.count),onBlur:c=>{const p=parseInt(c.currentTarget.value||"1",10),m=Math.min(2500,Math.max(1,isNaN(p)?1:p)),f=Math.max(1,Math.min(20,Number(o.parameters.variations||1))),k=Math.max(1,Math.min(20,Math.floor(1e4/m))),N=Math.min(f,k);b(j=>({...j,parameters:{...j.parameters,count:m,variations:N}})),u(!0)},onWheel:c=>{c.target.blur()},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:1,max:2500}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of generations (up to 2500 generations)."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"runware-variations",className:"block text-sm font-medium text-gray-700 mb-2",children:"Variations per generation (120)"}),a.jsx("input",{id:"runware-variations",type:"number",defaultValue:String(o.parameters.variations??1),onBlur:c=>{const p=parseInt(c.currentTarget.value||"1",10),m=Math.max(1,Math.min(20,isNaN(p)?1:p)),f=Math.max(1,Number(o.parameters.count||1)),k=Math.max(1,Math.floor(1e4/m)),N=Math.min(f,k);b(j=>({...j,parameters:{...j.parameters,variations:m,count:N}})),u(!0)},onWheel:c=>{c.target.blur()},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:1,max:20}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total images = Generations  Variations (cap 10,000)"})]})]})]})})]})}const We=({checked:o,onChange:b,disabled:u=!1,className:c="",ariaLabel:p})=>a.jsx("button",{type:"button",role:"switch","aria-checked":o,"aria-label":p,disabled:u,onClick:()=>!u&&b(!o),style:{position:"relative",display:"inline-flex",alignItems:"center",width:"44px",height:"24px",borderRadius:"12px",border:"none",cursor:u?"not-allowed":"pointer",backgroundColor:o?"#2563eb":"#e5e7eb",transition:"background-color 0.2s ease-in-out",opacity:u?.5:1,outline:"none"},className:c,children:a.jsx("span",{style:{position:"absolute",left:o?"22px":"2px",width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease-in-out",transform:"translateX(0)"}})});function xh({form:o,setForm:b,setHasUnsavedChanges:u,handleInputChange:c,handleToggleChange:p}){const m=o.processing.removeBg;return a.jsxs("div",{className:"space-y-6","data-testid":"processing-section",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Image Processing"}),a.jsx(om,{className:"h-5 w-5 text-gray-400"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remove Background"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Remove background from generated images"})]}),a.jsx(We,{checked:o.processing.removeBg,onChange:p("processing","removeBg")})]}),m&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"remove-bg-size",className:"block text-sm font-medium text-gray-700 mb-2",children:"Remove.bg Size"}),a.jsxs("select",{id:"remove-bg-size",value:o.processing.removeBgSize,onChange:c("processing","removeBgSize"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"auto",children:"Auto"}),a.jsx("option",{value:"preview",children:"Preview"}),a.jsx("option",{value:"full",children:"Full"}),a.jsx("option",{value:"50MP",children:"50MP"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Size setting for Remove.bg API"})]}),m&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"remove-bg-failure-mode",className:"block text-sm font-medium text-gray-700 mb-2",children:"On remove.bg failure"}),a.jsxs("select",{id:"remove-bg-failure-mode",value:o.processing.removeBgFailureMode||"approve",onChange:f=>{b(k=>({...k,processing:{...k.processing,removeBgFailureMode:f.target.value}})),u(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"mark_failed",children:"Mark Failed (technical fail)"}),a.jsx("option",{value:"approve",children:"Approve (soft fail)"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose whether images should be auto-approved or marked failed if remove.bg fails."})]})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image Convert"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Enable image conversion and processing"})]}),a.jsx(We,{checked:o.processing.imageConvert,onChange:p("processing","imageConvert")})]})})]})]})}function hh({form:o,handleToggleChange:b}){return a.jsxs("div",{className:"space-y-6","data-testid":"ai-section",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Features"}),a.jsx(Vs,{className:"h-5 w-5 text-gray-400"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Quality Check"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Use AI to check image quality"})]}),a.jsx(We,{checked:o.ai.runQualityCheck,onChange:b("ai","runQualityCheck")})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Metadata Generation"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Generate metadata using AI"})]}),a.jsx(We,{checked:o.ai.runMetadataGen,onChange:b("ai","runMetadataGen")})]})]})]})}function gh({form:o,handleToggleChange:b}){return a.jsxs("div",{className:"space-y-6","data-testid":"advanced-section",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Advanced Settings"}),a.jsx(Vs,{className:"h-5 w-5 text-gray-400"})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Debug Mode"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Enable detailed logging and debugging"})]}),a.jsx(We,{checked:o.advanced.debugMode,onChange:b("advanced","debugMode")})]})})]})}const ph=[{id:"api-keys",label:"API Keys",icon:cm},{id:"files",label:"File Paths",icon:Qo},{id:"parameters",label:"Parameters",icon:sh},{id:"processing",label:"Processing",icon:om},{id:"ai",label:"AI Features",icon:Vs},{id:"advanced",label:"Advanced",icon:Vs}],bh=({onSave:o,onReset:b,onBack:u,onOpenDashboard:c,isLoading:p=!1,error:m=null,success:f=null})=>{const k=h.useRef({}),N=ih({onSave:o,onReset:b,error:m,success:f}),j=ch();uh(N.setForm);const{form:E,formVersion:L,activeTab:B,setActiveTab:P,hasUnsavedChanges:I,showError:F,setShowError:se,showSuccess:re,setShowSuccess:ie,localError:ce,localSuccess:le,showResetDialog:ue,setShowResetDialog:ae,handleInputChange:z,handleToggleChange:T,handleSave:H,handleResetClick:Q,executeReset:M}=N,G=()=>{switch(B){case"api-keys":return a.jsx(dh,{form:E,setForm:N.setForm,setHasUnsavedChanges:N.setHasUnsavedChanges,showPasswords:j.showPasswords,togglePasswordVisibility:j.togglePasswordVisibility,inputRefs:k});case"files":return a.jsx(fh,{form:E,handleInputChange:z});case"parameters":return a.jsx(mh,{form:E,setForm:N.setForm,setHasUnsavedChanges:N.setHasUnsavedChanges});case"processing":return a.jsx(xh,{form:E,setForm:N.setForm,setHasUnsavedChanges:N.setHasUnsavedChanges,handleInputChange:z,handleToggleChange:T});case"ai":return a.jsx(hh,{form:E,handleToggleChange:T});case"advanced":return a.jsx(gh,{form:E,handleToggleChange:T});default:return null}};return a.jsxs("div",{className:"flex h-screen bg-gray-50","data-testid":"settings-panel",children:[a.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Vs,{className:"w-6 h-6 text-blue-600"}),a.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Settings"})]}),u&&a.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Back to main view",children:a.jsx(hr,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Configure your application settings and API keys"}),c&&a.jsx("div",{className:"mt-4 pl-6 pr-16",children:a.jsxs("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 px-3 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors","aria-label":"Open Dashboard",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]})})]}),a.jsx("nav",{className:"flex-1 p-4 pr-8",children:a.jsx("ul",{className:"space-y-1",role:"tablist",children:ph.map(_=>{const de=_.icon,oe=B===_.id;return a.jsx("li",{className:"flex justify-center",children:a.jsxs("button",{role:"tab","aria-selected":oe,"aria-controls":`${_.id}-panel`,"data-testid":`${_.id}-tab`,onClick:()=>P(_.id),onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),P(_.id))},className:`flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors ${oe?"bg-blue-100 text-blue-700 border-blue-200":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[a.jsx(de,{className:"w-4 h-4"}),_.label]})},_.id)})})})]}),a.jsxs("main",{className:"flex-1 flex flex-col",children:[F&&(m||ce)&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 m-4 rounded-md",role:"alert","data-testid":"error-message",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(gr,{className:"w-5 h-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:m||ce})]}),a.jsx("button",{onClick:()=>se(!1),className:"text-red-400 hover:text-red-600 transition-colors","aria-label":"Dismiss error",children:a.jsx(hr,{className:"w-4 h-4"})})]})}),re&&(f||le)&&a.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 m-4 rounded-md",role:"alert","data-testid":"success-message",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(im,{className:"w-5 h-5 text-green-400 mr-2"}),a.jsx("p",{className:"text-sm text-green-700",children:f||le})]}),a.jsx("button",{onClick:()=>ie(!1),className:"text-green-400 hover:text-green-600 transition-colors","aria-label":"Dismiss success",children:a.jsx(hr,{className:"w-4 h-4"})})]})}),a.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:G()},L)}),a.jsx("div",{className:"border-t border-gray-200 bg-white p-4",children:a.jsxs("div",{className:"flex flex-col items-center justify-center max-w-4xl mx-auto gap-3",children:[a.jsx("div",{className:"h-6 flex items-center justify-center",children:I&&a.jsxs("div",{className:"text-sm text-amber-600 flex items-center gap-2",children:[a.jsx(gr,{className:"w-4 h-4"}),"You have unsaved changes"]})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:H,disabled:p||!I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"save-button",children:[a.jsx(th,{className:"w-4 h-4"}),p?"Saving...":"Save Settings"]}),a.jsxs("button",{onClick:Q,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"reset-button",children:[a.jsx(um,{className:"w-4 h-4"}),"Reset to Defaults"]})]})]})})]}),a.jsx(rh,{isOpen:ue,onClose:()=>ae(!1),onFullReset:()=>M(!0),onSoftReset:()=>M(!1),title:"Reset Settings",description:"Reset all settings to defaults. Choose Full Reset to also clear API keys, or Reset to keep your API keys."})]})},vh=({onOpenFailedImagesReview:o,onOpenSettings:b,onOpenJobs:u})=>{const[c,p]=Te.useState(!1),[m,f]=Te.useState({top:0,left:0}),k=Te.useRef(null),N=320;return a.jsxs("div",{className:"relative",children:[a.jsx("button",{"aria-label":"Open menu",title:"Menu",ref:k,onClick:()=>{const j=k.current?.getBoundingClientRect();if(j){const E=j.bottom+8,L=j.right-N,B=window.innerWidth-N-8,P=Math.max(8,Math.min(L,B));f({top:E,left:P})}p(E=>!E)},className:"p-2 rounded-md hover:bg-gray-100 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c&&a.jsx("div",{className:"fixed min-w-[20rem] bg-white border border-gray-200 rounded-lg shadow-xl z-50 overflow-hidden",style:{top:`${m.top}px`,left:`${m.left}px`,width:`${N}px`},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide text-center",children:"Navigate"}),a.jsxs("button",{onClick:()=>{p(!1),o&&o()},className:"w-full py-2 text-sm text-gray-700 hover:bg-gray-50 grid place-items-center grid-flow-col auto-cols-max gap-2",children:[a.jsxs("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),a.jsx("span",{children:"Failed Images Review"})]}),a.jsxs("button",{onClick:()=>{p(!1),b&&b()},className:"w-full py-2 text-sm text-gray-700 hover:bg-gray-50 grid place-items-center grid-flow-col auto-cols-max gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),a.jsx("span",{children:"Settings"})]}),a.jsxs("button",{onClick:()=>{p(!1),u&&u()},className:"w-full py-2 text-sm text-gray-700 hover:bg-gray-50 grid place-items-center grid-flow-col auto-cols-max gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-6h13M9 7h13M5 7h.01M5 17h.01M5 12h.01"})}),a.jsx("span",{children:"Job Management"})]})]})}),c&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)})]})},yh=({jobStatus:o,onStartJob:b,onStopJob:u,onRefresh:c,isLoading:p})=>{const m=o==="error"?"failed":o,f=m==="running"||m==="starting",k=m==="idle"||m==="completed"||m==="failed"||m==="stopped",N=f;return a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:b,onKeyDown:j=>{j.key==="Enter"&&k&&!p&&b()},disabled:!k||p,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${k&&!p?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-label":"Start job",children:p&&m==="starting"?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Starting..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Start Job"]})}),a.jsx("button",{onClick:u,onKeyDown:j=>{j.key==="Enter"&&N&&!p&&u()},disabled:!N||p,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${N&&!p?"bg-red-600 hover:bg-red-700 focus:ring-red-500 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-label":"Stop job",children:p&&(m==="running"||m==="stopping")?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Stopping..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})}),"Stop Job"]})}),a.jsxs("button",{onClick:c,onKeyDown:j=>{j.key==="Enter"&&!p&&c()},disabled:p,className:`inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${p?"bg-gray-100 text-gray-400 cursor-not-allowed border-gray-200":"bg-white hover:bg-gray-50 focus:ring-blue-500 text-gray-700 border-gray-300"}`,"aria-label":"Refresh data",title:"Refresh job history and statistics",children:[a.jsxs("svg",{className:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]}),"Refresh"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${m==="idle"?"bg-gray-400":m==="starting"?"bg-yellow-400":m==="running"?"bg-green-400":m==="completed"?"bg-blue-400":m==="failed"?"bg-red-400":"bg-gray-400"}`}),a.jsxs("span",{className:`text-sm ${m==="idle"?"bg-green-100 text-green-800 px-2 py-1 rounded-full":m==="starting"?"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full":m==="running"?"bg-blue-100 text-blue-800 px-2 py-1 rounded-full":m==="completed"?"bg-green-100 text-green-800 px-2 py-1 rounded-full":m==="failed"?"bg-red-100 text-red-800 px-2 py-1 rounded-full":"bg-gray-100 text-gray-800 px-2 py-1 rounded-full"}`,children:[m==="idle"&&"Ready",m==="starting"&&"Starting...",m==="running"&&"Running",m==="completed"&&"Completed",m==="failed"&&"Failed",m==="stopped"&&"Stopped"]})]})]})},jh=({onForceStop:o,isLoading:b})=>{const[u,c]=h.useState(!1);Te.useEffect(()=>{if(!u)return;const m=f=>{f.key==="Escape"&&c(!1)};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[u]);const p=()=>{c(!1),o()};return a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>c(!0),disabled:b,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors bg-red-600 hover:bg-red-700 focus:ring-red-500 text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"Force stop all processes",children:b?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Stopping..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Force Stop"]})}),u&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:()=>c(!1),children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:m=>m.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Force Stop All Processes"})})]}),a.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Emergency Stop"}),a.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[a.jsx("p",{children:"This will immediately terminate all running processes, including:"}),a.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Image generation processes"}),a.jsx("li",{children:"Quality check operations"}),a.jsx("li",{children:"Background tasks"}),a.jsx("li",{children:"Any other running jobs"})]}),a.jsx("p",{className:"mt-2 font-medium text-red-600",children:"This action cannot be undone and may result in data loss."})]})]})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 bg-gray-50 rounded-b-lg",children:[a.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),a.jsx("button",{onClick:p,disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:b?a.jsxs("div",{className:"flex items-center",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Stopping..."]}):"Force Stop All"})]})]})})]})},Nh=({statistics:o})=>a.jsxs("div",{className:"flex items-center flex-wrap gap-x-6 gap-y-2 justify-end ml-auto",children:[a.jsxs("div",{className:"text-sm whitespace-nowrap",children:[a.jsx("span",{className:"text-gray-600",children:"Total Jobs:"}),a.jsx("span",{className:"ml-1 font-semibold text-blue-600",children:o.totalJobs})]}),a.jsxs("div",{className:"text-sm whitespace-nowrap",children:[a.jsx("span",{className:"text-gray-600",children:"Success Rate:"}),a.jsxs("span",{className:"ml-1 font-semibold text-green-600",children:[o.successRate,"%"]})]}),a.jsxs("div",{className:"text-sm whitespace-nowrap",children:[a.jsx("span",{className:"text-gray-600",children:"Images Generated:"}),a.jsx("span",{className:"ml-1 font-semibold text-purple-600",children:o.totalImagesGenerated})]}),a.jsxs("div",{className:"text-sm whitespace-nowrap",children:[a.jsx("span",{className:"text-gray-600",children:"Avg Duration:"}),a.jsxs("span",{className:"ml-1 font-semibold text-orange-600",children:[o.averageExecutionTime,"s"]})]})]}),wh=({activeTab:o,onTabChange:b})=>a.jsxs("div",{className:"tab-navigation",children:[a.jsx("button",{className:`tab-button ${o==="overview"?"active":""}`,onClick:()=>b("overview"),children:"Overview"}),a.jsx("button",{className:`tab-button ${o==="image-gallery"?"active":""}`,onClick:()=>b("image-gallery"),children:"Image Gallery"})]}),Sh=({imageViewMode:o,setImageViewMode:b,imageJobFilter:u,setImageJobFilter:c,imageSearchQuery:p,setImageSearchQuery:m,imageSortBy:f,setImageSortBy:k,imageDateFrom:N,setImageDateFrom:j,imageDateTo:E,setImageDateTo:L,selectedImages:B,setSelectedImages:P,filteredImagesCount:I,filteredImageIds:F,jobHistory:se,generatedImages:re,setShowExportModal:ie,onDeleteSelected:ce})=>{const[le,ue]=h.useState(!1),[ae,z]=h.useState("");return a.jsxs("div",{className:"px-6 pt-4 pb-0 flex-shrink-0",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Generated Images"})}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg mb-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[re.length," Total Images"]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsxs("span",{className:"text-sm text-gray-700",children:[re.filter(T=>T.qcStatus==="approved").length," Success Images"]})]})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-gray-50 rounded-lg mb-4 flex-shrink-0",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View:"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>b("grid"),className:`p-2 rounded-md transition-all duration-200 ${o==="grid"?"bg-gray-200 text-gray-900 border border-gray-300":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 border border-transparent"}`,title:"Grid View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{onClick:()=>b("list"),className:`p-2 rounded-md transition-all duration-200 ${o==="list"?"bg-gray-200 text-gray-900 border border-gray-300":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 border border-transparent"}`,title:"List View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Job:"}),a.jsxs("button",{type:"button",onClick:()=>ue(T=>!T),className:"relative text-sm border border-gray-300 rounded-md px-3 py-1 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[14rem] text-left pr-8",children:[u==="all"?"All Jobs":(()=>{const T=se.find(Q=>String(Q.id)===String(u)),H=T?.displayLabel||T?.label||T?.configurationName;if(H&&String(H).trim()!==""){const Q=String(H).trim();return Q.endsWith("(Rerun)")?Q.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(T?.id).slice(-3)})`:Q}return`Job ${String(u).slice(0,8)}`})(),a.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-slate-700",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z"})})})]})]}),le&&a.jsxs("div",{className:"absolute z-20 mt-2 w-[18rem] bg-white border border-gray-200 rounded-md shadow-lg overflow-x-hidden",children:[a.jsx("div",{className:"p-2 border-b border-gray-200",children:a.jsx("input",{type:"text",value:ae,onChange:T=>z(T.target.value),placeholder:"Search jobs...",className:"w-full text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})}),a.jsxs("ul",{role:"listbox",className:"max-h-72 overflow-y-auto overflow-x-hidden py-1",children:[a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>{c("all"),ue(!1),z("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 whitespace-normal break-words ${u==="all"?"bg-gray-100":""}`,children:"All Jobs"})}),Array.from(new Set(re.map(T=>T.executionId))).map(T=>({id:T,label:(()=>{const H=se.find(M=>String(M.id)===String(T)),Q=H?.displayLabel||H?.label||H?.configurationName;if(Q&&String(Q).trim()!==""){const M=String(Q).trim();return M.endsWith("(Rerun)")?M.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(T).slice(-3)})`:M}return`Job ${String(T).slice(0,8)}`})()})).filter(T=>T.label.toLowerCase().includes(ae.toLowerCase())).map(T=>a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>{c(String(T.id)),ue(!1),z("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 whitespace-normal break-words ${String(u)===String(T.id)?"bg-gray-100":""}`,title:T.label,children:T.label})},T.id))]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-300 rounded-md h-9 px-2",children:[a.jsx("input",{type:"date",className:"bg-transparent px-2 h-full text-sm focus:outline-none",value:N??"",onChange:T=>j(T.target.value||null)}),a.jsx("div",{className:"h-4 w-px bg-gray-300"}),a.jsx("input",{type:"date",className:"bg-transparent px-2 h-full text-sm focus:outline-none",value:E??"",onChange:T=>L(T.target.value||null)})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>{const T=new Date,H=T.getFullYear(),Q=String(T.getMonth()+1).padStart(2,"0"),M=String(T.getDate()).padStart(2,"0"),G=`${H}-${Q}-${M}`;j(G),L(G)},className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",children:"Today"}),a.jsx("button",{onClick:()=>{const T=new Date,H=T.getFullYear(),Q=String(T.getMonth()+1).padStart(2,"0"),M=String(T.getDate()).padStart(2,"0"),G=`${H}-${Q}-${M}`,_=new Date(T);_.setDate(_.getDate()-7);const de=_.getFullYear(),oe=String(_.getMonth()+1).padStart(2,"0"),v=String(_.getDate()).padStart(2,"0"),w=`${de}-${oe}-${v}`;j(w),L(G)},className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",children:"Week"}),a.jsx("button",{onClick:()=>{const T=new Date,H=T.getFullYear(),Q=String(T.getMonth()+1).padStart(2,"0"),M=String(T.getDate()).padStart(2,"0"),G=`${H}-${Q}-${M}`,_=new Date(T);_.setMonth(_.getMonth()-1);const de=_.getFullYear(),oe=String(_.getMonth()+1).padStart(2,"0"),v=String(_.getDate()).padStart(2,"0"),w=`${de}-${oe}-${v}`;j(w),L(G)},className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",children:"Month"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Search:"}),a.jsx("input",{type:"text",placeholder:"Search images...",value:p,onChange:T=>m(T.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sort:"}),a.jsxs("select",{value:f,onChange:T=>k(T.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"oldest",children:"Oldest First"}),a.jsx("option",{value:"name",children:"By Name"})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:B.size===I&&I>0,onChange:T=>{T.target.checked?P(new Set(F())):P(new Set)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Select All (",B.size,"/",I,")"]})]}),a.jsx("button",{onClick:()=>{c("all"),m(""),k("newest"),j(null),L(null),P(new Set)},className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:"Clear"}),ce&&a.jsxs("button",{onClick:()=>ce(Array.from(B)),disabled:B.size===0,className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${B.size===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,children:["Delete Selected (",B.size,")"]}),a.jsx("button",{onClick:()=>ie(!0),disabled:B.size===0,className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${B.size===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Export ZIP"})]})]})]})},Ch="inline-flex items-center gap-1 px-2 py-1 rounded-full text-sm font-medium border";function Mh({status:o}){switch(o){case"completed":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"processing":case"running":return a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]});case"failed":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"pending":case"starting":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});case"stopped":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6M5 6h14v12H5z"})});default:return null}}function kh({status:o}){switch(o){case"qc_failed":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v4m0 4h.01M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"})});case"retry_failed":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v4m0 4h.01M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"})});case"retry_pending":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});case"processing":return a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]});case"approved":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"failed_retry":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});default:return null}}function Ah(o){switch(o){case"completed":return{classes:"bg-green-100 text-green-800 border-green-200",label:"Completed"};case"processing":case"running":return{classes:"bg-blue-100 text-blue-800 border-blue-200",label:"Processing"};case"failed":return{classes:"bg-red-100 text-red-800 border-red-200",label:"Failed"};case"pending":case"starting":return{classes:"bg-yellow-100 text-yellow-800 border-yellow-200",label:"Pending"};case"stopped":return{classes:"bg-gray-100 text-gray-800 border-gray-200",label:"Stopped"};default:return{classes:"bg-gray-100 text-gray-800 border-gray-200",label:o}}}function Eh(o){switch(o){case"qc_failed":return{classes:"bg-red-100 text-red-800 border-red-200",label:"QC Failed"};case"retry_failed":return{classes:"bg-red-100 text-red-800 border-red-200",label:"Retry Failed"};case"retry_pending":return{classes:"bg-amber-100 text-amber-800 border-amber-200",label:"Pending Retry"};case"processing":return{classes:"bg-blue-100 text-blue-800 border-blue-200",label:"Processing Retry"};case"approved":return{classes:"bg-green-100 text-green-800 border-green-200",label:"Approved"};case"failed_retry":return{classes:"bg-orange-100 text-orange-800 border-orange-200",label:"Failed Retry"};default:return{classes:"bg-gray-100 text-gray-800 border-gray-200",label:o}}}const Dt=({variant:o,status:b,className:u="",labelOverride:c,"data-testid":p})=>{if(!b)return null;const m=String(b).toLowerCase(),{classes:f,label:k}=o==="job"?Ah(m):Eh(m),N=o==="job"?Mh:kh;return a.jsxs("span",{className:`${Ch} ${f} ${u}`.trim(),"data-testid":p,children:[a.jsx(N,{status:m}),c??k]})},Dh=({jobs:o,onJobAction:b,onDeleteJob:u,isLoading:c,statusFilter:p,sortBy:m})=>{const[f,k]=h.useState(null),[N,j]=h.useState(null),[E,L]=h.useState({x:0,y:0}),[B,P]=h.useState(0),[I,F]=h.useState(null),se=h.useRef(null),re=Te.useMemo(()=>{if(!o||!Array.isArray(o))return[];const M=p!==void 0?p:"all",G=m!==void 0?m:"newest";let _=o;return M!=="all"&&(_=_.filter(oe=>oe.status===M)),[..._].sort((oe,v)=>{switch(G){case"oldest":return!oe.startedAt&&!v.startedAt?0:oe.startedAt?v.startedAt?new Date(oe.startedAt).getTime()-new Date(v.startedAt).getTime():-1:1;case"newest":return!oe.startedAt&&!v.startedAt?0:oe.startedAt?v.startedAt?new Date(v.startedAt).getTime()-new Date(oe.startedAt).getTime():-1:1;case"name":const w=oe.configurationName||"Unknown",X=v.configurationName||"Unknown";return w.localeCompare(X);default:return 0}})},[o,p,m]),ie=M=>{k(M),b("view",M)},ce=(M,G)=>{M.preventDefault(),j(G),L({x:M.clientX,y:M.clientY})},le=(M,G)=>{switch(j(null),M){case"view":b("view",G);break;case"export":b("export",G);break;case"rerun":console.log(" DEBUG RERUN: JobHistory rerun case triggered for jobId:",G),console.log(" DEBUG RERUN: Timestamp:",new Date().toISOString()),console.log(" DEBUG RERUN: Stack trace:",new Error().stack),b("rerun",G);break;case"delete":F(G);break}},ue=M=>{u&&u(M),F(null)},ae=M=>{const G=M.displayLabel||M.label||M.configurationName;if(G&&String(G).trim()!==""){const _=String(G).trim();return _.endsWith("(Rerun)")?_.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(M.id).slice(-3)})`:_}return"Unknown"},z=()=>{F(null)},T=(M,G)=>{if(!M)return"Unknown";if(!G)return"In Progress";const _=G.getTime()-M.getTime(),de=Math.floor(_/(1e3*60)),oe=Math.floor(de/60);return oe>0?`${oe}h ${de%60}m`:`${de}m`},H=M=>M?M.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown",Q=M=>{switch(M){case"completed":return a.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"failed":return a.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"running":return a.jsxs("svg",{className:"w-5 h-5 text-blue-600 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]});default:return a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return h.useEffect(()=>{se.current&&B>0&&requestAnimationFrame(()=>{se.current&&(se.current.scrollTop=B)})},[re,B]),h.useEffect(()=>{if(se.current){const M=()=>{se.current&&P(se.current.scrollTop)},G=se.current;return G.addEventListener("scroll",M),()=>{G.removeEventListener("scroll",M)}}},[]),h.useEffect(()=>{const M=G=>{if(N){const _=G.target,de=document.querySelector(".context-menu");de&&!de.contains(_)&&j(null)}};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[N]),c?a.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex-shrink-0",children:"Job History"}),a.jsxs("div",{className:"flex-1 flex items-center justify-center py-8 min-h-0",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading job history..."})]})]}):re.length===0?a.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex-shrink-0",children:"Job History"}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-8 min-h-0",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No job history available"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start your first job to see it here."})]})]}):a.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[a.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 min-h-0",role:"list",ref:se,children:[re.length>5&&a.jsxs("div",{className:"text-xs text-gray-500 text-center py-2 border-b border-gray-200",children:["Job History area - scroll when content overflows (",re.length," total)"]}),re.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No jobs found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Jobs will appear here once you start processing images."})]}),re.map(M=>a.jsx("div",{role:"listitem",tabIndex:0,"aria-label":`${ae(M)} - ${M.status}`,className:`bg-white border rounded-lg p-4 cursor-pointer transition-colors ${f===M.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>ie(M.id),onContextMenu:G=>ce(G,M.id),onKeyDown:G=>{G.key==="Enter"&&b("view",M.id)},children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[Q(M.status),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:ae(M)}),a.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Job ID: ",M.id]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsx("span",{children:H(M.startedAt)}),M.completedAt?a.jsx("span",{children:T(M.startedAt,M.completedAt)}):null,a.jsx(Dt,{variant:"job",status:M.status})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[M.status==="running"&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium",children:"Running"}),a.jsx("div",{className:"text-xs",children:"Processing images"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Images:"}),a.jsxs("div",{children:[M.totalImages??0," total (",M.successfulImages??0," successful, ",M.failedImages??0," failed)"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:G=>{G.stopPropagation(),b("view",M.id)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"View job details",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:G=>{G.stopPropagation(),b("export",M.id)},className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"Export to Excel",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsx("button",{onClick:G=>{G.stopPropagation(),b("rerun",M.id)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Rerun job",disabled:M.status==="running",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]})}),a.jsx("button",{onClick:G=>{G.stopPropagation(),u&&u(M.id)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete job",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})},M.id))]}),N&&a.jsxs("div",{className:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg py-1 context-menu min-w-48",style:{left:E.x,top:E.y},children:[a.jsxs("button",{onClick:()=>le("view",N),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[a.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Details"]}),a.jsxs("button",{onClick:()=>le("export",N),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to Excel"]}),a.jsxs("button",{onClick:()=>le("rerun",N),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",disabled:o.find(M=>M.id===N)?.status==="running",children:[a.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]}),"Rerun Job"]}),a.jsxs("button",{onClick:()=>le("delete",N),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Job"]})]}),I&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delete Job"}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Are you sure you want to delete this job? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:z,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancel"}),a.jsx("button",{onClick:()=>ue(I),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},dm=({logs:o,jobStatus:b,isLoading:u=!1,onRefresh:c,minHeight:p=144,maxHeight:m=320,height:f,disableInternalScroll:k=!1})=>{const[N,j]=h.useState("standard"),[E,L]=h.useState(!0),[B,P]=h.useState(""),[I,F]=h.useState("all"),[se,re]=h.useState(0),ie=h.useRef(null),ce=H=>{j(H)};h.useEffect(()=>{E&&ie.current&&(ie.current.scrollTop=ie.current.scrollHeight)},[o,E]);const le=o.filter(H=>!(N==="standard"&&H.level==="debug"||I!=="all"&&H.level!==I||B&&!H.message.includes(B))),ue=H=>{switch(H){case"error":return a.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{clipRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",fillRule:"evenodd"})});case"warn":return a.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{clipRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",fillRule:"evenodd"})});case"info":return a.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{clipRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",fillRule:"evenodd"})});default:return a.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{clipRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",fillRule:"evenodd"})})}},ae=H=>new Date(H).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"UTC"}),z=()=>{const Q=(le&&le.length>0?le:o).map(M=>`[${ae(M.timestamp)}] [${M.level.toUpperCase()}] ${M.message}`).join(`
`);if(typeof window>"u"||!window.URL||!window.URL.createObjectURL){console.log("Export logs:",Q),typeof window<"u"&&window.open&&window.open("data:text/plain;charset=utf-8,"+encodeURIComponent(Q),"_blank");return}try{const M=new Blob([Q],{type:"text/plain;charset=utf-8"}),G=URL.createObjectURL(M),_=document.createElement("a");_.href=G,_.download="logs.txt",document.body.appendChild(_),_.click(),document.body.removeChild(_),setTimeout(()=>URL.revokeObjectURL(G),200)}catch(M){console.error("Failed to export logs:",M)}},T=()=>{c?c():window.location.reload()};return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Logs"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mode:"}),a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",role:"tablist","aria-label":"Log viewing mode",children:[a.jsx("button",{onClick:()=>ce("standard"),role:"tab","aria-selected":N==="standard","aria-label":"Standard log mode",className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${N==="standard"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Standard"}),a.jsx("button",{onClick:()=>ce("debug"),role:"tab","aria-selected":N==="debug","aria-label":"Debug log mode",className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${N==="debug"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Debug"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Level:"}),a.jsxs("select",{className:"ui-select h-8",value:I,onChange:H=>F(H.target.value),"aria-label":"Filter logs by level",children:[a.jsx("option",{value:"all",children:"All Levels"}),a.jsx("option",{value:"info",children:"Info"}),a.jsx("option",{value:"warn",children:"Warning"}),a.jsx("option",{value:"error",children:"Error"}),a.jsx("option",{value:"debug",children:"Debug Level"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:E,onChange:H=>L(H.target.checked),"aria-label":"Auto-scroll to bottom",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{children:"Auto-scroll"})]}),a.jsxs("button",{onClick:T,"aria-label":"Refresh logs",className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("span",{className:"w-3 h-3 mr-1 inline-flex items-center justify-center",children:a.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]})}),"Refresh"]}),a.jsxs("button",{onClick:z,"aria-label":"Export logs",className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]})]})]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("div",{className:"flex-1 max-w-md",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"log-search",type:"text",placeholder:"Search logs...",value:B,onChange:H=>P(H.target.value),"aria-label":"Search logs",className:"w-full px-3 py-2 pl-8 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("svg",{className:"absolute left-2.5 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})})]}),a.jsxs("div",{className:"px-6 py-4 flex-1 flex flex-col min-h-0",children:[a.jsx("div",{ref:ie,role:"list","aria-label":"Log entries",className:"flex-1 font-mono text-sm bg-gray-50 rounded-lg p-4 min-h-0 logs-scroll border border-gray-200",style:{minHeight:`${p}px`,maxHeight:k||m==="none"?"none":typeof m=="number"?`${m}px`:m,height:f?typeof f=="number"?`${f}px`:f:void 0,overflowY:k?"visible":"auto"},children:u?a.jsxs("div",{className:"text-center text-gray-500 py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading logs..."})]}):o.length===0?a.jsxs("div",{className:"text-center text-gray-500 py-8",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No logs available"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Logs will appear here when a job is running or has completed."})]}):le.length===0?a.jsx("div",{className:"text-center text-gray-500 py-8",children:"No logs match the current filters."}):a.jsx("div",{className:"space-y-1",children:le.map((H,Q)=>a.jsxs("div",{"aria-label":`Log entry ${Q+1}: ${H.level} level message`,className:`flex items-start space-x-3 p-2 rounded-md border ${H.level==="error"?"bg-red-50 border-red-200":H.level==="warn"?"bg-yellow-50 border-yellow-200":H.level==="info"?"bg-blue-50 border-blue-200":"bg-white border-gray-200"}`,children:[a.jsx("div",{className:"flex-shrink-0 text-xs text-gray-500 w-20",children:ae(H.timestamp)}),a.jsxs("div",{className:`flex-shrink-0 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${H.level==="error"?"text-red-600 bg-red-100 border-red-300":H.level==="warn"?"text-yellow-600 bg-yellow-100 border-yellow-300":H.level==="info"?"text-blue-600 bg-blue-100 border-blue-300":"text-gray-600 bg-gray-100 border-gray-300"}`,children:[ue(H.level),a.jsx("span",{className:"ml-1",children:H.level.toUpperCase()})]}),a.jsxs("div",{className:"flex-1 text-gray-900 break-words whitespace-pre",children:[H.message,a.jsxs("div",{className:"mt-1 text-xs text-gray-600 space-y-1",children:[(H.stepName||H.subStep)&&a.jsxs("div",{className:"flex items-center space-x-2",children:[H.stepName&&a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:H.stepName}),H.subStep&&a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:H.subStep})]}),H.imageIndex!==null&&H.imageIndex!==void 0&&a.jsxs("div",{className:"text-purple-600",children:["Image ",H.imageIndex+1]}),H.durationMs!==null&&H.durationMs!==void 0&&a.jsxs("div",{className:"text-orange-600",children:[" ",H.durationMs,"ms"]}),(H.progress!==void 0||H.totalImages!==void 0)&&a.jsxs("div",{className:"text-gray-600",children:[H.progress!==void 0&&`Progress: ${H.progress}%`,H.totalImages!==void 0&&` | Images: ${H.successfulImages||0}/${H.totalImages}`]}),H.metadata&&Object.keys(H.metadata).length>0&&a.jsxs("details",{className:"mt-1",children:[a.jsxs("summary",{className:"cursor-pointer text-gray-500 hover:text-gray-700",children:["Metadata (",Object.keys(H.metadata).length," fields)"]}),a.jsx("div",{className:"mt-1 pl-2 text-gray-600",children:Object.entries(H.metadata).map(([M,G])=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"font-medium",children:[M,":"]}),a.jsx("span",{className:"ml-2",children:typeof G=="object"?JSON.stringify(G):String(G)})]},M))})]})]})]}),H.source&&a.jsx("div",{className:"flex-shrink-0 text-xs text-gray-500",children:H.source})]},`${H.id}-${Q}`))})}),a.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500 flex-shrink-0",children:[a.jsxs("div",{children:[`${o.length} logs`,B&&` matching "${B}"`]}),a.jsx("div",{children:b==="running"&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{children:"Live updates"})]})})]})]})]})};function Ja(o){if(!o)return"";const b=String(o);if(b.startsWith("factory://")){const u=b.replace(/^factory:\/\/+/,""),c=decodeURIComponent(u);return mr(c)}if(b.startsWith("file://")){const u=b.replace(/^file:\/\/+/,""),c=decodeURIComponent(u);return mr(c)}if(b.startsWith("local-file://")){const u=b.replace(/^local-file:\/\/+/,""),c=decodeURIComponent(u);return mr(c)}return mr(b)}function mr(o){let b=o.replace(/\\/g,"/");const u=/^[a-zA-Z]:/.test(b);return b=b.replace(/^\/+/,""),u?`factory://${b}`:`factory:///${b}`}var xa=nm();const Th=sm(xa),zh={details:{label:"Details",id:"details"},metadata:{label:"AI Metadata",id:"metadata"},processing:{label:"Processing",id:"processing"}},Lh=({image:o,isOpen:b,onClose:u,onPrevious:c,onNext:p,hasPrevious:m=!1,hasNext:f=!1,onDelete:k})=>{const[N,j]=h.useState("details"),E=h.useRef(null),L=h.useRef(null),[B,P]=h.useState(1),[I,F]=h.useState({x:0,y:0}),[se,re]=h.useState(!1),[ie,ce]=h.useState(!1),le=h.useRef({x:0,y:0}),ue=h.useRef({x:0,y:0});h.useEffect(()=>{const g=D=>{D.key==="Escape"&&b&&u()};return b&&(document.addEventListener("keydown",g),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",g),document.body.style.overflow="unset"}},[b,u]),h.useEffect(()=>{b&&o&&(j("details"),P(1),F({x:0,y:0}))},[b,o]);const ae=h.useCallback(()=>{const g=L.current,D=E.current;if(!g||!D)return;const Y=g.naturalWidth||g.width,J=g.naturalHeight||g.height,$=D.getBoundingClientRect(),K=$.width-32,pe=$.height-32;if(Y<=0||J<=0||K<=0||pe<=0)return;const me=Math.min(K/Y,pe/J,1);P(me),F({x:0,y:0})},[]);h.useEffect(()=>{if(b){const g=requestAnimationFrame(ae);return()=>cancelAnimationFrame(g)}},[b,o,ae]);const z=(g,D)=>{P(Y=>{const J=Math.min(Math.max(Y+g,.2),5);if(D&&E.current){const $=E.current.getBoundingClientRect(),K=D.x-$.left-$.width/2,pe=D.y-$.top-$.height/2,me=J/Y-1;F(Ee=>({x:Ee.x-K*me,y:Ee.y-pe*me}))}return J})},T=g=>{if(g.ctrlKey||g.metaKey){g.preventDefault();const D=g.deltaY>0?-.1:.1;z(D,{x:g.clientX,y:g.clientY})}},H=g=>{g.button===0&&(re(!0),le.current={x:g.clientX,y:g.clientY},ue.current={...I})},Q=g=>{if(!se)return;const D=g.clientX-le.current.x,Y=g.clientY-le.current.y;F({x:ue.current.x+D,y:ue.current.y+Y})},M=()=>re(!1);if(!b)return null;if(!o)return a.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:u,"aria-hidden":"true"}),a.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Image Details"})}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors","aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),a.jsx("div",{className:"flex items-center justify-center p-10",children:a.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[a.jsx("svg",{className:"w-5 h-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 3v3m0 12v3m9-9h-3M6 12H3m15.364 6.364-2.121-2.121M8.757 8.757 6.636 6.636m10.728 0-2.121 2.121M8.757 15.243 6.636 17.364"})}),a.jsx("span",{className:"text-sm",children:"Loading image"})]})})]})})]});const G=g=>new Date(g).toLocaleString();let _={};if(typeof o.metadata=="string")try{_=JSON.parse(o.metadata),console.log(" Parsed metadata from string:",_)}catch(g){console.error(" Failed to parse metadata string:",g),_={}}else o.metadata&&(_=o.metadata,console.log(" Metadata is already an object:",_));const[de,oe]=h.useState(null);h.useEffect(()=>{let g=!1;async function D(){try{const Y=window.electronAPI;if(!Y||typeof Y.getJobExecutionByImageId!="function"||!o?.id)return;const J=await Y.getJobExecutionByImageId(o.id);try{console.log("ImageModal: getJobExecutionByImageId result keys:",J?Object.keys(J):"none")}catch{}const $=J&&J.success&&J.execution?J.execution:null;try{console.log("ImageModal: execution id:",$?.id,"hasSnapshot:",!!$?.configurationSnapshot)}catch{}const K=$?.configurationSnapshot?.processing||null;try{console.log("ImageModal: snapshotProcessing keys:",K?Object.keys(K):"null")}catch{}g||oe(K)}catch{}}return b&&o?.id?D():oe(null),()=>{g=!0}},[b,o?.id]);const v=g=>{if(!g)return null;if(typeof g=="string")try{return JSON.parse(g)}catch{return null}return typeof g=="object"?g:null},w=g=>{if(!g||typeof g!="object")return null;const D=["imageEnhancement","sharpening","saturation","imageConvert","convertToJpg","jpgQuality","pngQuality","removeBg","trimTransparentBackground","jpgBackground","removeBgSize"],Y={};return D.forEach(J=>{J in g&&(Y[J]=g[J])}),Y},X=w(v(o?.processingSettings)),fe=w(de),x=!!(X&&fe&&JSON.stringify(X)!==JSON.stringify(fe))?v(o?.processingSettings)||de||{}:de||v(o?.processingSettings)||{};return a.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:u,"aria-hidden":"true"}),a.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Image Details"}),a.jsx(Dt,{variant:"qc",status:o.qcStatus||"approved"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{type:"button",onClick:async()=>{o&&k&&await k(String(o.id))},className:"review-modal-button bg-red-600 text-white hover:bg-red-700","aria-label":"Delete image permanently",title:"Delete image permanently",children:[a.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]}),a.jsx("button",{type:"button",onClick:()=>ce(g=>!g),className:"px-2 py-1 text-xs bg-white hover:bg-gray-50 border border-gray-200 text-gray-700 rounded","aria-label":"Image Control Info",title:"Image Control Info",children:"Image Control Info"}),(m||f)&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:c,disabled:!m,className:`p-2 rounded-md transition-colors ${m?"text-gray-600 hover:text-gray-900 hover:bg-gray-100":"text-gray-300 cursor-not-allowed"}`,"aria-label":"Previous image",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:p,disabled:!f,className:`p-2 rounded-md transition-colors ${f?"text-gray-600 hover:text-gray-900 hover:bg-gray-100":"text-gray-300 cursor-not-allowed"}`,"aria-label":"Next image",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),a.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors","aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),ie&&a.jsxs("div",{className:"absolute top-14 right-4 w-80 bg-white border border-gray-200 rounded-md shadow-lg p-3 text-xs text-gray-700 z-20",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Image viewer controls"}),a.jsx("button",{type:"button",className:"p-1 text-gray-500 hover:text-gray-700",onClick:()=>ce(!1),"aria-label":"Close help",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("ul",{className:"space-y-1 list-disc pl-4",children:[a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Pan"}),": Click and drag on the image"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Zoom"}),": Ctrl (Windows/Linux) or  Cmd (macOS) + mouse wheel"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Fit"}),": Doubleclick image"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Toolbar (bottomright)"}),": Zoom out (), Zoom in (+), Reset, Fit to screen"]})]})]}),a.jsxs("div",{className:"flex flex-row h-[calc(90vh-80px)] overflow-hidden",children:[a.jsxs("div",{ref:E,className:"relative w-1/2 xl:w-2/3 flex items-center justify-center bg-gray-50 p-4 h-full",onWheel:T,onDoubleClick:ae,children:[a.jsx("div",{className:"relative w-full h-full overflow-hidden rounded",children:a.jsx("img",{ref:L,src:Ja(o.finalImagePath||o.tempImagePath||""),alt:"Generated image",className:`${se?"cursor-grabbing":"cursor-grab"}`,style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) translate(${I.x}px, ${I.y}px) scale(${B})`,transformOrigin:"center center",transition:se?"none":"transform 80ms ease-out",maxWidth:"100%",maxHeight:"100%",userSelect:"none",pointerEvents:"auto"},onMouseDown:H,onMouseMove:Q,onMouseUp:M,onMouseLeave:M,onError:g=>{g.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCA1MEgxNTBWNzVINzVWMTI1SDUwVjUwWiIgZmlsbD0iI0QxRDVEM0EiLz4KPHN2ZyB4PSI3NSIgeT0iODAiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0NSIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMTkgM0g1QzMuOSAzIDMgMy45IDMgNVYxOUMzIDIwLjEgMy45IDIxIDUgMjFIMTlDMjAuMSAyMSAyMSAyMC4xIDIxIDE5VjVDMjEgMy45IDIwLjEgMyAxOSAzWk0xOSAxOUg1VjVIMTlWMTlaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0xNCAxM0gxMFYxN0gxNFYxM1oiIGZpbGw9IiM5QjlCQTAiLz4KPC9zdmc+Cjwvc3ZnPgo="}})}),a.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center space-x-2 bg-white/90 border border-gray-200 rounded-md shadow px-2 py-1 z-10",children:[a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>z(-.1),title:"Zoom out","aria-label":"Zoom out",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),a.jsxs("div",{className:"text-xs text-gray-600 w-12 text-center",children:[Math.round(B*100),"%"]}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>z(.1),title:"Zoom in","aria-label":"Zoom in",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>{P(1),F({x:0,y:0})},title:"Reset","aria-label":"Reset zoom",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582M20 12A8.001 8.001 0 004.582 9m0 0H9"})})}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:ae,title:"Fit to screen","aria-label":"Fit to screen",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h7M3 3v7M21 21h-7M21 21v-7"})})})]})]}),a.jsxs("div",{className:"w-1/2 xl:w-96 border-l border-gray-200 flex flex-col h-full overflow-hidden xl:min-w-[384px]",children:[a.jsx("div",{className:"flex border-b border-gray-200",children:Object.values(zh).map(g=>a.jsx("button",{onClick:()=>j(g.id),className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${N===g.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:g.label},g.id))}),a.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4",children:[N==="details"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image ID"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:o.id})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Execution"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:o.executionId})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Generation Prompt"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:o.generationPrompt})]}),o.seed&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seed"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:o.seed})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"QC Status"}),a.jsxs("div",{className:"flex flex-wrap items-start gap-2 whitespace-normal",children:[a.jsx(Dt,{variant:"qc",status:o.qcStatus||"approved"}),o.qcReason&&a.jsxs("span",{className:"text-sm text-gray-600 break-words whitespace-pre-wrap flex-1 min-w-0",children:["- ",o.qcReason]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created"}),a.jsx("p",{className:"text-sm text-gray-900",children:o.createdAt?G(o.createdAt):""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File Path"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono break-all",children:o.finalImagePath})]})]}),N==="metadata"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI-Generated Metadata"}),a.jsxs("button",{onClick:async()=>{try{const g=window.electronAPI;if(!g||!g.generatedImages||typeof g.generatedImages.getGeneratedImage!="function")return;const D=await g.generatedImages.getGeneratedImage(o.id);D&&D.success&&console.log(" Metadata refreshed. Close and reopen the modal to see changes.")}catch(g){console.error(" Failed to refresh metadata:",g)}},className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]}),"Refresh Metadata"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Title"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:typeof _.title=="object"?_.title.en||"":_.title||"No title generated"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Description"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:typeof _.description=="object"?_.description.en||"":_.description||"No description generated"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Tags"}),a.jsx("div",{className:"bg-gray-50 p-3 rounded-md border",children:(()=>{let g=[];return _.uploadTags?.en?g=String(_.uploadTags.en).split(",").map(D=>D.trim()).filter(D=>!!D):Array.isArray(_.tags)?g=_.tags:typeof _.tags=="string"&&_.tags.trim()&&(g=_.tags.split(",").map(D=>D.trim()).filter(D=>!!D)),g.length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((D,Y)=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:D},Y))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No tags generated"})})()})]})]}),N==="processing"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"text-base font-medium text-gray-900",children:"Asrun settings"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Enhancement"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.imageEnhancement?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sharpening"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.imageEnhancement?x.sharpening||0:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Enhancement OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saturation"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.imageEnhancement?x.saturation||1.4:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Enhancement OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Convert"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.imageConvert?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Convert Format"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.imageConvert?x.convertToWebp?"WEBP":x.convertToJpg?"JPG":"PNG":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Convert OFF)"})})]}),x.imageConvert&&x.convertToJpg&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"JPG Quality"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.jpgQuality||85})]}),x.imageConvert&&x.convertToWebp&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"WebP Quality"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.webpQuality||85})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remove Background"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.removeBg?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remove.bg Size"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.removeBg?x.removeBgSize||"auto":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Remove Background OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trim Transparent"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.removeBg?x.trimTransparentBackground?"Yes":"No":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Remove Background OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"JPG Background Colour"}),a.jsx("p",{className:"text-sm text-gray-900",children:x.imageConvert&&x.convertToJpg&&x.removeBg?x.jpgBackground||"white":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Remove Background, Image Convert are set to OFF and Convert Format is not JPG)"})})]})]})]})]})]})]})]})})]})},Rh=({images:o,onImageAction:b,onBulkAction:u,isLoading:c,jobStatus:p="idle",viewMode:m="grid",onViewModeChange:f,jobFilter:k="all",searchQuery:N="",sortBy:j="newest",jobIdToLabel:E={},dateFrom:L=null,dateTo:B=null,selectedIds:P,onSelectionChange:I,onClearFilters:F})=>{if(!o||!Array.isArray(o))return a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsx("div",{className:"text-center text-gray-500",children:c?"Loading images...":"No images available"})});const[se,re]=h.useState(new Set),ie=P??se,ce=v=>{I?I(v):re(v)},[le,ue]=h.useState(null),[ae,z]=h.useState(null),T=Te.useRef(!1),H=Te.useRef(!1),Q=v=>{if(!v)return{};if(typeof v=="string")try{return JSON.parse(v)}catch{return{}}return v};Te.useEffect(()=>{ce(new Set)},[k]);const M=Te.useMemo(()=>!o||!Array.isArray(o)?[]:[...o.filter(X=>{if(k!=="all"&&X.executionId!=k)return!1;if(N){const fe=N.toLowerCase(),y=Q(X.metadata),x=X.generationPrompt.toLowerCase().includes(fe),D=(typeof y?.prompt=="string"?y.prompt.toLowerCase():"").includes(fe),J=(typeof y?.title=="string"?y.title:y?.title?.en||"").toLowerCase().includes(fe),K=(typeof y?.description=="string"?y.description:y?.description?.en||"").toLowerCase().includes(fe),me=(Array.isArray(y?.tags)?y.tags.join(" ").toLowerCase():"").includes(fe);if(!x&&!D&&!J&&!K&&!me)return!1}if(L||B){if(!X.createdAt)return!1;const fe=new Date(X.createdAt),y=fe.getFullYear(),x=String(fe.getMonth()+1).padStart(2,"0"),g=String(fe.getDate()).padStart(2,"0"),D=`${y}-${x}-${g}`;if(L&&D<L||B&&D>B)return!1}return!0})].sort((X,fe)=>{switch(j){case"newest":return(fe.createdAt?new Date(fe.createdAt).getTime():0)-(X.createdAt?new Date(X.createdAt).getTime():0);case"oldest":return(X.createdAt?new Date(X.createdAt).getTime():0)-(fe.createdAt?new Date(fe.createdAt).getTime():0);case"name":return X.generationPrompt.localeCompare(fe.generationPrompt);default:return 0}}),[o,k,N,j,L,B]),G=v=>{const w=new Set(ie);w.has(v)?w.delete(v):w.add(v),ce(w)},_=v=>new Date(v).toLocaleDateString()+" "+new Date(v).toLocaleTimeString(),de=v=>{if(!le)return;const w=M.findIndex(y=>String(y.id)===String(le));if(w===-1)return;let X;v==="next"?X=w+1<M.length?w+1:w:X=w-1>=0?w-1:w;const fe=M[X];z(null),ue(fe?.id||null)},oe=()=>{if(!le)return{hasPrevious:!1,hasNext:!1};const v=M.findIndex(w=>String(w.id)===String(le));return{hasPrevious:v>0,hasNext:v<M.length-1}};return a.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[a.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:M.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500","aria-live":"polite",children:[a.jsx("div",{children:"No images match the current filters."}),F&&a.jsx("button",{onClick:F,className:"mt-3 inline-flex items-center px-3 py-1 text-sm rounded-md bg-gray-100 hover:bg-gray-200 text-gray-800 border border-gray-300",children:"Clear filters"})]}):a.jsx(a.Fragment,{children:m==="grid"?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4 p-4",children:M.map(v=>a.jsxs("div",{className:`relative bg-white border rounded-lg overflow-hidden transition-colors ${ie.has(v.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[a.jsx("div",{className:"absolute top-2 right-2 z-10",children:a.jsx("input",{type:"checkbox",checked:ie.has(v.id),onChange:()=>G(v.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-label":`Select ${v.generationPrompt}`})}),a.jsxs("div",{className:"relative aspect-square",children:[a.jsx("div",{className:"absolute top-2 left-2 z-10",children:a.jsx(Dt,{variant:"qc",status:"approved"})}),v.finalImagePath||v.tempImagePath?a.jsx("img",{src:Ja(v.finalImagePath||v.tempImagePath),alt:v.generationPrompt,className:"w-full h-full object-cover cursor-pointer",onClick:()=>{z(v),ue(v.id)},onError:w=>{w.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCA1MEgxNTBWNzVINzVWMTI1SDUwVjUwWiIgZmlsbD0iI0QxRDVEM0EiLz4KPHN2ZyB4PSI3NSIgeT0iODAiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0NSIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iI0QxRDVEM0EiLz4KPHN2ZyB4PSI3NSIgeT0iODAiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0NSIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0Oi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xOSAzSDVDMy45IDMgMyAzLjkgMyA1VjE5QzMgMjAuMSAzLjkgMjEgNSAyMUgxOUMyMC4xIDIxIDIxIDIwLjEgMjEgMTlWNUMxMSAzLjkgMjAuMSAzIDE5IDNaTTE5IDE5SDVWNUgxOVYxOVoiIGZpbGw9IiM5QjlCQTAiLz4KPHBhdGggZD0iTTE0IDEzSDEwVjE3SDE0VjEzWiIgZmlsbD0iI0QxRDVEM0EiLz4KPC9zdmc+Cjwvc3ZnPgo="}}):a.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center opacity-0 hover:opacity-100",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:w=>{w.stopPropagation(),z(v),ue(v.id)},className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700",title:"View full size","aria-label":"View full size",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:w=>{w.stopPropagation(),b("delete",v.id)},className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700",title:"Delete","aria-label":"Delete",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]}),a.jsxs("div",{className:"p-3 space-y-2",children:[(()=>{const w=Q(v.metadata),X=(w?.title&&typeof w.title=="object"?w.title.en:w?.title)||"",fe=typeof X=="string"&&X.trim()?X:v.generationPrompt||"Untitled",y=E&&E[String(v.executionId)]||`Job ${String(v.executionId)}`;return a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-2",title:fe,children:fe}),a.jsx("div",{className:"text-xs text-gray-500 truncate mt-1",title:y,children:y})]})})(),v.metadata?.tags&&Array.isArray(v.metadata.tags)&&v.metadata.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[v.metadata.tags.slice(0,3).map((w,X)=>a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",title:w,children:w.length>8?`${w.slice(0,8)}...`:w},X)),v.metadata.tags.length>3&&a.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-500",children:["+",v.metadata.tags.length-3]})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-2",children:[a.jsx("div",{className:"flex items-center space-x-2",children:v.seed&&a.jsxs("span",{className:"font-mono",title:`Seed: ${v.seed}`,children:["Seed: ",v.seed]})}),a.jsx("div",{title:v.createdAt?_(v.createdAt):"",children:v.createdAt?new Date(v.createdAt).toLocaleDateString():""})]})]})]},v.id))}):a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-12 gap-4 px-4 py-3 text-xs font-medium text-gray-700 uppercase tracking-wider",children:[a.jsx("div",{className:"col-span-1",children:a.jsx("input",{type:"checkbox",checked:ie.size===M.length&&M.length>0,onChange:v=>{v.target.checked?ce(new Set(M.map(w=>w.id))):ce(new Set)},className:"rounded border-gray-300"})}),a.jsx("div",{className:"col-span-2",children:"Image"}),a.jsx("div",{className:"col-span-2",children:"Title"}),a.jsx("div",{className:"col-span-3",children:"Prompt"}),a.jsx("div",{className:"col-span-1",children:"Seed"}),a.jsx("div",{className:"col-span-1",children:"Date"}),a.jsx("div",{className:"col-span-2",children:"Actions"})]})}),a.jsx("div",{className:"divide-y divide-gray-200",children:M.map(v=>a.jsxs("div",{className:`grid grid-cols-12 gap-4 px-4 py-3 hover:bg-gray-50 transition-colors ${ie.has(v.id)?"bg-blue-50":""}`,children:[a.jsx("div",{className:"col-span-1 flex items-center",children:a.jsx("input",{type:"checkbox",checked:ie.has(v.id),onChange:w=>{const X=new Set(ie);w.target.checked?X.add(v.id):X.delete(v.id),ce(X)},className:"rounded border-gray-300"})}),a.jsx("div",{className:"col-span-2",children:a.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100",children:a.jsx("img",{src:v.finalImagePath||v.tempImagePath?Ja(v.finalImagePath||v.tempImagePath):"",alt:(()=>{const w=Q(v.metadata),X=(w?.title&&typeof w.title=="object"?w.title.en:w?.title)||"Generated Image";return typeof X=="string"?X:"Generated Image"})(),className:"w-full h-full object-cover cursor-pointer",onClick:()=>{z(v),ue(v.id)},onError:w=>{const X=w.target;X.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNCAyNEg0MFY0MEgyNFYyNFoiIGZpbGw9IiNEMUQ1REIiLz4KPC9zdmc+"}})})}),a.jsx("div",{className:"col-span-2 flex items-center",children:a.jsx("div",{className:"truncate",children:(()=>{const w=Q(v.metadata),X=(w?.title&&typeof w.title=="object"?w.title.en:w?.title)||"",y=(typeof X=="string"&&X.trim()?X:"")||v.generationPrompt||"Untitled";return a.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",title:y,children:y})})()})}),a.jsx("div",{className:"col-span-3 flex items-center",children:(()=>{const w=E&&E[String(v.executionId)]||`Job ${String(v.executionId)}`;return a.jsx("div",{className:"text-sm text-gray-700 truncate",title:w,children:w})})()}),a.jsx("div",{className:"col-span-1 flex items-center",children:a.jsx("div",{className:"text-sm font-mono text-gray-500",title:`Seed: ${v.seed}`,children:v.seed})}),a.jsx("div",{className:"col-span-1 flex items-center",children:a.jsx("div",{className:"text-sm text-gray-500",title:v.createdAt?_(v.createdAt):"",children:v.createdAt?new Date(v.createdAt).toLocaleDateString():""})}),a.jsxs("div",{className:"col-span-2 flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>ue(v.id),className:"p-1 text-blue-600 hover:text-blue-800",title:"View full size",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:()=>b("delete",v.id),className:"p-1 text-red-600 hover:text-red-800",title:"Delete",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},v.id))})]})})})}),le&&(()=>{const v=ae||M.find(w=>String(w.id)===String(le));return!v&&!T.current?(setTimeout(()=>{T.current||(ue(null),z(null))},0),null):a.jsx(Lh,{image:v||null,isOpen:!0,onClose:()=>{T.current||H.current||(ue(null),z(null),T.current=!1,H.current=!1)},onNext:()=>de("next"),onPrevious:()=>de("previous"),...oe(),onDelete:async w=>{T.current=!0,H.current=!0;const X=M.findIndex(x=>String(x.id)===String(w));let fe=null,y=null;if(X>=0&&(X<M.length-1?(y=M[X+1],fe=y.id):X>0&&(y=M[X-1],fe=y.id)),fe&&y){xa.flushSync(()=>{z(y),ue(fe)});try{await window.electronAPI.jobManagement.deleteGeneratedImage(w),await new Promise(x=>setTimeout(x,100)),setTimeout(()=>{b("delete",w)},50)}catch(x){console.error("Failed to delete image:",x)}finally{T.current=!1,H.current=!1}}else{xa.flushSync(()=>{ue(null),z(null)});try{await b("delete",w)}finally{T.current=!1,H.current=!1}}}})})()]})},Bh=`
  .export-zip-modal-btn {
    line-height: 1 !important;
    height: 2.25rem !important;
    max-height: 2.25rem !important;
  }
  .export-zip-modal-btn.bg-blue-600,
  .export-zip-modal-btn.bg-green-600 {
    padding: 0 1rem !important;
  }
  .export-zip-modal input[type="radio"]:focus,
  .export-zip-modal input[type="checkbox"]:focus {
    outline: none !important;
    box-shadow: none !important;
    border-color: inherit !important;
  }
`,Ih=({isOpen:o,count:b,defaultFilename:u,initialMode:c="default",initialIncludeExcel:p=!0,step:m=null,isBusy:f=!1,onClose:k,onExport:N})=>{const[j,E]=Te.useState(c),[L,B]=Te.useState(""),[P,I]=Te.useState(u),[F,se]=Te.useState(p),[re,ie]=Te.useState("append"),[ce,le]=Te.useState(null),[ue,ae]=Te.useState(""),z=Te.useRef(!1);if(Te.useEffect(()=>{if(o&&!z.current){z.current=!0,E(c),I(u),se(p),ie("append"),le(null);try{window.electronAPI?.getExportsFolderPath?.().then(_=>{_&&_.success&&ae(_.path)}).catch(()=>{})}catch{}}!o&&z.current&&(z.current=!1)},[o]),!o)return null;const T=G=>G.replace(/[\\/:*?"<>|]/g,"_"),H=G=>G.toLowerCase().endsWith(".zip")?G:`${G}.zip`,Q=async()=>{le(null);try{const _=await window.electronAPI.selectFile?.({mode:"save",title:"Save ZIP As",defaultPath:P,filters:[{name:"ZIP Archive",extensions:["zip"]}]});if(_&&_.success&&_.filePath){E("custom"),B(_.filePath);const de=_.filePath.split(/\\|\//).pop()||P;I(de)}}catch(G){le(G?.message||"Failed to open Save dialog")}},M=()=>{const G=(P??u??"").toString().trim()||(u??"export.zip"),_=H(T(G));N({mode:j,outputPath:j==="custom"?L||_:void 0,filename:_,includeExcel:F,duplicatePolicy:re})};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:[a.jsx("style",{children:Bh}),a.jsxs("div",{className:"export-zip-modal bg-white border border-gray-200 rounded-lg shadow-lg w-full max-w-3xl",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Export Selected Images (",b,")"]}),a.jsx("button",{onClick:k,"aria-label":"Close",className:"text-gray-500 hover:text-gray-700 text-xl leading-none p-2 -m-2",children:""})]}),a.jsxs("div",{className:"px-5 py-4 space-y-4 max-h-[84vh] overflow-y-auto overflow-x-hidden",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Destination"}),a.jsxs("label",{className:"grid grid-cols-[auto_1fr] items-start gap-2 rounded hover:bg-gray-50 p-0 cursor-pointer",children:[a.jsx("input",{type:"radio",className:"mt-0.5 focus:ring-0",checked:j==="default",onChange:()=>E("default")}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-900",children:"Default app Exports folder"}),a.jsx("input",{className:"mt-2 w-full h-9 border rounded px-2 text-sm text-gray-600 bg-gray-50",value:ue||"App data exports folder (recommended)",disabled:!0}),a.jsx("button",{type:"button",onClick:async()=>{try{await window.electronAPI.openExportsFolder()}catch{}},className:"export-zip-modal-btn mt-2 h-9 max-h-9 px-4 text-sm leading-none rounded border border-gray-300 text-gray-700 bg-gray-100 hover:bg-gray-200 min-w-[140px] inline-flex items-center justify-center shrink-0 self-start",children:"Open Exports Folder"})]})]}),a.jsxs("label",{className:"grid grid-cols-[auto_1fr] items-start gap-2 rounded hover:bg-gray-50 p-0 cursor-pointer",children:[a.jsx("input",{type:"radio",className:"mt-0.5 focus:ring-0",checked:j==="custom",onChange:()=>E("custom")}),a.jsxs("div",{className:"w-full",children:[a.jsx("div",{className:"text-sm text-gray-900",children:"Save to another location"}),a.jsxs("div",{className:"mt-2 grid grid-cols-12 gap-2 items-center",children:[a.jsx("span",{className:"col-span-2 text-sm text-gray-900",children:"Location:"}),a.jsx("input",{className:"col-span-7 h-9 border rounded px-2 text-sm disabled:bg-gray-50",placeholder:"/path/to/file.zip",value:L,onChange:G=>B(G.target.value),disabled:j!=="custom"}),a.jsx("button",{type:"button",onClick:async()=>{try{const _=await window.electronAPI?.selectFile?.({type:"directory",title:"Select Folder"});_&&_.success&&_.filePath&&B(_.filePath)}catch{}},className:"export-zip-modal-btn col-span-2 h-9 max-h-9 px-4 text-sm leading-none rounded border border-blue-600 text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 whitespace-nowrap justify-self-start self-center min-w-[100px] inline-flex items-center justify-center shrink-0",disabled:j!=="custom",children:"Browse"}),a.jsx("span",{className:"col-span-2 text-sm text-gray-900",children:"Filename:"}),a.jsx("input",{className:"col-span-10 h-9 border rounded px-2 text-sm disabled:bg-gray-50",value:P,onChange:G=>I(G.target.value),disabled:j!=="custom"})]})]})]})]}),a.jsxs("div",{className:"pt-1 border-t border-gray-100",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500 mb-2",children:"Package options"}),a.jsxs("label",{className:"grid grid-cols-[auto_1fr] items-start gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"mt-0.5 focus:ring-0",checked:F,onChange:G=>se(G.target.checked)}),a.jsx("span",{className:"text-sm text-gray-700",children:"Include Excel metadata (metadata.xlsx)"})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500 mb-1",children:"Folder layout inside ZIP:"}),a.jsxs("div",{className:"text-xs text-gray-700 font-mono leading-5",children:[a.jsxs("div",{children:["images/ ",a.jsx("span",{className:"text-gray-500",children:"(image files)"})]}),a.jsx("div",{children:"metadata.xlsx"})]})]})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Conflicts & naming"}),a.jsx("div",{className:"text-[11px] text-gray-500 -mt-0.5 mb-2",children:"(applies only for custom locations)"}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("label",{className:"inline-flex items-center space-x-1",children:[a.jsx("input",{type:"radio",checked:re==="append",onChange:()=>ie("append")}),a.jsx("span",{className:"text-sm text-gray-700",children:"Auto-append number"})]}),a.jsxs("label",{className:"inline-flex items-center space-x-1",children:[a.jsx("input",{type:"radio",checked:re==="overwrite",onChange:()=>ie("overwrite")}),a.jsx("span",{className:"text-sm text-gray-700",children:"Overwrite (confirm)"})]})]}),ce&&a.jsx("div",{className:"text-xs text-red-600 mt-2",children:ce})]}),a.jsxs("div",{className:"pt-1 border-t border-gray-100",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500 mb-2",children:"Status"}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-700",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${m==="gathering-files"?"text-gray-900 font-medium":""}`,children:[a.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${m==="gathering-files"?"bg-blue-600":"bg-gray-300"}`}),a.jsx("span",{children:"Gathering files"})]}),a.jsxs("div",{className:`flex items-center space-x-2 ${m==="creating-excel"?"text-gray-900 font-medium":""}`,children:[a.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${m==="creating-excel"?"bg-blue-600":"bg-gray-300"}`}),a.jsx("span",{children:"Creating Excel"})]}),a.jsxs("div",{className:`flex items-center space-x-2 ${m==="zipping"?"text-gray-900 font-medium":""}`,children:[a.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${m==="zipping"?"bg-blue-600":"bg-gray-300"}`}),a.jsx("span",{children:"Zipping"})]})]})]})]}),a.jsxs("div",{className:"px-5 py-3 border-t border-gray-200 flex items-center justify-between space-x-2",children:[a.jsx("button",{type:"button",disabled:f,onClick:k,className:`export-zip-modal-btn h-9 max-h-9 px-4 text-sm leading-none rounded border border-gray-300 min-w-[100px] inline-flex items-center justify-center shrink-0 self-center ${f?"bg-gray-100 text-gray-400":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:"Cancel"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{type:"button",disabled:f,onClick:async()=>{E("custom"),await Q()},className:`export-zip-modal-btn h-9 max-h-9 px-4 whitespace-nowrap text-sm leading-none rounded border border-blue-600 text-white min-w-[180px] inline-flex items-center justify-center shrink-0 self-center ${f?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:"Save to another location"}),a.jsx("button",{type:"button",disabled:f,onClick:M,className:`export-zip-modal-btn h-9 max-h-9 px-4 whitespace-nowrap text-sm leading-none rounded border border-green-600 text-white min-w-[100px] inline-flex items-center justify-center shrink-0 self-center ${f?"bg-green-400":"bg-green-600 hover:bg-green-700"}`,children:"Export"})]})]})]})]})},_h=`
  .export-file-modal-btn {
    line-height: 1 !important;
    height: 2.25rem !important;
    max-height: 2.25rem !important;
  }
  .export-file-modal-btn.bg-blue-600,
  .export-file-modal-btn.bg-green-600 {
    padding: 0 1rem !important;
  }
  .export-file-modal input[type="radio"]:focus,
  .export-file-modal input[type="checkbox"]:focus {
    outline: none !important;
    box-shadow: none !important;
    border-color: inherit !important;
  }
`,pr=({isOpen:o,count:b=0,title:u="Export",defaultFilename:c,fileKind:p,initialMode:m="default",isBusy:f=!1,onClose:k,onExport:N})=>{const[j,E]=Te.useState(m),[L,B]=Te.useState(""),[P,I]=Te.useState(c),[F,se]=Te.useState("append"),[re,ie]=Te.useState(null),[ce,le]=Te.useState(""),ue=Te.useRef(!1);if(Te.useEffect(()=>{if(o&&!ue.current){ue.current=!0,E(m),I(c),se("append"),ie(null);try{window.electronAPI?.getExportsFolderPath?.().then(M=>{M&&M.success&&le(M.path)}).catch(()=>{})}catch{}try{const Q=p==="xlsx"?"lastExportPath:xlsx":"lastExportPath:zip",M=localStorage.getItem(Q);M&&typeof M=="string"&&M.trim()!==""&&(B(M),E("custom"))}catch{}}!o&&ue.current&&(ue.current=!1)},[o,m,c]),!o)return null;const ae=Q=>Q.replace(/[\\/:*?"<>|]/g,"_"),z=Q=>{const M=Q.toLowerCase();return p==="xlsx"?M.endsWith(".xlsx")?Q:`${Q}.xlsx`:M.endsWith(".zip")?Q:`${Q}.zip`},T=async()=>{ie(null);try{const Q=window.electronAPI,M=p==="xlsx"?[{name:"Excel Workbook",extensions:["xlsx"]}]:[{name:"ZIP Archive",extensions:["zip"]}],G=await Q.selectFile?.({mode:"save",title:"Save As",defaultPath:P,filters:M});if(G&&G.success&&G.filePath){E("custom"),B(G.filePath);const _=G.filePath.split(/\\|\//).pop()||P;I(_);try{const de=p==="xlsx"?"lastExportPath:xlsx":"lastExportPath:zip";localStorage.setItem(de,G.filePath)}catch{}}}catch(Q){ie(Q?.message||"Failed to open Save dialog")}},H=()=>{const Q=z(ae(P.trim()||c));N({mode:j,outputPath:j==="custom"?L||Q:void 0,filename:Q,duplicatePolicy:F})};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:[a.jsx("style",{children:_h}),a.jsxs("div",{className:"export-file-modal bg-white border border-gray-200 rounded-lg shadow-lg w-full max-w-3xl",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:[u,b?` (${b})`:""]}),a.jsx("button",{onClick:k,"aria-label":"Close",className:"text-gray-500 hover:text-gray-700 text-xl leading-none p-2 -m-2",children:""})]}),a.jsxs("div",{className:"px-5 py-4 space-y-4 max-h-[84vh] overflow-y-auto overflow-x-hidden",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Destination"}),a.jsxs("label",{className:"grid grid-cols-[auto_1fr] items-start gap-2 rounded hover:bg-gray-50 p-0 cursor-pointer",children:[a.jsx("input",{type:"radio",className:"mt-0.5 focus:ring-0",checked:j==="default",onChange:()=>E("default")}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-900",children:"Default app Exports folder"}),a.jsx("input",{className:"mt-2 w-full h-9 border rounded px-2 text-sm text-gray-600 bg-gray-50",value:ce||"App data exports folder (recommended)",disabled:!0}),a.jsx("button",{type:"button",onClick:async()=>{try{await window.electronAPI.openExportsFolder()}catch{}},className:"export-file-modal-btn mt-2 h-9 max-h-9 px-4 text-sm leading-none rounded border border-gray-300 text-gray-700 bg-gray-100 hover:bg-gray-200 min-w-[140px] inline-flex items-center justify-center shrink-0 self-start",children:"Open Exports Folder"})]})]}),a.jsxs("label",{className:"grid grid-cols-[auto_1fr] items-start gap-2 rounded hover:bg-gray-50 p-0 cursor-pointer",children:[a.jsx("input",{type:"radio",className:"mt-0.5 focus:ring-0",checked:j==="custom",onChange:()=>E("custom")}),a.jsxs("div",{className:"w-full",children:[a.jsx("div",{className:"text-sm text-gray-900",children:"Save to another location"}),a.jsxs("div",{className:"mt-2 grid grid-cols-12 gap-2 items-center",children:[a.jsx("span",{className:"col-span-2 text-sm text-gray-900",children:"Location:"}),a.jsx("input",{className:"col-span-7 h-9 border rounded px-2 text-sm disabled:bg-gray-50",placeholder:p==="xlsx"?"/path/to/file.xlsx":"/path/to/file.zip",value:L,onChange:Q=>B(Q.target.value),disabled:j!=="custom"}),a.jsx("button",{type:"button",onClick:async()=>{try{const M=await window.electronAPI?.selectFile?.({type:"directory",title:"Select Folder"});if(M&&M.success&&M.filePath){B(M.filePath);try{const G=p==="xlsx"?"lastExportPath:xlsx":"lastExportPath:zip";localStorage.setItem(G,M.filePath)}catch{}}}catch{}},className:"export-file-modal-btn col-span-2 h-9 max-h-9 px-4 text-sm leading-none rounded border border-blue-600 text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 whitespace-nowrap justify-self-start self-center min-w-[100px] inline-flex items-center justify-center shrink-0",disabled:j!=="custom",children:"Browse"}),a.jsx("span",{className:"col-span-2 text-sm text-gray-900",children:"Filename:"}),a.jsx("input",{className:"col-span-10 h-9 border rounded px-2 text-sm disabled:bg-gray-50",value:P,onChange:Q=>I(Q.target.value),disabled:j!=="custom"})]})]})]})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Conflicts & naming"}),a.jsx("div",{className:"text-[11px] text-gray-500 -mt-0.5 mb-2",children:"(applies only for custom locations)"}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("label",{className:"inline-flex items-center space-x-1",children:[a.jsx("input",{type:"radio",checked:F==="append",onChange:()=>se("append")}),a.jsx("span",{className:"text-sm text-gray-700",children:"Auto-append number"})]}),a.jsxs("label",{className:"inline-flex items-center space-x-1",children:[a.jsx("input",{type:"radio",checked:F==="overwrite",onChange:()=>se("overwrite")}),a.jsx("span",{className:"text-sm text-gray-700",children:"Overwrite (confirm)"})]})]}),re&&a.jsx("div",{className:"text-xs text-red-600 mt-2",children:re})]})]}),a.jsxs("div",{className:"px-5 py-3 border-t border-gray-200 flex items-center justify-between space-x-2",children:[a.jsx("button",{type:"button",disabled:f,onClick:k,className:`export-file-modal-btn h-9 max-h-9 px-4 text-sm leading-none rounded border border-gray-300 min-w-[100px] inline-flex items-center justify-center shrink-0 self-center ${f?"bg-gray-100 text-gray-400":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:"Cancel"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{type:"button",disabled:f,onClick:async()=>{E("custom"),await T()},className:`export-file-modal-btn h-9 max-h-9 px-4 whitespace-nowrap text-sm leading-none rounded border border-blue-600 text-white min-w-[180px] inline-flex items-center justify-center shrink-0 self-center ${f?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:"Save to another location"}),a.jsx("button",{type:"button",disabled:f,onClick:H,className:`export-file-modal-btn h-9 max-h-9 px-4 whitespace-nowrap text-sm leading-none rounded border border-green-600 text-white min-w-[100px] inline-flex items-center justify-center shrink-0 self-center ${f?"bg-green-400":"bg-green-600 hover:bg-green-700"}`,children:"Export"})]})]})]})]})},Oh=()=>{const[o,b]=h.useState({state:"idle",progress:0,currentStep:1,totalSteps:2}),[u,c]=h.useState([]),[p,m]=h.useState([]),[f,k]=h.useState([]),[N,j]=h.useState({totalJobs:0,completedJobs:0,failedJobs:0,averageExecutionTime:0,totalImagesGenerated:0,successRate:0}),[E,L]=h.useState(null),[B,P]=h.useState(!1),[I,F]=h.useState("overview"),[se,re]=h.useState("grid"),[ie,ce]=h.useState("all"),[le,ue]=h.useState(""),[ae,z]=h.useState("newest"),[T,H]=h.useState(null),[Q,M]=h.useState(null),[G,_]=h.useState(new Set),[de,oe]=h.useState(null),[v,w]=h.useState(null),[X,fe]=h.useState(!1),y=h.useMemo(()=>{const x=Array.isArray(u)?u:[],g=x.length,D=x.filter(me=>String(me.status).toLowerCase()==="completed").length,Y=x.filter(me=>String(me.status).toLowerCase()==="failed").length,J=x.reduce((me,Ee)=>me+(Number(Ee.successfulImages)||0),0),$=x.reduce((me,Ee)=>me+(Number(Ee.totalImages)||0),0),K=(()=>{const me=x.filter(Me=>Me.completedAt&&Me.startedAt);if(me.length===0)return 0;const Ee=me.reduce((Me,Ze)=>{const qe=Ze.startedAt?new Date(Ze.startedAt).getTime():0,ze=Ze.completedAt?new Date(Ze.completedAt).getTime():0,ft=ze&&qe&&ze>qe?(ze-qe)/1e3:0;return Me+ft},0);return Math.round(Ee/me.length)})(),pe=$>0?Math.round(J/$*100):N.successRate||0;return{totalJobs:g||N.totalJobs||0,completedJobs:D||N.completedJobs||0,failedJobs:Y||N.failedJobs||0,averageExecutionTime:K||N.averageExecutionTime||0,totalImagesGenerated:J||N.totalImagesGenerated||0,successRate:pe||0}},[u,N]);return{jobStatus:o,setJobStatus:b,jobHistory:u,setJobHistory:c,generatedImages:p,setGeneratedImages:m,logs:f,setLogs:k,statistics:N,setStatistics:j,computedStatistics:y,error:E,setError:L,isLoading:B,setIsLoading:P,activeTab:I,setActiveTab:F,imageViewMode:se,setImageViewMode:re,imageJobFilter:ie,setImageJobFilter:ce,imageSearchQuery:le,setImageSearchQuery:ue,imageSortBy:ae,setImageSortBy:z,imageDateFrom:T,setImageDateFrom:H,imageDateTo:Q,setImageDateTo:M,selectedImages:G,setSelectedImages:_,jobConfiguration:de,setJobConfiguration:oe,exportJobId:v,setExportJobId:w,showSingleExportModal:X,setShowSingleExportModal:fe}},Uh=({setJobStatus:o,setJobHistory:b,setStatistics:u,setGeneratedImages:c,setLogs:p,setError:m,setIsLoading:f,setSelectedImages:k,setExportJobId:N,setShowSingleExportModal:j,setJobConfiguration:E,onOpenSingleJobView:L})=>{const B=h.useCallback(async()=>{try{const z=await window.electronAPI.jobManagement.getConfiguration();z?.success&&E(z.settings)}catch(z){console.error("Failed to load job configuration:",z)}},[E]),P=h.useCallback(async z=>{try{z||f(!0),m(null);const T=window.electronAPI?.jobManagement;if(!T)return;const H=await T.getJobHistory();let Q=Array.isArray(H)?[...H]:[];b(Q)}catch(T){console.error("Failed to load job history:",T),m("Failed to load job history"),b([])}finally{z||f(!1)}},[f,m,b]),I=h.useCallback(async()=>{try{const z=await window.electronAPI.jobManagement.getJobStatistics();u(z)}catch(z){console.error("Failed to load statistics:",z)}},[u]),F=h.useCallback(async()=>{try{const z=await window.electronAPI.jobManagement.getAllGeneratedImages();if(z&&Array.isArray(z)){const T=z.filter(H=>H.qcStatus==="approved");c(T)}else c([])}catch(z){console.error("Failed to load generated images:",z),c([])}},[c]),se=h.useCallback(async z=>{try{let T="standard";try{(await window.electronAPI.getSettings?.())?.settings?.advanced?.debugMode&&(T="debug")}catch{}const H=await window.electronAPI.jobManagement.getJobLogs(T);H&&Array.isArray(H)&&p(H)}catch(T){console.error("Failed to load logs:",T),p([])}},[p]),re=h.useCallback(async()=>{try{f(!0),m(null);const z=await window.electronAPI.jobManagement.getConfiguration();if(!z.success||!z.settings)throw new Error("Failed to load configuration");const T=z.settings;await window.electronAPI.jobManagement.jobStart(T),await Promise.all([P(),I()])}catch(z){console.error("Failed to start job:",z),m("Failed to start job")}finally{f(!1)}},[f,m,P,I]),ie=h.useCallback(async()=>{try{f(!0),m(null),await window.electronAPI.jobManagement.jobStop(),await Promise.all([P(),I()])}catch{m("Failed to stop job")}finally{f(!1)}},[f,m,P,I]),ce=h.useCallback(async()=>{try{f(!0),m(null),await window.electronAPI.jobManagement.jobForceStop(),await Promise.all([P(),I()])}catch{m("Failed to force stop job")}finally{f(!1)}},[f,m,P,I]),le=h.useCallback(async(z,T)=>{try{switch(m(null),z){case"view":L&&L(T);break;case"export":N(T),j(!0);break;case"delete":await window.electronAPI.jobManagement.deleteJobExecution(T),await P(),await I();break;case"rerun":const H=await window.electronAPI.jobManagement.rerunJobExecution(T);H&&H.success?setTimeout(async()=>{await P(),await I()},1e3):m(`Failed to rerun job: ${H?.error||"Unknown error"}`);break}}catch{m(`Failed to ${z} job`)}},[m,L,N,j,P,I]),ue=h.useCallback(async(z,T,H)=>{try{switch(m(null),z){case"delete":await window.electronAPI.jobManagement.deleteGeneratedImage(T),await F();break;case"update-qc-status":H&&(await window.electronAPI.jobManagement.updateQCStatus(T,H),await F());break}}catch{m(`Failed to ${z} image`)}},[m,F]),ae=h.useCallback(async(z,T)=>{try{if(m(null),T.length===0)return;z==="delete"&&(await window.electronAPI.jobManagement.bulkDeleteImages(T),k(new Set)),await F()}catch{m(`Failed to bulk ${z} images`)}},[m,k,F]);return{loadJobHistory:P,loadStatistics:I,loadGeneratedImages:F,loadLogs:se,loadJobConfiguration:B,handleStartJob:re,handleStopJob:ie,handleForceStop:ce,handleJobAction:le,handleImageAction:ue,handleBulkAction:ae}},Hh=({jobStatus:o,jobHistory:b,setJobStatus:u,loadJobHistory:c,loadStatistics:p,loadGeneratedImages:m,loadLogs:f,loadJobConfiguration:k})=>{const N=h.useRef(null);return h.useEffect(()=>{c(),p(),m(),f("idle"),k()},[c,p,m,f,k]),h.useEffect(()=>{const j=async()=>{try{const B={...await window.electronAPI.jobManagement.getJobStatus()};B&&B.state==="error"&&(B.state="failed");try{const P=Array.isArray(b)&&b.some(I=>String(I.status).toLowerCase()==="running");B&&B.state==="running"&&!P&&(B.state="failed",B.currentJob=null,B.progress=0,B.currentStep=1)}catch{}B&&B.state==="running"&&typeof B.progress=="number"&&B.progress>=.999&&(B.state="completed"),u(B)}catch(L){console.error("Failed to get job status:",L)}},E=setInterval(j,500);return j(),()=>clearInterval(E)},[b,u]),h.useEffect(()=>{if(o.state!=="running"&&o.state!=="starting")return;const j=setInterval(()=>{f(o.state)},2e3);return()=>clearInterval(j)},[o.state,f]),h.useEffect(()=>{if(o.state!=="running")return;const j=setInterval(()=>{m()},1500);return()=>clearInterval(j)},[o.state,m]),h.useEffect(()=>{const j=setInterval(()=>{try{Array.isArray(b)&&b.some(L=>String(L.status).toLowerCase()==="running")&&o.state!=="running"&&(c(!0),p())}catch{}},2e3);return()=>clearInterval(j)},[o.state,b,c,p]),h.useEffect(()=>{o.state==="completed"?(N.current=Date.now(),c(),p(),setTimeout(()=>{m()},500)):o.state==="failed"?(N.current=Date.now(),c(),p()):o.state==="running"&&(N.current=null,c(!0))},[o.state,c,p,m]),{lastCompletionRef:N}},Jh=(o,b,u)=>{const c=h.useMemo(()=>{if(!o)return[];const m=[{name:"Initialization",icon:"",description:"Setup & Parameters",required:!0,completed:!0,weight:20}],f=[];return f.push("AI Generation"),o.ai?.runMetadataGen&&f.push("Metadata"),o.ai?.runQualityCheck&&f.push("QC"),o.processing?.removeBg&&f.push("Background Removal"),o.processing&&(o.processing.imageEnhancement||o.processing.imageConvert||o.processing.sharpening>0||o.processing.saturation!==1||o.processing.convertToJpg||o.processing.trimTransparentBackground)&&f.push("Processing"),f.length>0&&m.push({name:"Image Generation",icon:"",description:f.join(" + "),required:!0,completed:!1,weight:80}),m},[o]),p=h.useMemo(()=>{const m=Math.max(1,Number(b?.currentJob?.totalGenerations||0)),f=Math.max(1,Number(o?.parameters?.count||1)),k=m||f,N=Math.max(1,Math.min(20,Number(b?.currentJob?.variations||0))),j=Math.max(1,Math.min(20,Number(o?.parameters?.variations||1))),E=N||j,L=b?.state,B=!!o?.ai?.runQualityCheck;let P=0;L==="completed"&&(P=100);let I=0,F=1,se=0;try{const re=b?.currentJob?.executionId||b?.currentJob?.id,ie=Number(b?.currentJob?.gensDone||0);if(k>1){if(b?.currentJob)se=Math.min(ie,k),I=Math.round(Math.min(100,se/k*100));else if(re&&Array.isArray(u)){const ce=u.filter(le=>String(le.executionId)===String(re));se=Math.floor((ce.length||0)/E),I=Math.round(Math.min(100,se/k*100))}B&&L!=="completed"&&(I=Math.min(I,95)),L==="completed"&&(I=100),F=Math.min(k,Math.max(1,se+1))}else I=P,F=1}catch{}return{overallGenerationProgress:I,current:P,currentGeneration:F,totalGenerations:k,gensDone:se,totalImages:E}},[o,b,u]);return{progressSteps:c,smartProgress:p}},qh=({onBack:o,onOpenFailedImagesReview:b,onOpenSettings:u,onOpenJobs:c,onOpenSingleJobView:p})=>{const m=Oh(),f=Uh({...m,onOpenSingleJobView:p});Hh({...m,...f});const{progressSteps:k,smartProgress:N}=Jh(m.jobConfiguration,m.jobStatus,m.generatedImages),j=h.useMemo(()=>{let I=[...m.generatedImages];const F=m.imageJobFilter,se=m.imageSearchQuery,re=m.imageSortBy,ie=m.imageDateFrom,ce=m.imageDateTo;return F!=="all"&&(I=I.filter(ue=>String(ue.executionId)===String(F))),I.sort((ue,ae)=>{const z=ue.createdAt?new Date(ue.createdAt).getTime():0,T=ae.createdAt?new Date(ae.createdAt).getTime():0;return re==="newest"?T-z:re==="oldest"?z-T:re==="name"?(ue.generationPrompt||"").localeCompare(ae.generationPrompt||""):0}),I.filter(ue=>{if(se){const ae=se.toLowerCase(),z=ue.metadata,T=z&&typeof z=="object"&&"title"in z?typeof z.title=="string"?z.title:z.title?.en||"":"",H=z&&typeof z=="object"&&"description"in z?typeof z.description=="string"?z.description:z.description?.en||"":"",Q=z&&typeof z=="object"&&"tags"in z&&Array.isArray(z.tags)?z.tags.join(" "):"",M=ue.metadata,G=typeof M=="string"?"":M?.prompt||"";if(!((ue.generationPrompt||"").toLowerCase().includes(ae)||T.toLowerCase().includes(ae)||H.toLowerCase().includes(ae)||Q.toLowerCase().includes(ae)||G.toLowerCase().includes(ae)))return!1}if(ie||ce){if(!ue.createdAt)return!1;const ae=new Date(ue.createdAt),z=ae.getFullYear(),T=String(ae.getMonth()+1).padStart(2,"0"),H=String(ae.getDate()).padStart(2,"0"),Q=`${z}-${T}-${H}`;if(ie&&Q<ie||ce&&Q>ce)return!1}return!0}).map(ue=>ue.id)},[m.generatedImages,m.imageJobFilter,m.imageSearchQuery,m.imageSortBy,m.imageDateFrom,m.imageDateTo]),[E,L]=Te.useState(!1),[B,P]=Te.useState(!1);return a.jsxs("div",{className:"dashboard-panel min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 py-3 md:py-4 flex items-center px-6 relative",children:a.jsxs("div",{className:"flex items-center justify-between w-full flex-wrap gap-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[o&&a.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Close dashboard",title:"Close",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx(vh,{onOpenFailedImagesReview:b,onOpenSettings:u,onOpenJobs:c}),a.jsx(yh,{jobStatus:m.jobStatus.state,onStartJob:f.handleStartJob,onStopJob:f.handleStopJob,onRefresh:()=>{f.loadJobHistory(),f.loadStatistics(),f.loadGeneratedImages()},isLoading:m.isLoading}),a.jsx(jh,{onForceStop:f.handleForceStop,isLoading:m.isLoading})]}),a.jsx(Nh,{statistics:m.computedStatistics})]})}),a.jsx(wh,{activeTab:m.activeTab,onTabChange:m.setActiveTab}),a.jsxs("div",{className:"tab-content-container",children:[m.activeTab==="overview"&&a.jsxs("div",{className:"unified-panel-container",children:[a.jsxs("div",{className:"dashboard-panel job-progress",children:[a.jsx("div",{className:"panel-header",children:a.jsxs("div",{className:"section-header-with-icon",children:[a.jsx("svg",{className:"section-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Job Progress"]})}),a.jsxs("div",{className:"panel-content",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h4",{className:"text-sm font-medium mb-3 text-gray-700",children:["Generation Progress (",N.totalGenerations," ",N.totalGenerations>1?"generations":"generation",")"]}),a.jsx("div",{className:"progress-container",children:a.jsx("div",{className:"progress-fill",style:{width:`${N.totalGenerations>1?N.overallGenerationProgress:N.current}%`}})}),a.jsx("p",{className:"text-sm text-gray-600",children:N.totalGenerations>1?`Completed ${N.gensDone} of ${N.totalGenerations} generations (${N.overallGenerationProgress}% complete)`:m.jobStatus.state==="completed"?"Completed":"Running"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-3 text-gray-700",children:"Progress Steps"}),a.jsx("div",{className:"progress-steps",children:k.map((I,F)=>{const se=Number(m.jobStatus.currentStep||m.jobStatus.currentJob?.currentStep||1);let re="pending";return m.jobStatus.state==="failed"?re="failed":m.jobStatus.state==="completed"?re="completed":I.name==="Initialization"?re=se>1?"completed":"active":I.name==="Image Generation"&&(re=se>=2?"active":"pending"),a.jsxs(Te.Fragment,{children:[a.jsxs("div",{className:"progress-step",children:[a.jsx("div",{className:`step-icon ${re}`,children:a.jsx("div",{className:"w-2 h-2 bg-current rounded-full"})}),a.jsxs("div",{className:"step-info",children:[a.jsx("div",{className:"step-name",children:I.name}),a.jsx("div",{className:"step-subtitle",children:I.description})]})]}),F<k.length-1&&a.jsx("div",{className:"progress-connector"})]},I.name)})})]})]})]}),a.jsxs("div",{className:"dashboard-panel",children:[a.jsx("div",{className:"panel-header",children:a.jsxs("div",{className:"section-header-with-icon",children:[a.jsx("svg",{className:"section-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Job History"]})}),a.jsx("div",{className:"panel-content",style:{padding:0},children:a.jsx("div",{className:"job-history-content",children:a.jsx(Dh,{jobs:m.jobHistory,onJobAction:f.handleJobAction,onDeleteJob:I=>f.handleJobAction("delete",I),isLoading:m.isLoading,statusFilter:"all",sortBy:"newest"})})})]}),a.jsxs("div",{className:"dashboard-panel",children:[a.jsx("div",{className:"panel-header",children:a.jsxs("div",{className:"section-header-with-icon",children:[a.jsx("svg",{className:"section-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Logs Panel"]})}),a.jsx("div",{className:"panel-content",children:a.jsx(dm,{logs:m.logs,jobStatus:m.jobStatus.state,onRefresh:()=>f.loadLogs(m.jobStatus.state)})})]})]}),m.activeTab==="image-gallery"&&a.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[a.jsx(Sh,{imageViewMode:m.imageViewMode,setImageViewMode:m.setImageViewMode,imageJobFilter:m.imageJobFilter,setImageJobFilter:m.setImageJobFilter,imageSearchQuery:m.imageSearchQuery,setImageSearchQuery:m.setImageSearchQuery,imageSortBy:m.imageSortBy,setImageSortBy:m.setImageSortBy,imageDateFrom:m.imageDateFrom,setImageDateFrom:m.setImageDateFrom,imageDateTo:m.imageDateTo,setImageDateTo:m.setImageDateTo,selectedImages:m.selectedImages,setSelectedImages:m.setSelectedImages,filteredImagesCount:j.length,filteredImageIds:()=>j,jobHistory:m.jobHistory,generatedImages:m.generatedImages,setShowExportModal:L,onDeleteSelected:I=>f.handleBulkAction("delete",I)}),a.jsx(Rh,{images:m.generatedImages.filter(I=>j.includes(I.id)),onImageAction:f.handleImageAction,onBulkAction:(I,F)=>f.handleBulkAction(I,F),viewMode:m.imageViewMode,onViewModeChange:m.setImageViewMode,isLoading:m.isLoading,selectedIds:m.selectedImages,onSelectionChange:I=>m.setSelectedImages(I)})]})]}),m.error&&a.jsxs("div",{className:"fixed top-4 right-4 bg-red-50 border border-red-200 rounded-lg p-4 max-w-md",children:[a.jsx("p",{className:"text-sm text-red-800",children:m.error}),a.jsx("button",{onClick:()=>m.setError(null),children:"Dismiss"})]}),E&&a.jsx(Ih,{isOpen:E,count:m.selectedImages.size,defaultFilename:`exported-images-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.zip`,onClose:()=>L(!1),onExport:async({mode:I,outputPath:F,filename:se,includeExcel:re,duplicatePolicy:ie})=>{try{const ce=Array.from(m.selectedImages);if(ce.length===0){L(!1);return}let le;I==="custom"&&(F&&!/\.zip$/i.test(F)?le=`${F.replace(/[\\/]+$/,"")}/${se}`:le=F||se);const ue=I==="custom"?{outputPath:le||se,duplicatePolicy:ie}:void 0,ae=await window.electronAPI.generatedImages.exportZip(ce,re!==!1,ue);if(ae?.success&&ae.zipPath)try{await window.electronAPI.revealInFolder(ae.zipPath)}catch{}}catch(ce){console.error("Export failed",ce)}finally{L(!1)}}}),a.jsx(pr,{isOpen:m.showSingleExportModal,title:"Export Job",count:0,fileKind:"xlsx",defaultFilename:(()=>{const I=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),F=m.jobHistory.find(ce=>String(ce.id)===String(m.exportJobId)),se=m.exportJobId?String(m.exportJobId).slice(-6):"",re=F&&(F.displayLabel||F.label||F.configurationName)||se||"Job";return`${String(re).replace(/[^a-zA-Z0-9-_]/g,"_")}_${I}.xlsx`})(),onClose:()=>{m.setShowSingleExportModal(!1),m.setExportJobId(null)},onExport:async({mode:I,outputPath:F,filename:se,duplicatePolicy:re})=>{try{if(!m.exportJobId)return;let ie;I==="custom"&&(F&&!/\.xlsx$/i.test(F)?ie=`${F.replace(/[\\/]+$/,"")}/${se}`:ie=F||se);const ce=I==="custom"?{outputPath:ie||se,duplicatePolicy:re}:void 0,le=await window.electronAPI.jobManagement.exportJobToExcel(m.exportJobId,ce);if(le&&le.success&&le.filePath)try{await window.electronAPI.revealInFolder(le.filePath)}catch{}}finally{m.setShowSingleExportModal(!1),m.setExportJobId(null)}}})]})};function xr(o){return o&&typeof o=="object"&&o.success!==void 0?o.images||[]:Array.isArray(o)?o:[]}function Gh(){const[o,b]=h.useState([]),[u,c]=h.useState([]),[p,m]=h.useState([]),[f,k]=h.useState([]),[N,j]=h.useState(!1),[E,L]=h.useState(null),[B,P]=h.useState("all"),[I,F]=h.useState(""),[se,re]=h.useState("newest"),[ie,ce]=h.useState(!1),[le,ue]=h.useState(""),[ae,z]=h.useState({isProcessing:!1,queueLength:0,pendingJobs:0,processingJobs:0,completedJobs:0,failedJobs:0}),[T,H]=h.useState("grid"),[Q,M]=h.useState({}),[G,_]=h.useState("qc_failed"),de=h.useCallback(async()=>{try{const g=await window.electronAPI.getRetryQueueStatus();g?.success&&g.queueStatus&&z(g.queueStatus)}catch(g){console.error("Failed to load retry queue status:",g)}},[]),oe=h.useCallback(async()=>{try{j(!0),L(null);const[g,D,Y,J]=await Promise.all([window.electronAPI.generatedImages.getImagesByQCStatus("qc_failed"),window.electronAPI.generatedImages.getImagesByQCStatus("retry_pending"),window.electronAPI.generatedImages.getImagesByQCStatus("processing"),window.electronAPI.generatedImages.getImagesByQCStatus("retry_failed")]);b(xr(g)),c(xr(D)),m(xr(Y)),k(xr(J));try{const $=await window.electronAPI?.jobManagement?.getAllJobExecutions?.({});let K=[];Array.isArray($?.executions)?K=$.executions:Array.isArray($?.jobs)?K=$.jobs:Array.isArray($?.data)&&(K=$.data);const pe={};K.forEach(me=>{const Ee=String(me?.id),Me=(me?.label||me?.configurationName||"").toString();Ee&&(pe[Ee]=Me)}),M(pe)}catch{}}catch(g){console.error("loadAllImageStatuses error:",g),L("Failed to load images")}finally{j(!1)}},[]);h.useEffect(()=>{oe(),de();const g=()=>{oe(),de()},D=async(pe,me)=>{try{const Ee=me?.result?.newPath||me?.result?.processedImagePath;if(Ee&&window.electronAPI?.refreshProtocolRoots){const Me=Ee.replace(/\\[^/]*$/,"").replace(/\/[^/]*$/,"");await window.electronAPI.refreshProtocolRoots([Me])}}catch{}oe(),de()},Y=(pe,me)=>{L(`Retry error: ${me?.error}`),oe(),de()},J=()=>de(),$=()=>{oe(),de()};window.electronAPI.onRetryProgress(g),window.electronAPI.onRetryCompleted(D),window.electronAPI.onRetryError(Y),window.electronAPI.onRetryQueueUpdated(J),window.electronAPI.onRetryStatusUpdated($);const K=setInterval(()=>{de()},5e3);return()=>{clearInterval(K),window.electronAPI.removeRetryProgress(g),window.electronAPI.removeRetryCompleted(D),window.electronAPI.removeRetryError(Y),window.electronAPI.removeRetryQueueUpdated(J),window.electronAPI.removeRetryStatusUpdated($)}},[oe,de]);const v=h.useCallback(()=>{switch(G){case"qc_failed":return o;case"retry_pending":return u;case"processing":return p;case"retry_failed":return f;case"approved":return[...o,...u,...p,...f];default:return o}},[G,o,u,p,f]),w=h.useMemo(()=>[...(()=>{switch(G){case"qc_failed":return o;case"retry_pending":return u;case"processing":return p;case"retry_failed":return f;case"approved":return[...o,...u,...p,...f];default:return o}})().filter(J=>{if(B!=="all"&&String(J.executionId)!==B)return!1;if(I){const $=I.toLowerCase(),K=J.metadata||{},pe=J.generationPrompt.toLowerCase().includes($),Ee=(typeof K?.prompt=="string"?K.prompt.toLowerCase():"").includes($),Ze=(typeof K?.title=="string"?K.title:K?.title?.en||"").toLowerCase().includes($),ze=(typeof K?.description=="string"?K.description:K?.description?.en||"").toLowerCase().includes($),qa=(Array.isArray(K?.tags)?K.tags.join(" ").toLowerCase():"").includes($);if(!pe&&!Ee&&!Ze&&!ze&&!qa)return!1}return!0})].sort((J,$)=>{switch(se){case"newest":return($.createdAt?new Date($.createdAt).getTime():0)-(J.createdAt?new Date(J.createdAt).getTime():0);case"oldest":return(J.createdAt?new Date(J.createdAt).getTime():0)-($.createdAt?new Date($.createdAt).getTime():0);case"name":return J.generationPrompt.localeCompare($.generationPrompt);default:return 0}}),[G,o,u,p,f,B,I,se]),X=h.useMemo(()=>Array.from(new Set([...o.map(g=>String(g.executionId)),...u.map(g=>String(g.executionId)),...p.map(g=>String(g.executionId)),...f.map(g=>String(g.executionId))])),[o,u,p,f]),fe=h.useCallback(g=>{switch(g){case"qc_failed":return o.length;case"retry_pending":return u.length;case"processing":return p.length;case"retry_failed":return f.length;case"approved":return o.length+u.length+p.length+f.length;default:return 0}},[o,u,p,f]),y=h.useCallback(g=>{switch(g){case"qc_failed":return"text-red-600 bg-red-50 border-red-200";case"retry_pending":return"text-amber-600 bg-amber-50 border-amber-200";case"processing":return"text-blue-600 bg-blue-50 border-blue-200";case"retry_failed":return"text-orange-600 bg-orange-50 border-orange-200";case"approved":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},[]),x=h.useCallback(()=>{P("all"),F(""),re("newest")},[]);return{failedImages:o,retryPendingImages:u,processingImages:p,retryFailedImages:f,isLoading:N,error:E,setError:L,filterJob:B,setFilterJob:P,searchQuery:I,setSearchQuery:F,sortBy:se,setSortBy:re,isJobFilterOpen:ie,setIsJobFilterOpen:ce,jobFilterQuery:le,setJobFilterQuery:ue,retryQueueStatus:ae,viewMode:T,setViewMode:H,jobIdToLabel:Q,activeTab:G,setActiveTab:_,loadAllImageStatuses:oe,loadRetryQueueStatus:de,getCurrentTabImages:v,filteredAndSortedImages:w,uniqueJobIds:X,getTabCount:fe,getStatusColor:y,clearFilters:x}}const Qh={imageEnhancement:!1,sharpening:0,saturation:1,imageConvert:!1,convertToJpg:!0,jpgQuality:90,pngQuality:100,removeBg:!1,removeBgSize:"auto",trimTransparentBackground:!1,jpgBackground:"#FFFFFF"};function Yh(o){const{loadAllImageStatuses:b,loadRetryQueueStatus:u,setError:c,getCurrentTabImages:p,getFilteredAndSortedImages:m}=o,[f,k]=h.useState(new Set),[N,j]=h.useState(null),[E,L]=h.useState(new Set),[B,P]=h.useState(!1),[I]=h.useState(Qh),F=h.useCallback(async(ae,z=6e4,T=2e3)=>{try{const H=G=>G&&typeof G=="object"&&G.success!==void 0?G.images||[]:Array.isArray(G)?G:[],Q=G=>G.some(_=>ae.includes(String(_.id))),M=Date.now();for(await b(),await u();Date.now()-M<z;){const[G,_]=await Promise.all([window.electronAPI.generatedImages.getImagesByQCStatus("retry_pending"),window.electronAPI.generatedImages.getImagesByQCStatus("processing")]),de=H(G),oe=H(_);if(await b(),await u(),!Q(de)&&!Q(oe))break;await new Promise(v=>setTimeout(v,T))}}catch{}},[b,u]),se=h.useCallback(ae=>{k(z=>{const T=new Set(z);return T.has(ae)?T.delete(ae):T.add(ae),T})},[]),re=h.useCallback(()=>{const ae=p();k(z=>z.size===ae.length?new Set:new Set(ae.map(T=>String(T.id))))},[p]),ie=h.useCallback(async(ae,z)=>{try{c(null);const T=window.electronAPI;if(ae==="approve"){let H=null;T?.generatedImages?.manualApproveImage?H=await T.generatedImages.manualApproveImage(z):await T.generatedImages.updateQCStatus(z,"approved");try{const Q=H?.outputDirectory,M=H?.finalImagePath,G=M&&typeof M=="string"?M.replace(/\\[^/]*$/,"").replace(/\/[^/]*$/,""):null,_=Q||G||null;_&&T.refreshProtocolRoots&&await T.refreshProtocolRoots([_])}catch{}await b()}else if(ae==="retry")k(H=>new Set(H).add(z));else if(ae==="delete")await T.generatedImages.deleteGeneratedImage(z),await b();else if(ae==="view"){const Q=m().find(M=>String(M.id)===z);Q&&j(Q)}}catch(T){c(`Failed to ${ae} image`),console.error(`Failed to ${ae} image:`,T)}},[c,b,m]),ce=h.useCallback(async ae=>{if(f.size!==0)try{c(null);const z=window.electronAPI;if(ae==="approve")for(const T of f)z?.generatedImages?.manualApproveImage?await z.generatedImages.manualApproveImage(T):await z.generatedImages.updateQCStatus(T,"approved");else if(ae==="retry"){P(!0);return}else if(ae==="delete")for(const T of f)await z.generatedImages.deleteGeneratedImage(T);await b(),k(new Set)}catch(z){c(`Failed to bulk ${ae} images`),console.error(`Failed to bulk ${ae} images:`,z)}},[f,c,b]),le=h.useCallback(async(ae,z,T,H)=>{if(f.size!==0)try{c(null);const Q=Array.from(f),M=await window.electronAPI.retryFailedImagesBatch(Q,ae,ae?null:z||I,T,H||{enabled:!1,steps:[]});M?.success?(await b(),await u(),k(new Set),P(!1),F(Q.map(String)).catch(()=>{})):c(M?.error||"Failed to process retry operations")}catch(Q){c("Failed to process retry operations"),console.error("Failed to process retry operations:",Q)}},[f,I,c,b,u,F]),ue=h.useCallback(()=>k(new Set),[]);return{selectedImages:f,setSelectedImages:k,selectedImageForReview:N,setSelectedImageForReview:j,deletedImageIds:E,setDeletedImageIds:L,showProcessingSettingsModal:B,setShowProcessingSettingsModal:P,processingSettings:I,handleImageSelect:se,handleSelectAll:re,handleImageAction:ie,handleBulkAction:ce,handleRetryWithSettings:le,clearSelection:ue}}function Xl(o,b){const u=String(o||"").toLowerCase(),c=String(b||"").toLowerCase();if(!(u!=="qc_failed"&&u!=="retry_failed"))return c?c.startsWith("processing_failed:download")?"Download failed":c.startsWith("processing_failed:remove_bg")?"Background removal failed":c.startsWith("processing_failed:trim")?"Trim failed":c.startsWith("processing_failed:enhancement")?"Enhancement failed":c.startsWith("processing_failed:convert")?"Conversion failed":c.startsWith("processing_failed:save_final")?"Save failed":c.startsWith("processing_failed:metadata")?"Metadata failed":(c.startsWith("processing_failed:qc"),"QC Failed"):"QC Failed"}function Yo(o,b){const u=String(o||"").toLowerCase(),c=String(b||"").toLowerCase();if(!(u!=="qc_failed"&&u!=="retry_failed"||!c)){if(c.startsWith("processing_failed:download"))return"The system failed to download the image from the API.";if(c.startsWith("processing_failed:remove_bg"))return"The system failed to remove the background for this image.";if(c.startsWith("processing_failed:trim"))return"The system couldnt trim transparent edges. The image was kept untrimmed.";if(c.startsWith("processing_failed:enhancement"))return"The system failed to perform image enhancement operations.";if(c.startsWith("processing_failed:convert"))return"The system couldnt encode to the target format (JPG/WEBP/PNG). When possible, the image was saved in its original format.";if(c.startsWith("processing_failed:save_final"))return"The system failed to save the final image output.";if(c.startsWith("processing_failed:metadata"))return"The system failed to generate the metadata for this image.";if(c.startsWith("processing_failed:qc"))return"The system failed to receive QC analysis response for this image."}}const Vh=({image:o,isSelected:b,onSelect:u,onAction:c})=>{const p=k=>k?new Date(k).toLocaleDateString():"",m=()=>{const k=o?.metadata;try{const N=typeof k=="string"?JSON.parse(k):k||{},j=typeof N?.title=="object"?N.title.en||"":N?.title||"";return j&&String(j).trim()||String(o.generationPrompt||"")}catch{return String(o.generationPrompt||"")}},f=()=>a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx(Dt,{variant:"qc",status:(()=>{const k=String(o.qcStatus||"").toLowerCase();return k==="approved"||k==="complete"||k==="completed"?"approved":k==="processing"?"processing":"qc_failed"})(),labelOverride:Xl(o?.qcStatus,o?.qcReason)})});return a.jsxs("div",{"data-testid":`failed-image-card-${o.id}`,className:"relative bg-white border rounded-lg overflow-hidden transition-colors border-gray-200 hover:border-gray-300 hover:bg-gray-50",children:[a.jsx("div",{className:"absolute top-2 right-2 z-10",children:a.jsx("input",{"data-testid":`select-${o.id}`,type:"checkbox",checked:b,onChange:u,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:k=>k.stopPropagation()})}),a.jsxs("div",{className:"relative aspect-square",onClick:()=>c("view",String(o.id)),children:[o.finalImagePath||o.tempImagePath?a.jsx("img",{src:Ja(o.finalImagePath||o.tempImagePath||""),alt:`Failed image ${o.id}`,className:"w-full h-full object-cover",onError:k=>{k.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik02NCAzMkM3Ny4yNTQ4IDMyIDg4IDQyLjc0NTIgODggNTZDODggNjkuMjU0OCA3Ny4yNTQ4IDgwIDY0IDgwQzUwLjc0NTIgODAgNDAgNjkuMjU0OCA0MCA1NkM0MCA0Mi43NDUyIDUwLjc0NTIgMzIgNjQgMzJaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0yNCA4OEgxMDRDMTEwLjYyNyA4OCAxMTYgOTMuMzcyNiAxMTYgMTAwVjExMkMxMTYgMTE4LjYyNyAxMTAuNjI3IDEyNCAxMDQgMTI0SDI0QzE3LjM3MjYgMTI0IDEyIDExOC42MjcgMTIgMTEyVjEwMEMxMiA5My4zNzI2IDE3LjM3MjYgODggMjQgODhaIiBmaWxsPSIjOUI5QkEwIi8+Cjwvc3ZnPgo="}}):a.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f(),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-40 transition-all duration-200 flex items-center justify-center opacity-0 hover:opacity-100",children:a.jsxs("div",{className:"flex items-center space-x-2",onClick:k=>k.stopPropagation(),children:[a.jsx("button",{onClick:()=>c("view",String(o.id)),className:"p-2 bg-gray-600 text-white rounded-full hover:bg-gray-700",title:"View","aria-label":"View",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:()=>c("approve",String(o.id)),className:"p-2 bg-green-600 text-white rounded-full hover:bg-green-700",title:"Approve","aria-label":"Approve",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>c("retry",String(o.id)),className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700",title:"Add to Retry","aria-label":"Add to Retry",children:a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m15 14 5-5-5-5"}),a.jsx("path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5 5.5 5.5 0 0 0 9.5 20H13"})]})}),a.jsx("button",{onClick:()=>c("delete",String(o.id)),className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700",title:"Delete","aria-label":"Delete",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 truncate mb-2",title:m(),children:m()}),o?.qcReason&&a.jsxs("div",{className:"text-xs text-red-600 mb-2 p-2 bg-red-50 rounded border border-red-200",children:[a.jsx("strong",{children:"Failure:"})," ",Yo(o?.qcStatus,o?.qcReason)||o?.qcReason]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[a.jsx("div",{className:"flex items-center space-x-2",children:o.seed&&a.jsx("span",{className:"font-mono",title:`Seed: ${o.seed}`,children:o.seed})}),a.jsx("div",{title:p(o.createdAt),children:p(o.createdAt)})]})]})]})},Zh={qc_failed:{title:"No Failed",subtitle:"All images have passed quality checks or are pending review."},retry_pending:{title:"No Retry Pending",subtitle:"No images are currently queued for retry."},processing:{title:"No Processing",subtitle:"No images are currently being processed."},retry_failed:{title:"No Retry Failed",subtitle:"No images have failed retry attempts."},approved:{title:"No Images",subtitle:"No images match the current criteria."}},Fh=({images:o,viewMode:b,activeTab:u,selectedIds:c,jobIdToLabel:p,onSelect:m,onSelectAll:f,onAction:k})=>{if(o.length===0){const{title:E,subtitle:L}=Zh[u];return a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:E}),a.jsx("p",{className:"text-gray-500",children:L})]})}if(b==="grid")return a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:o.map(E=>a.jsx(Vh,{image:E,isSelected:c.has(String(E.id)),onSelect:()=>m(String(E.id)),onAction:k},E.id))});const N=(E,L=140)=>E.length>L?E.slice(0,L-1)+"":E,j=E=>{const L=E?.metadata;try{const B=typeof L=="string"?JSON.parse(L):L||{},P=typeof B?.title=="object"?B.title.en||"":B?.title||"";return P&&String(P).trim()?String(P).trim():N(String(E.generationPrompt||""))}catch{return N(String(E.generationPrompt||""))}};return a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full table-fixed divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"w-12 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Select"}),a.jsx("th",{className:"w-20 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),a.jsx("th",{className:"w-28 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"QC Status"}),a.jsx("th",{className:"w-[40%] px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),a.jsx("th",{className:"w-[18%] px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Job Name/Label"}),a.jsx("th",{className:"w-28 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"w-28 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(E=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"w-12 px-4 py-2 align-top",children:a.jsx("input",{type:"checkbox",checked:c.has(String(E.id)),onChange:()=>m(String(E.id)),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),a.jsx("td",{className:"w-20 px-4 py-2 align-top",children:a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded overflow-hidden flex items-center justify-center",title:j(E),children:E.finalImagePath||E.tempImagePath?a.jsx("img",{src:Ja(E.finalImagePath||E.tempImagePath||""),alt:"thumb",className:"w-full h-full object-cover",onError:L=>{L.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI0YzRjRGNiIvPgo8cGF0aCBkPSJNNTAgNTBIMTUwVjc1SDc1VjEyNUg1MFY1MFoiIGZpbGw9IiNEMUQ1RDNBIi8+Cjwvc3ZnPg=="}}):a.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),a.jsx("td",{className:"w-28 px-4 py-2 align-top",children:a.jsx("div",{className:"inline-flex",children:a.jsx(Dt,{variant:"qc",status:(()=>{const L=String(E?.qcStatus||"").toLowerCase();return L==="approved"||L==="complete"||L==="completed"?"approved":L==="processing"?"processing":"qc_failed"})(),labelOverride:Xl(E?.qcStatus,E?.qcReason)})})}),a.jsx("td",{className:"w-[40%] px-4 py-2 text-sm text-gray-700 whitespace-normal break-words align-top",children:Yo(E?.qcStatus,E?.qcReason)||E?.qcReason||"-"}),a.jsx("td",{className:"w-[18%] px-4 py-2 text-sm text-gray-700 align-top",children:p[String(E.executionId)]||`Job ${E.executionId}`}),a.jsx("td",{className:"w-28 px-4 py-2 text-sm text-gray-700 align-top",children:E.createdAt?new Date(E.createdAt).toLocaleDateString():"-"}),a.jsx("td",{className:"w-28 px-4 py-2 align-top",children:a.jsxs("div",{className:"flex items-center gap-3 justify-start flex-wrap",children:[a.jsx("button",{onClick:()=>k("view",String(E.id)),className:"text-gray-600 hover:text-gray-900",title:"View","aria-label":"View",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:()=>k("approve",String(E.id)),className:"text-green-600 hover:text-green-700",title:"Approve","aria-label":"Approve",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>k("retry",String(E.id)),className:"text-blue-600 hover:text-blue-700",title:"Add to Retry","aria-label":"Add to Retry",children:a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m15 14 5-5-5-5"}),a.jsx("path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5 5.5 5.5 0 0 0 9.5 20H13"})]})}),a.jsx("button",{onClick:()=>k("delete",String(E.id)),className:"text-red-600 hover:text-red-700",title:"Delete","aria-label":"Delete",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},E.id))})]})})},Xh=({selectedCount:o,totalCount:b,isProcessing:u,onSelectAll:c,onBulkApprove:p,onBulkRetry:m,onBulkDelete:f})=>a.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:o===b&&b>0,onChange:c,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Select All (",o,"/",b,")"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:p,disabled:o===0,className:`flex items-center px-3 py-2 text-sm rounded-md transition-colors ${o===0?"bg-green-200 text-green-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,title:o===0?"Select images to enable":"Approve selected images",children:"Approve Selected"}),a.jsxs("button",{onClick:m,disabled:o===0||u,className:`flex items-center px-3 py-2 text-sm rounded-md transition-colors ${o===0||u?"bg-blue-200 text-blue-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,title:o===0?"Select images to enable":u?"Retry is currently processing. Please wait for completion.":"Retry selected images (batch)",children:["Retry Selected",u&&a.jsxs("svg",{className:"ml-1 w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M12 2a10 10 0 00-10 10h2a8 8 0 018-8V2z"})]})]}),a.jsx("button",{onClick:f,disabled:o===0,className:`flex items-center px-3 py-2 text-sm rounded-md transition-colors ${o===0?"bg-red-200 text-red-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,title:o===0?"Select images to enable":"Delete selected images",children:"Delete Selected"})]})]}),Wh=({image:o,isOpen:b,onClose:u,onAction:c,onApprove:p,onRetry:m,onPrevious:f,onNext:k,onDelete:N})=>{const[j,E]=h.useState("details"),[L,B]=h.useState(null),P=h.useRef(null),I=h.useRef(null),[F,se]=h.useState(1),[re,ie]=h.useState({x:0,y:0}),[ce,le]=h.useState(!1),[ue,ae]=h.useState(!1),z=h.useRef({x:0,y:0}),T=h.useRef({x:0,y:0}),H=h.useRef(null),Q=y=>{if(!y)return{};if(typeof y=="string")try{return JSON.parse(y)}catch{return{}}return y},M=y=>{c(y,String(o.id)),u()},G=y=>{y.target===y.currentTarget&&u()},_=y=>{y.key==="Escape"&&u()};h.useEffect(()=>()=>{},[]),h.useEffect(()=>{let y=!1;async function x(){try{const g=window.electronAPI;if(!g||typeof g.getJobExecutionByImageId!="function"||!o?.id)return;const D=await g.getJobExecutionByImageId(o.id),J=(D&&D.success&&D.execution?D.execution:null)?.configurationSnapshot?.processing||null;y||B(J)}catch{}}return b&&o?x():B(null),()=>{y=!0}},[b,o?.id]),h.useEffect(()=>{if(b){const y=document.querySelector('[aria-label="Close modal"]');y&&y.focus()}},[b]);const de=h.useCallback(()=>{const y=I.current,x=P.current;if(!y||!x)return;const g=y.naturalWidth||y.width,D=y.naturalHeight||y.height,Y=x.getBoundingClientRect(),J=Y.width-32,$=Y.height-32;if(g<=0||D<=0||J<=0||$<=0)return;const K=Math.min(J/g,$/D,1);se(K>0?K:1),ie({x:0,y:0})},[]);h.useEffect(()=>{if(b&&o){const y=o.id,x=H.current,g=x===null,D=x!==null&&String(x)!==String(y);g?(E("details"),se(1),ie({x:0,y:0}),requestAnimationFrame(de),H.current=y):D&&(H.current=y)}else b||(H.current=null)},[b,o,de]);const oe=(y,x)=>{se(g=>{const D=Math.min(Math.max(g+y,.2),5);if(x&&P.current){const Y=P.current.getBoundingClientRect(),J=x.x-Y.left-Y.width/2,$=x.y-Y.top-Y.height/2,K=D/g-1;ie(pe=>({x:pe.x-J*K,y:pe.y-$*K}))}return D})},v=y=>{if(y.ctrlKey||y.metaKey){y.preventDefault();const x=y.deltaY>0?-.1:.1;oe(x,{x:y.clientX,y:y.clientY})}},w=y=>{y.button===0&&(le(!0),z.current={x:y.clientX,y:y.clientY},T.current={...re})},X=y=>{if(!ce)return;const x=y.clientX-z.current.x,g=y.clientY-z.current.y;ie({x:T.current.x+x,y:T.current.y+g})},fe=()=>le(!1);return b?a.jsx("div",{"data-testid":"failed-image-review-modal",className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-hidden",onKeyDown:_,onClick:G,children:a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{"data-testid":"modal-header",className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Image Details"}),a.jsx("div",{className:"inline-flex items-center",children:a.jsx(Dt,{variant:"qc",status:(()=>{const y=String(o?.qcStatus||"").toLowerCase();return y==="approved"||y==="complete"||y==="completed"?"approved":y==="processing"?"processing":"qc_failed"})(),labelOverride:Xl(o?.qcStatus,o?.qcReason)})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:async()=>{p?await p(String(o.id)):M("approve")},className:"review-modal-button bg-green-600 text-white hover:bg-green-700",title:"Approve image (move to success)",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]}),a.jsxs("button",{onClick:async()=>{m?await m(String(o.id)):M("retry")},className:"review-modal-button bg-blue-600 text-white hover:bg-blue-700",title:"Add image to retry pool",children:[a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m15 14 5-5-5-5"}),a.jsx("path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5 5.5 5.5 0 0 0 9.5 20H13"})]}),"Add to Retry"]}),a.jsxs("button",{onClick:async()=>{N?await N(String(o.id)):M("delete")},className:"review-modal-button bg-red-600 text-white hover:bg-red-700",title:"Delete image permanently",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]}),a.jsx("button",{type:"button",onClick:()=>ae(y=>!y),className:"px-2 py-1 text-xs bg-white hover:bg-gray-50 border border-gray-200 text-gray-700 rounded","aria-label":"Image Control Info",title:"Image Control Info",children:"Image Control Info"}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:f,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100","aria-label":"Previous image",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:k,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100","aria-label":"Next image",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),a.jsx("button",{type:"button",onClick:u,className:"p-2 text-gray-400 hover:text-gray-600","aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),ue&&a.jsxs("div",{className:"absolute top-14 right-4 w-80 bg-white border border-gray-200 rounded-md shadow-lg p-3 text-xs text-gray-700 z-20",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Image viewer controls"}),a.jsx("button",{type:"button",className:"p-1 text-gray-500 hover:text-gray-700",onClick:()=>ae(!1),"aria-label":"Close help",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("ul",{className:"space-y-1 list-disc pl-4",children:[a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Pan"}),": Click and drag on the image"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Zoom"}),": Ctrl (Windows/Linux) or  Cmd (macOS) + mouse wheel"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Fit"}),": Doubleclick image"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Toolbar (bottomright)"}),": Zoom out (), Zoom in (+), Reset, Fit to screen"]})]})]}),a.jsxs("div",{"data-testid":"modal-content",className:"flex flex-row h-[calc(90vh-80px)] overflow-hidden",children:[a.jsx("div",{className:"w-1/2 xl:w-2/3 p-6 bg-gray-50 flex flex-col h-full",children:a.jsx("div",{"data-testid":"image-container",className:"relative flex-1 h-full min-h-0",children:o.finalImagePath||o.tempImagePath?a.jsxs("div",{ref:P,className:"relative w-full h-full overflow-hidden rounded",onWheel:v,onDoubleClick:de,children:[a.jsx("img",{ref:I,src:Ja(o.finalImagePath||o.tempImagePath||""),alt:"Failed image",className:`${ce?"cursor-grabbing":"cursor-grab"}`,style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) translate(${re.x}px, ${re.y}px) scale(${F})`,transformOrigin:"center center",transition:ce?"none":"transform 80ms ease-out",maxWidth:"100%",maxHeight:"100%",userSelect:"none",pointerEvents:"auto"},onMouseDown:w,onMouseMove:X,onMouseUp:fe,onMouseLeave:fe,onError:y=>{y.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCA1MEgxNTBWNzVINzVWMTI1SDUwVjUwWiIgZmlsbD0iI0QxRDVEM0EiLz4KPHN2ZyB4PSI3NSIgeT0iODAiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0NSIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMTkgM0g1QzMuOSAzIDMgMy45IDMgNVYxOUMzIDIwLjEgMy45IDIxIDUgMjFIMTlDMjAuMSAyMSAyMSAyMC4xIDIxIDE5VjVDMjEgMy45IDIwLjEgMyAxOSAzWk0xOSAxOUg1VjVIMTlWMTlaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0xNCAxM0gxMFYxN0gxNFYxM1oiIGZpbGw9IiM5QjlCQTAiLz4KPC9zdmc+Cjwvc3ZnPgo="}}),a.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center space-x-2 bg-white/90 border border-gray-200 rounded-md shadow px-2 py-1 z-10",children:[a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>oe(-.1),title:"Zoom out","aria-label":"Zoom out",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),a.jsxs("div",{className:"text-xs text-gray-600 w-12 text-center",children:[Math.round(F*100),"%"]}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>oe(.1),title:"Zoom in","aria-label":"Zoom in",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>{se(1),ie({x:0,y:0})},title:"Reset","aria-label":"Reset zoom",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582M20 12A8.001 8.001 0 004.582 9m0 0H9"})})}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:de,title:"Fit to screen","aria-label":"Fit to screen",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h7M3 3v7M21 21h-7M21 21v-7"})})})]})]}):a.jsxs("div",{className:"w-full h-64 bg-gray-100 flex items-center justify-center rounded-lg",children:[a.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsx("span",{className:"sr-only",children:"No Image Available"})]})})}),a.jsxs("div",{className:"w-1/2 xl:w-1/3 border-l border-gray-200 flex flex-col h-full overflow-hidden xl:min-w-[400px]",children:[a.jsx("div",{className:"flex border-b border-gray-200",children:["details","metadata","processing"].map(y=>a.jsx("button",{onClick:()=>E(y),className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${j===y?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:y==="details"?"Details":y==="metadata"?"AI Metadata":"Processing"},y))}),a.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4",children:[j==="details"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Id"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:o.executionId})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Id"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:o.id})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Failure Analysis"}),a.jsx("div",{className:o.qcReason?"bg-red-50 border border-red-200 rounded-lg p-4":"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("svg",{className:`w-5 h-5 mt-0.5 mr-2 ${o.qcReason?"text-red-400":"text-yellow-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:o.qcReason?"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z":"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("h4",{className:`text-sm font-medium ${o.qcReason?"text-red-800":"text-yellow-800"}`,children:o.qcReason?"Failure Reason":"No Specific Reason"}),a.jsx("p",{className:`${o.qcReason?"text-red-700":"text-yellow-700"} text-sm mt-1 whitespace-normal break-words`,children:o.qcReason?Yo(o?.qcStatus,o?.qcReason)||o?.qcReason:"Image failed quality check but no specific reason provided."})]})]})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Generation Details"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prompt"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded border",children:o.generationPrompt})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),a.jsx("p",{className:"text-sm text-gray-900",children:o.createdAt?new Date(o.createdAt).toLocaleDateString():""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File Path"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono break-all",children:o.finalImagePath||o.tempImagePath||""})]})]})]})]}),j==="metadata"&&a.jsx("div",{className:"space-y-4",children:(()=>{const y=Q(o.metadata),x=typeof y?.title=="object"?y.title.en||"":y?.title||"",g=typeof y?.description=="object"?y.description.en||"":y?.description||"";let D=[];return y?.uploadTags?.en?D=String(y.uploadTags.en).split(",").map(Y=>Y.trim()).filter(Boolean):Array.isArray(y?.tags)?D=y.tags:typeof y?.tags=="string"&&(D=String(y.tags).split(",").map(Y=>Y.trim()).filter(Boolean)),!x&&!g&&D.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No AI metadata available."}):a.jsxs(a.Fragment,{children:[x&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Title"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:x})]}),g&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Description"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:g})]}),D.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:D.map((Y,J)=>a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:Y},J))})]})]})})()}),j==="processing"&&a.jsx("div",{className:"space-y-4",children:(()=>{const y=$=>{if(!$)return null;if(typeof $=="string")try{return JSON.parse($)}catch{return null}return typeof $=="object"?$:null},x=$=>{if(!$||typeof $!="object")return null;const K=["imageEnhancement","sharpening","saturation","imageConvert","convertToJpg","jpgQuality","pngQuality","removeBg","trimTransparentBackground","jpgBackground","removeBgSize"],pe={};return K.forEach(me=>{me in $&&(pe[me]=$[me])}),pe},g=x(y(o?.processingSettings)),D=x(L),J=!!(g&&D&&JSON.stringify(g)!==JSON.stringify(D))?y(o?.processingSettings)||L||{}:L||y(o?.processingSettings)||{};return a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Enhancement"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.imageEnhancement?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sharpening"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.imageEnhancement?J.sharpening||0:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Enhancement OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saturation"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.imageEnhancement?J.saturation||1.4:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Enhancement OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Convert"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.imageConvert?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Convert Format"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.imageConvert?J.convertToWebp?"WEBP":J.convertToJpg?"JPG":"PNG":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Convert OFF)"})})]}),J.imageConvert&&J.convertToJpg&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"JPG Quality"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.jpgQuality||85})]}),J.imageConvert&&J.convertToWebp&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"WebP Quality"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.webpQuality||85})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remove Background"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.removeBg?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remove.bg Size"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.removeBg?J.removeBgSize||"auto":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Remove Background OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trim Transparent"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.removeBg?J.trimTransparentBackground?"Yes":"No":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Remove Background OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"JPG Background Colour"}),a.jsx("p",{className:"text-sm text-gray-900",children:J.imageConvert&&J.convertToJpg&&J.removeBg?J.jpgBackground||"white":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Remove Background, Image Convert are set to OFF and Convert Format is not JPG)"})})]})]})})()})]})]})]})]})}):null},fm=({selectedImage:o,allImages:b,onClose:u,onAction:c,onApprove:p,onRetry:m,onDelete:f,onPreviousImage:k,onNextImage:N,hasPrevious:j,hasNext:E})=>{const[L,B]=h.useState(null),P=h.useRef(!1),I=h.useRef(!1),F=o?L||b.find(T=>String(T.id)===String(o.id)):null;!F&&!P.current&&o&&setTimeout(()=>{P.current||u()},0);const se=()=>{P.current||I.current||u()},re=async T=>{P.current=!0,I.current=!0;try{await p(T),setTimeout(()=>{B(null)},200)}finally{P.current=!1,I.current=!1}},ie=async T=>{P.current=!0,I.current=!0;try{await m(T),setTimeout(()=>{B(null)},200)}finally{P.current=!1,I.current=!1}},ce=async T=>{P.current=!0,I.current=!0;try{await f(T),setTimeout(()=>{B(null)},200)}finally{P.current=!1,I.current=!1}},le=o&&j(o)?()=>{B(null),k(o)}:void 0,ue=o&&E(o)?()=>{B(null),N(o)}:void 0,ae=F||o||{id:"",filePath:"",prompt:"",qcStatus:"qc_failed"},z=!!o;return Th.createPortal(a.jsx(Wh,{image:ae,isOpen:z,onClose:se,onAction:c,onApprove:re,onRetry:ie,onPrevious:le,onNext:ue,hasPrevious:o?j(o):!1,hasNext:o?E(o):!1,onDelete:ce}),document.body)};fm.displayName="FailedImageModalContainer";const Ph=({isOpen:o,onClose:b,onRetry:u,selectedCount:c})=>{const[p,m]=h.useState(!0),[f,k]=h.useState(!1),[N,j]=h.useState(!1),[E,L]=h.useState([]),[B,P]=h.useState({imageEnhancement:!1,sharpening:5,saturation:1,imageConvert:!1,convertToJpg:!0,jpgQuality:85,pngQuality:100,convertToWebp:!1,webpQuality:85,removeBg:!1,removeBgSize:"auto",trimTransparentBackground:!1,jpgBackground:"#FFFFFF"}),I=h.useRef(null),F=h.useRef(null),se=h.useRef(null),re=h.useRef(null),ie=h.useRef(null);if(h.useEffect(()=>{},[p,o]),!o)return null;const ce=()=>{console.log(" ProcessingSettingsModal: handleRetry called"),console.log(" ProcessingSettingsModal: useOriginalSettings:",p),console.log(" ProcessingSettingsModal: includeMetadata:",f),console.log(" ProcessingSettingsModal: failRetryEnabled:",N),console.log(" ProcessingSettingsModal: failOnSteps:",E),console.log(" ProcessingSettingsModal: batchSettings keys:",Object.keys(B)),p?(console.log(" ProcessingSettingsModal: Retrying with original settings"),u(!0,void 0,f,{enabled:N,steps:E})):(console.log(" ProcessingSettingsModal: Retrying with modified settings keys:",Object.keys(B)),u(!1,B,f,{enabled:N,steps:E}))},le=(_,de)=>{P(oe=>({...oe,[_]:de}))},ue=B.imageEnhancement,ae=B.imageEnhancement,z=B.imageConvert,T=B.imageConvert,H=B.imageConvert&&B.convertToJpg,Q=B.imageConvert&&B.convertToWebp===!0,M=B.removeBg,G=B.removeBg&&B.imageConvert&&B.convertToJpg;return a.jsx("div",{"data-testid":"processing-settings-modal",className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{"data-testid":"modal-header",className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Retry Processing Settings"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Configure how to process ",c," selected images for retry"]})]}),a.jsx("button",{type:"button",onClick:b,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{"data-testid":"modal-content",ref:F,className:"p-6 overflow-y-auto flex-1 min-h-0 retry-modal-scroll",style:{scrollbarGutter:"stable both-edges"},children:[a.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("svg",{className:"w-5 h-5 text-blue-400 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Batch Processing"}),a.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["All ",c," selected images will be processed together with the same settings. This ensures consistent results across the entire batch."]})]})]})}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Batch Processing Method"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsx("input",{type:"radio",name:"processingMethod",value:"original","aria-label":"Retry with Original Settings",checked:p,onChange:()=>m(!0),className:"text-blue-600 focus:ring-0 focus:outline-none focus-visible:outline-none mt-1.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Retry with Original Settings"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Process all images with their original job settings (Metadata, processing)"})]})]}),a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsx("input",{type:"radio",name:"processingMethod",value:"modified","aria-label":"Retry with Modified Settings",checked:!p,onChange:()=>m(!1),className:"text-blue-600 focus:ring-0 focus:outline-none focus-visible:outline-none mt-1.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Retry with Modified Settings"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Process all images with new settings (Metadata, processing)  no image regeneration"})]})]})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Metadata Options"}),a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("svg",{className:"w-5 h-5 text-blue-400 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Metadata Regeneration"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Choose whether to regenerate metadata for the selected images during retry processing."}),a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-blue-800 font-medium",children:"Also regenerate metadata (titles, descriptions, tags)"}),a.jsx(We,{checked:f,onChange:k})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"This will regenerate AI-generated metadata for all selected images using the current AI model settings."})]})]})]})})]}),!p&&a.jsxs("div",{ref:I,className:"space-y-8 scroll-mt-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"pr-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800",children:"Fail Retry"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"When ON, selected steps will hard-fail the retry if they error. Unselected steps will soft-fail and continue. If no steps are selected, all steps soft-fail."}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When OFF, defaults apply: Remove.bg soft, Trim hard, Convert/Save hard, Metadata soft, Enhancement soft (hard only if encode/save fails)."})]}),a.jsx(We,{ariaLabel:"Enable Fail Retry",checked:N,onChange:j})]}),N&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Steps that should hard-fail retry"}),a.jsxs("select",{multiple:!0,value:E,onChange:_=>{const de=Array.from(_.target.selectedOptions).map(oe=>oe.value);L(de)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",size:5,children:[a.jsx("option",{value:"remove_bg",children:"Remove Background"}),a.jsx("option",{value:"trim",children:"Trim Transparent"}),a.jsx("option",{value:"enhancement",children:"Enhancement"}),a.jsx("option",{value:"convert",children:"Convert / Save"}),a.jsx("option",{value:"metadata",children:"Metadata"})]})]})]}),a.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("svg",{className:"w-5 h-5 text-yellow-400 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Important Note"}),a.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["These settings will be applied to all ",c," images in the batch. Images will NOT be regenerated and Quality Controlled - only metadata or/and processing will be updated."]}),a.jsxs("p",{className:"text-sm text-yellow-600 mt-2",children:[a.jsx("strong",{children:"Current defaults:"})," Image conversion enabled, converting to JPG at 85% quality"]})]})]})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Batch Processing Configuration"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Image Enhancement"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image Enhancement"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Enable image enhancement effects (sharpening, saturation)"})]}),a.jsx(We,{ariaLabel:"Enable image enhancement",checked:B.imageEnhancement,onChange:_=>{le("imageEnhancement",_),_&&setTimeout(()=>{se.current?.scrollIntoView({behavior:"smooth",block:"start"})},0)}})]}),ue&&a.jsxs("div",{ref:se,className:"scroll-mt-4",children:[a.jsx("label",{htmlFor:"sharpening",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sharpening Level (0-10)"}),a.jsx("input",{id:"sharpening",type:"number",value:B.sharpening,onChange:_=>le("sharpening",parseInt(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"10"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sharpening intensity for image enhancement"})]}),ae&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"saturation",className:"block text-sm font-medium text-gray-700 mb-2",children:"Saturation Level (0.0-2.0)"}),a.jsx("input",{id:"saturation",type:"number",value:B.saturation,onChange:_=>le("saturation",parseFloat(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0.0",max:"2.0",step:"0.1"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Saturation adjustment for image enhancement"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Image Conversion"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image Convert"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Enable image conversion and processing"})]}),a.jsx(We,{ariaLabel:"Enable image conversion",checked:B.imageConvert,onChange:_=>{le("imageConvert",_),_&&setTimeout(()=>{re.current?.scrollIntoView({behavior:"smooth",block:"start"})},0)}})]}),z&&a.jsxs("div",{ref:re,className:"scroll-mt-4",children:[a.jsx("label",{htmlFor:"convert-format",className:"block text-sm font-medium text-gray-700 mb-2",children:"Convert Format"}),a.jsxs("select",{id:"convert-format","aria-label":"Convert Format",value:B.convertToWebp?"webp":B.convertToJpg?"jpg":"png",onChange:_=>{const de=_.target.value;le("convertToWebp",de==="webp"),le("convertToJpg",de==="jpg")},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"png",children:"PNG"}),a.jsx("option",{value:"jpg",children:"JPG"}),a.jsx("option",{value:"webp",children:"WEBP"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Convert images to this format"})]}),T&&a.jsxs("div",{className:"space-y-4",children:[H&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"jpg-quality",className:"block text-sm font-medium text-gray-700 mb-2",children:"JPG Quality (1-100)"}),a.jsx("input",{id:"jpg-quality",type:"number",value:B.jpgQuality,onChange:_=>le("jpgQuality",parseInt(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"100"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quality setting for JPG conversion"})]}),Q&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"webp-quality",className:"block text-sm font-medium text-gray-700 mb-2",children:"WebP Quality (1-100)"}),a.jsx("input",{id:"webp-quality",type:"number",value:B.webpQuality??90,onChange:_=>le("webpQuality",parseInt(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"100"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quality setting for WebP conversion"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Background Processing"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remove Background"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Remove background using Remove.bg API"})]}),a.jsx(We,{ariaLabel:"Remove background",checked:B.removeBg,onChange:_=>{le("removeBg",_),_&&setTimeout(()=>{ie.current?.scrollIntoView({behavior:"smooth",block:"start"})},0)}})]}),B.removeBg&&a.jsxs("div",{ref:ie,className:"scroll-mt-4",children:[a.jsx("label",{htmlFor:"remove-bg-size",className:"block text-sm font-medium text-gray-700 mb-2",children:"Remove BG Size"}),a.jsxs("select",{id:"remove-bg-size",value:B.removeBgSize,onChange:_=>le("removeBgSize",_.target.value),className:"ui-select",children:[a.jsx("option",{value:"auto",children:"Auto"}),a.jsx("option",{value:"preview",children:"Preview"}),a.jsx("option",{value:"full",children:"Full"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Size setting for background removal"})]}),M&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trim Transparent Background"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Remove transparent areas from images (PNG only)"})]}),a.jsx(We,{ariaLabel:"Trim transparent background",checked:B.trimTransparentBackground,onChange:_=>le("trimTransparentBackground",_)})]}),G&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"jpg-background",className:"block text-sm font-medium text-gray-700 mb-2",children:"JPG Background Color"}),a.jsxs("select",{id:"jpg-background",value:B.jpgBackground,onChange:_=>le("jpgBackground",_.target.value),className:"ui-select",children:[a.jsx("option",{value:"#FFFFFF",children:"White"}),a.jsx("option",{value:"#000000",children:"Black"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Background color for JPG images (required when removing background)"})]})]})]})]}),a.jsxs("div",{"data-testid":"modal-footer",className:"flex justify-end space-x-3 p-6 border-t border-gray-200",children:[a.jsx("button",{onClick:b,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:ce,className:"px-6 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium",children:[p?"Retry with Original Settings":"Retry with Modified Settings"," (",c," images)"]})]})]})})},Kh=["qc_failed","retry_pending","processing","retry_failed","approved"],$h=({onBack:o,onBackToSingleJob:b})=>{const u=Gh(),c=Yh({loadAllImageStatuses:u.loadAllImageStatuses,loadRetryQueueStatus:u.loadRetryQueueStatus,setError:u.setError,getCurrentTabImages:u.getCurrentTabImages,getFilteredAndSortedImages:()=>u.filteredAndSortedImages}),p=h.useMemo(()=>u.filteredAndSortedImages.filter(f=>!c.deletedImageIds.has(String(f.id))),[u.filteredAndSortedImages,c.deletedImageIds]),m=()=>{u.clearFilters(),c.clearSelection()};return u.isLoading?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading images..."})]})}):a.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col overflow-hidden",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 relative",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Back to dashboard",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),b&&a.jsx("button",{onClick:b,className:"text-blue-500 hover:text-blue-700 transition-colors","aria-label":"Back to single job view",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Failed Images Review"}),a.jsx("p",{className:"text-gray-600",children:"Review and manage images that failed quality assurance checks"})]})]}),a.jsx("div",{className:"flex items-center space-x-4 ml-auto",children:a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.getTabCount("qc_failed")}),a.jsx("div",{className:"text-sm text-gray-500",children:"Failed Images"})]})})]})}),(u.retryQueueStatus.isProcessing||u.retryQueueStatus.queueLength>0)&&a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-lg font-semibold text-blue-900 flex items-center gap-2",children:[a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]}),"Retry Queue Status"]}),a.jsx("div",{className:"text-sm text-blue-700",children:u.retryQueueStatus.isProcessing?"Currently Processing":"Queued Jobs"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.retryQueueStatus.processingJobs}),a.jsx("div",{className:"text-sm text-blue-700",children:"Processing"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-600",children:u.retryQueueStatus.pendingJobs}),a.jsx("div",{className:"text-sm text-amber-700",children:"Queued"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.retryQueueStatus.completedJobs}),a.jsx("div",{className:"text-sm text-green-700",children:"Completed"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.retryQueueStatus.failedJobs}),a.jsx("div",{className:"text-sm text-red-700",children:"Failed"})]})]}),u.retryQueueStatus.currentJob&&a.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-blue-900",children:["Current Job: #",u.retryQueueStatus.currentJob.id]}),a.jsxs("span",{className:"text-xs text-blue-600",children:[u.retryQueueStatus.currentJob.settings," settings + ",u.retryQueueStatus.currentJob.metadata?"metadata":"no metadata"]})]}),a.jsx("div",{className:"space-y-2",children:u.processingImages.map(f=>a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"text-blue-800",children:["Image ",f.id,": Processing..."]}),a.jsx("div",{className:"w-24 bg-blue-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})})]},f.id))})]})]})}),a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-2",children:a.jsx("div",{className:"flex space-x-1",children:Kh.map(f=>a.jsxs("button",{onClick:()=>u.setActiveTab(f),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-colors ${u.activeTab===f?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:[f==="qc_failed"&&"Failed",f==="retry_pending"&&"Retry Pending",f==="processing"&&"Processing",f==="retry_failed"&&"Retry Failed",f==="approved"&&"All",a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full border ${u.getStatusColor(f)}`,children:u.getTabCount(f)})]},f))})}),a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-3",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View:"}),a.jsx("button",{onClick:()=>u.setViewMode("grid"),className:`p-2 rounded-md transition-all duration-200 ${u.viewMode==="grid"?"bg-gray-200 text-gray-900 border border-gray-300":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 border border-transparent"}`,"aria-label":"Grid View",title:"Grid View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{onClick:()=>u.setViewMode("list"),className:`p-2 rounded-md transition-all duration-200 ${u.viewMode==="list"?"bg-gray-200 text-gray-900 border border-gray-300":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 border border-transparent"}`,"aria-label":"List View",title:"List View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Job:"}),a.jsxs("button",{type:"button",onClick:()=>u.setIsJobFilterOpen(f=>!f),className:"relative text-sm border border-gray-300 rounded-md px-3 py-1 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[14rem] text-left pr-8","aria-haspopup":"listbox","aria-expanded":u.isJobFilterOpen,children:[u.filterJob==="all"?"All Jobs":(()=>{const f=u.jobIdToLabel[String(u.filterJob)];if(f?.trim()){const k=f.trim();return k.endsWith("(Rerun)")?k.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(u.filterJob).slice(-3)})`:k}return`Job ${String(u.filterJob).slice(0,8)}`})(),a.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-slate-700",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z"})})})]})]}),u.isJobFilterOpen&&a.jsxs("div",{className:"absolute z-20 mt-2 w-[18rem] bg-white border border-gray-200 rounded-md shadow-lg overflow-x-hidden",children:[a.jsx("div",{className:"p-2 border-b border-gray-200",children:a.jsx("input",{type:"text",value:u.jobFilterQuery,onChange:f=>u.setJobFilterQuery(f.target.value),placeholder:"Search jobs...",className:"w-full text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})}),a.jsxs("ul",{role:"listbox",className:"max-h-72 overflow-y-auto overflow-x-hidden py-1",children:[a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>{u.setFilterJob("all"),u.setIsJobFilterOpen(!1),u.setJobFilterQuery("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 whitespace-normal break-words ${u.filterJob==="all"?"bg-gray-100":""}`,role:"option","aria-selected":u.filterJob==="all",children:"All Jobs"})}),u.uniqueJobIds.map(f=>({id:f,label:u.jobIdToLabel[String(f)]||`Job ${String(f).slice(0,8)}`})).filter(f=>f.label.toLowerCase().includes(u.jobFilterQuery.toLowerCase())).map(f=>a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>{u.setFilterJob(String(f.id)),u.setIsJobFilterOpen(!1),u.setJobFilterQuery("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 whitespace-normal break-words ${String(u.filterJob)===String(f.id)?"bg-gray-100":""}`,role:"option","aria-selected":String(u.filterJob)===String(f.id),children:f.label.endsWith("(Rerun)")?f.label.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(f.id).slice(-3)})`:f.label})},f.id))]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Search:"}),a.jsx("input",{type:"text",placeholder:"Search images...",value:u.searchQuery,onChange:f=>u.setSearchQuery(f.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sort:"}),a.jsxs("select",{value:u.sortBy,onChange:f=>u.setSortBy(f.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"oldest",children:"Oldest First"}),a.jsx("option",{value:"name",children:"By Name"})]})]}),a.jsx("button",{onClick:m,className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:"Clear"})]}),a.jsx(Xh,{selectedCount:c.selectedImages.size,totalCount:p.length,isProcessing:u.retryQueueStatus.isProcessing,onSelectAll:c.handleSelectAll,onBulkApprove:()=>c.handleBulkAction("approve"),onBulkRetry:()=>c.handleBulkAction("retry"),onBulkDelete:()=>c.handleBulkAction("delete")})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.jsx("div",{className:"p-6",children:a.jsx(Fh,{images:p,viewMode:u.viewMode,activeTab:u.activeTab,selectedIds:c.selectedImages,jobIdToLabel:u.jobIdToLabel,onSelect:c.handleImageSelect,onSelectAll:c.handleSelectAll,onAction:c.handleImageAction})}),(u.retryQueueStatus.completedJobs>0||u.retryQueueStatus.failedJobs>0)&&a.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Retry History"]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[u.retryQueueStatus.completedJobs>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsxs("span",{children:["Completed: ",u.retryQueueStatus.completedJobs," retry jobs"]})]}),u.retryQueueStatus.failedJobs>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a.jsxs("span",{children:["Failed: ",u.retryQueueStatus.failedJobs," retry jobs"]})]})]})]})})]}),u.error&&a.jsx("div",{className:"fixed top-4 right-4 bg-red-50 border border-red-200 rounded-lg p-4 max-w-md",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800",children:u.error})}),a.jsx("div",{className:"ml-auto pl-3",children:a.jsx("button",{onClick:()=>u.setError(null),className:"text-red-400 hover:text-red-600",children:a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})}),a.jsx(fm,{selectedImage:c.selectedImageForReview,allImages:p,onClose:()=>{c.setSelectedImageForReview(null),c.setDeletedImageIds(new Set),u.loadAllImageStatuses()},onAction:c.handleImageAction,onApprove:async f=>{const k=p.findIndex(j=>String(j.id)===String(f));let N=null;k>=0&&(k<p.length-1?N=p[k+1]:k>0&&(N=p[k-1]));try{window.electronAPI?.generatedImages?.manualApproveImage?await window.electronAPI.generatedImages.manualApproveImage(f):await window.electronAPI.generatedImages.updateQCStatus(f,"approved"),c.setDeletedImageIds(j=>new Set(j).add(String(f))),N?xa.flushSync(()=>c.setSelectedImageForReview(N)):xa.flushSync(()=>c.setSelectedImageForReview(null))}catch{}},onRetry:async f=>{const k=p.findIndex(j=>String(j.id)===String(f));let N=null;k>=0&&(k<p.length-1?N=p[k+1]:k>0&&(N=p[k-1])),c.setSelectedImages(j=>new Set(j).add(f)),N?xa.flushSync(()=>c.setSelectedImageForReview(N)):xa.flushSync(()=>c.setSelectedImageForReview(null))},onDelete:async f=>{const k=p.findIndex(j=>String(j.id)===String(f));let N=null;k>=0&&(k<p.length-1?N=p[k+1]:k>0&&(N=p[k-1]));try{await window.electronAPI.generatedImages.deleteGeneratedImage(f),c.setDeletedImageIds(j=>new Set(j).add(String(f))),N?xa.flushSync(()=>c.setSelectedImageForReview(N)):xa.flushSync(()=>c.setSelectedImageForReview(null))}catch{}},onPreviousImage:f=>{const k=p.findIndex(N=>String(N.id)===String(f.id));k>0&&c.setSelectedImageForReview(p[k-1])},onNextImage:f=>{const k=p.findIndex(N=>String(N.id)===String(f.id));k>=0&&k<p.length-1&&c.setSelectedImageForReview(p[k+1])},hasPrevious:f=>p.findIndex(k=>String(k.id)===String(f.id))>0,hasNext:f=>{const k=p.findIndex(N=>String(N.id)===String(f.id));return k>=0&&k<p.length-1}},"failed-image-modal-container"),c.showProcessingSettingsModal&&a.jsx(Ph,{isOpen:c.showProcessingSettingsModal,onClose:()=>c.setShowProcessingSettingsModal(!1),onRetry:c.handleRetryWithSettings,selectedCount:c.selectedImages.size})]})},eg=({options:o,value:b,onChange:u,buttonClassName:c,menuWidthClassName:p,ariaLabel:m,disabled:f})=>{const[k,N]=Te.useState(!1),j=Te.useRef(null),E=Te.useMemo(()=>o.find(L=>String(L.value)===String(b))||o[0],[o,b]);return Te.useEffect(()=>{const L=P=>{j.current&&(j.current.contains(P.target)||N(!1))},B=P=>{P.key==="Escape"&&N(!1)};return document.addEventListener("mousedown",L),document.addEventListener("keydown",B),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("keydown",B)}},[]),a.jsxs("div",{className:"relative",ref:j,children:[a.jsxs("button",{type:"button",onClick:()=>!f&&N(L=>!L),"aria-haspopup":"listbox","aria-expanded":k,"aria-label":m,disabled:f,className:`${c||"text-sm border border-gray-300 rounded-md px-3 py-1 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[10rem] text-left"} relative pr-8`,children:[E?.label,a.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-slate-700",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z"})})})]}),k&&a.jsx("div",{className:`absolute z-30 mt-2 ${p||"w-[12rem]"} bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden`,children:a.jsx("ul",{role:"listbox",className:"py-1",children:o.map(L=>a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>{u(L.value),N(!1)},role:"option","aria-selected":String(b)===String(L.value),className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${String(b)===String(L.value)?"bg-gray-100":""}`,children:L.label})},String(L.value)))})})]})},tm={status:"all",dateRange:"all",label:"",minImages:0,maxImages:void 0,hasPendingRetries:!1};function tg(){const[o,b]=h.useState([]),[u,c]=h.useState({...tm}),[p,m]=h.useState(""),[f]=h.useState("startedAt"),[k]=h.useState("desc"),[N,j]=h.useState(1),[E,L]=h.useState(25),[B,P]=h.useState(0),[I,F]=h.useState(!0),[se,re]=h.useState(null),[ie,ce]=h.useState(null),le=h.useRef(null),ue=h.useMemo(()=>{let y=0;return u.status&&u.status!=="all"&&y++,u.dateFrom&&y++,u.dateTo&&y++,u.label&&u.label.trim()!==""&&y++,typeof u.minImages=="number"&&u.minImages>0&&y++,typeof u.maxImages=="number"&&y++,p&&p.trim()!==""&&y++,u.hasPendingRetries&&y++,y},[u,p]),ae=h.useCallback(y=>y?new Date(y).toISOString().slice(0,10):"",[]),z=h.useMemo(()=>{if(!o.length)return[];let y=[...o];if(p.trim()){const g=p.toLowerCase();y=y.filter(D=>D.label?.toLowerCase().includes(g)||D.id.toString().includes(g)||D.status.toLowerCase().includes(g))}if(u.status!=="all"){const g=u.status;g==="processing"?y=y.filter(D=>{const Y=String(D.status);return Y==="processing"||Y==="running"}):g==="pending"?y=y.filter(D=>{const Y=String(D.status);return Y==="pending"||Y==="queued"}):y=y.filter(D=>String(D.status)===g)}if(u.hasPendingRetries&&(y=y.filter(g=>typeof g.pendingJobs=="number"&&g.pendingJobs>0)),u.dateRange!=="all"){let g=new Date;switch(u.dateRange){case"today":g.setHours(0,0,0,0),y=y.filter(D=>new Date(D.startedAt||0)>=g);break;case"week":g.setDate(g.getDate()-7),y=y.filter(D=>new Date(D.startedAt||0)>=g);break;case"month":g.setMonth(g.getMonth()-1),y=y.filter(D=>new Date(D.startedAt||0)>=g);break}}if((u.label||"").trim()){const g=(u.label||"").toLowerCase();y=y.filter(D=>D.label?.toLowerCase().includes(g))}const x=u.minImages??0;return x>0&&(y=y.filter(g=>(g.totalImages||0)>=x)),typeof u.maxImages=="number"&&(y=y.filter(g=>(g.totalImages||0)<=u.maxImages)),y},[o,p,u]),T=h.useMemo(()=>z.length?[...z].sort((x,g)=>{let D=x[f],Y=g[f];if((f==="startedAt"||f==="completedAt")&&(D=new Date(D||0).getTime(),Y=new Date(Y||0).getTime()),typeof D=="number"&&typeof Y=="number")return k==="asc"?D-Y:Y-D;if(typeof D=="string"&&typeof Y=="string"){const J=D.localeCompare(Y);return k==="asc"?J:-J}return D==null&&Y==null?0:D==null?k==="asc"?-1:1:Y==null?k==="asc"?1:-1:0}):[],[z,f,k]),H=h.useMemo(()=>{const y=(N-1)*E;return T.slice(y,y+E)},[T,N,E]),Q=h.useMemo(()=>Math.ceil(T.length/E),[T.length,E]),M=h.useMemo(()=>{const y=o.filter(J=>J.status==="completed").length,x=o.filter(J=>J.status==="failed").length,g=o.filter(J=>{const $=String(J.status);return $==="processing"||$==="running"}).length,D=o.filter(J=>{const $=String(J.status);return $==="pending"||$==="queued"}).length,Y=o.reduce((J,$)=>J+($.totalImages||0),0);return{totalJobs:ie?.total??o.length,completedJobs:ie?.completed??y,failedJobs:ie?.failed??x,processingJobs:ie?.processing??g,pendingJobs:ie?.pending??D,totalImages:Y,averageImagesPerJob:o.length>0?Y/o.length:0}},[o,ie]),G=h.useMemo(()=>{const y=Date.now(),x=1440*60*1e3,g=7*x,D=y-g,Y=y-2*g,J=D,$=qe=>{if(!qe)return 0;const ze=new Date(qe).getTime();return isNaN(ze)?0:ze},K=o.filter(qe=>{const ze=$(qe.startedAt||qe.completedAt);return ze>=D&&ze<=y}).length,pe=o.filter(qe=>{const ze=$(qe.startedAt||qe.completedAt);return ze>=Y&&ze<J}).length;let me=0,Ee="flat";pe>0?(me=Math.round((K-pe)/pe*100),Ee=me>0?"up":me<0?"down":"flat"):K>0&&(me=100,Ee="up");const Me=o.filter(qe=>{if(String(qe.status).toLowerCase()!=="failed")return!1;const ze=$(qe.completedAt||qe.startedAt);return ze>=y-x&&ze<=y}).length,Ze=M.totalJobs>0?Math.round((M.completedJobs||0)/M.totalJobs*100):0;return{weeklyDeltaPct:me,weeklyTrend:Ee,failedLast24h:Me,completionRate:Ze}},[o,M]),_=h.useCallback(async(y=!1)=>{try{y||F(!0),re(null);const x={...u};x.dateFrom&&!x.dateTo?x.dateTo=x.dateFrom:!x.dateFrom&&x.dateTo&&(x.dateFrom=x.dateTo);const g=await window.electronAPI.jobManagement.getJobExecutionsWithFilters(x,1,1e4);if(g?.success){let D=Array.isArray(g.executions)?g.executions:Array.isArray(g.jobs)?g.jobs:Array.isArray(g.data)?g.data:[];D=D.map(Y=>{const J=String(Y.status||"");return{...Y,status:J==="queued"?"pending":J}});try{const Y=await window.electronAPI?.jobManagement?.getJobStatus?.(),J=Y?.currentJob,$=String(Y?.state||J?.status||"").toLowerCase(),K=J?.executionId||Y?.executionId;if(J&&K&&($==="running"||$==="processing")){const pe=D.findIndex(ft=>String(ft.id)===String(K)),me=D.some(ft=>String(ft.status).toLowerCase()==="running"),Ee=pe>=0?D[pe]:null;let Me=String(Ee?.label||Ee?.displayLabel||J?.label||J?.configurationName||`Job ${K}`).trim();const qe=Me.endsWith("(Rerun)")?Me.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(K).slice(-6)})`:Me,ze={...pe>=0?D[pe]:{},...J,status:"running",id:K,label:Me,displayLabel:qe};if(!ze.startedAt){const ft=J?.startedAt||J?.startTime||Y?.startTime;ft&&(ze.startedAt=new Date(ft))}pe>=0?D[pe]=ze:me||(D=[ze,...D])}}catch{}b(D),P(g.count??g.totalCount??D.length??0)}else throw new Error(g?.error||"Failed to load jobs")}catch(x){re(x instanceof Error?x.message:"Failed to load jobs"),b([]),P(0)}finally{y||F(!1)}},[u]),de=h.useCallback(async()=>{try{const y=window.electronAPI?.jobManagement;if(!y)return;const x=Me=>Number(Me&&(Me.count??Me.totalCount??Me)||0),g=async Me=>{try{if(y.getJobExecutionsCount){const Ze=await y.getJobExecutionsCount({status:Me}),qe=x(Ze);if(!Number.isNaN(qe))return qe}}catch{}try{const Ze=await y.getJobExecutionsWithFilters({status:Me},1,1);return x(Ze)||(Array.isArray(Ze?.executions)?Ze.executions.length:0)}catch{return 0}},[D,Y,J,$,K,pe,me,Ee]=await Promise.all([g("all"),g("completed"),g("failed"),g("processing"),g("running"),g("pending"),g("queued"),(async()=>{try{const Me=await y.getBulkRerunQueueSize?.();return Number(Me&&Me.count||0)}catch{return 0}})()]);ce({total:D,completed:Y,failed:J,processing:$+K,pending:Math.max(pe+me,Ee)})}catch{}},[]),oe=h.useCallback(y=>{m(y),j(1),le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{},300)},[]),v=h.useCallback(y=>{c(y)},[]),w=h.useCallback(y=>{j(y)},[]),X=h.useCallback(y=>{L(y),j(1)},[]),fe=h.useCallback(()=>{c({...tm,dateFrom:void 0,dateTo:void 0}),m("")},[]);return h.useEffect(()=>{_(),de()},[_,de]),h.useEffect(()=>{if(!o.some(g=>{const D=String(g.status);return D==="running"||D==="processing"||D==="pending"}))return;const x=setInterval(()=>{_(!0),de()},3e3);return()=>clearInterval(x)},[o,_,de]),h.useEffect(()=>{const y=setInterval(de,3e3);return()=>clearInterval(y)},[de]),h.useEffect(()=>{j(1)},[u]),h.useEffect(()=>()=>{le.current&&clearTimeout(le.current)},[]),{jobs:o,filters:u,setFilters:c,searchQuery:p,currentPage:N,pageSize:E,totalJobs:B,isLoading:I,error:se,setError:re,counts:ie,loadJobs:_,refreshCounts:de,filteredJobs:z,sortedJobs:T,paginatedJobs:H,totalPages:Q,statistics:M,uiStats:G,activeFiltersCount:ue,formatDateInput:ae,handleSearch:oe,handleFiltersChange:v,handlePageChange:w,handlePageSizeChange:X,clearFilters:fe}}function ag(o){const{paginatedJobs:b,loadJobs:u,refreshCounts:c,onOpenSingleJob:p}=o,[m,f]=h.useState(new Set),[k,N]=h.useState(!1),[j,E]=h.useState(!1),[L,B]=h.useState("single"),[P,I]=h.useState(null),F=h.useCallback(Q=>{const M=Q.displayLabel||Q.label||Q.configurationName;if(M&&String(M).trim()!==""){const _=String(M).trim();return _.endsWith("(Rerun)")?_.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(Q.id).slice(-6)})`:_}const G=Q.startedAt?new Date(Q.startedAt):null;if(G&&!isNaN(G.getTime())){const _=oe=>oe.toString().padStart(2,"0");return`job_${`${G.getFullYear()}${_(G.getMonth()+1)}${_(G.getDate())}_${_(G.getHours())}${_(G.getMinutes())}${_(G.getSeconds())}`}`}return`Job ${Q.id}`},[]),se=h.useCallback((Q,M)=>{f(G=>{const _=new Set(G);return M?_.add(Q):_.delete(Q),_})},[]),re=h.useCallback(Q=>{f(Q?new Set(b.map(M=>M.id)):new Set)},[b]),ie=h.useCallback(async()=>{if(m.size!==0)try{N(!0);const Q=Array.from(m),M=await window.electronAPI.jobManagement.bulkRerunJobExecutions(Q);M?.success?(await u(),await c(),f(new Set)):alert(`Bulk rerun failed: ${M?.error||"Unknown error"}`)}catch(Q){const M=Q instanceof Error?Q.message:String(Q);alert(`Error rerunning jobs: ${M}`)}finally{N(!1)}},[m,u,c]),ce=h.useCallback(async()=>{if(m.size!==0)try{N(!0);const Q=Array.from(m);for(const M of Q)await window.electronAPI.jobManagement.deleteJobExecution(M);await u(),await c(),f(new Set)}catch(Q){console.error("Error deleting jobs:",Q)}finally{N(!1)}},[m,u,c]),le=h.useCallback(Q=>{p(Q)},[p]),ue=h.useCallback(async Q=>{try{await window.electronAPI.jobManagement.rerunJobExecution(Q),setTimeout(()=>u(),1e3)}catch(M){console.error("Failed to rerun job:",M)}},[u]),ae=h.useCallback(async Q=>{try{(await window.electronAPI.jobManagement.deleteJobExecution(Q))?.success&&await u()}catch(M){console.error("Error deleting job:",M)}},[u]),z=h.useCallback(Q=>{B("single"),I(Q),E(!0)},[]),T=h.useCallback(()=>{B("bulk"),I(null),E(!0)},[]),H=h.useCallback(()=>{E(!1),B("single"),I(null)},[]);return h.useEffect(()=>{const Q=M=>{M.ctrlKey&&M.key==="a"&&(M.preventDefault(),re(!0)),M.key==="Delete"&&m.size>0&&(M.preventDefault(),ce()),M.key==="Escape"&&f(new Set)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[m.size,re,ce]),{selectedJobs:m,setSelectedJobs:f,isProcessing:k,showExportDialog:j,exportType:L,exportJobId:P,setShowExportDialog:E,setExportType:B,setExportJobId:I,getDisplayLabel:F,handleJobSelect:se,handleSelectAll:re,handleBulkRerun:ie,handleBulkDelete:ce,handleOpenSingleJob:le,handleRerunSingle:ue,handleDeleteSingle:ae,openExportSingle:z,openExportBulk:T,closeExportDialog:H}}const lg=({jobs:o,selectedJobs:b,getDisplayLabel:u,onJobSelect:c,onSelectAll:p,onOpenSingleJob:m,onRerunJob:f,onExportJob:k,onDeleteJob:N})=>{const j=o.length>0&&o.every(E=>b.has(E.id));return a.jsx("div",{className:"job-table-container",children:a.jsx("div",{className:"job-table-scroll",children:a.jsxs("table",{className:"job-table w-full",children:[a.jsx("thead",{className:"sticky top-0 bg-[--background] z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"w-12",children:a.jsx("div",{className:"checkbox-wrapper",role:"checkbox","aria-checked":j,tabIndex:0,onClick:()=>p(!j),children:j&&a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),a.jsxs("th",{className:"w-32",children:["Job ID ",a.jsx("span",{className:"sort-indicator",children:""})]}),a.jsx("th",{className:"w-64",children:"Name/Label"}),a.jsx("th",{className:"w-32",children:"Status"}),a.jsxs("th",{className:"w-40",children:["Date ",a.jsx("span",{className:"sort-indicator",children:""})]}),a.jsx("th",{className:"w-24",children:"Duration"}),a.jsx("th",{className:"w-24",children:"Images"}),a.jsx("th",{className:"w-40",children:"Actions"})]})}),a.jsx("tbody",{children:o.map(E=>a.jsxs("tr",{className:`job-row ${b.has(E.id)?"selected":""}`,children:[a.jsx("td",{children:a.jsx("div",{className:"checkbox-wrapper","aria-checked":b.has(E.id),onClick:L=>{L.stopPropagation(),c(E.id,!b.has(E.id))},role:"checkbox",tabIndex:0,onKeyDown:L=>{(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),L.stopPropagation(),c(E.id,!b.has(E.id)))},children:b.has(E.id)&&a.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),a.jsx("td",{children:a.jsxs("span",{className:"job-id",children:["#",E.id]})}),a.jsx("td",{children:a.jsx("span",{className:"job-label",children:u(E)})}),a.jsx("td",{children:a.jsx(Dt,{variant:"job",status:E.status})}),a.jsx("td",{children:a.jsx("span",{className:"timestamp",children:E.startedAt?new Date(E.startedAt).toLocaleDateString():"Unknown"})}),a.jsx("td",{children:E.startedAt&&E.completedAt?`${Math.round((new Date(E.completedAt).getTime()-new Date(E.startedAt).getTime())/(1e3*60))}m`:"N/A"}),a.jsx("td",{children:a.jsxs("span",{className:"flex items-center gap-1",children:[E.totalImages||0,a.jsx("svg",{className:"w-4 h-4 text-[--muted-foreground]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})}),a.jsx("td",{children:a.jsxs("div",{className:"quick-actions flex items-center gap-2",children:[a.jsx("button",{onClick:()=>m(E.id),className:"p-1 hover:bg-[--secondary] rounded transition-colors",title:"View Job Details",children:a.jsxs("svg",{className:"w-4 h-4 text-[--action-view]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:()=>f(E.id),className:"p-1 hover:bg-[--secondary] rounded transition-colors",title:"Rerun Job",children:a.jsxs("svg",{className:"w-4 h-4 text-[--action-rerun]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 01-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]})}),a.jsx("button",{onClick:()=>k(E.id),className:"p-1 hover:bg-[--secondary] rounded transition-colors",title:"Export Job",children:a.jsx("svg",{className:"w-4 h-4 text-[--action-export]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsx("button",{onClick:()=>N(E.id),className:"p-1 hover:bg-[--secondary] rounded transition-colors",title:"Delete Job",children:a.jsx("svg",{className:"w-4 h-4 text-[--action-delete]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},String(E.id)))})]})})})},sg=[{value:"all",label:"All Status"},{value:"completed",label:"Completed"},{value:"processing",label:"In Progress"},{value:"failed",label:"Failed"}],ng=({onOpenSingleJob:o,onBack:b})=>{const u=tg(),c=ag({paginatedJobs:u.paginatedJobs,loadJobs:u.loadJobs,refreshCounts:u.refreshCounts,onOpenSingleJob:o});return u.error?a.jsx("div",{className:"min-h-screen bg-[--background] text-[--foreground] flex flex-col overflow-hidden",children:a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-600 mb-4",children:"Error"}),a.jsx("p",{className:"text-gray-600",children:u.error}),a.jsx("button",{onClick:()=>u.loadJobs(!1),className:"mt-4 bg-[--primary] text-white px-4 py-2 rounded hover:opacity-90",children:"Retry"})]})})}):a.jsxs("div",{className:"h-screen bg-[--background] text-[--foreground] flex flex-col overflow-hidden",children:[a.jsx("header",{className:"job-management-header relative py-3 md:py-4",children:a.jsxs("div",{className:"header-content relative",children:[a.jsxs("div",{className:"header-left",children:[a.jsx("button",{onClick:b,className:"back-button","aria-label":"Go back to dashboard",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),a.jsx("h1",{className:"header-title",children:"Job Management"})]}),a.jsx("div",{className:"header-actions ml-auto",children:a.jsx("button",{onClick:()=>u.loadJobs(!1),className:"refresh-button",disabled:u.isLoading,"aria-label":"Refresh jobs",children:a.jsx(um,{className:"w-5 h-5"})})})]})}),a.jsxs("div",{className:"grid grid-cols-5 gap-4 p-6 shrink-0",children:[a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"text-sm text-[--muted-foreground]",children:"Total Jobs"}),a.jsx("div",{className:"text-2xl font-semibold mt-1",children:u.statistics.totalJobs}),a.jsxs("div",{className:"text-xs text-[--primary] mt-1",children:[u.uiStats.weeklyTrend==="up"&&` ${u.uiStats.weeklyDeltaPct}% from last week`,u.uiStats.weeklyTrend==="down"&&` ${Math.abs(u.uiStats.weeklyDeltaPct)}% from last week`,u.uiStats.weeklyTrend==="flat"&&"No change from last week"]})]}),a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"text-sm text-[--muted-foreground]",children:"Completed"}),a.jsx("div",{className:"text-2xl font-semibold mt-1 text-[--status-completed]",children:u.statistics.completedJobs}),a.jsxs("div",{className:"text-xs text-[--muted-foreground] mt-1",children:["Completion rate ",u.uiStats.completionRate,"%"]})]}),a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"text-sm text-[--muted-foreground]",children:"In Progress"}),a.jsx("div",{className:"text-2xl font-semibold mt-1 text-[--status-in-progress]",children:u.statistics.processingJobs}),a.jsx("div",{className:"text-xs text-[--muted-foreground] mt-1",children:"Currently processing"})]}),a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"text-sm text-[--muted-foreground]",children:"Failed"}),a.jsx("div",{className:"text-2xl font-semibold mt-1 text-[--status-failed]",children:u.statistics.failedJobs}),a.jsxs("div",{className:"text-xs text-[--muted-foreground] mt-1",children:[u.uiStats.failedLast24h," failed in last 24h"]})]}),a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"text-sm text-[--muted-foreground]",children:"Pending"}),a.jsx("div",{className:"text-2xl font-semibold mt-1 text-[--status-pending]",children:u.statistics.pendingJobs}),a.jsx("div",{className:"text-xs text-[--muted-foreground] mt-1",children:"In queue"})]})]}),a.jsxs("div",{className:"px-6 py-4 space-y-4 border-b border-[--border] shrink-0",children:[a.jsxs("div",{className:"job-filters-row flex flex-wrap items-center gap-x-8 gap-y-4",children:[a.jsxs("div",{className:"relative flex items-center gap-2 flex-none mr-4",children:[a.jsx("label",{className:"text-sm font-medium text-[--muted-foreground] whitespace-nowrap",children:"By Status:"}),a.jsx(eg,{options:sg,value:u.filters.status||"all",onChange:p=>u.handleFiltersChange({...u.filters,status:p}),buttonClassName:"text-sm border border-gray-300 rounded-md px-3 py-1 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[12rem] text-left",menuWidthClassName:"w-[14rem]",ariaLabel:"Filter jobs by status"})]}),a.jsx("div",{className:"flex items-center gap-2 flex-none",children:a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:!!u.filters.hasPendingRetries,onChange:p=>u.handleFiltersChange({...u.filters,hasPendingRetries:p.target.checked}),className:"outline-none focus:outline-none ring-0 focus:ring-0 focus-visible:outline-none focus-visible:ring-0"}),"Has pending reruns"]})}),a.jsx("div",{className:"relative flex items-center gap-2 flex-nowrap flex-none w-[300px] z-0 ml-4",children:a.jsxs("div",{className:"flex items-center gap-2 bg-[--background] border border-[--border] rounded-lg h-10 px-2",children:[a.jsx("input",{type:"date",className:"bg-transparent px-2 h-full focus:outline-none",placeholder:"From",value:u.formatDateInput(u.filters.dateFrom),onChange:p=>{const m=p.target.value;u.handleFiltersChange({...u.filters,dateFrom:m?new Date(m):void 0})}}),a.jsx("div",{className:"h-4 w-px bg-[--border]"}),a.jsx("input",{type:"date",className:"bg-transparent px-2 h-full focus:outline-none",placeholder:"To",value:u.formatDateInput(u.filters.dateTo),onChange:p=>{const m=p.target.value;u.handleFiltersChange({...u.filters,dateTo:m?new Date(m):void 0})}})]})}),a.jsxs("div",{className:"flex items-center gap-2 flex-[1_1_24rem] min-w-[16rem] max-w-[42rem] ml-6",children:[a.jsx("label",{className:"text-sm font-medium text-[--muted-foreground] whitespace-nowrap",children:"Search:"}),a.jsxs("div",{className:"relative flex-1 h-10",children:[a.jsx("input",{type:"text",value:u.searchQuery,onChange:p=>u.handleSearch(p.target.value),placeholder:"Search jobs...",className:"w-full h-10 bg-[--background] border border-[--border] rounded-lg px-4 pl-10 pr-10 focus:outline-none focus:ring-2 focus:ring-[--ring]"}),a.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[--muted-foreground]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),u.searchQuery&&a.jsx("button",{onClick:()=>u.handleSearch(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[--muted-foreground] hover:text-[--foreground]",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsxs("span",{className:"text-[--muted-foreground]",children:[u.activeFiltersCount," active filter",u.activeFiltersCount===1?"":"s"]}),a.jsx("button",{onClick:u.clearFilters,className:"text-[--primary] hover:underline text-sm",children:"Clear all"})]}),c.selectedJobs.size>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-4 border-r border-[--border]"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm text-[--muted-foreground]",children:[c.selectedJobs.size," selected"]}),a.jsxs("button",{onClick:c.handleBulkRerun,disabled:c.isProcessing,className:"bg-[--action-rerun] text-white px-4 py-2 rounded-lg hover:opacity-90 disabled:opacity-50 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Rerun Selected"]}),a.jsxs("button",{onClick:c.openExportBulk,disabled:c.isProcessing,className:"bg-[--action-export] text-white px-4 py-2 rounded-lg hover:opacity-90 disabled:opacity-50 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Selected"]}),a.jsxs("button",{onClick:c.handleBulkDelete,disabled:c.isProcessing,className:"bg-[--action-delete] text-white px-4 py-2 rounded-lg hover:opacity-90 disabled:opacity-50 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Selected"]})]})]})]})})]}),a.jsx("div",{className:"border-y border-[--border] px-4 py-2 shrink-0 bg-[--secondary]/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>u.handlePageChange(u.currentPage-1),disabled:u.currentPage===1,className:"p-2 hover:bg-[--secondary] rounded-lg transition-colors disabled:opacity-50",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsxs("span",{className:"text-sm text-[--muted-foreground]",children:["Page ",u.currentPage," of ",u.totalPages]}),a.jsx("button",{onClick:()=>u.handlePageChange(u.currentPage+1),disabled:u.currentPage===u.totalPages,className:"p-2 hover:bg-[--secondary] rounded-lg transition-colors disabled:opacity-50",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("select",{value:u.pageSize,onChange:p=>u.handlePageSizeChange(Number(p.target.value)),className:"bg-[--background] border border-[--border] rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-[--ring]",children:[a.jsx("option",{value:25,children:"25 per page"}),a.jsx("option",{value:50,children:"50 per page"}),a.jsx("option",{value:100,children:"100 per page"})]})})]})}),a.jsx(lg,{jobs:u.paginatedJobs,selectedJobs:c.selectedJobs,getDisplayLabel:c.getDisplayLabel,onJobSelect:c.handleJobSelect,onSelectAll:c.handleSelectAll,onOpenSingleJob:c.handleOpenSingleJob,onRerunJob:c.handleRerunSingle,onExportJob:c.openExportSingle,onDeleteJob:c.handleDeleteSingle}),u.isLoading&&a.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[--primary] mx-auto"}),a.jsx("p",{className:"mt-4 text-[--muted-foreground]",children:"Loading jobs..."})]})}),c.showExportDialog&&(c.exportType==="single"?a.jsx(pr,{isOpen:!0,title:"Export Job",fileKind:"xlsx",defaultFilename:(()=>{const p=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),m=u.jobs.find(N=>String(N.id)===String(c.exportJobId)),f=c.exportJobId?String(c.exportJobId).slice(-6):"",k=m&&(m.displayLabel||m.label||m.configurationName)||f||"Job";return`${String(k).replace(/[^a-zA-Z0-9-_]/g,"_")}_${p}.xlsx`})(),onClose:c.closeExportDialog,onExport:async({mode:p,outputPath:m,filename:f,duplicatePolicy:k})=>{try{if(!c.exportJobId)return;let N=m&&!/\.xlsx$/i.test(m)?`${m.replace(/[\\/]+$/,"")}/${f}`:m||f;const j=p==="custom"?{outputPath:N,duplicatePolicy:k}:void 0,E=await window.electronAPI.jobManagement.exportJobToExcel(c.exportJobId,j);if(E?.success&&E.filePath)try{await window.electronAPI.revealInFolder(E.filePath)}catch{}}finally{c.closeExportDialog()}}}):a.jsx(pr,{isOpen:!0,title:`Export ${c.selectedJobs.size} Jobs`,fileKind:"zip",defaultFilename:`bulk_export_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.zip`,onClose:c.closeExportDialog,onExport:async({mode:p,outputPath:m,filename:f,duplicatePolicy:k})=>{try{const N=Array.from(c.selectedJobs);let j=m&&!/\.zip$/i.test(m)?`${m.replace(/[\\/]+$/,"")}/${f}`:m||f;const E=p==="custom"?{outputPath:j,duplicatePolicy:k}:void 0,L=await window.electronAPI.jobManagement.bulkExportJobExecutions(N,E);if(L?.success&&L.zipPath)try{await window.electronAPI.revealInFolder(L.zipPath)}catch{}}finally{c.closeExportDialog()}c.setSelectedJobs(new Set)}}))]})},rg=({isOpen:o,onClose:b,onExport:u,title:c,description:p})=>{const[m,f]=h.useState(!1),[k,N]=h.useState(null),j=h.useCallback(async()=>{f(!0),N(null);try{N({success:!0,message:"Starting export...",isProgress:!0});const B=await u();await new Promise(P=>setTimeout(P,500)),N(B),B.success&&setTimeout(()=>{L()},5e3)}catch(B){N({success:!1,error:B instanceof Error?B.message:"Unknown error occurred"})}finally{f(!1)}},[u,b]),E=h.useCallback(async()=>{try{await window.electronAPI.openExportsFolder()}catch(B){console.error("Failed to open exports folder:",B)}},[]),L=h.useCallback(()=>{f(!1),N(null),b()},[b]);return o?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c}),a.jsx("button",{onClick:L,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:m,children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p&&a.jsx("p",{className:"text-gray-600 mb-4",children:p}),!k&&!m&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-700",children:"Ready to export. Click Export to continue."}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:j,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Export"}),a.jsx("button",{onClick:L,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}),m&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),a.jsx("span",{className:"text-gray-700",children:"Exporting..."})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Creating Excel file with job details and settings..."}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:"100%"}})}),k?.isProgress&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-blue-800",children:k.message})})]}),k&&a.jsx("div",{className:"space-y-4",children:k.success?a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:a.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Successful!"}),k.message&&a.jsx("p",{className:"text-gray-600 mb-2",children:k.message}),k.filename&&a.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["File: ",k.filename]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:E,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Open Exports Folder"}),a.jsx("button",{onClick:L,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Close"})]})]}):a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Failed"}),a.jsx("p",{className:"text-red-600 mb-4",children:k.error}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:j,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"}),a.jsx("button",{onClick:L,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Close"})]})]})})]})}):null},ig="_rangeSlider_4gxwy_49",og="_settingsForm_4gxwy_82",Jo={rangeSlider:ig,settingsForm:og},cg=({jobId:o,onBack:b,onRerun:u,onDelete:c})=>{const[p,m]=h.useState("overview"),[f,k]=h.useState(null),[N,j]=h.useState([]),[E,L]=h.useState([]),[B,P]=h.useState(!0),[I,F]=h.useState(null),[se,re]=h.useState(!1),[ie,ce]=h.useState("grid"),[le,ue]=h.useState("all"),ae=h.useRef(null),[z,T]=h.useState(""),[H,Q]=h.useState(!1),[M,G]=h.useState(null),_=h.useRef(null),de=h.useCallback(()=>{const S=f?.label;if(S&&S.trim()!=="")return S.endsWith("(Rerun)")?S.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(f?.id).slice(-6)})`:S;const te=f?.startedAt?new Date(f.startedAt):null;if(te&&!isNaN(te.getTime())){const ne=Oe=>Oe.toString().padStart(2,"0");return`job_${`${te.getFullYear()}${ne(te.getMonth()+1)}${ne(te.getDate())}_${ne(te.getHours())}${ne(te.getMinutes())}${ne(te.getSeconds())}`}`}return`Job ${f?.id??""}`.trim()},[f]),[oe,v]=h.useState(!1),[w,X]=h.useState(null),[fe,y]=h.useState(!1),[x,g]=h.useState(null),[D,Y]=h.useState(!1),[J,$]=h.useState(null),K=h.useMemo(()=>f?.configurationSnapshot||J?.settings||null,[f,J]),[pe,me]=h.useState(!1);h.useEffect(()=>{Ee()},[o]),h.useEffect(()=>{async function S(){try{const ne=(await window.electronAPI?.jobManagement?.getJobStatus?.())?.currentJob;if(ne&&String(ne?.executionId||"")===String(f?.id||"")){const ve=String(ne?.label||"").trim();ve&&k(Oe=>Oe&&{...Oe,label:ve})}}catch{}}if(f&&String(f.status).toLowerCase()==="running"){S();const te=window.setInterval(S,1500);return ae.current=te,()=>{ae.current&&(window.clearInterval(ae.current),ae.current=null)}}},[f?.id,f?.status]);const Ee=async()=>{console.log(" SingleJobView: loadJobData called"),P(!0),F(null);try{const S=await window.electronAPI.jobManagement.getJobExecution(o);if(S.success){k(S.execution);const te=S.execution.label;if(!te||te.trim()===""){const ne=S.execution.startedAt?new Date(S.execution.startedAt):null;if(ne&&!isNaN(ne.getTime())){const ve=Tt=>Tt.toString().padStart(2,"0"),Oe=`${ne.getFullYear()}${ve(ne.getMonth()+1)}${ve(ne.getDate())}_${ve(ne.getHours())}${ve(ne.getMinutes())}${ve(ne.getSeconds())}`;T(`job_${Oe}`)}else T(`Job ${S.execution.id}`)}else T(te);if(S.execution.id){console.log(" SingleJobView: Calculating statistics for execution ID:",S.execution.id);try{const ne=await window.electronAPI.calculateJobExecutionStatistics(S.execution.id);ne.success&&(console.log(" SingleJobView: Calculated statistics:",ne.statistics),k(ve=>{const Oe=ve??{};return{...Oe,id:Oe?.id??S.execution.id,configurationId:Oe?.configurationId??S.execution.configurationId,configurationName:Oe?.configurationName,startedAt:Oe?.startedAt??S.execution.startedAt,completedAt:Oe?.completedAt??S.execution.completedAt,status:Oe?.status??S.execution.status,totalImages:ne.statistics.totalImages,successfulImages:ne.statistics.successfulImages,failedImages:ne.statistics.failedImages,approvedImages:ne.statistics.approvedImages,qcFailedImages:ne.statistics.qcFailedImages,label:Oe?.label??S.execution.label}}))}catch(ne){console.warn("Failed to calculate statistics:",ne)}}}else F(S.error||"Failed to load job details");if(S.execution?.id){console.log(" SingleJobView: Loading images for execution ID:",S.execution.id);const te=await window.electronAPI.generatedImages.getGeneratedImagesByExecution(S.execution.id);console.log(" SingleJobView: Images result:",te),te.success?(console.log(" SingleJobView: Setting images:",te.images),console.log(" SingleJobView: Images QC statuses:",te.images?.map(ne=>({id:ne.id,qcStatus:ne.qcStatus}))),j(te.images||[])):(console.warn("Failed to load images:",te.error),j([]))}else console.warn("Job execution has no numeric ID, cannot load images"),j([]);try{const te=await window.electronAPI.jobManagement.getJobLogs("standard");te&&Array.isArray(te)?L(te):L([])}catch{L([])}if(console.log(" DEBUG: jobResult structure:",S),console.log(" DEBUG: jobResult.execution:",S.execution),console.log(" DEBUG: jobResult.execution?.configurationId:",S.execution?.configurationId),S.execution?.configurationId)try{console.log(" DEBUG: About to call getJobConfigurationById with:",S.execution.configurationId);const te=await window.electronAPI.getJobConfigurationById(S.execution.configurationId);console.log(" DEBUG: getJobConfigurationById result:",te),te.success&&te.configuration?(console.log(" DEBUG: Setting job configuration:",te.configuration),$(te.configuration)):console.warn(" DEBUG: getJobConfigurationById failed:",te)}catch(te){console.warn("Failed to load job configuration:",te)}else console.warn(" DEBUG: No configurationId found in jobResult.execution")}catch(S){console.error("Error loading job data:",S),F("Failed to load job data")}finally{P(!1)}},Me=h.useCallback(S=>{m(S),S==="logs"&&Wl()},[]),Ze=h.useCallback(()=>{b()},[b]),qe=h.useCallback(async()=>{me(!0)},[]),ze=h.useCallback(()=>{console.log(" DEBUG RERUN: SingleJobView rerun button clicked for jobId:",o,"at",new Date().toISOString()),u(o)},[u,o]),ft=h.useCallback(()=>{re(!0)},[]),qa=h.useCallback(()=>{c(o),re(!1)},[c,o]),br=h.useCallback(()=>{re(!1)},[]),Wl=h.useCallback(async()=>{try{let S="standard";try{(await window.electronAPI.getSettings?.())?.settings?.advanced?.debugMode&&(S="debug")}catch{}const te=await window.electronAPI.jobManagement.getJobLogs(S);L(Array.isArray(te)?te:[])}catch{L([])}},[]);h.useCallback(()=>{G(null),setTimeout(()=>{if(_.current){_.current.focus();const S=document.createRange();S.selectNodeContents(_.current);const te=window.getSelection();te&&(te.removeAllRanges(),te.addRange(S))}},10)},[]);const ha=h.useCallback(async()=>{if(!(!f||!z.trim())){Q(!0),G(null);try{const S=z.trim()==="No label"?"":z.trim(),te=await window.electronAPI.jobManagement.renameJobExecution(f.id,S);te.success?(k(ne=>ne?{...ne,label:S}:null),console.log("Job label updated successfully")):G(te.error||"Failed to save label")}catch(S){console.error("Error saving job label:",S),G("Failed to save label")}finally{Q(!1)}}},[f,z]),cl=h.useCallback(()=>{const S=f?.label;!S||S.trim()===""?T("No label"):T(S),G(null)},[f]);h.useCallback(S=>{S.key==="Enter"?(S.preventDefault(),ha()):S.key==="Escape"&&(S.preventDefault(),cl())},[ha,cl]),h.useCallback(()=>{const S=f?.label||"",te=S&&S.trim()!==""?S:de();z!==te&&ha()},[z,f,ha,de]);const Pl=h.useCallback(async()=>{console.log("Edit button clicked, job:",f),console.log("Job configurationId:",f?.configurationId),console.log("Already loaded jobConfiguration:",J),v(!0),g(null),Y(!1);try{if(J?.settings)console.log("Using already-loaded job configuration:",J.settings),X(J.settings);else if(f?.configurationId){console.log("Job configuration not loaded yet, fetching from backend for ID:",f.configurationId),Y(!0);const S=await window.electronAPI.getJobConfigurationById(f.configurationId);console.log("Configuration load result:",S),S.success&&S.configuration?.settings?(X(S.configuration.settings),console.log("Loaded job configuration from backend:",S.configuration.settings)):(console.warn("Job configuration not found, showing error in modal"),g("Job configuration not found. This job may be corrupted."))}else console.log("Job has no configurationId - this is a dashboard-created job"),g("This job was created from the dashboard and has no saved configuration. You can view the job details and generated images, but cannot edit settings. This is normal behavior for dashboard-created jobs.")}catch(S){console.error("Error loading job settings:",S),g("Failed to load job settings")}finally{Y(!1)}},[f?.configurationId,J]),vr=h.useCallback(async()=>{if(!(!w||!f?.configurationId)){y(!0),g(null);try{const S=JSON.parse(JSON.stringify(w));try{const ne=S.parameters||{};ne.runwareAdvancedEnabled!==!0&&(ne.runwareAdvancedEnabled=!1,ne.runwareAdvanced={},S.parameters=ne)}catch{}const te=await window.electronAPI.updateJobConfiguration(f.configurationId,S);if(te.success){try{const ne=await window.electronAPI.getJobConfigurationById(f.configurationId);ne?.success&&ne?.configuration?.settings?$(ne.configuration):$(ve=>ve?{...ve,settings:w}:{settings:w})}catch{$(ve=>ve?{...ve,settings:w}:{settings:w})}v(!1),console.log("Job settings updated successfully")}else g(te.error||"Failed to save job settings")}catch(S){console.error("Error saving job settings:",S),g("Failed to save job settings")}finally{y(!1)}}},[w,f?.configurationId]),Zs=h.useCallback(()=>{v(!1),X(null),g(null)},[]),je=h.useCallback((S,te,ne)=>{w&&X(ve=>ve&&{...ve,[S]:{...ve[S],[te]:ne}})},[w]),Xt=h.useCallback((S,te)=>ne=>{je(S,te,ne)},[je]),ga=h.useCallback(S=>{const te=(S||"").toLowerCase();return te==="approved"||te==="complete"||te==="completed"?"approved":"qc_failed"},[]),Fs=S=>{if(!S)return{};if(typeof S=="string")try{return JSON.parse(S)}catch{return{}}return S},Ga=h.useCallback(S=>{const te=Fs(S?.metadata),ne=typeof te?.title=="string"?te.title:te?.title?.en||"";return ne&&ne.trim()!==""?ne:`Image ${S?.id}`},[]),yr=h.useMemo(()=>{const S=new Map,te=new Set;for(const ne of N){const ve=String(ne?.qcStatus||"").toLowerCase();if(ve==="approved"||ve==="complete"||ve==="completed"||ve==="processing")continue;const Oe=String(ne?.qcReason||"").toLowerCase();if(!Oe)continue;const Tt=Oe.split(":").slice(0,2).join(":"),Nt=Xl(ve,Oe)||"QC Failed";Tt&&!S.has(Tt)&&!te.has(Nt)&&(S.set(Tt,Nt),te.add(Nt))}return Array.from(S.entries()).map(([ne,ve])=>({value:ne,label:ve}))},[N]),Xs=h.useMemo(()=>{if(N&&N.length>0){let S=0;for(const te of N){const ne=String(te?.qcStatus||"").toLowerCase();(ne==="qc_failed"||ne==="retry_failed")&&S++}return S}return Number(f?.qcFailedImages||0)},[N,f]),Kl=h.useMemo(()=>{if(le==="all")return N;if(le==="approved")return N.filter(te=>{const ne=String(te?.qcStatus||"").toLowerCase();return ne==="approved"||ne==="complete"||ne==="completed"});if(le==="failed_all"||le==="qc_failed")return N.filter(te=>{const ne=String(te?.qcStatus||"").toLowerCase();return ne==="qc_failed"||ne==="retry_failed"});if(le==="failed_qc")return N.filter(te=>{const ne=String(te?.qcStatus||"").toLowerCase();if(!(ne==="qc_failed"||ne==="retry_failed"))return!1;const ve=String(te?.qcReason||"").toLowerCase();return!ve||!ve.startsWith("processing_failed:")?!0:ve.startsWith("processing_failed:qc")});if(le==="failed_tech")return N.filter(te=>{const ne=String(te?.qcStatus||"").toLowerCase();if(!(ne==="qc_failed"||ne==="retry_failed"))return!1;const ve=String(te?.qcReason||"").toLowerCase();return ve.startsWith("processing_failed:")&&!ve.startsWith("processing_failed:qc")});const S=String(le||"");return N.filter(te=>{const ne=String(te?.qcStatus||"").toLowerCase();return ne==="approved"||ne==="complete"||ne==="completed"?!1:String(te?.qcReason||"").toLowerCase().startsWith(S)})},[N,le,ga]),jr=S=>S instanceof Date?S.toLocaleString():new Date(S).toLocaleString(),Qa=(S,te)=>{if(!te)return"In Progress";const ne=S instanceof Date?S:new Date(S),Oe=(te instanceof Date?te:new Date(te)).getTime()-ne.getTime(),Tt=Math.floor(Oe/36e5),Nt=Math.floor(Oe%36e5/6e4);return Tt>0?`${Tt}h ${Nt}m`:`${Nt}m`};return B?a.jsx("div",{className:"min-h-screen flex flex-col bg-[var(--background)] text-[var(--foreground)] font-[var(--font-sans)]",role:"main","aria-label":"Loading job details",children:a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center",children:[a.jsx("div",{className:"w-12 h-12 border-[3px] border-[var(--border)] border-t-[var(--primary)] rounded-full animate-spin mb-4"}),a.jsx("p",{children:"Loading job details..."})]})}):I?a.jsx("div",{className:"min-h-screen flex flex-col bg-[var(--background)] text-[var(--foreground)] font-[var(--font-sans)]",role:"main","aria-label":"Job error",children:a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center",children:[a.jsx("div",{className:"text-3xl mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h3",{children:"Error Loading Job"}),a.jsx("p",{children:I}),a.jsx("button",{onClick:Ze,className:"px-4 py-2 bg-[var(--primary)] text-[var(--primary-foreground)] border-0 rounded-[var(--radius)] cursor-pointer transition hover:opacity-90",children:"Go Back"})]})}):f?a.jsxs("div",{className:"min-h-screen flex flex-col bg-[var(--background)] text-[var(--foreground)] font-[var(--font-sans)]",children:[a.jsxs("header",{className:"border-b border-[var(--border)] p-6 bg-[var(--card)] shrink-0",children:[a.jsx("div",{className:"flex items-center gap-4 mb-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:Ze,className:"text-[var(--muted-foreground)] bg-transparent border-0 cursor-pointer transition flex items-center justify-center p-0 hover:text-[var(--foreground)]","aria-label":"Go back to job list",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),a.jsxs("h1",{className:"text-xl font-semibold text-[var(--foreground)] m-0",children:["Job #",f.id]})]})}),a.jsx("div",{className:"flex flex-col gap-2",children:a.jsx("div",{children:a.jsx("span",{className:"text-2xl font-semibold text-[var(--foreground)] flex-1",children:de()})})})]}),a.jsxs("div",{className:"flex gap-2 pt-4 px-6 bg-[var(--background)] shrink-0",children:[a.jsx("button",{className:`px-6 py-3 font-medium rounded-t border border-[var(--border)] border-b-0 transition cursor-pointer ${p==="overview"?"bg-[var(--primary)] text-[var(--primary-foreground)] border-[var(--primary)]":"bg-[var(--secondary)] text-[var(--muted-foreground)] hover:bg-[var(--accent)] hover:text-[var(--foreground)]"}`,onClick:()=>Me("overview"),"data-tab":"overview",children:"Overview"}),a.jsx("button",{className:`px-6 py-3 font-medium rounded-t border border-[var(--border)] border-b-0 transition cursor-pointer ${p==="images"?"bg-[var(--primary)] text-[var(--primary-foreground)] border-[var(--primary)]":"bg-[var(--secondary)] text-[var(--muted-foreground)] hover:bg-[var(--accent)] hover:text-[var(--foreground)]"}`,onClick:()=>Me("images"),"data-tab":"images",children:"Images"}),f?.status==="running"&&a.jsx("button",{className:`px-6 py-3 font-medium rounded-t border border-[var(--border)] border-b-0 transition cursor-pointer ${p==="logs"?"bg-[var(--primary)] text-[var(--primary-foreground)] border-[var(--primary)]":"bg-[var(--secondary)] text-[var(--muted-foreground)] hover:bg-[var(--accent)] hover:text-[var(--foreground)]"}`,onClick:()=>Me("logs"),"data-tab":"logs",children:"Logs"})]}),a.jsxs("main",{className:"flex-1 min-h-0 relative bg-[var(--card)] border border-t-0 border-[var(--border)] rounded-b mx-6",children:[a.jsx("div",{id:"overview",className:`absolute inset-0 overflow-auto ${p==="overview"?"block":"hidden"}`,children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4 mb-8",children:[a.jsxs("div",{className:"p-4 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--card)]",children:[a.jsx("div",{className:"text-sm text-[var(--muted-foreground)] mb-2",children:"Job ID"}),a.jsxs("div",{className:"text-lg font-medium text-[var(--foreground)]",children:["JOB-",f.id]})]}),a.jsxs("div",{className:"p-4 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--card)]",children:[a.jsx("div",{className:"text-sm text-[var(--muted-foreground)] mb-2",children:"Status"}),a.jsx("div",{className:"text-lg font-medium text-[var(--foreground)]",children:a.jsx(Dt,{variant:"job",status:f.status})})]}),a.jsxs("div",{className:"p-4 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--card)]",children:[a.jsx("div",{className:"text-sm text-[var(--muted-foreground)] mb-2",children:"Start Time"}),a.jsx("div",{className:"text-lg font-medium text-[var(--foreground)]",children:f.startedAt?jr(f.startedAt):"Not started"})]}),a.jsxs("div",{className:"p-4 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--card)]",children:[a.jsx("div",{className:"text-sm text-[var(--muted-foreground)] mb-2",children:"Duration"}),a.jsx("div",{className:"text-lg font-medium text-[var(--foreground)]",children:f.startedAt&&f.completedAt?Qa(f.startedAt,f.completedAt):"In Progress"})]}),a.jsxs("div",{className:"p-4 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--card)]",children:[a.jsx("div",{className:"text-sm text-[var(--muted-foreground)] mb-2",children:"Success Rate"}),a.jsx("div",{className:"text-lg font-medium text-[var(--foreground)]",children:f.totalImages?`${Math.round((f.successfulImages||0)/f.totalImages*100)}% (${f.successfulImages||0}/${f.totalImages})`:"N/A"})]})]}),a.jsx("h2",{className:"text-lg font-semibold mb-4 text-[var(--foreground)]",children:"Generated Images Summary"}),a.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(180px,1fr))] gap-4 mb-6",children:[a.jsxs("div",{className:"p-4 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--card)] text-center",children:[a.jsx("div",{className:"text-[0.813rem] text-[var(--muted-foreground)] mb-1 uppercase tracking-wide",children:"Total Images"}),a.jsx("div",{className:"text-[1.375rem] font-bold text-[var(--foreground)]",children:f.totalImages||0})]}),a.jsxs("div",{className:"p-4 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--card)] text-center",children:[a.jsx("div",{className:"text-[0.813rem] text-[var(--muted-foreground)] mb-1 uppercase tracking-wide",children:"Successful"}),a.jsx("div",{className:"text-[1.375rem] font-bold text-[var(--status-completed)]",children:f.successfulImages||0}),(f.successfulImages||0)>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-[var(--border)] flex flex-col gap-2",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[a.jsx("span",{className:"text-[var(--muted-foreground)] font-medium",children:"Approved:"}),a.jsx("span",{className:"font-semibold text-[var(--status-completed)]",children:f.approvedImages||0})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[a.jsx("span",{className:"text-[var(--muted-foreground)] font-medium",children:"Failed Processing:"}),a.jsx("span",{className:"font-semibold text-[var(--status-failed)]",children:Xs})]})]})]}),a.jsxs("div",{className:"p-4 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--card)] text-center",children:[a.jsx("div",{className:"text-[0.813rem] text-[var(--muted-foreground)] mb-1 uppercase tracking-wide",children:"Failed"}),a.jsx("div",{className:"text-[1.375rem] font-bold text-[var(--status-failed)]",children:f.failedImages||0}),a.jsx("div",{className:"text-xs text-[var(--muted-foreground)] mt-2 italic",children:"Generation failed"})]})]}),a.jsxs("div",{className:"mt-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-[var(--foreground)]",children:"Settings"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"px-4 py-2 bg-[var(--secondary)] text-[var(--secondary-foreground)] border border-[var(--border)] rounded-[var(--radius)] text-sm cursor-pointer transition disabled:opacity-60 disabled:cursor-not-allowed hover:enabled:bg-[var(--accent)]",onClick:Ee,title:"Refresh job data",disabled:B,children:B?"Refreshing...":a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",strokeWidth:"2.5"}),a.jsx("path",{d:"M21 3v5h-5",strokeWidth:"2.5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",strokeWidth:"2.5"}),a.jsx("path",{d:"M8 16H3v5",strokeWidth:"2.5"})]}),"Refresh"]})}),a.jsx("button",{className:"text-sm text-[var(--primary)] bg-transparent border-0 cursor-pointer underline hover:opacity-80",onClick:Pl,title:"Edit job settings",children:"Edit"})]})]}),a.jsx("div",{className:"border border-[var(--border)] rounded-[var(--radius)] p-6 bg-[var(--secondary)]",children:J?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6 last:mb-0",children:[a.jsx("h3",{className:"font-medium mb-2 text-[var(--foreground)]",children:"Model Configuration"}),a.jsxs("div",{className:"text-[var(--muted-foreground)] text-sm leading-relaxed",children:[a.jsx("div",{children:" Provider: Runware"}),a.jsxs("div",{children:[" Runware Model: ",K?.parameters?.runwareModel||"Not specified"]}),a.jsxs("div",{children:[" Generations: ",K?.parameters?.count??"Not specified"]}),a.jsxs("div",{children:[" Variations: ",K?.parameters?.variations??"Not specified"]}),(()=>{const S=K?.parameters?.loraEnabled===!0,te=Array.isArray(K?.parameters?.lora)?(K?.parameters).lora:[],ne=te.length>0?te.map(ve=>`${ve.model}:${ve.weight??1}`).join(", "):S?"None":"Not Applied as LoRA Models disabled";return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[" LoRA Models: ",S?"Yes":"No"]}),a.jsxs("div",{children:[" LoRA list: ",ne]})]})})()]})]}),a.jsxs("div",{className:"mb-6 last:mb-0",children:[a.jsx("h3",{className:"font-medium mb-2 text-[var(--foreground)]",children:"Image Settings"}),a.jsxs("div",{className:"text-[var(--muted-foreground)] text-sm leading-relaxed",children:[a.jsxs("div",{children:[" Dimensions: ",K?.parameters?.runwareDimensionsCsv||"Not specified"]}),a.jsxs("div",{children:[" Format: ",(K?.parameters?.runwareFormat||"Not specified")?.toString().toUpperCase()]})]})]}),(()=>{const S=K?.parameters?.runwareAdvanced||{},te=K?.parameters?.runwareAdvancedEnabled;return(te===!1?!1:te===!0?!0:!!(S&&(S.CFGScale!=null||S.steps!=null||S.scheduler&&String(S.scheduler).trim()!==""||S.checkNSFW===!0||Array.isArray(S.lora)&&S.lora.length>0)))?a.jsxs("div",{className:"mb-6 last:mb-0",children:[a.jsx("h3",{className:"font-medium mb-2 text-[var(--foreground)]",children:"Runware Advanced"}),a.jsxs("div",{className:"text-[var(--muted-foreground)] text-sm leading-relaxed",children:[a.jsxs("div",{children:[" CFG Scale: ",S.CFGScale??"Not specified"]}),a.jsxs("div",{children:[" Steps: ",S.steps??"Not specified"]}),a.jsxs("div",{children:[" Scheduler: ",S.scheduler||"Not specified"]}),a.jsxs("div",{children:[" NSFW Check: ",S.checkNSFW?"Enabled":"Disabled"]})]})]}):null})(),a.jsxs("div",{className:"mb-6 last:mb-0",children:[a.jsx("h3",{className:"font-medium mb-2 text-[var(--foreground)]",children:"Processing Options"}),a.jsxs("div",{className:"text-[var(--muted-foreground)] text-sm leading-relaxed",children:[a.jsxs("div",{children:[" Remove Background: ",K?.processing?.removeBg?"Yes":"No"]}),a.jsxs("div",{children:[" Remove.bg Size: ",K?.processing?.removeBg?K?.processing?.removeBgSize||"auto":"Not applied (Remove Background OFF)"]}),a.jsxs("div",{children:[" Image Enhancement: ",K?.processing?.imageEnhancement?"Yes":"No"]}),a.jsxs("div",{children:[" Sharpening: ",K?.processing?.imageEnhancement?K?.processing?.sharpening||0:"Not applied (Image Enhancement OFF)"]}),a.jsxs("div",{children:[" Saturation: ",K?.processing?.imageEnhancement?K?.processing?.saturation||1.4:"Not applied (Image Enhancement OFF)"]}),a.jsxs("div",{children:[" Image Convert: ",K?.processing?.imageConvert?"Yes":"No"]}),a.jsxs("div",{children:[" Convert Format: ",K?.processing?.imageConvert?K?.processing?.convertToWebp?"WEBP":K?.processing?.convertToJpg?"JPG":"PNG":"Not applied (Image Convert OFF)"]}),K?.processing?.imageConvert&&K?.processing?.convertToJpg&&a.jsxs("div",{children:[" JPG Quality: ",K?.processing?.jpgQuality||85]}),K?.processing?.convertToWebp&&K?.processing?.imageConvert&&a.jsxs("div",{children:[" WEBP Quality: ",K?.processing?.webpQuality??85]}),a.jsxs("div",{children:[" Trim Transparent: ",K?.processing?.removeBg?K?.processing?.trimTransparentBackground?"Yes":"No":"Not applied (Remove Background OFF)"]}),a.jsxs("div",{children:[" JPG Background Colour: ",K?.processing?.imageConvert&&K?.processing?.convertToJpg&&K?.processing?.removeBg?K?.processing?.jpgBackground||"white":"Not applied (Remove Background, Image Convert are set to OFF and Convert Format is not JPG)"]}),a.jsxs("div",{children:[" Quality Check: ",K?.ai?.runQualityCheck?"Yes":"No"]}),a.jsxs("div",{children:[" Metadata Generation: ",K?.ai?.runMetadataGen?"Yes":"No"]})]})]})]}):a.jsxs("div",{className:"text-center py-8 text-[var(--muted-foreground)]",children:[a.jsx("p",{children:"No configuration available for this job."}),a.jsx("p",{children:"This job was run with default settings."})]})})]})]})}),a.jsx("div",{id:"images",className:`absolute inset-0 overflow-auto ${p==="images"?"block":"hidden"}`,children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-[var(--border)] sticky top-0 bg-[var(--card)] z-10",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("select",{value:le,onChange:S=>ue(S.target.value),className:"bg-[var(--background)] border border-[var(--border)] rounded-[var(--radius)] px-4 py-2 text-[var(--foreground)] text-sm",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"failed_all",children:"Failed (All)"}),a.jsx("option",{value:"failed_qc",children:"Failed  QC"}),a.jsx("option",{value:"failed_tech",children:"Failed  Technical"}),yr.map(({value:S,label:te})=>a.jsx("option",{value:S,children:te},S))]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:`p-2 rounded-[var(--radius)] transition border cursor-pointer ${ie==="grid"?"bg-[var(--secondary)] text-[var(--foreground)] border-[var(--border)]":"bg-transparent text-[var(--muted-foreground)] border-[var(--border)] hover:bg-[var(--secondary)] hover:text-[var(--foreground)]"}`,onClick:()=>ce("grid"),title:"Grid View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{className:`p-2 rounded-[var(--radius)] transition border cursor-pointer ${ie==="list"?"bg-[var(--secondary)] text-[var(--foreground)] border-[var(--border)]":"bg-transparent text-[var(--muted-foreground)] border-[var(--border)] hover:bg-[var(--secondary)] hover:text-[var(--foreground)]"}`,onClick:()=>ce("list"),title:"List View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),a.jsxs("div",{className:"max-h-[60vh] overflow-y-auto pr-1",children:[ie==="grid"&&a.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] gap-4",children:Kl.length===0?a.jsx("div",{className:"text-center py-12 text-[var(--muted-foreground)]",children:a.jsx("p",{children:"No images found with current filter."})}):Kl.map(S=>a.jsxs("div",{className:"border border-[var(--border)] rounded-[var(--radius)] overflow-hidden transition bg-[var(--card)] hover:-translate-y-0.5 hover:shadow-[var(--shadow-md)]",children:[a.jsxs("div",{className:"relative aspect-square rounded overflow-hidden",children:[S.finalImagePath||S.tempImagePath?a.jsx("img",{src:Ja(S.finalImagePath||S.tempImagePath),alt:`Generated image ${S.id}`,className:"w-full h-full object-cover",onError:te=>{console.error("Failed to load image:",S.finalImagePath),te.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik02NCAzMkM3Ny4yNTQ4IDMyIDg4IDQyLjc0NTIgODggNTZDODggNjkuMjU0OCA3Ny4yNTQ4IDgwIDY0IDgwQzUwLjc0NTIgODAgNDAgNjkuMjU0OCA0MCA1NkM0MCA0Mi43NDUyIDUwLjc0NTIgMzIgNjQgMzJaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0yNCA4OEgxMDRDMTEwLjYyNyA4OCAxMTYgOTMuMzcyNiAxMTYgMTAwVjExMkMxMTYgMTE4LjYyNyAxMTAuNjI3IDEyNCAxMDQgMTI0SDI0QzE3LjM3MjYgMTI0IDEyIDExOC42MjcgMTIgMTEyVjEwMEMxMiA5My4zNzI2IDE3LjM3MjYgODggMjQgODhaIiBmaWxsPSIjOUI5QkEwIi8+Cjwvc3ZnPgo="}}):a.jsx("div",{className:"w-full h-full bg-gray-100 rounded flex items-center justify-center",children:a.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx(Dt,{variant:"qc",status:ga(S.qcStatus)==="approved"?"approved":String(S.qcStatus||"").toLowerCase()==="processing"?"processing":"qc_failed",labelOverride:ga(S.qcStatus)==="qc_failed"&&Xl(String(S.qcStatus||""),String(S.qcReason||""))||void 0})})]}),a.jsx("div",{className:"p-2 block",children:a.jsxs("div",{className:"block",children:[a.jsx("span",{className:"text-xs font-bold text-[var(--foreground)] block mb-1 break-words [overflow-wrap:anywhere]",children:Ga(S)}),a.jsx("span",{className:"block mt-1 text-xs text-[var(--muted-foreground)] text-right",children:S?.createdAt?new Date(S.createdAt).toLocaleDateString():""})]})})]},S.id))}),ie==="list"&&a.jsxs("table",{className:"w-full border-collapse border-separate border-spacing-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"bg-[var(--secondary)] py-3 px-4 text-left font-medium text-[var(--foreground)] border-b border-[var(--border)]",children:"Preview"}),a.jsx("th",{className:"bg-[var(--secondary)] py-3 px-4 text-left font-medium text-[var(--foreground)] border-b border-[var(--border)]",children:"ID/Title"}),a.jsx("th",{className:"bg-[var(--secondary)] py-3 px-4 text-left font-medium text-[var(--foreground)] border-b border-[var(--border)]",children:"Status"}),a.jsx("th",{className:"bg-[var(--secondary)] py-3 px-4 text-left font-medium text-[var(--foreground)] border-b border-[var(--border)]",children:"Generated At"})]})}),a.jsx("tbody",{children:Kl.map(S=>a.jsxs("tr",{children:[a.jsx("td",{className:"py-3 px-4 border-b border-[var(--border)] text-[var(--foreground)]",children:a.jsx("div",{className:"w-16 h-16 bg-[var(--secondary)] rounded-lg flex items-center justify-center text-xs text-[var(--muted-foreground)] overflow-hidden",children:S.finalImagePath||S.tempImagePath?a.jsx("img",{src:Ja(S.finalImagePath||S.tempImagePath),alt:`Generated image ${S.id}`,className:"w-16 h-16 object-cover rounded-lg",onError:te=>{te.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNCAyNEg0MFY0MEgyNFYyNFoiIGZpbGw9IiNEMUQ1REIiLz4KPC9zdmc+"}}):a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})})}),a.jsx("td",{className:"py-3 px-4 border-b border-[var(--border)] text-[var(--foreground)]",children:Ga(S)}),a.jsx("td",{className:"py-3 px-4 border-b border-[var(--border)] text-[var(--foreground)]",children:a.jsx(Dt,{variant:"qc",status:ga(S.qcStatus)==="approved"?"approved":String(S.qcStatus||"").toLowerCase()==="processing"?"processing":"qc_failed",labelOverride:ga(S.qcStatus)==="qc_failed"&&Xl(String(S.qcStatus||""),String(S.qcReason||""))||void 0})}),a.jsx("td",{className:"py-3 px-4 border-b border-[var(--border)] text-[var(--foreground)]",children:S?.createdAt?new Date(S.createdAt).toLocaleDateString():""})]},S.id))})]})]})]})}),f?.status==="running"&&a.jsx("div",{id:"logs",className:`absolute inset-0 overflow-auto ${p==="logs"?"block":"hidden"}`,children:a.jsx("div",{className:"flex flex-col flex-1 min-h-0 p-6",children:a.jsx(dm,{logs:E,jobStatus:f?.status==="running"||f?.status==="processing"?"running":f?.status==="completed"?"completed":f?.status==="failed"?"failed":"idle",onRefresh:Wl,minHeight:320,maxHeight:"70vh"})})})]}),a.jsx("footer",{className:"border-t border-[var(--border)] bg-[var(--background)] py-4 px-6 shrink-0 mt-auto",children:a.jsxs("div",{className:"flex items-center justify-end gap-4",children:[a.jsxs("button",{onClick:ze,className:"px-4 py-2 rounded-[var(--radius)] font-medium cursor-pointer transition border-0 flex items-center gap-2 bg-[var(--action-rerun)] text-white hover:opacity-90",children:[a.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",strokeWidth:"2.5"}),a.jsx("path",{d:"M21 3v5h-5",strokeWidth:"2.5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",strokeWidth:"2.5"}),a.jsx("path",{d:"M8 16H3v5",strokeWidth:"2.5"})]}),"Rerun Job"]}),a.jsxs("button",{onClick:qe,className:"px-4 py-2 rounded-[var(--radius)] font-medium cursor-pointer transition border-0 flex items-center gap-2 bg-[var(--action-export)] text-white hover:opacity-90",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Job"]}),a.jsxs("button",{onClick:ft,className:"px-4 py-2 rounded-[var(--radius)] font-medium cursor-pointer transition border-0 flex items-center gap-2 bg-[var(--action-delete)] text-white hover:opacity-90",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Job"]})]})}),se&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[var(--card)] rounded-[var(--radius)] p-6 max-w-[28rem] w-[90%] mx-4",children:[a.jsx("div",{className:"mb-4",children:a.jsx("h3",{className:"text-lg font-semibold text-[var(--foreground)] m-0 mb-4",children:"Confirm Deletion"})}),a.jsx("div",{className:"text-[var(--muted-foreground)] mb-6 leading-normal",children:a.jsx("p",{children:"Are you sure you want to delete this job? This action cannot be undone."})}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:br,className:"px-4 py-2 bg-[var(--secondary)] text-[var(--secondary-foreground)] border border-[var(--border)] rounded-[var(--radius)] cursor-pointer transition hover:bg-[var(--accent)]",children:"Cancel"}),a.jsx("button",{onClick:qa,className:"px-4 py-2 bg-[var(--status-failed)] text-white border-0 rounded-[var(--radius)] cursor-pointer transition hover:opacity-90",children:"Delete Permanently"})]})]})}),oe&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[var(--card)] rounded-[var(--radius-lg)] shadow-[var(--shadow-lg)] max-w-[700px] w-[90%] max-h-[85vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center py-6 px-6 pb-4 border-b border-[var(--border)]",children:[a.jsx("h3",{className:"text-lg font-medium text-[var(--foreground)] m-0",children:"Edit Job Settings"}),a.jsx("button",{onClick:Zs,className:"bg-transparent border-0 text-[var(--muted-foreground)] cursor-pointer p-2 rounded-[var(--radius)] transition hover:bg-[var(--muted)] hover:text-[var(--foreground)]",title:"Close",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),D?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-[var(--muted-foreground)]",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-[var(--border)] border-t-[var(--ring)] rounded-full animate-spin"}),a.jsx("p",{children:"Loading current settings..."})]}):w?a.jsxs("div",{className:`flex-1 overflow-y-auto p-6 ${Jo.settingsForm}`,children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h4",{className:"text-lg font-semibold text-[var(--foreground)] mb-4 pb-2 border-b border-[var(--border)]",children:"API Keys"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] -mt-1.5 mb-2",children:"API keys are managed in Settings. For security, edit them there."})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h4",{className:"text-lg font-semibold text-[var(--foreground)] mb-4 pb-2 border-b border-[var(--border)]",children:"File Paths"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] -mt-1.5 mb-2",children:"Edit file contents on disk; paths are reference-only here. Files are re-read at run/rerun. To change paths, use Settings."}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Output Directory"}),a.jsx("input",{type:"text",value:w.filePaths?.outputDirectory||"",onChange:()=>{},disabled:!0,placeholder:"Output directory path"})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Temp Directory"}),a.jsx("input",{type:"text",value:w.filePaths?.tempDirectory||"",onChange:()=>{},disabled:!0,placeholder:"Temporary directory path"})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"System Prompt File"}),a.jsx("input",{type:"text",value:w.filePaths?.systemPromptFile||"",onChange:()=>{},disabled:!0,placeholder:"Path to system prompt file"})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Keywords File"}),a.jsx("input",{type:"text",value:w.filePaths?.keywordsFile||"",onChange:()=>{},disabled:!0,placeholder:"Path to keywords file"})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Quality Check Prompt File"}),a.jsx("input",{type:"text",value:w.filePaths?.qualityCheckPromptFile||"",onChange:()=>{},disabled:!0,placeholder:"Path to QC prompt file"})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Metadata Prompt File"}),a.jsx("input",{type:"text",value:w.filePaths?.metadataPromptFile||"",onChange:()=>{},disabled:!0,placeholder:"Path to metadata prompt file"})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h4",{className:"text-lg font-semibold text-[var(--foreground)] mb-4 pb-2 border-b border-[var(--border)]",children:"Parameters"}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Job Name / Label"}),a.jsx("input",{type:"text",value:w.parameters?.label||"",onChange:S=>je("parameters","label",S.target.value),placeholder:"Optional label for this job"})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Runware Model"}),a.jsx("input",{type:"text",value:w.parameters?.runwareModel||"",onChange:S=>je("parameters","runwareModel",S.target.value),placeholder:"e.g., runware:101@1"})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Dimensions (WH or CSV)"}),a.jsx("input",{type:"text",value:w.parameters?.runwareDimensionsCsv||"",onChange:S=>je("parameters","runwareDimensionsCsv",S.target.value),placeholder:"e.g., 1024x1024 or 1024x1024,768x1024"})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Output Format"}),a.jsxs("select",{className:"w-full box-border py-2 px-3 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--background)] text-[var(--foreground)] text-sm focus:outline-none focus:border-[var(--ring)] focus:ring-2 focus:ring-[var(--ring)]/20",value:w.parameters?.runwareFormat||"png",onChange:S=>je("parameters","runwareFormat",S.target.value),children:[a.jsx("option",{value:"png",children:"PNG"}),a.jsx("option",{value:"jpg",children:"JPG"}),a.jsx("option",{value:"webp",children:"WEBP"})]})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Generations count"}),a.jsx("input",{type:"number",value:w.parameters?.count||1,onChange:S=>je("parameters","count",parseInt(S.target.value)),min:"1",max:"2500"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] mt-1 leading-snug",children:"Number of generations (up to 2500 generations)."})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Variations"}),a.jsx("input",{type:"number",min:"1",max:"20",value:Number(w.parameters?.variations??1),onChange:S=>je("parameters","variations",Math.max(1,Math.min(20,Number(S.target.value||1))))})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Enable Generation Timeout"}),a.jsx(We,{checked:w.parameters?.enablePollingTimeout||!1,onChange:S=>je("parameters","enablePollingTimeout",S)})]}),w.parameters?.enablePollingTimeout&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Generation Timeout (minutes)"}),a.jsx("input",{type:"number",value:w.parameters?.pollingTimeout||0,onChange:S=>je("parameters","pollingTimeout",parseInt(S.target.value)),min:"0"})]})}),a.jsxs("div",{className:"flex flex-row justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{children:"LoRA Models"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] mt-1 leading-snug",children:"Note: Check Runware model list for valid LoRA AIR ID:LoRA weight and valid weight ranges. LoRA weight defaults to 1 if no other valid number set. Not all models support LoRAs!"})]}),a.jsx(We,{checked:!!w.parameters?.loraEnabled,onChange:S=>je("parameters","loraEnabled",S)})]}),w.parameters?.loraEnabled&&a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"LoRA list (model:weight per line)"}),a.jsx("textarea",{value:Array.isArray(w.parameters?.lora)?w.parameters.lora.map(S=>`${S.model}:${S.weight??1}`).join(`
`):Array.isArray(w.parameters?.runwareAdvanced?.lora)?w.parameters.runwareAdvanced.lora.map(S=>`${S.model}:${S.weight??1}`).join(`
`):"",onChange:S=>{const ne=S.target.value.split(`
`).map(ve=>ve.trim()).filter(Boolean).map(ve=>{const[Oe,Tt]=ve.split(":").map(Nt=>Nt.trim());return Oe?{model:Oe,weight:Number(Tt)||1}:null}).filter(Boolean);je("parameters","lora",ne)},rows:4,placeholder:`flux-lora:0.8
artist-style:0.5`})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{htmlFor:"gen-retry-attempts-modal",children:"Generation Retry Attempts"}),a.jsx("input",{id:"gen-retry-attempts-modal",type:"number",value:w.parameters?.generationRetryAttempts??1,onChange:S=>je("parameters","generationRetryAttempts",Math.max(0,Math.min(5,parseInt(S.target.value)))),min:"0",max:"5"})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{htmlFor:"gen-retry-backoff-modal",children:"Retry Backoff (ms)"}),a.jsx("input",{id:"gen-retry-backoff-modal",type:"number",value:w.parameters?.generationRetryBackoffMs??0,onChange:S=>je("parameters","generationRetryBackoffMs",Math.max(0,Math.min(6e4,parseInt(S.target.value)))),min:"0",max:"60000",step:"100"})]}),a.jsxs("div",{className:"flex flex-row justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Runware Advanced Controls"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] mt-1 leading-snug",children:"Show advanced Runware generation controls"})]}),a.jsx(We,{checked:!!w.parameters?.runwareAdvancedEnabled,onChange:S=>je("parameters","runwareAdvancedEnabled",S)})]}),w.parameters?.runwareAdvancedEnabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Runware Advanced: CFG Scale"}),a.jsx("input",{type:"number",value:Number(w.parameters?.runwareAdvanced?.CFGScale??""),onChange:S=>je("parameters","runwareAdvanced",{...w.parameters?.runwareAdvanced||{},CFGScale:Number(S.target.value)||void 0})})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Runware Advanced: Steps"}),a.jsx("input",{type:"number",value:Number(w.parameters?.runwareAdvanced?.steps??""),onChange:S=>je("parameters","runwareAdvanced",{...w.parameters?.runwareAdvanced||{},steps:Number(S.target.value)||void 0})})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Runware Advanced: Scheduler"}),a.jsx("input",{type:"text",value:w.parameters?.runwareAdvanced?.scheduler||"",onChange:S=>je("parameters","runwareAdvanced",{...w.parameters?.runwareAdvanced||{},scheduler:S.target.value||void 0})})]})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"OpenAI Model"}),a.jsx("input",{type:"text",value:w.parameters?.openaiModel||"",onChange:S=>je("parameters","openaiModel",S.target.value),placeholder:"e.g., gpt-4o-mini"})]}),a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Random Keywords"}),a.jsx(We,{checked:w.parameters?.keywordRandom||!1,onChange:S=>je("parameters","keywordRandom",S)})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h4",{className:"text-lg font-semibold text-[var(--foreground)] mb-4 pb-2 border-b border-[var(--border)]",children:"Image Processing"}),a.jsxs("div",{className:"flex flex-row justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Remove Background"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] mt-1 leading-snug",children:"Remove background from generated images"})]}),a.jsx(We,{checked:w.processing?.removeBg||!1,onChange:Xt("processing","removeBg")})]}),w.processing?.removeBg&&a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Remove.bg Size"}),a.jsxs("select",{value:w.processing?.removeBgSize||"auto",onChange:S=>je("processing","removeBgSize",S.target.value),className:"w-full box-border py-2 px-3 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--background)] text-[var(--foreground)] text-sm focus:outline-none focus:border-[var(--ring)] focus:ring-2 focus:ring-[var(--ring)]/20",children:[a.jsx("option",{value:"auto",children:"Auto"}),a.jsx("option",{value:"preview",children:"Preview"}),a.jsx("option",{value:"full",children:"Full"}),a.jsx("option",{value:"50MP",children:"50MP"})]})]}),w.processing?.removeBg&&a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"On remove.bg failure"}),a.jsxs("select",{value:String(w.processing?.removeBgFailureMode||"approve"),onChange:S=>je("processing","removeBgFailureMode",S.target.value),className:"w-full box-border py-2 px-3 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--background)] text-[var(--foreground)] text-sm focus:outline-none focus:border-[var(--ring)] focus:ring-2 focus:ring-[var(--ring)]/20",children:[a.jsx("option",{value:"mark_failed",children:"Mark Failed (technical fail)"}),a.jsx("option",{value:"approve",children:"Approve (soft fail)"})]})]}),a.jsxs("div",{className:"flex flex-row justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Image Convert"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] mt-1 leading-snug",children:"Enable image conversion and processing"})]}),a.jsx(We,{checked:w.processing?.imageConvert||!1,onChange:Xt("processing","imageConvert")})]}),w.processing?.imageConvert&&a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Convert Format"}),a.jsxs("select",{value:w.processing?.convertToWebp?"webp":w.processing?.convertToJpg?"jpg":"png",onChange:S=>{const te=S.target.value;je("processing","convertToWebp",te==="webp"),je("processing","convertToJpg",te==="jpg")},className:"w-full box-border py-2 px-3 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--background)] text-[var(--foreground)] text-sm focus:outline-none focus:border-[var(--ring)] focus:ring-2 focus:ring-[var(--ring)]/20",children:[a.jsx("option",{value:"png",children:"PNG"}),a.jsx("option",{value:"jpg",children:"JPG"}),a.jsx("option",{value:"webp",children:"WEBP"})]})]}),w.processing?.imageConvert&&a.jsxs(a.Fragment,{children:[w.processing?.convertToJpg&&a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"JPG Quality (1-100)"}),a.jsx("input",{type:"number",value:w.processing?.jpgQuality||85,onChange:S=>je("processing","jpgQuality",parseInt(S.target.value)),min:"1",max:"100"})]}),w.processing?.convertToWebp&&a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"WebP Quality (1-100)"}),a.jsx("input",{type:"number",value:w.processing?.webpQuality??85,onChange:S=>je("processing","webpQuality",parseInt(S.target.value)),min:"1",max:"100"})]})]}),w.processing?.removeBg&&w.processing?.imageConvert&&w.processing?.convertToJpg&&a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"JPG Background Color"}),a.jsxs("select",{value:w.processing?.jpgBackground||"white",onChange:S=>je("processing","jpgBackground",S.target.value),className:"w-full box-border py-2 px-3 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--background)] text-[var(--foreground)] text-sm focus:outline-none focus:border-[var(--ring)] focus:ring-2 focus:ring-[var(--ring)]/20",children:[a.jsx("option",{value:"white",children:"White"}),a.jsx("option",{value:"black",children:"Black"})]})]}),w.processing?.removeBg&&a.jsxs("div",{className:"flex flex-row justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Trim Transparent Background"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] mt-1 leading-snug",children:"Remove transparent areas from images (PNG/WebP only)"})]}),a.jsx(We,{checked:w.processing?.trimTransparentBackground||!1,onChange:Xt("processing","trimTransparentBackground")})]}),a.jsxs("div",{className:"flex flex-row justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Image Enhancement"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] mt-1 leading-snug",children:"Apply sharpening and saturation effects"})]}),a.jsx(We,{checked:w.processing?.imageEnhancement||!1,onChange:Xt("processing","imageEnhancement")})]}),w.processing?.imageEnhancement&&a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Sharpening Intensity (0-10)"}),a.jsx("input",{type:"range",min:"0",max:"10",step:"0.5",value:w.processing?.sharpening||5,onChange:S=>je("processing","sharpening",parseFloat(S.target.value)),className:Jo.rangeSlider}),a.jsxs("div",{className:"flex justify-between text-xs text-[var(--muted-foreground)] mt-2",children:[a.jsx("span",{children:"0 (None)"}),a.jsx("span",{children:w.processing?.sharpening||5}),a.jsx("span",{children:"10 (Maximum)"})]})]}),w.processing?.imageEnhancement&&a.jsxs("div",{className:"flex flex-col mb-4",children:[a.jsx("label",{children:"Saturation Level (0-2)"}),a.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:w.processing?.saturation||1.4,onChange:S=>je("processing","saturation",parseFloat(S.target.value)),className:Jo.rangeSlider}),a.jsxs("div",{className:"flex justify-between text-xs text-[var(--muted-foreground)] mt-2",children:[a.jsx("span",{children:"0 (Grayscale)"}),a.jsx("span",{children:w.processing?.saturation||1.4}),a.jsx("span",{children:"2 (Vibrant)"})]})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h4",{className:"text-lg font-semibold text-[var(--foreground)] mb-4 pb-2 border-b border-[var(--border)]",children:"AI Features"}),a.jsxs("div",{className:"flex flex-row justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{children:"AI Quality Check"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] mt-1 leading-snug",children:"Use AI to check image quality"})]}),a.jsx(We,{checked:w.ai?.runQualityCheck||!1,onChange:Xt("ai","runQualityCheck")})]}),a.jsxs("div",{className:"flex flex-row justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{children:"AI Metadata Generation"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] mt-1 leading-snug",children:"Generate metadata using AI"})]}),a.jsx(We,{checked:w.ai?.runMetadataGen||!1,onChange:Xt("ai","runMetadataGen")})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h4",{className:"text-lg font-semibold text-[var(--foreground)] mb-4 pb-2 border-b border-[var(--border)]",children:"Advanced Settings"}),a.jsxs("div",{className:"flex flex-row justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Debug Mode"}),a.jsx("p",{className:"text-xs text-[var(--muted-foreground)] mt-1 leading-snug",children:"Enable detailed logging and debugging"})]}),a.jsx(We,{checked:w.advanced?.debugMode||!1,onChange:Xt("advanced","debugMode")})]})]})]}):a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsxs("div",{className:"text-center py-8 text-[var(--muted-foreground)]",children:[a.jsx("p",{children:"Unable to load job settings. This job may be corrupted or missing configuration."}),a.jsx("p",{children:"Please check the error message below for more details."})]})}),x&&a.jsxs("div",{className:"py-2 text-[var(--status-failed)] flex items-center gap-2",children:[a.jsx("span",{children:a.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),x]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx("button",{onClick:Zs,className:"px-4 py-2 bg-[var(--secondary)] text-[var(--secondary-foreground)] border border-[var(--border)] rounded-[var(--radius)] cursor-pointer transition hover:bg-[var(--accent)]",children:"Cancel"}),a.jsx("button",{onClick:vr,disabled:fe||D||!w,className:"px-4 py-2 bg-[var(--primary)] text-[var(--primary-foreground)] border-0 rounded-[var(--radius)] cursor-pointer transition hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:fe?"Saving...":"Save Settings"})]})]})}),a.jsx(rg,{isOpen:pe,onClose:()=>me(!1),onExport:async()=>await window.electronAPI.exportJobToExcel(o),title:"Export Job",description:"Export this job to Excel format with all details and settings."})]}):a.jsx("div",{className:"min-h-screen flex flex-col bg-[var(--background)] text-[var(--foreground)] font-[var(--font-sans)]",role:"main","aria-label":"Job not found",children:a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center",children:[a.jsx("h3",{children:"Job Not Found"}),a.jsx("p",{children:"The requested job could not be found."}),a.jsx("button",{onClick:Ze,className:"px-4 py-2 bg-[var(--primary)] text-[var(--primary-foreground)] border-0 rounded-[var(--radius)] cursor-pointer transition hover:opacity-90",children:"Go Back"})]})})},ug=""+new URL("logo-square-CkRUID5A.svg",import.meta.url).href,am={sm:"h-8",md:"h-10",lg:"h-12"},dg=({size:o="md",className:b="",alt:u,fit:c="none"})=>{const p=ug,m=am[o]||am.md,k=["select-none",c==="width"?"":m,c==="width"?"w-full h-auto object-contain":"",b].filter(Boolean).join(" ");return a.jsx("img",{src:p,alt:u||"Gen Image Factory Logo",className:k,draggable:!1})};function fg(){const[o,b]=h.useState("Testing..."),[u,c]=h.useState("Loading..."),[p,m]=h.useState("main"),[f,k]=h.useState(null),[N,j]=h.useState(0),[E,L]=h.useState(0);h.useEffect(()=>{const I=async()=>{try{const se=await window.electronAPI.ping();b(se==="pong"?" IPC Working":" IPC Failed")}catch(se){console.error("IPC Error:",se),b(" IPC Error: "+se.message)}},F=async()=>{try{const se=await window.electronAPI.getAppVersion();c(se)}catch(se){console.error("Version Error:",se),c("Error: "+se.message)}};I(),F()},[]);const B={height:44,lineHeight:"44px",padding:0,border:0,outline:"none",boxShadow:"none",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},P="block w-full p-0 m-0 text-center select-none rounded-md";return a.jsx("div",{className:"min-h-screen bg-gray-100",children:p==="settings"?a.jsx(bh,{onBack:()=>m("main"),onOpenDashboard:()=>m("dashboard")}):p==="dashboard"?a.jsx(qh,{onBack:()=>m("main"),onOpenFailedImagesReview:()=>m("failed-review"),onOpenSettings:()=>m("settings"),onOpenJobs:()=>m("job-management"),onOpenSingleJobView:I=>{k(I),m("single-job")}},N):p==="failed-review"?a.jsx($h,{onBack:()=>{m("dashboard"),j(I=>I+1)},onBackToSingleJob:()=>{m("single-job"),L(I=>I+1)}}):p==="job-management"?a.jsx(ng,{onOpenSingleJob:I=>{k(I.toString()),m("single-job")},onBack:()=>{m("dashboard"),j(I=>I+1)}}):p==="single-job"?a.jsx(cg,{jobId:f||"",onBack:()=>m("job-management"),onExport:I=>{console.log(`Export job ${I}`)},onRerun:I=>{console.log(` APP: Rerun job ${I} - calling backend rerun function`),window.electronAPI.jobManagement.rerunJobExecution(I)},onDelete:async I=>{try{console.log(`Deleting job ${I}`);const F=await window.electronAPI.jobManagement.deleteJobExecution(I);F.success?(console.log(`Job ${I} deleted successfully`),m("job-management")):console.error(`Failed to delete job ${I}:`,F.error)}catch(F){console.error(`Error deleting job ${I}:`,F)}}},E):a.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-lg px-6 py-5 text-center home-launch",children:[a.jsx("div",{className:"mb-2 mx-auto",children:a.jsx(dg,{variant:"square",className:"h-28 md:h-32 lg:h-36 mx-auto"})}),a.jsx("div",{className:"text-sm uppercase text-slate-500 tracking-wide font-medium mb-1",children:"GEN IMAGE FACTORY"}),a.jsxs("div",{className:"text-xs uppercase text-slate-500 tracking-widest mb-4",children:["VERSION ",u]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx("button",{type:"button",onClick:()=>m("settings"),className:`${P} bg-blue-600 text-white hover:bg-blue-700 transition-colors text-sm font-medium`,style:B,children:"Open Settings"}),a.jsx("button",{type:"button",onClick:()=>m("dashboard"),className:`${P} bg-green-600 text-white hover:bg-green-700 transition-colors text-sm font-medium`,style:B,children:"Open Dashboard"})]}),a.jsx("div",{className:"mt-4 text-xs uppercase text-slate-500 tracking-wide",children:"FROM SHIFTLINE TOOLS"})]})})})}const mm=()=>{if(typeof window>"u"||window.electronAPI)return;const o=async(u={})=>{const c=u.filters??[];return c.some(p=>p.extensions?.includes("xlsx"))?{success:!0,filePath:"/Users/e2e/Documents/demo-report.xlsx"}:c.some(p=>p.extensions?.includes("zip"))?{success:!0,filePath:"/Users/e2e/Documents/demo-batch.zip"}:{success:!0,filePath:"/Users/e2e/Documents/custom-folder"}},b=()=>{};window.electronAPI={ping:async()=>"pong",getAppVersion:async()=>"e2e",getExportsFolderPath:async()=>({success:!0,path:"/Users/e2e/Exports"}),openExportsFolder:async()=>({success:!0}),selectFile:o,generatedImages:{onZipExportProgress:b,onZipExportCompleted:b,onZipExportError:b,removeZipExportProgress:b,removeZipExportCompleted:b,removeZipExportError:b},jobManagement:{rerunJobExecution:async()=>({success:!0}),deleteJobExecution:async()=>({success:!0})}}},mg=()=>{const[o,b]=h.useState(null),[u,c]=h.useState(null);h.useEffect(()=>{mm()},[]);const p=h.useMemo(()=>{const f=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);return o==="zip"?`bulk_${f}.zip`:`job_${f}.xlsx`},[o]),m=()=>b(null);return a.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-start py-10 space-y-6","data-testid":"export-harness",children:[a.jsxs("div",{className:"space-x-4",children:[a.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-500 transition","data-testid":"open-xlsx-export",onClick:()=>b("xlsx"),children:"Open XLSX Export"}),a.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-green-600 hover:bg-green-500 transition","data-testid":"open-zip-export",onClick:()=>b("zip"),children:"Open ZIP Export"}),a.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 transition","data-testid":"reset-export-memory",onClick:()=>{localStorage.removeItem("lastExportPath:xlsx"),localStorage.removeItem("lastExportPath:zip"),c(null)},children:"Reset Export Memory"})]}),a.jsxs("div",{className:"flex space-x-4","data-testid":"status-demo",children:[a.jsx(Dt,{"data-testid":"status-badge-failed",variant:"job",status:"failed"}),a.jsx(Dt,{"data-testid":"status-badge-retry-failed",variant:"qc",status:"retry_failed",labelOverride:"Retry Failed"})]}),a.jsx("pre",{"data-testid":"last-export-payload",className:"bg-black/40 rounded p-4 min-w-[320px] text-xs overflow-x-auto",children:u?JSON.stringify(u,null,2):"null"}),o&&a.jsx(pr,{isOpen:!0,title:o==="zip"?"Export Selected Jobs":"Export Job",fileKind:o,defaultFilename:p,count:o==="zip"?3:1,onClose:m,onExport:f=>{console.log("[E2E] onExport payload",f),c({variant:o,payload:f}),m()}})]})},qo={darwin:{label:"macOS",icon:"build/icons/mac/icon.icns",pathExample:"/Users/e2e/Documents/demo-report.xlsx",defaultRoots:["~/Desktop","~/Documents"],keyboardShortcuts:{save:" + S",preferences:" + ,"},localFileUrl:"factory://users/e2e/Documents/demo-report.xlsx"},win32:{label:"Windows",icon:"build/icons/win/icon.ico",pathExample:"C:\\Users\\e2e\\Documents\\demo-report.xlsx",defaultRoots:["C:\\Users\\e2e\\Desktop","C:\\Users\\e2e\\Documents"],keyboardShortcuts:{save:"Ctrl + S",preferences:"Ctrl + ,"},localFileUrl:"factory://localhost/C:/Users/e2e/Documents/demo-report.xlsx"},linux:{label:"Linux",icon:"build/icons/png/512x512.png",pathExample:"/home/e2e/Documents/demo-report.xlsx",defaultRoots:["~/Desktop","~/Documents"],keyboardShortcuts:{save:"Ctrl + S",preferences:"Ctrl + ,"},localFileUrl:"factory://home/e2e/Documents/demo-report.xlsx"}},xg=(o,b)=>{try{const u=new URL(b);let c=decodeURIComponent(u.pathname);return o==="win32"&&/^\/[a-zA-Z]:\//.test(c)&&(c=c.slice(1)),o!=="win32"&&u.hostname&&(c=`/${u.hostname}${c}`),c=c.replace(/\\/g,"/"),o==="darwin"&&c.startsWith("/users/")&&(c="/Users/"+c.slice(7)),o==="win32"?c.replace(/\//g,"\\"):c}catch{return b}},hg=()=>{if(typeof window>"u")return"darwin";const o=window.location.hash||"",[,b=""]=o.split("?"),c=new URLSearchParams(b).get("platform");return c&&c in qo?c:"darwin"},gg=()=>{const[o,b]=h.useState(hg),u=qo[o];h.useEffect(()=>{mm()},[]),h.useEffect(()=>{if(typeof window>"u")return;const p=`#/__e2e__/platform?platform=${o}`;window.location.hash!==p&&(window.location.hash=p)},[o]);const c=h.useMemo(()=>xg(o,u.localFileUrl),[o,u.localFileUrl]);return a.jsxs("div",{"data-testid":"platform-harness",className:"min-h-screen bg-slate-900 text-white flex flex-col items-center py-10 px-4 space-y-6",children:[a.jsx("div",{className:"space-x-4","data-testid":"platform-selector",children:Object.entries(qo).map(([p,m])=>a.jsx("button",{type:"button",className:`px-4 py-2 rounded ${p===o?"bg-white text-slate-900":"bg-slate-700 hover:bg-slate-600"}`,"data-testid":`platform-toggle-${p}`,onClick:()=>b(p),children:m.label},p))}),a.jsxs("div",{className:"w-full max-w-3xl bg-slate-800 rounded-xl p-6 space-y-4 shadow-lg","data-testid":"platform-details",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm uppercase tracking-wider text-slate-400",children:"Active Platform"}),a.jsx("p",{className:"text-2xl font-semibold","data-testid":"platform-current",children:u.label})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm uppercase tracking-wider text-slate-400",children:"Window Icon"}),a.jsx("p",{className:"font-mono","data-testid":"platform-icon-path",children:u.icon})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-slate-900/60 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Preferred Save Location"}),a.jsx("p",{className:"font-mono text-sm","data-testid":"platform-path",children:u.pathExample})]}),a.jsxs("div",{className:"bg-slate-900/60 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Normalized factory URL"}),a.jsx("p",{className:"font-mono text-sm","data-testid":"platform-protocol-path",children:c})]})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-slate-900/60 rounded-lg p-4 space-y-2",children:[a.jsx("p",{className:"text-sm text-slate-400",children:"Keyboard Shortcuts"}),a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{"data-testid":"platform-shortcut-save",children:["Save: ",u.keyboardShortcuts.save]}),a.jsxs("p",{"data-testid":"platform-shortcut-preferences",children:["Preferences: ",u.keyboardShortcuts.preferences]})]})]}),a.jsxs("div",{className:"bg-slate-900/60 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Security Toggles"}),a.jsxs("dl",{className:"text-sm space-y-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("dt",{children:"Context Isolation"}),a.jsx("dd",{"data-testid":"platform-security-contextIsolation",children:"Enabled"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("dt",{children:"Node Integration"}),a.jsx("dd",{"data-testid":"platform-security-nodeIntegration",children:"Disabled"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("dt",{children:"Secure Context"}),a.jsx("dd",{"data-testid":"platform-security-context",children:"True"})]})]})]}),a.jsxs("div",{className:"bg-slate-900/60 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Default Allowed Roots"}),a.jsx("ul",{className:"text-sm space-y-1","data-testid":"platform-default-roots",children:u.defaultRoots.map(p=>a.jsx("li",{children:p},p))})]})]})]})]})},pg=document.getElementById("root"),bg=Bx.createRoot(pg),lm=typeof window<"u"&&window.location.hash||"",vg=()=>lm.startsWith("#/__e2e__/export")?a.jsx(mg,{}):lm.startsWith("#/__e2e__/platform")?a.jsx(gg,{}):null;bg.render(vg()??a.jsx(fg,{}));
