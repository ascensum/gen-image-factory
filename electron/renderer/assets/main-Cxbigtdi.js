(function(){const H=document.createElement("link").relList;if(H&&H.supports&&H.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))f(C);new MutationObserver(C=>{for(const A of C)if(A.type==="childList")for(const y of A.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&f(y)}).observe(document,{childList:!0,subtree:!0});function I(C){const A={};return C.integrity&&(A.integrity=C.integrity),C.referrerPolicy&&(A.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?A.credentials="include":C.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function f(C){if(C.ep)return;C.ep=!0;const A=I(C);fetch(C.href,A)}})();function P0(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Bc={exports:{}},is={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function pg(){if(O0)return is;O0=1;var u=Symbol.for("react.transitional.element"),H=Symbol.for("react.fragment");function I(f,C,A){var y=null;if(A!==void 0&&(y=""+A),C.key!==void 0&&(y=""+C.key),"key"in C){A={};for(var te in C)te!=="key"&&(A[te]=C[te])}else A=C;return C=A.ref,{$$typeof:u,type:f,key:y,ref:C!==void 0?C:null,props:A}}return is.Fragment=H,is.jsx=I,is.jsxs=I,is}var _0;function vg(){return _0||(_0=1,Bc.exports=pg()),Bc.exports}var a=vg(),Ic={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function bg(){if(U0)return Ie;U0=1;var u=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),y=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),P=Symbol.iterator;function re(d){return d===null||typeof d!="object"?null:(d=P&&d[P]||d["@@iterator"],typeof d=="function"?d:null)}var se={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},me=Object.assign,$={};function Se(d,L,Z){this.props=d,this.context=L,this.refs=$,this.updater=Z||se}Se.prototype.isReactComponent={},Se.prototype.setState=function(d,L){if(typeof d!="object"&&typeof d!="function"&&d!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,d,L,"setState")},Se.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")};function xe(){}xe.prototype=Se.prototype;function Me(d,L,Z){this.props=d,this.context=L,this.refs=$,this.updater=Z||se}var ye=Me.prototype=new xe;ye.constructor=Me,me(ye,Se.prototype),ye.isPureReactComponent=!0;var ke=Array.isArray;function be(){}var le={H:null,A:null,T:null,S:null},je=Object.prototype.hasOwnProperty;function O(d,L,Z){var ce=Z.ref;return{$$typeof:u,type:d,key:L,ref:ce!==void 0?ce:null,props:Z}}function pe(d,L){return O(d.type,L,d.props)}function z(d){return typeof d=="object"&&d!==null&&d.$$typeof===u}function q(d){var L={"=":"=0",":":"=2"};return"$"+d.replace(/[=:]/g,function(Z){return L[Z]})}var ee=/\/+/g;function ve(d,L){return typeof d=="object"&&d!==null&&d.key!=null?q(""+d.key):L.toString(36)}function ne(d){switch(d.status){case"fulfilled":return d.value;case"rejected":throw d.reason;default:switch(typeof d.status=="string"?d.then(be,be):(d.status="pending",d.then(function(L){d.status==="pending"&&(d.status="fulfilled",d.value=L)},function(L){d.status==="pending"&&(d.status="rejected",d.reason=L)})),d.status){case"fulfilled":return d.value;case"rejected":throw d.reason}}throw d}function o(d,L,Z,ce,M){var w=typeof d;(w==="undefined"||w==="boolean")&&(d=null);var ae=!1;if(d===null)ae=!0;else switch(w){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(d.$$typeof){case u:case H:ae=!0;break;case _:return ae=d._init,o(ae(d._payload),L,Z,ce,M)}}if(ae)return M=M(d),ae=ce===""?"."+ve(d,0):ce,ke(M)?(Z="",ae!=null&&(Z=ae.replace(ee,"$&/")+"/"),o(M,L,Z,"",function(lt){return lt})):M!=null&&(z(M)&&(M=pe(M,Z+(M.key==null||d&&d.key===M.key?"":(""+M.key).replace(ee,"$&/")+"/")+ae)),L.push(M)),1;ae=0;var fe=ce===""?".":ce+":";if(ke(d))for(var Re=0;Re<d.length;Re++)ce=d[Re],w=fe+ve(ce,Re),ae+=o(ce,L,Z,w,M);else if(Re=re(d),typeof Re=="function")for(d=Re.call(d),Re=0;!(ce=d.next()).done;)ce=ce.value,w=fe+ve(ce,Re++),ae+=o(ce,L,Z,w,M);else if(w==="object"){if(typeof d.then=="function")return o(ne(d),L,Z,ce,M);throw L=String(d),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return ae}function k(d,L,Z){if(d==null)return d;var ce=[],M=0;return o(d,ce,"","",function(w){return L.call(Z,w,M++)}),ce}function p(d){if(d._status===-1){var L=d._result;L=L(),L.then(function(Z){(d._status===0||d._status===-1)&&(d._status=1,d._result=Z)},function(Z){(d._status===0||d._status===-1)&&(d._status=2,d._result=Z)}),d._status===-1&&(d._status=0,d._result=L)}if(d._status===1)return d._result.default;throw d._result}var V=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},G={map:k,forEach:function(d,L,Z){k(d,function(){L.apply(this,arguments)},Z)},count:function(d){var L=0;return k(d,function(){L++}),L},toArray:function(d){return k(d,function(L){return L})||[]},only:function(d){if(!z(d))throw Error("React.Children.only expected to receive a single React element child.");return d}};return Ie.Activity=J,Ie.Children=G,Ie.Component=Se,Ie.Fragment=I,Ie.Profiler=C,Ie.PureComponent=Me,Ie.StrictMode=f,Ie.Suspense=j,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(d){return le.H.useMemoCache(d)}},Ie.cache=function(d){return function(){return d.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(d,L,Z){if(d==null)throw Error("The argument must be a React element, but you passed "+d+".");var ce=me({},d.props),M=d.key;if(L!=null)for(w in L.key!==void 0&&(M=""+L.key),L)!je.call(L,w)||w==="key"||w==="__self"||w==="__source"||w==="ref"&&L.ref===void 0||(ce[w]=L[w]);var w=arguments.length-2;if(w===1)ce.children=Z;else if(1<w){for(var ae=Array(w),fe=0;fe<w;fe++)ae[fe]=arguments[fe+2];ce.children=ae}return O(d.type,M,ce)},Ie.createContext=function(d){return d={$$typeof:y,_currentValue:d,_currentValue2:d,_threadCount:0,Provider:null,Consumer:null},d.Provider=d,d.Consumer={$$typeof:A,_context:d},d},Ie.createElement=function(d,L,Z){var ce,M={},w=null;if(L!=null)for(ce in L.key!==void 0&&(w=""+L.key),L)je.call(L,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(M[ce]=L[ce]);var ae=arguments.length-2;if(ae===1)M.children=Z;else if(1<ae){for(var fe=Array(ae),Re=0;Re<ae;Re++)fe[Re]=arguments[Re+2];M.children=fe}if(d&&d.defaultProps)for(ce in ae=d.defaultProps,ae)M[ce]===void 0&&(M[ce]=ae[ce]);return O(d,w,M)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(d){return{$$typeof:te,render:d}},Ie.isValidElement=z,Ie.lazy=function(d){return{$$typeof:_,_payload:{_status:-1,_result:d},_init:p}},Ie.memo=function(d,L){return{$$typeof:g,type:d,compare:L===void 0?null:L}},Ie.startTransition=function(d){var L=le.T,Z={};le.T=Z;try{var ce=d(),M=le.S;M!==null&&M(Z,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(be,V)}catch(w){V(w)}finally{L!==null&&Z.types!==null&&(L.types=Z.types),le.T=L}},Ie.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ie.use=function(d){return le.H.use(d)},Ie.useActionState=function(d,L,Z){return le.H.useActionState(d,L,Z)},Ie.useCallback=function(d,L){return le.H.useCallback(d,L)},Ie.useContext=function(d){return le.H.useContext(d)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(d,L){return le.H.useDeferredValue(d,L)},Ie.useEffect=function(d,L){return le.H.useEffect(d,L)},Ie.useEffectEvent=function(d){return le.H.useEffectEvent(d)},Ie.useId=function(){return le.H.useId()},Ie.useImperativeHandle=function(d,L,Z){return le.H.useImperativeHandle(d,L,Z)},Ie.useInsertionEffect=function(d,L){return le.H.useInsertionEffect(d,L)},Ie.useLayoutEffect=function(d,L){return le.H.useLayoutEffect(d,L)},Ie.useMemo=function(d,L){return le.H.useMemo(d,L)},Ie.useOptimistic=function(d,L){return le.H.useOptimistic(d,L)},Ie.useReducer=function(d,L,Z){return le.H.useReducer(d,L,Z)},Ie.useRef=function(d){return le.H.useRef(d)},Ie.useState=function(d){return le.H.useState(d)},Ie.useSyncExternalStore=function(d,L,Z){return le.H.useSyncExternalStore(d,L,Z)},Ie.useTransition=function(){return le.H.useTransition()},Ie.version="19.2.0",Ie}var H0;function Jc(){return H0||(H0=1,Ic.exports=bg()),Ic.exports}var m=Jc();const Qe=P0(m);var Oc={exports:{}},cs={},_c={exports:{}},Uc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function yg(){return G0||(G0=1,(function(u){function H(o,k){var p=o.length;o.push(k);e:for(;0<p;){var V=p-1>>>1,G=o[V];if(0<C(G,k))o[V]=k,o[p]=G,p=V;else break e}}function I(o){return o.length===0?null:o[0]}function f(o){if(o.length===0)return null;var k=o[0],p=o.pop();if(p!==k){o[0]=p;e:for(var V=0,G=o.length,d=G>>>1;V<d;){var L=2*(V+1)-1,Z=o[L],ce=L+1,M=o[ce];if(0>C(Z,p))ce<G&&0>C(M,Z)?(o[V]=M,o[ce]=p,V=ce):(o[V]=Z,o[L]=p,V=L);else if(ce<G&&0>C(M,p))o[V]=M,o[ce]=p,V=ce;else break e}}return k}function C(o,k){var p=o.sortIndex-k.sortIndex;return p!==0?p:o.id-k.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var A=performance;u.unstable_now=function(){return A.now()}}else{var y=Date,te=y.now();u.unstable_now=function(){return y.now()-te}}var j=[],g=[],_=1,J=null,P=3,re=!1,se=!1,me=!1,$=!1,Se=typeof setTimeout=="function"?setTimeout:null,xe=typeof clearTimeout=="function"?clearTimeout:null,Me=typeof setImmediate<"u"?setImmediate:null;function ye(o){for(var k=I(g);k!==null;){if(k.callback===null)f(g);else if(k.startTime<=o)f(g),k.sortIndex=k.expirationTime,H(j,k);else break;k=I(g)}}function ke(o){if(me=!1,ye(o),!se)if(I(j)!==null)se=!0,be||(be=!0,q());else{var k=I(g);k!==null&&ne(ke,k.startTime-o)}}var be=!1,le=-1,je=5,O=-1;function pe(){return $?!0:!(u.unstable_now()-O<je)}function z(){if($=!1,be){var o=u.unstable_now();O=o;var k=!0;try{e:{se=!1,me&&(me=!1,xe(le),le=-1),re=!0;var p=P;try{t:{for(ye(o),J=I(j);J!==null&&!(J.expirationTime>o&&pe());){var V=J.callback;if(typeof V=="function"){J.callback=null,P=J.priorityLevel;var G=V(J.expirationTime<=o);if(o=u.unstable_now(),typeof G=="function"){J.callback=G,ye(o),k=!0;break t}J===I(j)&&f(j),ye(o)}else f(j);J=I(j)}if(J!==null)k=!0;else{var d=I(g);d!==null&&ne(ke,d.startTime-o),k=!1}}break e}finally{J=null,P=p,re=!1}k=void 0}}finally{k?q():be=!1}}}var q;if(typeof Me=="function")q=function(){Me(z)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ve=ee.port2;ee.port1.onmessage=z,q=function(){ve.postMessage(null)}}else q=function(){Se(z,0)};function ne(o,k){le=Se(function(){o(u.unstable_now())},k)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(o){o.callback=null},u.unstable_forceFrameRate=function(o){0>o||125<o?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):je=0<o?Math.floor(1e3/o):5},u.unstable_getCurrentPriorityLevel=function(){return P},u.unstable_next=function(o){switch(P){case 1:case 2:case 3:var k=3;break;default:k=P}var p=P;P=k;try{return o()}finally{P=p}},u.unstable_requestPaint=function(){$=!0},u.unstable_runWithPriority=function(o,k){switch(o){case 1:case 2:case 3:case 4:case 5:break;default:o=3}var p=P;P=o;try{return k()}finally{P=p}},u.unstable_scheduleCallback=function(o,k,p){var V=u.unstable_now();switch(typeof p=="object"&&p!==null?(p=p.delay,p=typeof p=="number"&&0<p?V+p:V):p=V,o){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=p+G,o={id:_++,callback:k,priorityLevel:o,startTime:p,expirationTime:G,sortIndex:-1},p>V?(o.sortIndex=p,H(g,o),I(j)===null&&o===I(g)&&(me?(xe(le),le=-1):me=!0,ne(ke,p-V))):(o.sortIndex=G,H(j,o),se||re||(se=!0,be||(be=!0,q()))),o},u.unstable_shouldYield=pe,u.unstable_wrapCallback=function(o){var k=P;return function(){var p=P;P=k;try{return o.apply(this,arguments)}finally{P=p}}}})(Uc)),Uc}var J0;function jg(){return J0||(J0=1,_c.exports=yg()),_c.exports}var Hc={exports:{}},Ot={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function Ng(){if(q0)return Ot;q0=1;var u=Jc();function H(j){var g="https://react.dev/errors/"+j;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+j+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function I(){}var f={d:{f:I,r:function(){throw Error(H(522))},D:I,C:I,L:I,m:I,X:I,S:I,M:I},p:0,findDOMNode:null},C=Symbol.for("react.portal");function A(j,g,_){var J=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:J==null?null:""+J,children:j,containerInfo:g,implementation:_}}var y=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function te(j,g){if(j==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,Ot.createPortal=function(j,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(H(299));return A(j,g,null,_)},Ot.flushSync=function(j){var g=y.T,_=f.p;try{if(y.T=null,f.p=2,j)return j()}finally{y.T=g,f.p=_,f.d.f()}},Ot.preconnect=function(j,g){typeof j=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,f.d.C(j,g))},Ot.prefetchDNS=function(j){typeof j=="string"&&f.d.D(j)},Ot.preinit=function(j,g){if(typeof j=="string"&&g&&typeof g.as=="string"){var _=g.as,J=te(_,g.crossOrigin),P=typeof g.integrity=="string"?g.integrity:void 0,re=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?f.d.S(j,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:J,integrity:P,fetchPriority:re}):_==="script"&&f.d.X(j,{crossOrigin:J,integrity:P,fetchPriority:re,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ot.preinitModule=function(j,g){if(typeof j=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=te(g.as,g.crossOrigin);f.d.M(j,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&f.d.M(j)},Ot.preload=function(j,g){if(typeof j=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,J=te(_,g.crossOrigin);f.d.L(j,_,{crossOrigin:J,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ot.preloadModule=function(j,g){if(typeof j=="string")if(g){var _=te(g.as,g.crossOrigin);f.d.m(j,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else f.d.m(j)},Ot.requestFormReset=function(j){f.d.r(j)},Ot.unstable_batchedUpdates=function(j,g){return j(g)},Ot.useFormState=function(j,g,_){return y.H.useFormState(j,g,_)},Ot.useFormStatus=function(){return y.H.useHostTransitionStatus()},Ot.version="19.2.0",Ot}var Q0;function $0(){if(Q0)return Hc.exports;Q0=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(H){console.error(H)}}return u(),Hc.exports=Ng(),Hc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0;function wg(){if(Y0)return cs;Y0=1;var u=jg(),H=Jc(),I=$0();function f(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function C(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function A(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function y(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function te(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function j(e){if(A(e)!==e)throw Error(f(188))}function g(e){var t=e.alternate;if(!t){if(t=A(e),t===null)throw Error(f(188));return t!==e?null:e}for(var l=e,n=t;;){var s=l.return;if(s===null)break;var r=s.alternate;if(r===null){if(n=s.return,n!==null){l=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===l)return j(s),e;if(r===n)return j(s),t;r=r.sibling}throw Error(f(188))}if(l.return!==n.return)l=s,n=r;else{for(var i=!1,c=s.child;c;){if(c===l){i=!0,l=s,n=r;break}if(c===n){i=!0,n=s,l=r;break}c=c.sibling}if(!i){for(c=r.child;c;){if(c===l){i=!0,l=r,n=s;break}if(c===n){i=!0,n=r,l=s;break}c=c.sibling}if(!i)throw Error(f(189))}}if(l.alternate!==n)throw Error(f(190))}if(l.tag!==3)throw Error(f(188));return l.stateNode.current===l?e:t}function _(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=_(e),t!==null)return t;e=e.sibling}return null}var J=Object.assign,P=Symbol.for("react.element"),re=Symbol.for("react.transitional.element"),se=Symbol.for("react.portal"),me=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),Se=Symbol.for("react.profiler"),xe=Symbol.for("react.consumer"),Me=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function q(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var ee=Symbol.for("react.client.reference");function ve(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ee?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case me:return"Fragment";case Se:return"Profiler";case $:return"StrictMode";case ke:return"Suspense";case be:return"SuspenseList";case O:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case se:return"Portal";case Me:return e.displayName||"Context";case xe:return(e._context.displayName||"Context")+".Consumer";case ye:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case le:return t=e.displayName||null,t!==null?t:ve(e.type)||"Memo";case je:t=e._payload,e=e._init;try{return ve(e(t))}catch{}}return null}var ne=Array.isArray,o=H.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=I.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,p={pending:!1,data:null,method:null,action:null},V=[],G=-1;function d(e){return{current:e}}function L(e){0>G||(e.current=V[G],V[G]=null,G--)}function Z(e,t){G++,V[G]=e.current,e.current=t}var ce=d(null),M=d(null),w=d(null),ae=d(null);function fe(e,t){switch(Z(w,t),Z(M,e),Z(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?r0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=r0(t),e=i0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(ce),Z(ce,e)}function Re(){L(ce),L(M),L(w)}function lt(e){e.memoizedState!==null&&Z(ae,e);var t=ce.current,l=i0(t,e.type);t!==l&&(Z(M,e),Z(ce,l))}function Ve(e){M.current===e&&(L(ce),L(M)),ae.current===e&&(L(ae),ls._currentValue=p)}var gt,ga;function Oe(e){if(gt===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);gt=t&&t[1]||"",ga=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gt+e+ga}var _t=!1;function Ht(e,t){if(!e||_t)return"";_t=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(U){var B=U}Reflect.construct(e,[],X)}else{try{X.call()}catch(U){B=U}e.call(X.prototype)}}else{try{throw Error()}catch(U){B=U}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(U){if(U&&B&&typeof U.stack=="string")return[U.stack,B.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),i=r[0],c=r[1];if(i&&c){var x=i.split(`
`),R=c.split(`
`);for(s=n=0;n<x.length&&!x[n].includes("DetermineComponentFrameRoot");)n++;for(;s<R.length&&!R[s].includes("DetermineComponentFrameRoot");)s++;if(n===x.length||s===R.length)for(n=x.length-1,s=R.length-1;1<=n&&0<=s&&x[n]!==R[s];)s--;for(;1<=n&&0<=s;n--,s--)if(x[n]!==R[s]){if(n!==1||s!==1)do if(n--,s--,0>s||x[n]!==R[s]){var Y=`
`+x[n].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=n&&0<=s);break}}}finally{_t=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?Oe(l):""}function D(e,t){switch(e.tag){case 26:case 27:case 5:return Oe(e.type);case 16:return Oe("Lazy");case 13:return e.child!==t&&t!==null?Oe("Suspense Fallback"):Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return Ht(e.type,!1);case 11:return Ht(e.type.render,!1);case 1:return Ht(e.type,!0);case 31:return Oe("Activity");default:return""}}function h(e){try{var t="",l=null;do t+=D(e,l),l=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var E=Object.prototype.hasOwnProperty,Q=u.unstable_scheduleCallback,W=u.unstable_cancelCallback,he=u.unstable_shouldYield,ie=u.unstable_requestPaint,K=u.unstable_now,Ee=u.unstable_getCurrentPriorityLevel,Te=u.unstable_ImmediatePriority,Xe=u.unstable_UserBlockingPriority,Pe=u.unstable_NormalPriority,ft=u.unstable_LowPriority,ot=u.unstable_IdlePriority,pt=u.log,N=u.unstable_setDisableYieldValue,de=null,Ne=null;function Ze(e){if(typeof pt=="function"&&N(e),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(de,e)}catch{}}var b=Math.clz32?Math.clz32:ge,oe=Math.log,ue=Math.LN2;function ge(e){return e>>>=0,e===0?32:31-(oe(e)/ue|0)|0}var Ae=256,Le=262144,$e=4194304;function Fe(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Be(e,t,l){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var c=n&134217727;return c!==0?(n=c&~r,n!==0?s=Fe(n):(i&=c,i!==0?s=Fe(i):l||(l=c&~e,l!==0&&(s=Fe(l))))):(c=n&~r,c!==0?s=Fe(c):i!==0?s=Fe(i):l||(l=n&~e,l!==0&&(s=Fe(l)))),s===0?0:t!==0&&t!==s&&(t&r)===0&&(r=s&-s,l=t&-t,r>=l||r===32&&(l&4194048)!==0)?t:s}function vt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Bt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jt(){var e=$e;return $e<<=1,($e&62914560)===0&&($e=4194304),e}function la(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function Mt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function qa(e,t,l,n,s,r){var i=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var c=e.entanglements,x=e.expirationTimes,R=e.hiddenUpdates;for(l=i&~l;0<l;){var Y=31-b(l),X=1<<Y;c[Y]=0,x[Y]=-1;var B=R[Y];if(B!==null)for(R[Y]=null,Y=0;Y<B.length;Y++){var U=B[Y];U!==null&&(U.lane&=-536870913)}l&=~X}n!==0&&It(e,n,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(i&~t))}function It(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-b(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|l&261930}function Gt(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var n=31-b(l),s=1<<n;s&t|e[n]&t&&(e[n]|=t),l&=~s}}function va(e,t){var l=t&-t;return l=(l&42)!==0?1:pn(l),(l&(e.suspendedLanes|t))!==0?0:l}function pn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Cr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Qc(){var e=k.p;return e!==0?e:(e=window.event,e===void 0?32:z0(e.type))}function Yc(e,t){var l=k.p;try{return k.p=e,t()}finally{k.p=l}}var Qa=Math.random().toString(36).slice(2),zt="__reactFiber$"+Qa,Jt="__reactProps$"+Qa,Dl="__reactContainer$"+Qa,Mr="__reactEvents$"+Qa,sm="__reactListeners$"+Qa,rm="__reactHandles$"+Qa,Vc="__reactResources$"+Qa,vn="__reactMarker$"+Qa;function kr(e){delete e[zt],delete e[Jt],delete e[Mr],delete e[sm],delete e[rm]}function Tl(e){var t=e[zt];if(t)return t;for(var l=e.parentNode;l;){if(t=l[Dl]||l[zt]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=g0(e);e!==null;){if(l=e[zt])return l;e=g0(e)}return t}e=l,l=e.parentNode}return null}function Rl(e){if(e=e[zt]||e[Dl]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function bn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(f(33))}function Ll(e){var t=e[Vc];return t||(t=e[Vc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function At(e){e[vn]=!0}var Zc=new Set,Fc={};function gl(e,t){Bl(e,t),Bl(e+"Capture",t)}function Bl(e,t){for(Fc[e]=t,e=0;e<t.length;e++)Zc.add(t[e])}var im=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xc={},Pc={};function cm(e){return E.call(Pc,e)?!0:E.call(Xc,e)?!1:im.test(e)?Pc[e]=!0:(Xc[e]=!0,!1)}function us(e,t,l){if(cm(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function ds(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function Sa(e,t,l,n){if(n===null)e.removeAttribute(l);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+n)}}function na(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $c(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function om(e,t,l){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){l=""+i,r.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return l},setValue:function(i){l=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ar(e){if(!e._valueTracker){var t=$c(e)?"checked":"value";e._valueTracker=om(e,t,""+e[t])}}function Wc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),n="";return e&&(n=$c(e)?e.checked?"true":"false":e.value),e=n,e!==l?(t.setValue(e),!0):!1}function ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var um=/[\n"\\]/g;function sa(e){return e.replace(um,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Er(e,t,l,n,s,r,i,c){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+na(t)):e.value!==""+na(t)&&(e.value=""+na(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?zr(e,i,na(t)):l!=null?zr(e,i,na(l)):n!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.name=""+na(c):e.removeAttribute("name")}function Kc(e,t,l,n,s,r,i,c){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||l!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){Ar(e);return}l=l!=null?""+na(l):"",t=t!=null?""+na(t):l,c||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=c?e.checked:!!n,e.defaultChecked=!!n,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i),Ar(e)}function zr(e,t,l){t==="number"&&ms(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Il(e,t,l,n){if(e=e.options,t){t={};for(var s=0;s<l.length;s++)t["$"+l[s]]=!0;for(l=0;l<e.length;l++)s=t.hasOwnProperty("$"+e[l].value),e[l].selected!==s&&(e[l].selected=s),s&&n&&(e[l].defaultSelected=!0)}else{for(l=""+na(l),t=null,s=0;s<e.length;s++){if(e[s].value===l){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function eo(e,t,l){if(t!=null&&(t=""+na(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+na(l):""}function to(e,t,l,n){if(t==null){if(n!=null){if(l!=null)throw Error(f(92));if(ne(n)){if(1<n.length)throw Error(f(93));n=n[0]}l=n}l==null&&(l=""),t=l}l=na(t),e.defaultValue=l,n=e.textContent,n===l&&n!==""&&n!==null&&(e.value=n),Ar(e)}function Ol(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var dm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ao(e,t,l){var n=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,l):typeof l!="number"||l===0||dm.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function lo(e,t,l){if(t!=null&&typeof t!="object")throw Error(f(62));if(e=e.style,l!=null){for(var n in l)!l.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&l[s]!==n&&ao(e,s,n)}else for(var r in t)t.hasOwnProperty(r)&&ao(e,r,t[r])}function Dr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fs(e){return fm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ca(){}var Tr=null;function Rr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _l=null,Ul=null;function no(e){var t=Rl(e);if(t&&(e=t.stateNode)){var l=e[Jt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Er(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+sa(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var n=l[t];if(n!==e&&n.form===e.form){var s=n[Jt]||null;if(!s)throw Error(f(90));Er(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<l.length;t++)n=l[t],n.form===e.form&&Wc(n)}break e;case"textarea":eo(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&Il(e,!!l.multiple,t,!1)}}}var Lr=!1;function so(e,t,l){if(Lr)return e(t,l);Lr=!0;try{var n=e(t);return n}finally{if(Lr=!1,(_l!==null||Ul!==null)&&(er(),_l&&(t=_l,e=Ul,Ul=_l=null,no(t),e)))for(t=0;t<e.length;t++)no(e[t])}}function yn(e,t){var l=e.stateNode;if(l===null)return null;var n=l[Jt]||null;if(n===null)return null;l=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(f(231,t,typeof l));return l}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(Ma)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){Br=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{Br=!1}var Ya=null,Ir=null,gs=null;function ro(){if(gs)return gs;var e,t=Ir,l=t.length,n,s="value"in Ya?Ya.value:Ya.textContent,r=s.length;for(e=0;e<l&&t[e]===s[e];e++);var i=l-e;for(n=1;n<=i&&t[l-n]===s[r-n];n++);return gs=s.slice(e,1<n?1-n:void 0)}function hs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xs(){return!0}function io(){return!1}function qt(e){function t(l,n,s,r,i){this._reactName=l,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(l=e[c],this[c]=l?l(r):r[c]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?xs:io,this.isPropagationStopped=io,this}return J(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),t}var hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ps=qt(hl),Nn=J({},hl,{view:0,detail:0}),gm=qt(Nn),Or,_r,wn,vs=J({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wn&&(wn&&e.type==="mousemove"?(Or=e.screenX-wn.screenX,_r=e.screenY-wn.screenY):_r=Or=0,wn=e),Or)},movementY:function(e){return"movementY"in e?e.movementY:_r}}),co=qt(vs),hm=J({},vs,{dataTransfer:0}),xm=qt(hm),pm=J({},Nn,{relatedTarget:0}),Ur=qt(pm),vm=J({},hl,{animationName:0,elapsedTime:0,pseudoElement:0}),bm=qt(vm),ym=J({},hl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jm=qt(ym),Nm=J({},hl,{data:0}),oo=qt(Nm),wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cm[e])?!!t[e]:!1}function Hr(){return Mm}var km=J({},Nn,{key:function(e){if(e.key){var t=wm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hr,charCode:function(e){return e.type==="keypress"?hs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Am=qt(km),Em=J({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uo=qt(Em),zm=J({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hr}),Dm=qt(zm),Tm=J({},hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rm=qt(Tm),Lm=J({},vs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bm=qt(Lm),Im=J({},hl,{newState:0,oldState:0}),Om=qt(Im),_m=[9,13,27,32],Gr=Ma&&"CompositionEvent"in window,Sn=null;Ma&&"documentMode"in document&&(Sn=document.documentMode);var Um=Ma&&"TextEvent"in window&&!Sn,mo=Ma&&(!Gr||Sn&&8<Sn&&11>=Sn),fo=" ",go=!1;function ho(e,t){switch(e){case"keyup":return _m.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hl=!1;function Hm(e,t){switch(e){case"compositionend":return xo(t);case"keypress":return t.which!==32?null:(go=!0,fo);case"textInput":return e=t.data,e===fo&&go?null:e;default:return null}}function Gm(e,t){if(Hl)return e==="compositionend"||!Gr&&ho(e,t)?(e=ro(),gs=Ir=Ya=null,Hl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mo&&t.locale!=="ko"?null:t.data;default:return null}}var Jm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function po(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Jm[e.type]:t==="textarea"}function vo(e,t,l,n){_l?Ul?Ul.push(n):Ul=[n]:_l=n,t=ir(t,"onChange"),0<t.length&&(l=new ps("onChange","change",null,l,n),e.push({event:l,listeners:t}))}var Cn=null,Mn=null;function qm(e){e0(e,0)}function bs(e){var t=bn(e);if(Wc(t))return e}function bo(e,t){if(e==="change")return t}var yo=!1;if(Ma){var Jr;if(Ma){var qr="oninput"in document;if(!qr){var jo=document.createElement("div");jo.setAttribute("oninput","return;"),qr=typeof jo.oninput=="function"}Jr=qr}else Jr=!1;yo=Jr&&(!document.documentMode||9<document.documentMode)}function No(){Cn&&(Cn.detachEvent("onpropertychange",wo),Mn=Cn=null)}function wo(e){if(e.propertyName==="value"&&bs(Mn)){var t=[];vo(t,Mn,e,Rr(e)),so(qm,t)}}function Qm(e,t,l){e==="focusin"?(No(),Cn=t,Mn=l,Cn.attachEvent("onpropertychange",wo)):e==="focusout"&&No()}function Ym(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bs(Mn)}function Vm(e,t){if(e==="click")return bs(t)}function Zm(e,t){if(e==="input"||e==="change")return bs(t)}function Fm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pt=typeof Object.is=="function"?Object.is:Fm;function kn(e,t){if(Pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),n=Object.keys(t);if(l.length!==n.length)return!1;for(n=0;n<l.length;n++){var s=l[n];if(!E.call(t,s)||!Pt(e[s],t[s]))return!1}return!0}function So(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Co(e,t){var l=So(e);e=0;for(var n;l;){if(l.nodeType===3){if(n=e+l.textContent.length,e<=t&&n>=t)return{node:l,offset:t-e};e=n}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=So(l)}}function Mo(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mo(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ko(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ms(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=ms(e.document)}return t}function Qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Xm=Ma&&"documentMode"in document&&11>=document.documentMode,Gl=null,Yr=null,An=null,Vr=!1;function Ao(e,t,l){var n=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Vr||Gl==null||Gl!==ms(n)||(n=Gl,"selectionStart"in n&&Qr(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),An&&kn(An,n)||(An=n,n=ir(Yr,"onSelect"),0<n.length&&(t=new ps("onSelect","select",null,t,l),e.push({event:t,listeners:n}),t.target=Gl)))}function xl(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var Jl={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionrun:xl("Transition","TransitionRun"),transitionstart:xl("Transition","TransitionStart"),transitioncancel:xl("Transition","TransitionCancel"),transitionend:xl("Transition","TransitionEnd")},Zr={},Eo={};Ma&&(Eo=document.createElement("div").style,"AnimationEvent"in window||(delete Jl.animationend.animation,delete Jl.animationiteration.animation,delete Jl.animationstart.animation),"TransitionEvent"in window||delete Jl.transitionend.transition);function pl(e){if(Zr[e])return Zr[e];if(!Jl[e])return e;var t=Jl[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in Eo)return Zr[e]=t[l];return e}var zo=pl("animationend"),Do=pl("animationiteration"),To=pl("animationstart"),Pm=pl("transitionrun"),$m=pl("transitionstart"),Wm=pl("transitioncancel"),Ro=pl("transitionend"),Lo=new Map,Fr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fr.push("scrollEnd");function ha(e,t){Lo.set(e,t),gl(t,[e])}var ys=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ra=[],ql=0,Xr=0;function js(){for(var e=ql,t=Xr=ql=0;t<e;){var l=ra[t];ra[t++]=null;var n=ra[t];ra[t++]=null;var s=ra[t];ra[t++]=null;var r=ra[t];if(ra[t++]=null,n!==null&&s!==null){var i=n.pending;i===null?s.next=s:(s.next=i.next,i.next=s),n.pending=s}r!==0&&Bo(l,s,r)}}function Ns(e,t,l,n){ra[ql++]=e,ra[ql++]=t,ra[ql++]=l,ra[ql++]=n,Xr|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Pr(e,t,l,n){return Ns(e,t,l,n),ws(e)}function vl(e,t){return Ns(e,null,null,t),ws(e)}function Bo(e,t,l){e.lanes|=l;var n=e.alternate;n!==null&&(n.lanes|=l);for(var s=!1,r=e.return;r!==null;)r.childLanes|=l,n=r.alternate,n!==null&&(n.childLanes|=l),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-b(l),e=r.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=l|536870912),r):null}function ws(e){if(50<Pn)throw Pn=0,sc=null,Error(f(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ql={};function Km(e,t,l,n){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,t,l,n){return new Km(e,t,l,n)}function $r(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ka(e,t){var l=e.alternate;return l===null?(l=$t(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Io(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ss(e,t,l,n,s,r){var i=0;if(n=e,typeof e=="function")$r(e)&&(i=1);else if(typeof e=="string")i=sg(e,l,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case O:return e=$t(31,l,t,s),e.elementType=O,e.lanes=r,e;case me:return bl(l.children,s,r,t);case $:i=8,s|=24;break;case Se:return e=$t(12,l,t,s|2),e.elementType=Se,e.lanes=r,e;case ke:return e=$t(13,l,t,s),e.elementType=ke,e.lanes=r,e;case be:return e=$t(19,l,t,s),e.elementType=be,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Me:i=10;break e;case xe:i=9;break e;case ye:i=11;break e;case le:i=14;break e;case je:i=16,n=null;break e}i=29,l=Error(f(130,e===null?"null":typeof e,"")),n=null}return t=$t(i,l,t,s),t.elementType=e,t.type=n,t.lanes=r,t}function bl(e,t,l,n){return e=$t(7,e,n,t),e.lanes=l,e}function Wr(e,t,l){return e=$t(6,e,null,t),e.lanes=l,e}function Oo(e){var t=$t(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,l){return t=$t(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var _o=new WeakMap;function ia(e,t){if(typeof e=="object"&&e!==null){var l=_o.get(e);return l!==void 0?l:(t={value:e,source:t,stack:h(t)},_o.set(e,t),t)}return{value:e,source:t,stack:h(t)}}var Yl=[],Vl=0,Cs=null,En=0,ca=[],oa=0,Va=null,ba=1,ya="";function Aa(e,t){Yl[Vl++]=En,Yl[Vl++]=Cs,Cs=e,En=t}function Uo(e,t,l){ca[oa++]=ba,ca[oa++]=ya,ca[oa++]=Va,Va=e;var n=ba;e=ya;var s=32-b(n)-1;n&=~(1<<s),l+=1;var r=32-b(t)+s;if(30<r){var i=s-s%5;r=(n&(1<<i)-1).toString(32),n>>=i,s-=i,ba=1<<32-b(t)+s|l<<s|n,ya=r+e}else ba=1<<r|l<<s|n,ya=e}function ei(e){e.return!==null&&(Aa(e,1),Uo(e,1,0))}function ti(e){for(;e===Cs;)Cs=Yl[--Vl],Yl[Vl]=null,En=Yl[--Vl],Yl[Vl]=null;for(;e===Va;)Va=ca[--oa],ca[oa]=null,ya=ca[--oa],ca[oa]=null,ba=ca[--oa],ca[oa]=null}function Ho(e,t){ca[oa++]=ba,ca[oa++]=ya,ca[oa++]=Va,ba=t.id,ya=t.overflow,Va=e}var Dt=null,ut=null,Ye=!1,Za=null,ua=!1,ai=Error(f(519));function Fa(e){var t=Error(f(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zn(ia(t,e)),ai}function Go(e){var t=e.stateNode,l=e.type,n=e.memoizedProps;switch(t[zt]=e,t[Jt]=n,l){case"dialog":Ge("cancel",t),Ge("close",t);break;case"iframe":case"object":case"embed":Ge("load",t);break;case"video":case"audio":for(l=0;l<Wn.length;l++)Ge(Wn[l],t);break;case"source":Ge("error",t);break;case"img":case"image":case"link":Ge("error",t),Ge("load",t);break;case"details":Ge("toggle",t);break;case"input":Ge("invalid",t),Kc(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Ge("invalid",t);break;case"textarea":Ge("invalid",t),to(t,n.value,n.defaultValue,n.children)}l=n.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||n.suppressHydrationWarning===!0||n0(t.textContent,l)?(n.popover!=null&&(Ge("beforetoggle",t),Ge("toggle",t)),n.onScroll!=null&&Ge("scroll",t),n.onScrollEnd!=null&&Ge("scrollend",t),n.onClick!=null&&(t.onclick=Ca),t=!0):t=!1,t||Fa(e,!0)}function Jo(e){for(Dt=e.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:Dt=Dt.return}}function Zl(e){if(e!==Dt)return!1;if(!Ye)return Jo(e),Ye=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||yc(e.type,e.memoizedProps)),l=!l),l&&ut&&Fa(e),Jo(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));ut=f0(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));ut=f0(e)}else t===27?(t=ut,cl(e.type)?(e=Cc,Cc=null,ut=e):ut=t):ut=Dt?ma(e.stateNode.nextSibling):null;return!0}function yl(){ut=Dt=null,Ye=!1}function li(){var e=Za;return e!==null&&(Zt===null?Zt=e:Zt.push.apply(Zt,e),Za=null),e}function zn(e){Za===null?Za=[e]:Za.push(e)}var ni=d(null),jl=null,Ea=null;function Xa(e,t,l){Z(ni,t._currentValue),t._currentValue=l}function za(e){e._currentValue=ni.current,L(ni)}function si(e,t,l){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===l)break;e=e.return}}function ri(e,t,l,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var i=s.child;r=r.firstContext;e:for(;r!==null;){var c=r;r=s;for(var x=0;x<t.length;x++)if(c.context===t[x]){r.lanes|=l,c=r.alternate,c!==null&&(c.lanes|=l),si(r.return,l,e),n||(i=null);break e}r=c.next}}else if(s.tag===18){if(i=s.return,i===null)throw Error(f(341));i.lanes|=l,r=i.alternate,r!==null&&(r.lanes|=l),si(i,l,e),i=null}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}}function Fl(e,t,l,n){e=null;for(var s=t,r=!1;s!==null;){if(!r){if((s.flags&524288)!==0)r=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var i=s.alternate;if(i===null)throw Error(f(387));if(i=i.memoizedProps,i!==null){var c=s.type;Pt(s.pendingProps.value,i.value)||(e!==null?e.push(c):e=[c])}}else if(s===ae.current){if(i=s.alternate,i===null)throw Error(f(387));i.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(ls):e=[ls])}s=s.return}e!==null&&ri(t,e,l,n),t.flags|=262144}function Ms(e){for(e=e.firstContext;e!==null;){if(!Pt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Nl(e){jl=e,Ea=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Tt(e){return qo(jl,e)}function ks(e,t){return jl===null&&Nl(e),qo(e,t)}function qo(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},Ea===null){if(e===null)throw Error(f(308));Ea=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ea=Ea.next=t;return l}var ef=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},tf=u.unstable_scheduleCallback,af=u.unstable_NormalPriority,Nt={$$typeof:Me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ii(){return{controller:new ef,data:new Map,refCount:0}}function Dn(e){e.refCount--,e.refCount===0&&tf(af,function(){e.controller.abort()})}var Tn=null,ci=0,Xl=0,Pl=null;function lf(e,t){if(Tn===null){var l=Tn=[];ci=0,Xl=dc(),Pl={status:"pending",value:void 0,then:function(n){l.push(n)}}}return ci++,t.then(Qo,Qo),t}function Qo(){if(--ci===0&&Tn!==null){Pl!==null&&(Pl.status="fulfilled");var e=Tn;Tn=null,Xl=0,Pl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function nf(e,t){var l=[],n={status:"pending",value:null,reason:null,then:function(s){l.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<l.length;s++)(0,l[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<l.length;s++)(0,l[s])(void 0)}),n}var Yo=o.S;o.S=function(e,t){Ad=K(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&lf(e,t),Yo!==null&&Yo(e,t)};var wl=d(null);function oi(){var e=wl.current;return e!==null?e:it.pooledCache}function As(e,t){t===null?Z(wl,wl.current):Z(wl,t.pool)}function Vo(){var e=oi();return e===null?null:{parent:Nt._currentValue,pool:e}}var $l=Error(f(460)),ui=Error(f(474)),Es=Error(f(542)),zs={then:function(){}};function Zo(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Fo(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(Ca,Ca),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Po(e),e;default:if(typeof t.status=="string")t.then(Ca,Ca);else{if(e=it,e!==null&&100<e.shellSuspendCounter)throw Error(f(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Po(e),e}throw Cl=t,$l}}function Sl(e){try{var t=e._init;return t(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Cl=l,$l):l}}var Cl=null;function Xo(){if(Cl===null)throw Error(f(459));var e=Cl;return Cl=null,e}function Po(e){if(e===$l||e===Es)throw Error(f(483))}var Wl=null,Rn=0;function Ds(e){var t=Rn;return Rn+=1,Wl===null&&(Wl=[]),Fo(Wl,e,t)}function Ln(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ts(e,t){throw t.$$typeof===P?Error(f(525)):(e=Object.prototype.toString.call(t),Error(f(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function $o(e){function t(S,v){if(e){var T=S.deletions;T===null?(S.deletions=[v],S.flags|=16):T.push(v)}}function l(S,v){if(!e)return null;for(;v!==null;)t(S,v),v=v.sibling;return null}function n(S){for(var v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function s(S,v){return S=ka(S,v),S.index=0,S.sibling=null,S}function r(S,v,T){return S.index=T,e?(T=S.alternate,T!==null?(T=T.index,T<v?(S.flags|=67108866,v):T):(S.flags|=67108866,v)):(S.flags|=1048576,v)}function i(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function c(S,v,T,F){return v===null||v.tag!==6?(v=Wr(T,S.mode,F),v.return=S,v):(v=s(v,T),v.return=S,v)}function x(S,v,T,F){var ze=T.type;return ze===me?Y(S,v,T.props.children,F,T.key):v!==null&&(v.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===je&&Sl(ze)===v.type)?(v=s(v,T.props),Ln(v,T),v.return=S,v):(v=Ss(T.type,T.key,T.props,null,S.mode,F),Ln(v,T),v.return=S,v)}function R(S,v,T,F){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=Kr(T,S.mode,F),v.return=S,v):(v=s(v,T.children||[]),v.return=S,v)}function Y(S,v,T,F,ze){return v===null||v.tag!==7?(v=bl(T,S.mode,F,ze),v.return=S,v):(v=s(v,T),v.return=S,v)}function X(S,v,T){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Wr(""+v,S.mode,T),v.return=S,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case re:return T=Ss(v.type,v.key,v.props,null,S.mode,T),Ln(T,v),T.return=S,T;case se:return v=Kr(v,S.mode,T),v.return=S,v;case je:return v=Sl(v),X(S,v,T)}if(ne(v)||q(v))return v=bl(v,S.mode,T,null),v.return=S,v;if(typeof v.then=="function")return X(S,Ds(v),T);if(v.$$typeof===Me)return X(S,ks(S,v),T);Ts(S,v)}return null}function B(S,v,T,F){var ze=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return ze!==null?null:c(S,v,""+T,F);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case re:return T.key===ze?x(S,v,T,F):null;case se:return T.key===ze?R(S,v,T,F):null;case je:return T=Sl(T),B(S,v,T,F)}if(ne(T)||q(T))return ze!==null?null:Y(S,v,T,F,null);if(typeof T.then=="function")return B(S,v,Ds(T),F);if(T.$$typeof===Me)return B(S,v,ks(S,T),F);Ts(S,T)}return null}function U(S,v,T,F,ze){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return S=S.get(T)||null,c(v,S,""+F,ze);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case re:return S=S.get(F.key===null?T:F.key)||null,x(v,S,F,ze);case se:return S=S.get(F.key===null?T:F.key)||null,R(v,S,F,ze);case je:return F=Sl(F),U(S,v,T,F,ze)}if(ne(F)||q(F))return S=S.get(T)||null,Y(v,S,F,ze,null);if(typeof F.then=="function")return U(S,v,T,Ds(F),ze);if(F.$$typeof===Me)return U(S,v,T,ks(v,F),ze);Ts(v,F)}return null}function we(S,v,T,F){for(var ze=null,We=null,Ce=v,Ue=v=0,qe=null;Ce!==null&&Ue<T.length;Ue++){Ce.index>Ue?(qe=Ce,Ce=null):qe=Ce.sibling;var Ke=B(S,Ce,T[Ue],F);if(Ke===null){Ce===null&&(Ce=qe);break}e&&Ce&&Ke.alternate===null&&t(S,Ce),v=r(Ke,v,Ue),We===null?ze=Ke:We.sibling=Ke,We=Ke,Ce=qe}if(Ue===T.length)return l(S,Ce),Ye&&Aa(S,Ue),ze;if(Ce===null){for(;Ue<T.length;Ue++)Ce=X(S,T[Ue],F),Ce!==null&&(v=r(Ce,v,Ue),We===null?ze=Ce:We.sibling=Ce,We=Ce);return Ye&&Aa(S,Ue),ze}for(Ce=n(Ce);Ue<T.length;Ue++)qe=U(Ce,S,Ue,T[Ue],F),qe!==null&&(e&&qe.alternate!==null&&Ce.delete(qe.key===null?Ue:qe.key),v=r(qe,v,Ue),We===null?ze=qe:We.sibling=qe,We=qe);return e&&Ce.forEach(function(fl){return t(S,fl)}),Ye&&Aa(S,Ue),ze}function De(S,v,T,F){if(T==null)throw Error(f(151));for(var ze=null,We=null,Ce=v,Ue=v=0,qe=null,Ke=T.next();Ce!==null&&!Ke.done;Ue++,Ke=T.next()){Ce.index>Ue?(qe=Ce,Ce=null):qe=Ce.sibling;var fl=B(S,Ce,Ke.value,F);if(fl===null){Ce===null&&(Ce=qe);break}e&&Ce&&fl.alternate===null&&t(S,Ce),v=r(fl,v,Ue),We===null?ze=fl:We.sibling=fl,We=fl,Ce=qe}if(Ke.done)return l(S,Ce),Ye&&Aa(S,Ue),ze;if(Ce===null){for(;!Ke.done;Ue++,Ke=T.next())Ke=X(S,Ke.value,F),Ke!==null&&(v=r(Ke,v,Ue),We===null?ze=Ke:We.sibling=Ke,We=Ke);return Ye&&Aa(S,Ue),ze}for(Ce=n(Ce);!Ke.done;Ue++,Ke=T.next())Ke=U(Ce,S,Ue,Ke.value,F),Ke!==null&&(e&&Ke.alternate!==null&&Ce.delete(Ke.key===null?Ue:Ke.key),v=r(Ke,v,Ue),We===null?ze=Ke:We.sibling=Ke,We=Ke);return e&&Ce.forEach(function(xg){return t(S,xg)}),Ye&&Aa(S,Ue),ze}function rt(S,v,T,F){if(typeof T=="object"&&T!==null&&T.type===me&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case re:e:{for(var ze=T.key;v!==null;){if(v.key===ze){if(ze=T.type,ze===me){if(v.tag===7){l(S,v.sibling),F=s(v,T.props.children),F.return=S,S=F;break e}}else if(v.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===je&&Sl(ze)===v.type){l(S,v.sibling),F=s(v,T.props),Ln(F,T),F.return=S,S=F;break e}l(S,v);break}else t(S,v);v=v.sibling}T.type===me?(F=bl(T.props.children,S.mode,F,T.key),F.return=S,S=F):(F=Ss(T.type,T.key,T.props,null,S.mode,F),Ln(F,T),F.return=S,S=F)}return i(S);case se:e:{for(ze=T.key;v!==null;){if(v.key===ze)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){l(S,v.sibling),F=s(v,T.children||[]),F.return=S,S=F;break e}else{l(S,v);break}else t(S,v);v=v.sibling}F=Kr(T,S.mode,F),F.return=S,S=F}return i(S);case je:return T=Sl(T),rt(S,v,T,F)}if(ne(T))return we(S,v,T,F);if(q(T)){if(ze=q(T),typeof ze!="function")throw Error(f(150));return T=ze.call(T),De(S,v,T,F)}if(typeof T.then=="function")return rt(S,v,Ds(T),F);if(T.$$typeof===Me)return rt(S,v,ks(S,T),F);Ts(S,T)}return typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint"?(T=""+T,v!==null&&v.tag===6?(l(S,v.sibling),F=s(v,T),F.return=S,S=F):(l(S,v),F=Wr(T,S.mode,F),F.return=S,S=F),i(S)):l(S,v)}return function(S,v,T,F){try{Rn=0;var ze=rt(S,v,T,F);return Wl=null,ze}catch(Ce){if(Ce===$l||Ce===Es)throw Ce;var We=$t(29,Ce,null,S.mode);return We.lanes=F,We.return=S,We}finally{}}}var Ml=$o(!0),Wo=$o(!1),Pa=!1;function di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function $a(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(e,t,l){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(et&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=ws(e),Bo(e,null,l),t}return Ns(e,n,t,l),ws(e)}function Bn(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,l|=n,t.lanes=l,Gt(e,l)}}function fi(e,t){var l=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,l===n)){var s=null,r=null;if(l=l.firstBaseUpdate,l!==null){do{var i={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};r===null?s=r=i:r=r.next=i,l=l.next}while(l!==null);r===null?s=r=t:r=r.next=t}else s=r=t;l={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var gi=!1;function In(){if(gi){var e=Pl;if(e!==null)throw e}}function On(e,t,l,n){gi=!1;var s=e.updateQueue;Pa=!1;var r=s.firstBaseUpdate,i=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var x=c,R=x.next;x.next=null,i===null?r=R:i.next=R,i=x;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,c=Y.lastBaseUpdate,c!==i&&(c===null?Y.firstBaseUpdate=R:c.next=R,Y.lastBaseUpdate=x))}if(r!==null){var X=s.baseState;i=0,Y=R=x=null,c=r;do{var B=c.lane&-536870913,U=B!==c.lane;if(U?(Je&B)===B:(n&B)===B){B!==0&&B===Xl&&(gi=!0),Y!==null&&(Y=Y.next={lane:0,tag:c.tag,payload:c.payload,callback:null,next:null});e:{var we=e,De=c;B=t;var rt=l;switch(De.tag){case 1:if(we=De.payload,typeof we=="function"){X=we.call(rt,X,B);break e}X=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=De.payload,B=typeof we=="function"?we.call(rt,X,B):we,B==null)break e;X=J({},X,B);break e;case 2:Pa=!0}}B=c.callback,B!==null&&(e.flags|=64,U&&(e.flags|=8192),U=s.callbacks,U===null?s.callbacks=[B]:U.push(B))}else U={lane:B,tag:c.tag,payload:c.payload,callback:c.callback,next:null},Y===null?(R=Y=U,x=X):Y=Y.next=U,i|=B;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;U=c,c=U.next,U.next=null,s.lastBaseUpdate=U,s.shared.pending=null}}while(!0);Y===null&&(x=X),s.baseState=x,s.firstBaseUpdate=R,s.lastBaseUpdate=Y,r===null&&(s.shared.lanes=0),ll|=i,e.lanes=i,e.memoizedState=X}}function Ko(e,t){if(typeof e!="function")throw Error(f(191,e));e.call(t)}function eu(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Ko(l[e],t)}var Kl=d(null),Rs=d(0);function tu(e,t){e=Ua,Z(Rs,e),Z(Kl,t),Ua=e|t.baseLanes}function hi(){Z(Rs,Ua),Z(Kl,Kl.current)}function xi(){Ua=Rs.current,L(Kl),L(Rs)}var Wt=d(null),da=null;function Ka(e){var t=e.alternate;Z(bt,bt.current&1),Z(Wt,e),da===null&&(t===null||Kl.current!==null||t.memoizedState!==null)&&(da=e)}function pi(e){Z(bt,bt.current),Z(Wt,e),da===null&&(da=e)}function au(e){e.tag===22?(Z(bt,bt.current),Z(Wt,e),da===null&&(da=e)):el()}function el(){Z(bt,bt.current),Z(Wt,Wt.current)}function Kt(e){L(Wt),da===e&&(da=null),L(bt)}var bt=d(0);function Ls(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||wc(l)||Sc(l)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Da=0,_e=null,nt=null,wt=null,Bs=!1,en=!1,kl=!1,Is=0,_n=0,tn=null,sf=0;function ht(){throw Error(f(321))}function vi(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!Pt(e[l],t[l]))return!1;return!0}function bi(e,t,l,n,s,r){return Da=r,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,o.H=e===null||e.memoizedState===null?Uu:Li,kl=!1,r=l(n,s),kl=!1,en&&(r=nu(t,l,n,s)),lu(e),r}function lu(e){o.H=Gn;var t=nt!==null&&nt.next!==null;if(Da=0,wt=nt=_e=null,Bs=!1,_n=0,tn=null,t)throw Error(f(300));e===null||St||(e=e.dependencies,e!==null&&Ms(e)&&(St=!0))}function nu(e,t,l,n){_e=e;var s=0;do{if(en&&(tn=null),_n=0,en=!1,25<=s)throw Error(f(301));if(s+=1,wt=nt=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}o.H=Hu,r=t(l,n)}while(en);return r}function rf(){var e=o.H,t=e.useState()[0];return t=typeof t.then=="function"?Un(t):t,e=e.useState()[0],(nt!==null?nt.memoizedState:null)!==e&&(_e.flags|=1024),t}function yi(){var e=Is!==0;return Is=0,e}function ji(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function Ni(e){if(Bs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Bs=!1}Da=0,wt=nt=_e=null,en=!1,_n=Is=0,tn=null}function Ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?_e.memoizedState=wt=e:wt=wt.next=e,wt}function yt(){if(nt===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=wt===null?_e.memoizedState:wt.next;if(t!==null)wt=t,nt=e;else{if(e===null)throw _e.alternate===null?Error(f(467)):Error(f(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},wt===null?_e.memoizedState=wt=e:wt=wt.next=e}return wt}function Os(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Un(e){var t=_n;return _n+=1,tn===null&&(tn=[]),e=Fo(tn,e,t),t=_e,(wt===null?t.memoizedState:wt.next)===null&&(t=t.alternate,o.H=t===null||t.memoizedState===null?Uu:Li),e}function _s(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Un(e);if(e.$$typeof===Me)return Tt(e)}throw Error(f(438,String(e)))}function wi(e){var t=null,l=_e.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var n=_e.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=Os(),_e.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),n=0;n<e;n++)l[n]=pe;return t.index++,l}function Ta(e,t){return typeof t=="function"?t(e):t}function Us(e){var t=yt();return Si(t,nt,e)}function Si(e,t,l){var n=e.queue;if(n===null)throw Error(f(311));n.lastRenderedReducer=l;var s=e.baseQueue,r=n.pending;if(r!==null){if(s!==null){var i=s.next;s.next=r.next,r.next=i}t.baseQueue=s=r,n.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var c=i=null,x=null,R=t,Y=!1;do{var X=R.lane&-536870913;if(X!==R.lane?(Je&X)===X:(Da&X)===X){var B=R.revertLane;if(B===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),X===Xl&&(Y=!0);else if((Da&B)===B){R=R.next,B===Xl&&(Y=!0);continue}else X={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},x===null?(c=x=X,i=r):x=x.next=X,_e.lanes|=B,ll|=B;X=R.action,kl&&l(r,X),r=R.hasEagerState?R.eagerState:l(r,X)}else B={lane:X,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},x===null?(c=x=B,i=r):x=x.next=B,_e.lanes|=X,ll|=X;R=R.next}while(R!==null&&R!==t);if(x===null?i=r:x.next=c,!Pt(r,e.memoizedState)&&(St=!0,Y&&(l=Pl,l!==null)))throw l;e.memoizedState=r,e.baseState=i,e.baseQueue=x,n.lastRenderedState=r}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Ci(e){var t=yt(),l=t.queue;if(l===null)throw Error(f(311));l.lastRenderedReducer=e;var n=l.dispatch,s=l.pending,r=t.memoizedState;if(s!==null){l.pending=null;var i=s=s.next;do r=e(r,i.action),i=i.next;while(i!==s);Pt(r,t.memoizedState)||(St=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),l.lastRenderedState=r}return[r,n]}function su(e,t,l){var n=_e,s=yt(),r=Ye;if(r){if(l===void 0)throw Error(f(407));l=l()}else l=t();var i=!Pt((nt||s).memoizedState,l);if(i&&(s.memoizedState=l,St=!0),s=s.queue,Ai(cu.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,an(9,{destroy:void 0},iu.bind(null,n,s,l,t),null),it===null)throw Error(f(349));r||(Da&127)!==0||ru(n,t,l)}return l}function ru(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=_e.updateQueue,t===null?(t=Os(),_e.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function iu(e,t,l,n){t.value=l,t.getSnapshot=n,ou(t)&&uu(e)}function cu(e,t,l){return l(function(){ou(t)&&uu(e)})}function ou(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!Pt(e,l)}catch{return!0}}function uu(e){var t=vl(e,2);t!==null&&Ft(t,e,2)}function Mi(e){var t=Ut();if(typeof e=="function"){var l=e;if(e=l(),kl){Ze(!0);try{l()}finally{Ze(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:e},t}function du(e,t,l,n){return e.baseState=l,Si(e,nt,typeof n=="function"?n:Ta)}function cf(e,t,l,n,s){if(Js(e))throw Error(f(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){r.listeners.push(i)}};o.T!==null?l(!0):r.isTransition=!1,n(r),l=t.pending,l===null?(r.next=t.pending=r,mu(t,r)):(r.next=l.next,t.pending=l.next=r)}}function mu(e,t){var l=t.action,n=t.payload,s=e.state;if(t.isTransition){var r=o.T,i={};o.T=i;try{var c=l(s,n),x=o.S;x!==null&&x(i,c),fu(e,t,c)}catch(R){ki(e,t,R)}finally{r!==null&&i.types!==null&&(r.types=i.types),o.T=r}}else try{r=l(s,n),fu(e,t,r)}catch(R){ki(e,t,R)}}function fu(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(n){gu(e,t,n)},function(n){return ki(e,t,n)}):gu(e,t,l)}function gu(e,t,l){t.status="fulfilled",t.value=l,hu(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,mu(e,l)))}function ki(e,t,l){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=l,hu(t),t=t.next;while(t!==n)}e.action=null}function hu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function xu(e,t){return t}function pu(e,t){if(Ye){var l=it.formState;if(l!==null){e:{var n=_e;if(Ye){if(ut){t:{for(var s=ut,r=ua;s.nodeType!==8;){if(!r){s=null;break t}if(s=ma(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){ut=ma(s.nextSibling),n=s.data==="F!";break e}}Fa(n)}n=!1}n&&(t=l[0])}}return l=Ut(),l.memoizedState=l.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:t},l.queue=n,l=Iu.bind(null,_e,n),n.dispatch=l,n=Mi(!1),r=Ri.bind(null,_e,!1,n.queue),n=Ut(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,l=cf.bind(null,_e,s,r,l),s.dispatch=l,n.memoizedState=e,[t,l,!1]}function vu(e){var t=yt();return bu(t,nt,e)}function bu(e,t,l){if(t=Si(e,t,xu)[0],e=Us(Ta)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Un(t)}catch(i){throw i===$l?Es:i}else n=t;t=yt();var s=t.queue,r=s.dispatch;return l!==t.memoizedState&&(_e.flags|=2048,an(9,{destroy:void 0},of.bind(null,s,l),null)),[n,r,e]}function of(e,t){e.action=t}function yu(e){var t=yt(),l=nt;if(l!==null)return bu(t,l,e);yt(),t=t.memoizedState,l=yt();var n=l.queue.dispatch;return l.memoizedState=e,[t,n,!1]}function an(e,t,l,n){return e={tag:e,create:l,deps:n,inst:t,next:null},t=_e.updateQueue,t===null&&(t=Os(),_e.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(n=l.next,l.next=e,e.next=n,t.lastEffect=e),e}function ju(){return yt().memoizedState}function Hs(e,t,l,n){var s=Ut();_e.flags|=e,s.memoizedState=an(1|t,{destroy:void 0},l,n===void 0?null:n)}function Gs(e,t,l,n){var s=yt();n=n===void 0?null:n;var r=s.memoizedState.inst;nt!==null&&n!==null&&vi(n,nt.memoizedState.deps)?s.memoizedState=an(t,r,l,n):(_e.flags|=e,s.memoizedState=an(1|t,r,l,n))}function Nu(e,t){Hs(8390656,8,e,t)}function Ai(e,t){Gs(2048,8,e,t)}function uf(e){_e.flags|=4;var t=_e.updateQueue;if(t===null)t=Os(),_e.updateQueue=t,t.events=[e];else{var l=t.events;l===null?t.events=[e]:l.push(e)}}function wu(e){var t=yt().memoizedState;return uf({ref:t,nextImpl:e}),function(){if((et&2)!==0)throw Error(f(440));return t.impl.apply(void 0,arguments)}}function Su(e,t){return Gs(4,2,e,t)}function Cu(e,t){return Gs(4,4,e,t)}function Mu(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ku(e,t,l){l=l!=null?l.concat([e]):null,Gs(4,4,Mu.bind(null,t,e),l)}function Ei(){}function Au(e,t){var l=yt();t=t===void 0?null:t;var n=l.memoizedState;return t!==null&&vi(t,n[1])?n[0]:(l.memoizedState=[e,t],e)}function Eu(e,t){var l=yt();t=t===void 0?null:t;var n=l.memoizedState;if(t!==null&&vi(t,n[1]))return n[0];if(n=e(),kl){Ze(!0);try{e()}finally{Ze(!1)}}return l.memoizedState=[n,t],n}function zi(e,t,l){return l===void 0||(Da&1073741824)!==0&&(Je&261930)===0?e.memoizedState=t:(e.memoizedState=l,e=zd(),_e.lanes|=e,ll|=e,l)}function zu(e,t,l,n){return Pt(l,t)?l:Kl.current!==null?(e=zi(e,l,n),Pt(e,t)||(St=!0),e):(Da&42)===0||(Da&1073741824)!==0&&(Je&261930)===0?(St=!0,e.memoizedState=l):(e=zd(),_e.lanes|=e,ll|=e,t)}function Du(e,t,l,n,s){var r=k.p;k.p=r!==0&&8>r?r:8;var i=o.T,c={};o.T=c,Ri(e,!1,t,l);try{var x=s(),R=o.S;if(R!==null&&R(c,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var Y=nf(x,n);Hn(e,t,Y,aa(e))}else Hn(e,t,n,aa(e))}catch(X){Hn(e,t,{then:function(){},status:"rejected",reason:X},aa())}finally{k.p=r,i!==null&&c.types!==null&&(i.types=c.types),o.T=i}}function df(){}function Di(e,t,l,n){if(e.tag!==5)throw Error(f(476));var s=Tu(e).queue;Du(e,s,t,p,l===null?df:function(){return Ru(e),l(n)})}function Tu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:p},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ru(e){var t=Tu(e);t.next===null&&(t=e.alternate.memoizedState),Hn(e,t.next.queue,{},aa())}function Ti(){return Tt(ls)}function Lu(){return yt().memoizedState}function Bu(){return yt().memoizedState}function mf(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=aa();e=$a(l);var n=Wa(t,e,l);n!==null&&(Ft(n,t,l),Bn(n,t,l)),t={cache:ii()},e.payload=t;return}t=t.return}}function ff(e,t,l){var n=aa();l={lane:n,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Js(e)?Ou(t,l):(l=Pr(e,t,l,n),l!==null&&(Ft(l,e,n),_u(l,t,n)))}function Iu(e,t,l){var n=aa();Hn(e,t,l,n)}function Hn(e,t,l,n){var s={lane:n,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Js(e))Ou(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var i=t.lastRenderedState,c=r(i,l);if(s.hasEagerState=!0,s.eagerState=c,Pt(c,i))return Ns(e,t,s,0),it===null&&js(),!1}catch{}finally{}if(l=Pr(e,t,s,n),l!==null)return Ft(l,e,n),_u(l,t,n),!0}return!1}function Ri(e,t,l,n){if(n={lane:2,revertLane:dc(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Js(e)){if(t)throw Error(f(479))}else t=Pr(e,l,n,2),t!==null&&Ft(t,e,2)}function Js(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function Ou(e,t){en=Bs=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function _u(e,t,l){if((l&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,l|=n,t.lanes=l,Gt(e,l)}}var Gn={readContext:Tt,use:_s,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};Gn.useEffectEvent=ht;var Uu={readContext:Tt,use:_s,useCallback:function(e,t){return Ut().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:Nu,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,Hs(4194308,4,Mu.bind(null,t,e),l)},useLayoutEffect:function(e,t){return Hs(4194308,4,e,t)},useInsertionEffect:function(e,t){Hs(4,2,e,t)},useMemo:function(e,t){var l=Ut();t=t===void 0?null:t;var n=e();if(kl){Ze(!0);try{e()}finally{Ze(!1)}}return l.memoizedState=[n,t],n},useReducer:function(e,t,l){var n=Ut();if(l!==void 0){var s=l(t);if(kl){Ze(!0);try{l(t)}finally{Ze(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=ff.bind(null,_e,e),[n.memoizedState,e]},useRef:function(e){var t=Ut();return e={current:e},t.memoizedState=e},useState:function(e){e=Mi(e);var t=e.queue,l=Iu.bind(null,_e,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:Ei,useDeferredValue:function(e,t){var l=Ut();return zi(l,e,t)},useTransition:function(){var e=Mi(!1);return e=Du.bind(null,_e,e.queue,!0,!1),Ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var n=_e,s=Ut();if(Ye){if(l===void 0)throw Error(f(407));l=l()}else{if(l=t(),it===null)throw Error(f(349));(Je&127)!==0||ru(n,t,l)}s.memoizedState=l;var r={value:l,getSnapshot:t};return s.queue=r,Nu(cu.bind(null,n,r,e),[e]),n.flags|=2048,an(9,{destroy:void 0},iu.bind(null,n,r,l,t),null),l},useId:function(){var e=Ut(),t=it.identifierPrefix;if(Ye){var l=ya,n=ba;l=(n&~(1<<32-b(n)-1)).toString(32)+l,t="_"+t+"R_"+l,l=Is++,0<l&&(t+="H"+l.toString(32)),t+="_"}else l=sf++,t="_"+t+"r_"+l.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ti,useFormState:pu,useActionState:pu,useOptimistic:function(e){var t=Ut();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=Ri.bind(null,_e,!0,l),l.dispatch=t,[e,t]},useMemoCache:wi,useCacheRefresh:function(){return Ut().memoizedState=mf.bind(null,_e)},useEffectEvent:function(e){var t=Ut(),l={impl:e};return t.memoizedState=l,function(){if((et&2)!==0)throw Error(f(440));return l.impl.apply(void 0,arguments)}}},Li={readContext:Tt,use:_s,useCallback:Au,useContext:Tt,useEffect:Ai,useImperativeHandle:ku,useInsertionEffect:Su,useLayoutEffect:Cu,useMemo:Eu,useReducer:Us,useRef:ju,useState:function(){return Us(Ta)},useDebugValue:Ei,useDeferredValue:function(e,t){var l=yt();return zu(l,nt.memoizedState,e,t)},useTransition:function(){var e=Us(Ta)[0],t=yt().memoizedState;return[typeof e=="boolean"?e:Un(e),t]},useSyncExternalStore:su,useId:Lu,useHostTransitionStatus:Ti,useFormState:vu,useActionState:vu,useOptimistic:function(e,t){var l=yt();return du(l,nt,e,t)},useMemoCache:wi,useCacheRefresh:Bu};Li.useEffectEvent=wu;var Hu={readContext:Tt,use:_s,useCallback:Au,useContext:Tt,useEffect:Ai,useImperativeHandle:ku,useInsertionEffect:Su,useLayoutEffect:Cu,useMemo:Eu,useReducer:Ci,useRef:ju,useState:function(){return Ci(Ta)},useDebugValue:Ei,useDeferredValue:function(e,t){var l=yt();return nt===null?zi(l,e,t):zu(l,nt.memoizedState,e,t)},useTransition:function(){var e=Ci(Ta)[0],t=yt().memoizedState;return[typeof e=="boolean"?e:Un(e),t]},useSyncExternalStore:su,useId:Lu,useHostTransitionStatus:Ti,useFormState:yu,useActionState:yu,useOptimistic:function(e,t){var l=yt();return nt!==null?du(l,nt,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:wi,useCacheRefresh:Bu};Hu.useEffectEvent=wu;function Bi(e,t,l,n){t=e.memoizedState,l=l(n,t),l=l==null?t:J({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Ii={enqueueSetState:function(e,t,l){e=e._reactInternals;var n=aa(),s=$a(n);s.payload=t,l!=null&&(s.callback=l),t=Wa(e,s,n),t!==null&&(Ft(t,e,n),Bn(t,e,n))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var n=aa(),s=$a(n);s.tag=1,s.payload=t,l!=null&&(s.callback=l),t=Wa(e,s,n),t!==null&&(Ft(t,e,n),Bn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=aa(),n=$a(l);n.tag=2,t!=null&&(n.callback=t),t=Wa(e,n,l),t!==null&&(Ft(t,e,l),Bn(t,e,l))}};function Gu(e,t,l,n,s,r,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,r,i):t.prototype&&t.prototype.isPureReactComponent?!kn(l,n)||!kn(s,r):!0}function Ju(e,t,l,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,n),t.state!==e&&Ii.enqueueReplaceState(t,t.state,null)}function Al(e,t){var l=t;if("ref"in t){l={};for(var n in t)n!=="ref"&&(l[n]=t[n])}if(e=e.defaultProps){l===t&&(l=J({},l));for(var s in e)l[s]===void 0&&(l[s]=e[s])}return l}function qu(e){ys(e)}function Qu(e){console.error(e)}function Yu(e){ys(e)}function qs(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Vu(e,t,l){try{var n=e.onCaughtError;n(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Oi(e,t,l){return l=$a(l),l.tag=3,l.payload={element:null},l.callback=function(){qs(e,t)},l}function Zu(e){return e=$a(e),e.tag=3,e}function Fu(e,t,l,n){var s=l.type.getDerivedStateFromError;if(typeof s=="function"){var r=n.value;e.payload=function(){return s(r)},e.callback=function(){Vu(t,l,n)}}var i=l.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){Vu(t,l,n),typeof s!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var c=n.stack;this.componentDidCatch(n.value,{componentStack:c!==null?c:""})})}function gf(e,t,l,n,s){if(l.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=l.alternate,t!==null&&Fl(t,l,s,!0),l=Wt.current,l!==null){switch(l.tag){case 31:case 13:return da===null?tr():l.alternate===null&&xt===0&&(xt=3),l.flags&=-257,l.flags|=65536,l.lanes=s,n===zs?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([n]):t.add(n),cc(e,n,s)),!1;case 22:return l.flags|=65536,n===zs?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([n]):l.add(n)),cc(e,n,s)),!1}throw Error(f(435,l.tag))}return cc(e,n,s),tr(),!1}if(Ye)return t=Wt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==ai&&(e=Error(f(422),{cause:n}),zn(ia(e,l)))):(n!==ai&&(t=Error(f(423),{cause:n}),zn(ia(t,l))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=ia(n,l),s=Oi(e.stateNode,n,s),fi(e,s),xt!==4&&(xt=2)),!1;var r=Error(f(520),{cause:n});if(r=ia(r,l),Xn===null?Xn=[r]:Xn.push(r),xt!==4&&(xt=2),t===null)return!0;n=ia(n,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=s&-s,l.lanes|=e,e=Oi(l.stateNode,n,e),fi(l,e),!1;case 1:if(t=l.type,r=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(nl===null||!nl.has(r))))return l.flags|=65536,s&=-s,l.lanes|=s,s=Zu(s),Fu(s,e,l,n),fi(l,s),!1}l=l.return}while(l!==null);return!1}var _i=Error(f(461)),St=!1;function Rt(e,t,l,n){t.child=e===null?Wo(t,null,l,n):Ml(t,e.child,l,n)}function Xu(e,t,l,n,s){l=l.render;var r=t.ref;if("ref"in n){var i={};for(var c in n)c!=="ref"&&(i[c]=n[c])}else i=n;return Nl(t),n=bi(e,t,l,i,r,s),c=yi(),e!==null&&!St?(ji(e,t,s),Ra(e,t,s)):(Ye&&c&&ei(t),t.flags|=1,Rt(e,t,n,s),t.child)}function Pu(e,t,l,n,s){if(e===null){var r=l.type;return typeof r=="function"&&!$r(r)&&r.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=r,$u(e,t,r,n,s)):(e=Ss(l.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Vi(e,s)){var i=r.memoizedProps;if(l=l.compare,l=l!==null?l:kn,l(i,n)&&e.ref===t.ref)return Ra(e,t,s)}return t.flags|=1,e=ka(r,n),e.ref=t.ref,e.return=t,t.child=e}function $u(e,t,l,n,s){if(e!==null){var r=e.memoizedProps;if(kn(r,n)&&e.ref===t.ref)if(St=!1,t.pendingProps=n=r,Vi(e,s))(e.flags&131072)!==0&&(St=!0);else return t.lanes=e.lanes,Ra(e,t,s)}return Ui(e,t,l,n,s)}function Wu(e,t,l,n){var s=n.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|l:l,e!==null){for(n=t.child=e.child,s=0;n!==null;)s=s|n.lanes|n.childLanes,n=n.sibling;n=s&~r}else n=0,t.child=null;return Ku(e,t,r,l,n)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&As(t,r!==null?r.cachePool:null),r!==null?tu(t,r):hi(),au(t);else return n=t.lanes=536870912,Ku(e,t,r!==null?r.baseLanes|l:l,l,n)}else r!==null?(As(t,r.cachePool),tu(t,r),el(),t.memoizedState=null):(e!==null&&As(t,null),hi(),el());return Rt(e,t,s,l),t.child}function Jn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ku(e,t,l,n,s){var r=oi();return r=r===null?null:{parent:Nt._currentValue,pool:r},t.memoizedState={baseLanes:l,cachePool:r},e!==null&&As(t,null),hi(),au(t),e!==null&&Fl(e,t,n,!0),t.childLanes=s,null}function Qs(e,t){return t=Vs({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ed(e,t,l){return Ml(t,e.child,null,l),e=Qs(t,t.pendingProps),e.flags|=2,Kt(t),t.memoizedState=null,e}function hf(e,t,l){var n=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ye){if(n.mode==="hidden")return e=Qs(t,n),t.lanes=536870912,Jn(null,e);if(pi(t),(e=ut)?(e=m0(e,ua),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Va!==null?{id:ba,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},l=Oo(e),l.return=t,t.child=l,Dt=t,ut=null)):e=null,e===null)throw Fa(t);return t.lanes=536870912,null}return Qs(t,n)}var r=e.memoizedState;if(r!==null){var i=r.dehydrated;if(pi(t),s)if(t.flags&256)t.flags&=-257,t=ed(e,t,l);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(f(558));else if(St||Fl(e,t,l,!1),s=(l&e.childLanes)!==0,St||s){if(n=it,n!==null&&(i=va(n,l),i!==0&&i!==r.retryLane))throw r.retryLane=i,vl(e,i),Ft(n,e,i),_i;tr(),t=ed(e,t,l)}else e=r.treeContext,ut=ma(i.nextSibling),Dt=t,Ye=!0,Za=null,ua=!1,e!==null&&Ho(t,e),t=Qs(t,n),t.flags|=4096;return t}return e=ka(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ys(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(f(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function Ui(e,t,l,n,s){return Nl(t),l=bi(e,t,l,n,void 0,s),n=yi(),e!==null&&!St?(ji(e,t,s),Ra(e,t,s)):(Ye&&n&&ei(t),t.flags|=1,Rt(e,t,l,s),t.child)}function td(e,t,l,n,s,r){return Nl(t),t.updateQueue=null,l=nu(t,n,l,s),lu(e),n=yi(),e!==null&&!St?(ji(e,t,r),Ra(e,t,r)):(Ye&&n&&ei(t),t.flags|=1,Rt(e,t,l,r),t.child)}function ad(e,t,l,n,s){if(Nl(t),t.stateNode===null){var r=Ql,i=l.contextType;typeof i=="object"&&i!==null&&(r=Tt(i)),r=new l(n,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ii,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=n,r.state=t.memoizedState,r.refs={},di(t),i=l.contextType,r.context=typeof i=="object"&&i!==null?Tt(i):Ql,r.state=t.memoizedState,i=l.getDerivedStateFromProps,typeof i=="function"&&(Bi(t,l,i,n),r.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(i=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),i!==r.state&&Ii.enqueueReplaceState(r,r.state,null),On(t,n,r,s),In(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){r=t.stateNode;var c=t.memoizedProps,x=Al(l,c);r.props=x;var R=r.context,Y=l.contextType;i=Ql,typeof Y=="object"&&Y!==null&&(i=Tt(Y));var X=l.getDerivedStateFromProps;Y=typeof X=="function"||typeof r.getSnapshotBeforeUpdate=="function",c=t.pendingProps!==c,Y||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(c||R!==i)&&Ju(t,r,n,i),Pa=!1;var B=t.memoizedState;r.state=B,On(t,n,r,s),In(),R=t.memoizedState,c||B!==R||Pa?(typeof X=="function"&&(Bi(t,l,X,n),R=t.memoizedState),(x=Pa||Gu(t,l,x,n,B,R,i))?(Y||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=R),r.props=n,r.state=R,r.context=i,n=x):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,mi(e,t),i=t.memoizedProps,Y=Al(l,i),r.props=Y,X=t.pendingProps,B=r.context,R=l.contextType,x=Ql,typeof R=="object"&&R!==null&&(x=Tt(R)),c=l.getDerivedStateFromProps,(R=typeof c=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(i!==X||B!==x)&&Ju(t,r,n,x),Pa=!1,B=t.memoizedState,r.state=B,On(t,n,r,s),In();var U=t.memoizedState;i!==X||B!==U||Pa||e!==null&&e.dependencies!==null&&Ms(e.dependencies)?(typeof c=="function"&&(Bi(t,l,c,n),U=t.memoizedState),(Y=Pa||Gu(t,l,Y,n,B,U,x)||e!==null&&e.dependencies!==null&&Ms(e.dependencies))?(R||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(n,U,x),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(n,U,x)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||i===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=U),r.props=n,r.state=U,r.context=x,n=Y):(typeof r.componentDidUpdate!="function"||i===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),n=!1)}return r=n,Ys(e,t),n=(t.flags&128)!==0,r||n?(r=t.stateNode,l=n&&typeof l.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&n?(t.child=Ml(t,e.child,null,s),t.child=Ml(t,null,l,s)):Rt(e,t,l,s),t.memoizedState=r.state,e=t.child):e=Ra(e,t,s),e}function ld(e,t,l,n){return yl(),t.flags|=256,Rt(e,t,l,n),t.child}var Hi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gi(e){return{baseLanes:e,cachePool:Vo()}}function Ji(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=ta),e}function nd(e,t,l){var n=t.pendingProps,s=!1,r=(t.flags&128)!==0,i;if((i=r)||(i=e!==null&&e.memoizedState===null?!1:(bt.current&2)!==0),i&&(s=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ye){if(s?Ka(t):el(),(e=ut)?(e=m0(e,ua),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Va!==null?{id:ba,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},l=Oo(e),l.return=t,t.child=l,Dt=t,ut=null)):e=null,e===null)throw Fa(t);return Sc(e)?t.lanes=32:t.lanes=536870912,null}var c=n.children;return n=n.fallback,s?(el(),s=t.mode,c=Vs({mode:"hidden",children:c},s),n=bl(n,s,l,null),c.return=t,n.return=t,c.sibling=n,t.child=c,n=t.child,n.memoizedState=Gi(l),n.childLanes=Ji(e,i,l),t.memoizedState=Hi,Jn(null,n)):(Ka(t),qi(t,c))}var x=e.memoizedState;if(x!==null&&(c=x.dehydrated,c!==null)){if(r)t.flags&256?(Ka(t),t.flags&=-257,t=Qi(e,t,l)):t.memoizedState!==null?(el(),t.child=e.child,t.flags|=128,t=null):(el(),c=n.fallback,s=t.mode,n=Vs({mode:"visible",children:n.children},s),c=bl(c,s,l,null),c.flags|=2,n.return=t,c.return=t,n.sibling=c,t.child=n,Ml(t,e.child,null,l),n=t.child,n.memoizedState=Gi(l),n.childLanes=Ji(e,i,l),t.memoizedState=Hi,t=Jn(null,n));else if(Ka(t),Sc(c)){if(i=c.nextSibling&&c.nextSibling.dataset,i)var R=i.dgst;i=R,n=Error(f(419)),n.stack="",n.digest=i,zn({value:n,source:null,stack:null}),t=Qi(e,t,l)}else if(St||Fl(e,t,l,!1),i=(l&e.childLanes)!==0,St||i){if(i=it,i!==null&&(n=va(i,l),n!==0&&n!==x.retryLane))throw x.retryLane=n,vl(e,n),Ft(i,e,n),_i;wc(c)||tr(),t=Qi(e,t,l)}else wc(c)?(t.flags|=192,t.child=e.child,t=null):(e=x.treeContext,ut=ma(c.nextSibling),Dt=t,Ye=!0,Za=null,ua=!1,e!==null&&Ho(t,e),t=qi(t,n.children),t.flags|=4096);return t}return s?(el(),c=n.fallback,s=t.mode,x=e.child,R=x.sibling,n=ka(x,{mode:"hidden",children:n.children}),n.subtreeFlags=x.subtreeFlags&65011712,R!==null?c=ka(R,c):(c=bl(c,s,l,null),c.flags|=2),c.return=t,n.return=t,n.sibling=c,t.child=n,Jn(null,n),n=t.child,c=e.child.memoizedState,c===null?c=Gi(l):(s=c.cachePool,s!==null?(x=Nt._currentValue,s=s.parent!==x?{parent:x,pool:x}:s):s=Vo(),c={baseLanes:c.baseLanes|l,cachePool:s}),n.memoizedState=c,n.childLanes=Ji(e,i,l),t.memoizedState=Hi,Jn(e.child,n)):(Ka(t),l=e.child,e=l.sibling,l=ka(l,{mode:"visible",children:n.children}),l.return=t,l.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=l,t.memoizedState=null,l)}function qi(e,t){return t=Vs({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Vs(e,t){return e=$t(22,e,null,t),e.lanes=0,e}function Qi(e,t,l){return Ml(t,e.child,null,l),e=qi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sd(e,t,l){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),si(e.return,t,l)}function Yi(e,t,l,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:l,tailMode:s,treeForkCount:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=l,i.tailMode=s,i.treeForkCount=r)}function rd(e,t,l){var n=t.pendingProps,s=n.revealOrder,r=n.tail;n=n.children;var i=bt.current,c=(i&2)!==0;if(c?(i=i&1|2,t.flags|=128):i&=1,Z(bt,i),Rt(e,t,n,l),n=Ye?En:0,!c&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sd(e,l,t);else if(e.tag===19)sd(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(l=t.child,s=null;l!==null;)e=l.alternate,e!==null&&Ls(e)===null&&(s=l),l=l.sibling;l=s,l===null?(s=t.child,t.child=null):(s=l.sibling,l.sibling=null),Yi(t,!1,s,l,r,n);break;case"backwards":case"unstable_legacy-backwards":for(l=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ls(e)===null){t.child=s;break}e=s.sibling,s.sibling=l,l=s,s=e}Yi(t,!0,l,null,r,n);break;case"together":Yi(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function Ra(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),ll|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(Fl(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(f(153));if(t.child!==null){for(e=t.child,l=ka(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=ka(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function Vi(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ms(e)))}function xf(e,t,l){switch(t.tag){case 3:fe(t,t.stateNode.containerInfo),Xa(t,Nt,e.memoizedState.cache),yl();break;case 27:case 5:lt(t);break;case 4:fe(t,t.stateNode.containerInfo);break;case 10:Xa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,pi(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ka(t),t.flags|=128,null):(l&t.child.childLanes)!==0?nd(e,t,l):(Ka(t),e=Ra(e,t,l),e!==null?e.sibling:null);Ka(t);break;case 19:var s=(e.flags&128)!==0;if(n=(l&t.childLanes)!==0,n||(Fl(e,t,l,!1),n=(l&t.childLanes)!==0),s){if(n)return rd(e,t,l);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Z(bt,bt.current),n)break;return null;case 22:return t.lanes=0,Wu(e,t,l,t.pendingProps);case 24:Xa(t,Nt,e.memoizedState.cache)}return Ra(e,t,l)}function id(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)St=!0;else{if(!Vi(e,l)&&(t.flags&128)===0)return St=!1,xf(e,t,l);St=(e.flags&131072)!==0}else St=!1,Ye&&(t.flags&1048576)!==0&&Uo(t,En,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=Sl(t.elementType),t.type=e,typeof e=="function")$r(e)?(n=Al(e,n),t.tag=1,t=ad(null,t,e,n,l)):(t.tag=0,t=Ui(null,t,e,n,l));else{if(e!=null){var s=e.$$typeof;if(s===ye){t.tag=11,t=Xu(null,t,e,n,l);break e}else if(s===le){t.tag=14,t=Pu(null,t,e,n,l);break e}}throw t=ve(e)||e,Error(f(306,t,""))}}return t;case 0:return Ui(e,t,t.type,t.pendingProps,l);case 1:return n=t.type,s=Al(n,t.pendingProps),ad(e,t,n,s,l);case 3:e:{if(fe(t,t.stateNode.containerInfo),e===null)throw Error(f(387));n=t.pendingProps;var r=t.memoizedState;s=r.element,mi(e,t),On(t,n,null,l);var i=t.memoizedState;if(n=i.cache,Xa(t,Nt,n),n!==r.cache&&ri(t,[Nt],l,!0),In(),n=i.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=ld(e,t,n,l);break e}else if(n!==s){s=ia(Error(f(424)),t),zn(s),t=ld(e,t,n,l);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ut=ma(e.firstChild),Dt=t,Ye=!0,Za=null,ua=!0,l=Wo(t,null,n,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(yl(),n===s){t=Ra(e,t,l);break e}Rt(e,t,n,l)}t=t.child}return t;case 26:return Ys(e,t),e===null?(l=v0(t.type,null,t.pendingProps,null))?t.memoizedState=l:Ye||(l=t.type,e=t.pendingProps,n=cr(w.current).createElement(l),n[zt]=t,n[Jt]=e,Lt(n,l,e),At(n),t.stateNode=n):t.memoizedState=v0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return lt(t),e===null&&Ye&&(n=t.stateNode=h0(t.type,t.pendingProps,w.current),Dt=t,ua=!0,s=ut,cl(t.type)?(Cc=s,ut=ma(n.firstChild)):ut=s),Rt(e,t,t.pendingProps.children,l),Ys(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ye&&((s=n=ut)&&(n=Vf(n,t.type,t.pendingProps,ua),n!==null?(t.stateNode=n,Dt=t,ut=ma(n.firstChild),ua=!1,s=!0):s=!1),s||Fa(t)),lt(t),s=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,n=r.children,yc(s,r)?n=null:i!==null&&yc(s,i)&&(t.flags|=32),t.memoizedState!==null&&(s=bi(e,t,rf,null,null,l),ls._currentValue=s),Ys(e,t),Rt(e,t,n,l),t.child;case 6:return e===null&&Ye&&((e=l=ut)&&(l=Zf(l,t.pendingProps,ua),l!==null?(t.stateNode=l,Dt=t,ut=null,e=!0):e=!1),e||Fa(t)),null;case 13:return nd(e,t,l);case 4:return fe(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ml(t,null,n,l):Rt(e,t,n,l),t.child;case 11:return Xu(e,t,t.type,t.pendingProps,l);case 7:return Rt(e,t,t.pendingProps,l),t.child;case 8:return Rt(e,t,t.pendingProps.children,l),t.child;case 12:return Rt(e,t,t.pendingProps.children,l),t.child;case 10:return n=t.pendingProps,Xa(t,t.type,n.value),Rt(e,t,n.children,l),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,Nl(t),s=Tt(s),n=n(s),t.flags|=1,Rt(e,t,n,l),t.child;case 14:return Pu(e,t,t.type,t.pendingProps,l);case 15:return $u(e,t,t.type,t.pendingProps,l);case 19:return rd(e,t,l);case 31:return hf(e,t,l);case 22:return Wu(e,t,l,t.pendingProps);case 24:return Nl(t),n=Tt(Nt),e===null?(s=oi(),s===null&&(s=it,r=ii(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=l),s=r),t.memoizedState={parent:n,cache:s},di(t),Xa(t,Nt,s)):((e.lanes&l)!==0&&(mi(e,t),On(t,null,null,l),In()),s=e.memoizedState,r=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Xa(t,Nt,n)):(n=r.cache,Xa(t,Nt,n),n!==s.cache&&ri(t,[Nt],l,!0))),Rt(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(f(156,t.tag))}function La(e){e.flags|=4}function Zi(e,t,l,n,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(Ld())e.flags|=8192;else throw Cl=zs,ui}else e.flags&=-16777217}function cd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!w0(t))if(Ld())e.flags|=8192;else throw Cl=zs,ui}function Zs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?jt():536870912,e.lanes|=t,rn|=t)}function qn(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var n=null;l!==null;)l.alternate!==null&&(n=l),l=l.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,n=0;if(t)for(var s=e.child;s!==null;)l|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)l|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=l,t}function pf(e,t,l){var n=t.pendingProps;switch(ti(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return dt(t),null;case 3:return l=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),za(Nt),Re(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Zl(t)?La(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,li())),dt(t),null;case 26:var s=t.type,r=t.memoizedState;return e===null?(La(t),r!==null?(dt(t),cd(t,r)):(dt(t),Zi(t,s,null,n,l))):r?r!==e.memoizedState?(La(t),dt(t),cd(t,r)):(dt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&La(t),dt(t),Zi(t,s,e,n,l)),null;case 27:if(Ve(t),l=w.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&La(t);else{if(!n){if(t.stateNode===null)throw Error(f(166));return dt(t),null}e=ce.current,Zl(t)?Go(t):(e=h0(s,n,l),t.stateNode=e,La(t))}return dt(t),null;case 5:if(Ve(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&La(t);else{if(!n){if(t.stateNode===null)throw Error(f(166));return dt(t),null}if(r=ce.current,Zl(t))Go(t);else{var i=cr(w.current);switch(r){case 1:r=i.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:r=i.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":r=i.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":r=i.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":r=i.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof n.is=="string"?i.createElement("select",{is:n.is}):i.createElement("select"),n.multiple?r.multiple=!0:n.size&&(r.size=n.size);break;default:r=typeof n.is=="string"?i.createElement(s,{is:n.is}):i.createElement(s)}}r[zt]=t,r[Jt]=n;e:for(i=t.child;i!==null;){if(i.tag===5||i.tag===6)r.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=r;e:switch(Lt(r,s,n),s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&La(t)}}return dt(t),Zi(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,l),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&La(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(f(166));if(e=w.current,Zl(t)){if(e=t.stateNode,l=t.memoizedProps,n=null,s=Dt,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[zt]=t,e=!!(e.nodeValue===l||n!==null&&n.suppressHydrationWarning===!0||n0(e.nodeValue,l)),e||Fa(t,!0)}else e=cr(e).createTextNode(n),e[zt]=t,t.stateNode=e}return dt(t),null;case 31:if(l=t.memoizedState,e===null||e.memoizedState!==null){if(n=Zl(t),l!==null){if(e===null){if(!n)throw Error(f(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(557));e[zt]=t}else yl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;dt(t),e=!1}else l=li(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return t.flags&256?(Kt(t),t):(Kt(t),null);if((t.flags&128)!==0)throw Error(f(558))}return dt(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Zl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(f(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(f(317));s[zt]=t}else yl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;dt(t),s=!1}else s=li(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Kt(t),t):(Kt(t),null)}return Kt(t),(t.flags&128)!==0?(t.lanes=l,t):(l=n!==null,e=e!==null&&e.memoizedState!==null,l&&(n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==s&&(n.flags|=2048)),l!==e&&l&&(t.child.flags|=8192),Zs(t,t.updateQueue),dt(t),null);case 4:return Re(),e===null&&hc(t.stateNode.containerInfo),dt(t),null;case 10:return za(t.type),dt(t),null;case 19:if(L(bt),n=t.memoizedState,n===null)return dt(t),null;if(s=(t.flags&128)!==0,r=n.rendering,r===null)if(s)qn(n,!1);else{if(xt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Ls(e),r!==null){for(t.flags|=128,qn(n,!1),e=r.updateQueue,t.updateQueue=e,Zs(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)Io(l,e),l=l.sibling;return Z(bt,bt.current&1|2),Ye&&Aa(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&K()>Ws&&(t.flags|=128,s=!0,qn(n,!1),t.lanes=4194304)}else{if(!s)if(e=Ls(r),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Zs(t,e),qn(n,!0),n.tail===null&&n.tailMode==="hidden"&&!r.alternate&&!Ye)return dt(t),null}else 2*K()-n.renderingStartTime>Ws&&l!==536870912&&(t.flags|=128,s=!0,qn(n,!1),t.lanes=4194304);n.isBackwards?(r.sibling=t.child,t.child=r):(e=n.last,e!==null?e.sibling=r:t.child=r,n.last=r)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=K(),e.sibling=null,l=bt.current,Z(bt,s?l&1|2:l&1),Ye&&Aa(t,n.treeForkCount),e):(dt(t),null);case 22:case 23:return Kt(t),xi(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(l&536870912)!==0&&(t.flags&128)===0&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),l=t.updateQueue,l!==null&&Zs(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==l&&(t.flags|=2048),e!==null&&L(wl),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),za(Nt),dt(t),null;case 25:return null;case 30:return null}throw Error(f(156,t.tag))}function vf(e,t){switch(ti(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return za(Nt),Re(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ve(t),null;case 31:if(t.memoizedState!==null){if(Kt(t),t.alternate===null)throw Error(f(340));yl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Kt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(f(340));yl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return L(bt),null;case 4:return Re(),null;case 10:return za(t.type),null;case 22:case 23:return Kt(t),xi(),e!==null&&L(wl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return za(Nt),null;case 25:return null;default:return null}}function od(e,t){switch(ti(t),t.tag){case 3:za(Nt),Re();break;case 26:case 27:case 5:Ve(t);break;case 4:Re();break;case 31:t.memoizedState!==null&&Kt(t);break;case 13:Kt(t);break;case 19:L(bt);break;case 10:za(t.type);break;case 22:case 23:Kt(t),xi(),e!==null&&L(wl);break;case 24:za(Nt)}}function Qn(e,t){try{var l=t.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var s=n.next;l=s;do{if((l.tag&e)===e){n=void 0;var r=l.create,i=l.inst;n=r(),i.destroy=n}l=l.next}while(l!==s)}}catch(c){at(t,t.return,c)}}function tl(e,t,l){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&e)===e){var i=n.inst,c=i.destroy;if(c!==void 0){i.destroy=void 0,s=t;var x=l,R=c;try{R()}catch(Y){at(s,x,Y)}}}n=n.next}while(n!==r)}}catch(Y){at(t,t.return,Y)}}function ud(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{eu(t,l)}catch(n){at(e,e.return,n)}}}function dd(e,t,l){l.props=Al(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(n){at(e,t,n)}}function Yn(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof l=="function"?e.refCleanup=l(n):l.current=n}}catch(s){at(e,t,s)}}function ja(e,t){var l=e.ref,n=e.refCleanup;if(l!==null)if(typeof n=="function")try{n()}catch(s){at(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(s){at(e,t,s)}else l.current=null}function md(e){var t=e.type,l=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break e;case"img":l.src?n.src=l.src:l.srcSet&&(n.srcset=l.srcSet)}}catch(s){at(e,e.return,s)}}function Fi(e,t,l){try{var n=e.stateNode;Hf(n,e.type,l,t),n[Jt]=t}catch(s){at(e,e.return,s)}}function fd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&cl(e.type)||e.tag===4}function Xi(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&cl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pi(e,t,l){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=Ca));else if(n!==4&&(n===27&&cl(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(Pi(e,t,l),e=e.sibling;e!==null;)Pi(e,t,l),e=e.sibling}function Fs(e,t,l){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(n!==4&&(n===27&&cl(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Fs(e,t,l),e=e.sibling;e!==null;)Fs(e,t,l),e=e.sibling}function gd(e){var t=e.stateNode,l=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Lt(t,n,l),t[zt]=e,t[Jt]=l}catch(r){at(e,e.return,r)}}var Ba=!1,Ct=!1,$i=!1,hd=typeof WeakSet=="function"?WeakSet:Set,Et=null;function bf(e,t){if(e=e.containerInfo,vc=hr,e=ko(e),Qr(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var n=l.getSelection&&l.getSelection();if(n&&n.rangeCount!==0){l=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{l.nodeType,r.nodeType}catch{l=null;break e}var i=0,c=-1,x=-1,R=0,Y=0,X=e,B=null;t:for(;;){for(var U;X!==l||s!==0&&X.nodeType!==3||(c=i+s),X!==r||n!==0&&X.nodeType!==3||(x=i+n),X.nodeType===3&&(i+=X.nodeValue.length),(U=X.firstChild)!==null;)B=X,X=U;for(;;){if(X===e)break t;if(B===l&&++R===s&&(c=i),B===r&&++Y===n&&(x=i),(U=X.nextSibling)!==null)break;X=B,B=X.parentNode}X=U}l=c===-1||x===-1?null:{start:c,end:x}}else l=null}l=l||{start:0,end:0}}else l=null;for(bc={focusedElem:e,selectionRange:l},hr=!1,Et=t;Et!==null;)if(t=Et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Et=e;else for(;Et!==null;){switch(t=Et,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)s=e[l],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,l=t,s=r.memoizedProps,r=r.memoizedState,n=l.stateNode;try{var we=Al(l.type,s);e=n.getSnapshotBeforeUpdate(we,r),n.__reactInternalSnapshotBeforeUpdate=e}catch(De){at(l,l.return,De)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)Nc(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(f(163))}if(e=t.sibling,e!==null){e.return=t.return,Et=e;break}Et=t.return}}function xd(e,t,l){var n=l.flags;switch(l.tag){case 0:case 11:case 15:Oa(e,l),n&4&&Qn(5,l);break;case 1:if(Oa(e,l),n&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(i){at(l,l.return,i)}else{var s=Al(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){at(l,l.return,i)}}n&64&&ud(l),n&512&&Yn(l,l.return);break;case 3:if(Oa(e,l),n&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{eu(e,t)}catch(i){at(l,l.return,i)}}break;case 27:t===null&&n&4&&gd(l);case 26:case 5:Oa(e,l),t===null&&n&4&&md(l),n&512&&Yn(l,l.return);break;case 12:Oa(e,l);break;case 31:Oa(e,l),n&4&&bd(e,l);break;case 13:Oa(e,l),n&4&&yd(e,l),n&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=Af.bind(null,l),Ff(e,l))));break;case 22:if(n=l.memoizedState!==null||Ba,!n){t=t!==null&&t.memoizedState!==null||Ct,s=Ba;var r=Ct;Ba=n,(Ct=t)&&!r?_a(e,l,(l.subtreeFlags&8772)!==0):Oa(e,l),Ba=s,Ct=r}break;case 30:break;default:Oa(e,l)}}function pd(e){var t=e.alternate;t!==null&&(e.alternate=null,pd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&kr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var mt=null,Qt=!1;function Ia(e,t,l){for(l=l.child;l!==null;)vd(e,t,l),l=l.sibling}function vd(e,t,l){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(de,l)}catch{}switch(l.tag){case 26:Ct||ja(l,t),Ia(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ct||ja(l,t);var n=mt,s=Qt;cl(l.type)&&(mt=l.stateNode,Qt=!1),Ia(e,t,l),es(l.stateNode),mt=n,Qt=s;break;case 5:Ct||ja(l,t);case 6:if(n=mt,s=Qt,mt=null,Ia(e,t,l),mt=n,Qt=s,mt!==null)if(Qt)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(l.stateNode)}catch(r){at(l,t,r)}else try{mt.removeChild(l.stateNode)}catch(r){at(l,t,r)}break;case 18:mt!==null&&(Qt?(e=mt,u0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),hn(e)):u0(mt,l.stateNode));break;case 4:n=mt,s=Qt,mt=l.stateNode.containerInfo,Qt=!0,Ia(e,t,l),mt=n,Qt=s;break;case 0:case 11:case 14:case 15:tl(2,l,t),Ct||tl(4,l,t),Ia(e,t,l);break;case 1:Ct||(ja(l,t),n=l.stateNode,typeof n.componentWillUnmount=="function"&&dd(l,t,n)),Ia(e,t,l);break;case 21:Ia(e,t,l);break;case 22:Ct=(n=Ct)||l.memoizedState!==null,Ia(e,t,l),Ct=n;break;default:Ia(e,t,l)}}function bd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{hn(e)}catch(l){at(t,t.return,l)}}}function yd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hn(e)}catch(l){at(t,t.return,l)}}function yf(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new hd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new hd),t;default:throw Error(f(435,e.tag))}}function Xs(e,t){var l=yf(e);t.forEach(function(n){if(!l.has(n)){l.add(n);var s=Ef.bind(null,e,n);n.then(s,s)}})}function Yt(e,t){var l=t.deletions;if(l!==null)for(var n=0;n<l.length;n++){var s=l[n],r=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 27:if(cl(c.type)){mt=c.stateNode,Qt=!1;break e}break;case 5:mt=c.stateNode,Qt=!1;break e;case 3:case 4:mt=c.stateNode.containerInfo,Qt=!0;break e}c=c.return}if(mt===null)throw Error(f(160));vd(r,i,s),mt=null,Qt=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)jd(t,e),t=t.sibling}var xa=null;function jd(e,t){var l=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Yt(t,e),Vt(e),n&4&&(tl(3,e,e.return),Qn(3,e),tl(5,e,e.return));break;case 1:Yt(t,e),Vt(e),n&512&&(Ct||l===null||ja(l,l.return)),n&64&&Ba&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?n:l.concat(n))));break;case 26:var s=xa;if(Yt(t,e),Vt(e),n&512&&(Ct||l===null||ja(l,l.return)),n&4){var r=l!==null?l.memoizedState:null;if(n=e.memoizedState,l===null)if(n===null)if(e.stateNode===null){e:{n=e.type,l=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":r=s.getElementsByTagName("title")[0],(!r||r[vn]||r[zt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(n),s.head.insertBefore(r,s.querySelector("head > title"))),Lt(r,n,l),r[zt]=e,At(r),n=r;break e;case"link":var i=j0("link","href",s).get(n+(l.href||""));if(i){for(var c=0;c<i.length;c++)if(r=i[c],r.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&r.getAttribute("rel")===(l.rel==null?null:l.rel)&&r.getAttribute("title")===(l.title==null?null:l.title)&&r.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){i.splice(c,1);break t}}r=s.createElement(n),Lt(r,n,l),s.head.appendChild(r);break;case"meta":if(i=j0("meta","content",s).get(n+(l.content||""))){for(c=0;c<i.length;c++)if(r=i[c],r.getAttribute("content")===(l.content==null?null:""+l.content)&&r.getAttribute("name")===(l.name==null?null:l.name)&&r.getAttribute("property")===(l.property==null?null:l.property)&&r.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&r.getAttribute("charset")===(l.charSet==null?null:l.charSet)){i.splice(c,1);break t}}r=s.createElement(n),Lt(r,n,l),s.head.appendChild(r);break;default:throw Error(f(468,n))}r[zt]=e,At(r),n=r}e.stateNode=n}else N0(s,e.type,e.stateNode);else e.stateNode=y0(s,n,e.memoizedProps);else r!==n?(r===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):r.count--,n===null?N0(s,e.type,e.stateNode):y0(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Fi(e,e.memoizedProps,l.memoizedProps)}break;case 27:Yt(t,e),Vt(e),n&512&&(Ct||l===null||ja(l,l.return)),l!==null&&n&4&&Fi(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Yt(t,e),Vt(e),n&512&&(Ct||l===null||ja(l,l.return)),e.flags&32){s=e.stateNode;try{Ol(s,"")}catch(we){at(e,e.return,we)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,Fi(e,s,l!==null?l.memoizedProps:s)),n&1024&&($i=!0);break;case 6:if(Yt(t,e),Vt(e),n&4){if(e.stateNode===null)throw Error(f(162));n=e.memoizedProps,l=e.stateNode;try{l.nodeValue=n}catch(we){at(e,e.return,we)}}break;case 3:if(dr=null,s=xa,xa=or(t.containerInfo),Yt(t,e),xa=s,Vt(e),n&4&&l!==null&&l.memoizedState.isDehydrated)try{hn(t.containerInfo)}catch(we){at(e,e.return,we)}$i&&($i=!1,Nd(e));break;case 4:n=xa,xa=or(e.stateNode.containerInfo),Yt(t,e),Vt(e),xa=n;break;case 12:Yt(t,e),Vt(e);break;case 31:Yt(t,e),Vt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Xs(e,n)));break;case 13:Yt(t,e),Vt(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&($s=K()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Xs(e,n)));break;case 22:s=e.memoizedState!==null;var x=l!==null&&l.memoizedState!==null,R=Ba,Y=Ct;if(Ba=R||s,Ct=Y||x,Yt(t,e),Ct=Y,Ba=R,Vt(e),n&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(l===null||x||Ba||Ct||El(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){x=l=t;try{if(r=x.stateNode,s)i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{c=x.stateNode;var X=x.memoizedProps.style,B=X!=null&&X.hasOwnProperty("display")?X.display:null;c.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(we){at(x,x.return,we)}}}else if(t.tag===6){if(l===null){x=t;try{x.stateNode.nodeValue=s?"":x.memoizedProps}catch(we){at(x,x.return,we)}}}else if(t.tag===18){if(l===null){x=t;try{var U=x.stateNode;s?d0(U,!0):d0(x.stateNode,!1)}catch(we){at(x,x.return,we)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(l=n.retryQueue,l!==null&&(n.retryQueue=null,Xs(e,l))));break;case 19:Yt(t,e),Vt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Xs(e,n)));break;case 30:break;case 21:break;default:Yt(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{for(var l,n=e.return;n!==null;){if(fd(n)){l=n;break}n=n.return}if(l==null)throw Error(f(160));switch(l.tag){case 27:var s=l.stateNode,r=Xi(e);Fs(e,r,s);break;case 5:var i=l.stateNode;l.flags&32&&(Ol(i,""),l.flags&=-33);var c=Xi(e);Fs(e,c,i);break;case 3:case 4:var x=l.stateNode.containerInfo,R=Xi(e);Pi(e,R,x);break;default:throw Error(f(161))}}catch(Y){at(e,e.return,Y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Nd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Nd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Oa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)xd(e,t.alternate,t),t=t.sibling}function El(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:tl(4,t,t.return),El(t);break;case 1:ja(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&dd(t,t.return,l),El(t);break;case 27:es(t.stateNode);case 26:case 5:ja(t,t.return),El(t);break;case 22:t.memoizedState===null&&El(t);break;case 30:El(t);break;default:El(t)}e=e.sibling}}function _a(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,r=t,i=r.flags;switch(r.tag){case 0:case 11:case 15:_a(s,r,l),Qn(4,r);break;case 1:if(_a(s,r,l),n=r,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(R){at(n,n.return,R)}if(n=r,s=n.updateQueue,s!==null){var c=n.stateNode;try{var x=s.shared.hiddenCallbacks;if(x!==null)for(s.shared.hiddenCallbacks=null,s=0;s<x.length;s++)Ko(x[s],c)}catch(R){at(n,n.return,R)}}l&&i&64&&ud(r),Yn(r,r.return);break;case 27:gd(r);case 26:case 5:_a(s,r,l),l&&n===null&&i&4&&md(r),Yn(r,r.return);break;case 12:_a(s,r,l);break;case 31:_a(s,r,l),l&&i&4&&bd(s,r);break;case 13:_a(s,r,l),l&&i&4&&yd(s,r);break;case 22:r.memoizedState===null&&_a(s,r,l),Yn(r,r.return);break;case 30:break;default:_a(s,r,l)}t=t.sibling}}function Wi(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&Dn(l))}function Ki(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Dn(e))}function pa(e,t,l,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wd(e,t,l,n),t=t.sibling}function wd(e,t,l,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:pa(e,t,l,n),s&2048&&Qn(9,t);break;case 1:pa(e,t,l,n);break;case 3:pa(e,t,l,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Dn(e)));break;case 12:if(s&2048){pa(e,t,l,n),e=t.stateNode;try{var r=t.memoizedProps,i=r.id,c=r.onPostCommit;typeof c=="function"&&c(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(x){at(t,t.return,x)}}else pa(e,t,l,n);break;case 31:pa(e,t,l,n);break;case 13:pa(e,t,l,n);break;case 23:break;case 22:r=t.stateNode,i=t.alternate,t.memoizedState!==null?r._visibility&2?pa(e,t,l,n):Vn(e,t):r._visibility&2?pa(e,t,l,n):(r._visibility|=2,ln(e,t,l,n,(t.subtreeFlags&10256)!==0||!1)),s&2048&&Wi(i,t);break;case 24:pa(e,t,l,n),s&2048&&Ki(t.alternate,t);break;default:pa(e,t,l,n)}}function ln(e,t,l,n,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,i=t,c=l,x=n,R=i.flags;switch(i.tag){case 0:case 11:case 15:ln(r,i,c,x,s),Qn(8,i);break;case 23:break;case 22:var Y=i.stateNode;i.memoizedState!==null?Y._visibility&2?ln(r,i,c,x,s):Vn(r,i):(Y._visibility|=2,ln(r,i,c,x,s)),s&&R&2048&&Wi(i.alternate,i);break;case 24:ln(r,i,c,x,s),s&&R&2048&&Ki(i.alternate,i);break;default:ln(r,i,c,x,s)}t=t.sibling}}function Vn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,n=t,s=n.flags;switch(n.tag){case 22:Vn(l,n),s&2048&&Wi(n.alternate,n);break;case 24:Vn(l,n),s&2048&&Ki(n.alternate,n);break;default:Vn(l,n)}t=t.sibling}}var Zn=8192;function nn(e,t,l){if(e.subtreeFlags&Zn)for(e=e.child;e!==null;)Sd(e,t,l),e=e.sibling}function Sd(e,t,l){switch(e.tag){case 26:nn(e,t,l),e.flags&Zn&&e.memoizedState!==null&&rg(l,xa,e.memoizedState,e.memoizedProps);break;case 5:nn(e,t,l);break;case 3:case 4:var n=xa;xa=or(e.stateNode.containerInfo),nn(e,t,l),xa=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Zn,Zn=16777216,nn(e,t,l),Zn=n):nn(e,t,l));break;default:nn(e,t,l)}}function Cd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Fn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var n=t[l];Et=n,kd(n,e)}Cd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Md(e),e=e.sibling}function Md(e){switch(e.tag){case 0:case 11:case 15:Fn(e),e.flags&2048&&tl(9,e,e.return);break;case 3:Fn(e);break;case 12:Fn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ps(e)):Fn(e);break;default:Fn(e)}}function Ps(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var n=t[l];Et=n,kd(n,e)}Cd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:tl(8,t,t.return),Ps(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,Ps(t));break;default:Ps(t)}e=e.sibling}}function kd(e,t){for(;Et!==null;){var l=Et;switch(l.tag){case 0:case 11:case 15:tl(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var n=l.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Dn(l.memoizedState.cache)}if(n=l.child,n!==null)n.return=l,Et=n;else e:for(l=e;Et!==null;){n=Et;var s=n.sibling,r=n.return;if(pd(n),n===l){Et=null;break e}if(s!==null){s.return=r,Et=s;break e}Et=r}}}var jf={getCacheForType:function(e){var t=Tt(Nt),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l},cacheSignal:function(){return Tt(Nt).controller.signal}},Nf=typeof WeakMap=="function"?WeakMap:Map,et=0,it=null,He=null,Je=0,tt=0,ea=null,al=!1,sn=!1,ec=!1,Ua=0,xt=0,ll=0,zl=0,tc=0,ta=0,rn=0,Xn=null,Zt=null,ac=!1,$s=0,Ad=0,Ws=1/0,Ks=null,nl=null,kt=0,sl=null,cn=null,Ha=0,lc=0,nc=null,Ed=null,Pn=0,sc=null;function aa(){return(et&2)!==0&&Je!==0?Je&-Je:o.T!==null?dc():Qc()}function zd(){if(ta===0)if((Je&536870912)===0||Ye){var e=Le;Le<<=1,(Le&3932160)===0&&(Le=262144),ta=e}else ta=536870912;return e=Wt.current,e!==null&&(e.flags|=32),ta}function Ft(e,t,l){(e===it&&(tt===2||tt===9)||e.cancelPendingCommit!==null)&&(on(e,0),rl(e,Je,ta,!1)),Mt(e,l),((et&2)===0||e!==it)&&(e===it&&((et&2)===0&&(zl|=l),xt===4&&rl(e,Je,ta,!1)),Na(e))}function Dd(e,t,l){if((et&6)!==0)throw Error(f(327));var n=!l&&(t&127)===0&&(t&e.expiredLanes)===0||vt(e,t),s=n?Cf(e,t):ic(e,t,!0),r=n;do{if(s===0){sn&&!n&&rl(e,t,0,!1);break}else{if(l=e.current.alternate,r&&!wf(l)){s=ic(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var c=e;s=Xn;var x=c.current.memoizedState.isDehydrated;if(x&&(on(c,i).flags|=256),i=ic(c,i,!1),i!==2){if(ec&&!x){c.errorRecoveryDisabledLanes|=r,zl|=r,s=4;break e}r=Zt,Zt=s,r!==null&&(Zt===null?Zt=r:Zt.push.apply(Zt,r))}s=i}if(r=!1,s!==2)continue}}if(s===1){on(e,0),rl(e,t,0,!0);break}e:{switch(n=e,r=s,r){case 0:case 1:throw Error(f(345));case 4:if((t&4194048)!==t)break;case 6:rl(n,t,ta,!al);break e;case 2:Zt=null;break;case 3:case 5:break;default:throw Error(f(329))}if((t&62914560)===t&&(s=$s+300-K(),10<s)){if(rl(n,t,ta,!al),Be(n,0,!0)!==0)break e;Ha=t,n.timeoutHandle=c0(Td.bind(null,n,l,Zt,Ks,ac,t,ta,zl,rn,al,r,"Throttled",-0,0),s);break e}Td(n,l,Zt,Ks,ac,t,ta,zl,rn,al,r,null,-0,0)}}break}while(!0);Na(e)}function Td(e,t,l,n,s,r,i,c,x,R,Y,X,B,U){if(e.timeoutHandle=-1,X=t.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ca},Sd(t,r,X);var we=(r&62914560)===r?$s-K():(r&4194048)===r?Ad-K():0;if(we=ig(X,we),we!==null){Ha=r,e.cancelPendingCommit=we(Hd.bind(null,e,t,r,l,n,s,i,c,x,Y,X,null,B,U)),rl(e,r,i,!R);return}}Hd(e,t,r,l,n,s,i,c,x)}function wf(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var n=0;n<l.length;n++){var s=l[n],r=s.getSnapshot;s=s.value;try{if(!Pt(r(),s))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rl(e,t,l,n){t&=~tc,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var r=31-b(s),i=1<<r;n[r]=-1,s&=~i}l!==0&&It(e,l,t)}function er(){return(et&6)===0?($n(0),!1):!0}function rc(){if(He!==null){if(tt===0)var e=He.return;else e=He,Ea=jl=null,Ni(e),Wl=null,Rn=0,e=He;for(;e!==null;)od(e.alternate,e),e=e.return;He=null}}function on(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,qf(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Ha=0,rc(),it=e,He=l=ka(e.current,null),Je=t,tt=0,ea=null,al=!1,sn=vt(e,t),ec=!1,rn=ta=tc=zl=ll=xt=0,Zt=Xn=null,ac=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-b(n),r=1<<s;t|=e[s],n&=~r}return Ua=t,js(),l}function Rd(e,t){_e=null,o.H=Gn,t===$l||t===Es?(t=Xo(),tt=3):t===ui?(t=Xo(),tt=4):tt=t===_i?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ea=t,He===null&&(xt=1,qs(e,ia(t,e.current)))}function Ld(){var e=Wt.current;return e===null?!0:(Je&4194048)===Je?da===null:(Je&62914560)===Je||(Je&536870912)!==0?e===da:!1}function Bd(){var e=o.H;return o.H=Gn,e===null?Gn:e}function Id(){var e=o.A;return o.A=jf,e}function tr(){xt=4,al||(Je&4194048)!==Je&&Wt.current!==null||(sn=!0),(ll&134217727)===0&&(zl&134217727)===0||it===null||rl(it,Je,ta,!1)}function ic(e,t,l){var n=et;et|=2;var s=Bd(),r=Id();(it!==e||Je!==t)&&(Ks=null,on(e,t)),t=!1;var i=xt;e:do try{if(tt!==0&&He!==null){var c=He,x=ea;switch(tt){case 8:rc(),i=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(t=!0);var R=tt;if(tt=0,ea=null,un(e,c,x,R),l&&sn){i=0;break e}break;default:R=tt,tt=0,ea=null,un(e,c,x,R)}}Sf(),i=xt;break}catch(Y){Rd(e,Y)}while(!0);return t&&e.shellSuspendCounter++,Ea=jl=null,et=n,o.H=s,o.A=r,He===null&&(it=null,Je=0,js()),i}function Sf(){for(;He!==null;)Od(He)}function Cf(e,t){var l=et;et|=2;var n=Bd(),s=Id();it!==e||Je!==t?(Ks=null,Ws=K()+500,on(e,t)):sn=vt(e,t);e:do try{if(tt!==0&&He!==null){t=He;var r=ea;t:switch(tt){case 1:tt=0,ea=null,un(e,t,r,1);break;case 2:case 9:if(Zo(r)){tt=0,ea=null,_d(t);break}t=function(){tt!==2&&tt!==9||it!==e||(tt=7),Na(e)},r.then(t,t);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Zo(r)?(tt=0,ea=null,_d(t)):(tt=0,ea=null,un(e,t,r,7));break;case 5:var i=null;switch(He.tag){case 26:i=He.memoizedState;case 5:case 27:var c=He;if(i?w0(i):c.stateNode.complete){tt=0,ea=null;var x=c.sibling;if(x!==null)He=x;else{var R=c.return;R!==null?(He=R,ar(R)):He=null}break t}}tt=0,ea=null,un(e,t,r,5);break;case 6:tt=0,ea=null,un(e,t,r,6);break;case 8:rc(),xt=6;break e;default:throw Error(f(462))}}Mf();break}catch(Y){Rd(e,Y)}while(!0);return Ea=jl=null,o.H=n,o.A=s,et=l,He!==null?0:(it=null,Je=0,js(),xt)}function Mf(){for(;He!==null&&!he();)Od(He)}function Od(e){var t=id(e.alternate,e,Ua);e.memoizedProps=e.pendingProps,t===null?ar(e):He=t}function _d(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=td(l,t,t.pendingProps,t.type,void 0,Je);break;case 11:t=td(l,t,t.pendingProps,t.type.render,t.ref,Je);break;case 5:Ni(t);default:od(l,t),t=He=Io(t,Ua),t=id(l,t,Ua)}e.memoizedProps=e.pendingProps,t===null?ar(e):He=t}function un(e,t,l,n){Ea=jl=null,Ni(t),Wl=null,Rn=0;var s=t.return;try{if(gf(e,s,t,l,Je)){xt=1,qs(e,ia(l,e.current)),He=null;return}}catch(r){if(s!==null)throw He=s,r;xt=1,qs(e,ia(l,e.current)),He=null;return}t.flags&32768?(Ye||n===1?e=!0:sn||(Je&536870912)!==0?e=!1:(al=e=!0,(n===2||n===9||n===3||n===6)&&(n=Wt.current,n!==null&&n.tag===13&&(n.flags|=16384))),Ud(t,e)):ar(t)}function ar(e){var t=e;do{if((t.flags&32768)!==0){Ud(t,al);return}e=t.return;var l=pf(t.alternate,t,Ua);if(l!==null){He=l;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);xt===0&&(xt=5)}function Ud(e,t){do{var l=vf(e.alternate,e);if(l!==null){l.flags&=32767,He=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){He=e;return}He=e=l}while(e!==null);xt=6,He=null}function Hd(e,t,l,n,s,r,i,c,x){e.cancelPendingCommit=null;do lr();while(kt!==0);if((et&6)!==0)throw Error(f(327));if(t!==null){if(t===e.current)throw Error(f(177));if(r=t.lanes|t.childLanes,r|=Xr,qa(e,l,r,i,c,x),e===it&&(He=it=null,Je=0),cn=t,sl=e,Ha=l,lc=r,nc=s,Ed=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,zf(Pe,function(){return Yd(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=o.T,o.T=null,s=k.p,k.p=2,i=et,et|=4;try{bf(e,t,l)}finally{et=i,k.p=s,o.T=n}}kt=1,Gd(),Jd(),qd()}}function Gd(){if(kt===1){kt=0;var e=sl,t=cn,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=o.T,o.T=null;var n=k.p;k.p=2;var s=et;et|=4;try{jd(t,e);var r=bc,i=ko(e.containerInfo),c=r.focusedElem,x=r.selectionRange;if(i!==c&&c&&c.ownerDocument&&Mo(c.ownerDocument.documentElement,c)){if(x!==null&&Qr(c)){var R=x.start,Y=x.end;if(Y===void 0&&(Y=R),"selectionStart"in c)c.selectionStart=R,c.selectionEnd=Math.min(Y,c.value.length);else{var X=c.ownerDocument||document,B=X&&X.defaultView||window;if(B.getSelection){var U=B.getSelection(),we=c.textContent.length,De=Math.min(x.start,we),rt=x.end===void 0?De:Math.min(x.end,we);!U.extend&&De>rt&&(i=rt,rt=De,De=i);var S=Co(c,De),v=Co(c,rt);if(S&&v&&(U.rangeCount!==1||U.anchorNode!==S.node||U.anchorOffset!==S.offset||U.focusNode!==v.node||U.focusOffset!==v.offset)){var T=X.createRange();T.setStart(S.node,S.offset),U.removeAllRanges(),De>rt?(U.addRange(T),U.extend(v.node,v.offset)):(T.setEnd(v.node,v.offset),U.addRange(T))}}}}for(X=[],U=c;U=U.parentNode;)U.nodeType===1&&X.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<X.length;c++){var F=X[c];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}hr=!!vc,bc=vc=null}finally{et=s,k.p=n,o.T=l}}e.current=t,kt=2}}function Jd(){if(kt===2){kt=0;var e=sl,t=cn,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=o.T,o.T=null;var n=k.p;k.p=2;var s=et;et|=4;try{xd(e,t.alternate,t)}finally{et=s,k.p=n,o.T=l}}kt=3}}function qd(){if(kt===4||kt===3){kt=0,ie();var e=sl,t=cn,l=Ha,n=Ed;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?kt=5:(kt=0,cn=sl=null,Qd(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(nl=null),Cr(l),t=t.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(de,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=o.T,s=k.p,k.p=2,o.T=null;try{for(var r=e.onRecoverableError,i=0;i<n.length;i++){var c=n[i];r(c.value,{componentStack:c.stack})}}finally{o.T=t,k.p=s}}(Ha&3)!==0&&lr(),Na(e),s=e.pendingLanes,(l&261930)!==0&&(s&42)!==0?e===sc?Pn++:(Pn=0,sc=e):Pn=0,$n(0)}}function Qd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Dn(t)))}function lr(){return Gd(),Jd(),qd(),Yd()}function Yd(){if(kt!==5)return!1;var e=sl,t=lc;lc=0;var l=Cr(Ha),n=o.T,s=k.p;try{k.p=32>l?32:l,o.T=null,l=nc,nc=null;var r=sl,i=Ha;if(kt=0,cn=sl=null,Ha=0,(et&6)!==0)throw Error(f(331));var c=et;if(et|=4,Md(r.current),wd(r,r.current,i,l),et=c,$n(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(de,r)}catch{}return!0}finally{k.p=s,o.T=n,Qd(e,t)}}function Vd(e,t,l){t=ia(l,t),t=Oi(e.stateNode,t,2),e=Wa(e,t,2),e!==null&&(Mt(e,2),Na(e))}function at(e,t,l){if(e.tag===3)Vd(e,e,l);else for(;t!==null;){if(t.tag===3){Vd(t,e,l);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(nl===null||!nl.has(n))){e=ia(l,e),l=Zu(2),n=Wa(t,l,2),n!==null&&(Fu(l,n,t,e),Mt(n,2),Na(n));break}}t=t.return}}function cc(e,t,l){var n=e.pingCache;if(n===null){n=e.pingCache=new Nf;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(l)||(ec=!0,s.add(l),e=kf.bind(null,e,t,l),t.then(e,e))}function kf(e,t,l){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,it===e&&(Je&l)===l&&(xt===4||xt===3&&(Je&62914560)===Je&&300>K()-$s?(et&2)===0&&on(e,0):tc|=l,rn===Je&&(rn=0)),Na(e)}function Zd(e,t){t===0&&(t=jt()),e=vl(e,t),e!==null&&(Mt(e,t),Na(e))}function Af(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),Zd(e,l)}function Ef(e,t){var l=0;switch(e.tag){case 31:case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(l=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(f(314))}n!==null&&n.delete(t),Zd(e,l)}function zf(e,t){return Q(e,t)}var nr=null,dn=null,oc=!1,sr=!1,uc=!1,il=0;function Na(e){e!==dn&&e.next===null&&(dn===null?nr=dn=e:dn=dn.next=e),sr=!0,oc||(oc=!0,Tf())}function $n(e,t){if(!uc&&sr){uc=!0;do for(var l=!1,n=nr;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var r=0;else{var i=n.suspendedLanes,c=n.pingedLanes;r=(1<<31-b(42|e)+1)-1,r&=s&~(i&~c),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(l=!0,$d(n,r))}else r=Je,r=Be(n,n===it?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(r&3)===0||vt(n,r)||(l=!0,$d(n,r));n=n.next}while(l);uc=!1}}function Df(){Fd()}function Fd(){sr=oc=!1;var e=0;il!==0&&Jf()&&(e=il);for(var t=K(),l=null,n=nr;n!==null;){var s=n.next,r=Xd(n,t);r===0?(n.next=null,l===null?nr=s:l.next=s,s===null&&(dn=l)):(l=n,(e!==0||(r&3)!==0)&&(sr=!0)),n=s}kt!==0&&kt!==5||$n(e),il!==0&&(il=0)}function Xd(e,t){for(var l=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var i=31-b(r),c=1<<i,x=s[i];x===-1?((c&l)===0||(c&n)!==0)&&(s[i]=Bt(c,t)):x<=t&&(e.expiredLanes|=c),r&=~c}if(t=it,l=Je,l=Be(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,l===0||e===t&&(tt===2||tt===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&W(n),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||vt(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(n!==null&&W(n),Cr(l)){case 2:case 8:l=Xe;break;case 32:l=Pe;break;case 268435456:l=ot;break;default:l=Pe}return n=Pd.bind(null,e),l=Q(l,n),e.callbackPriority=t,e.callbackNode=l,t}return n!==null&&n!==null&&W(n),e.callbackPriority=2,e.callbackNode=null,2}function Pd(e,t){if(kt!==0&&kt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(lr()&&e.callbackNode!==l)return null;var n=Je;return n=Be(e,e===it?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Dd(e,n,t),Xd(e,K()),e.callbackNode!=null&&e.callbackNode===l?Pd.bind(null,e):null)}function $d(e,t){if(lr())return null;Dd(e,t,!0)}function Tf(){Qf(function(){(et&6)!==0?Q(Te,Df):Fd()})}function dc(){if(il===0){var e=Xl;e===0&&(e=Ae,Ae<<=1,(Ae&261888)===0&&(Ae=256)),il=e}return il}function Wd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fs(""+e)}function Kd(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function Rf(e,t,l,n,s){if(t==="submit"&&l&&l.stateNode===s){var r=Wd((s[Jt]||null).action),i=n.submitter;i&&(t=(t=i[Jt]||null)?Wd(t.formAction):i.getAttribute("formAction"),t!==null&&(r=t,i=null));var c=new ps("action","action",null,n,s);e.push({event:c,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(il!==0){var x=i?Kd(s,i):new FormData(s);Di(l,{pending:!0,data:x,method:s.method,action:r},null,x)}}else typeof r=="function"&&(c.preventDefault(),x=i?Kd(s,i):new FormData(s),Di(l,{pending:!0,data:x,method:s.method,action:r},r,x))},currentTarget:s}]})}}for(var mc=0;mc<Fr.length;mc++){var fc=Fr[mc],Lf=fc.toLowerCase(),Bf=fc[0].toUpperCase()+fc.slice(1);ha(Lf,"on"+Bf)}ha(zo,"onAnimationEnd"),ha(Do,"onAnimationIteration"),ha(To,"onAnimationStart"),ha("dblclick","onDoubleClick"),ha("focusin","onFocus"),ha("focusout","onBlur"),ha(Pm,"onTransitionRun"),ha($m,"onTransitionStart"),ha(Wm,"onTransitionCancel"),ha(Ro,"onTransitionEnd"),Bl("onMouseEnter",["mouseout","mouseover"]),Bl("onMouseLeave",["mouseout","mouseover"]),Bl("onPointerEnter",["pointerout","pointerover"]),Bl("onPointerLeave",["pointerout","pointerover"]),gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gl("onBeforeInput",["compositionend","keypress","textInput","paste"]),gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),If=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wn));function e0(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var n=e[l],s=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var i=n.length-1;0<=i;i--){var c=n[i],x=c.instance,R=c.currentTarget;if(c=c.listener,x!==r&&s.isPropagationStopped())break e;r=c,s.currentTarget=R;try{r(s)}catch(Y){ys(Y)}s.currentTarget=null,r=x}else for(i=0;i<n.length;i++){if(c=n[i],x=c.instance,R=c.currentTarget,c=c.listener,x!==r&&s.isPropagationStopped())break e;r=c,s.currentTarget=R;try{r(s)}catch(Y){ys(Y)}s.currentTarget=null,r=x}}}}function Ge(e,t){var l=t[Mr];l===void 0&&(l=t[Mr]=new Set);var n=e+"__bubble";l.has(n)||(t0(t,e,2,!1),l.add(n))}function gc(e,t,l){var n=0;t&&(n|=4),t0(l,e,n,t)}var rr="_reactListening"+Math.random().toString(36).slice(2);function hc(e){if(!e[rr]){e[rr]=!0,Zc.forEach(function(l){l!=="selectionchange"&&(If.has(l)||gc(l,!1,e),gc(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rr]||(t[rr]=!0,gc("selectionchange",!1,t))}}function t0(e,t,l,n){switch(z0(t)){case 2:var s=ug;break;case 8:s=dg;break;default:s=zc}l=s.bind(null,t,l,e),s=void 0,!Br||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,l,{capture:!0,passive:s}):e.addEventListener(t,l,!0):s!==void 0?e.addEventListener(t,l,{passive:s}):e.addEventListener(t,l,!1)}function xc(e,t,l,n,s){var r=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var c=n.stateNode.containerInfo;if(c===s)break;if(i===4)for(i=n.return;i!==null;){var x=i.tag;if((x===3||x===4)&&i.stateNode.containerInfo===s)return;i=i.return}for(;c!==null;){if(i=Tl(c),i===null)return;if(x=i.tag,x===5||x===6||x===26||x===27){n=r=i;continue e}c=c.parentNode}}n=n.return}so(function(){var R=r,Y=Rr(l),X=[];e:{var B=Lo.get(e);if(B!==void 0){var U=ps,we=e;switch(e){case"keypress":if(hs(l)===0)break e;case"keydown":case"keyup":U=Am;break;case"focusin":we="focus",U=Ur;break;case"focusout":we="blur",U=Ur;break;case"beforeblur":case"afterblur":U=Ur;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=xm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=Dm;break;case zo:case Do:case To:U=bm;break;case Ro:U=Rm;break;case"scroll":case"scrollend":U=gm;break;case"wheel":U=Bm;break;case"copy":case"cut":case"paste":U=jm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=uo;break;case"toggle":case"beforetoggle":U=Om}var De=(t&4)!==0,rt=!De&&(e==="scroll"||e==="scrollend"),S=De?B!==null?B+"Capture":null:B;De=[];for(var v=R,T;v!==null;){var F=v;if(T=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||T===null||S===null||(F=yn(v,S),F!=null&&De.push(Kn(v,F,T))),rt)break;v=v.return}0<De.length&&(B=new U(B,we,null,l,Y),X.push({event:B,listeners:De}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",B&&l!==Tr&&(we=l.relatedTarget||l.fromElement)&&(Tl(we)||we[Dl]))break e;if((U||B)&&(B=Y.window===Y?Y:(B=Y.ownerDocument)?B.defaultView||B.parentWindow:window,U?(we=l.relatedTarget||l.toElement,U=R,we=we?Tl(we):null,we!==null&&(rt=A(we),De=we.tag,we!==rt||De!==5&&De!==27&&De!==6)&&(we=null)):(U=null,we=R),U!==we)){if(De=co,F="onMouseLeave",S="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(De=uo,F="onPointerLeave",S="onPointerEnter",v="pointer"),rt=U==null?B:bn(U),T=we==null?B:bn(we),B=new De(F,v+"leave",U,l,Y),B.target=rt,B.relatedTarget=T,F=null,Tl(Y)===R&&(De=new De(S,v+"enter",we,l,Y),De.target=T,De.relatedTarget=rt,F=De),rt=F,U&&we)t:{for(De=Of,S=U,v=we,T=0,F=S;F;F=De(F))T++;F=0;for(var ze=v;ze;ze=De(ze))F++;for(;0<T-F;)S=De(S),T--;for(;0<F-T;)v=De(v),F--;for(;T--;){if(S===v||v!==null&&S===v.alternate){De=S;break t}S=De(S),v=De(v)}De=null}else De=null;U!==null&&a0(X,B,U,De,!1),we!==null&&rt!==null&&a0(X,rt,we,De,!0)}}e:{if(B=R?bn(R):window,U=B.nodeName&&B.nodeName.toLowerCase(),U==="select"||U==="input"&&B.type==="file")var We=bo;else if(po(B))if(yo)We=Zm;else{We=Ym;var Ce=Qm}else U=B.nodeName,!U||U.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?R&&Dr(R.elementType)&&(We=bo):We=Vm;if(We&&(We=We(e,R))){vo(X,We,l,Y);break e}Ce&&Ce(e,B,R),e==="focusout"&&R&&B.type==="number"&&R.memoizedProps.value!=null&&zr(B,"number",B.value)}switch(Ce=R?bn(R):window,e){case"focusin":(po(Ce)||Ce.contentEditable==="true")&&(Gl=Ce,Yr=R,An=null);break;case"focusout":An=Yr=Gl=null;break;case"mousedown":Vr=!0;break;case"contextmenu":case"mouseup":case"dragend":Vr=!1,Ao(X,l,Y);break;case"selectionchange":if(Xm)break;case"keydown":case"keyup":Ao(X,l,Y)}var Ue;if(Gr)e:{switch(e){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Hl?ho(e,l)&&(qe="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(qe="onCompositionStart");qe&&(mo&&l.locale!=="ko"&&(Hl||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Hl&&(Ue=ro()):(Ya=Y,Ir="value"in Ya?Ya.value:Ya.textContent,Hl=!0)),Ce=ir(R,qe),0<Ce.length&&(qe=new oo(qe,e,null,l,Y),X.push({event:qe,listeners:Ce}),Ue?qe.data=Ue:(Ue=xo(l),Ue!==null&&(qe.data=Ue)))),(Ue=Um?Hm(e,l):Gm(e,l))&&(qe=ir(R,"onBeforeInput"),0<qe.length&&(Ce=new oo("onBeforeInput","beforeinput",null,l,Y),X.push({event:Ce,listeners:qe}),Ce.data=Ue)),Rf(X,e,R,l,Y)}e0(X,t)})}function Kn(e,t,l){return{instance:e,listener:t,currentTarget:l}}function ir(e,t){for(var l=t+"Capture",n=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=yn(e,l),s!=null&&n.unshift(Kn(e,s,r)),s=yn(e,t),s!=null&&n.push(Kn(e,s,r))),e.tag===3)return n;e=e.return}return[]}function Of(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function a0(e,t,l,n,s){for(var r=t._reactName,i=[];l!==null&&l!==n;){var c=l,x=c.alternate,R=c.stateNode;if(c=c.tag,x!==null&&x===n)break;c!==5&&c!==26&&c!==27||R===null||(x=R,s?(R=yn(l,r),R!=null&&i.unshift(Kn(l,R,x))):s||(R=yn(l,r),R!=null&&i.push(Kn(l,R,x)))),l=l.return}i.length!==0&&e.push({event:t,listeners:i})}var _f=/\r\n?/g,Uf=/\u0000|\uFFFD/g;function l0(e){return(typeof e=="string"?e:""+e).replace(_f,`
`).replace(Uf,"")}function n0(e,t){return t=l0(t),l0(e)===t}function st(e,t,l,n,s,r){switch(l){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Ol(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Ol(e,""+n);break;case"className":ds(e,"class",n);break;case"tabIndex":ds(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":ds(e,l,n);break;case"style":lo(e,n,r);break;case"data":if(t!=="object"){ds(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(l);break}n=fs(""+n),e.setAttribute(l,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(l==="formAction"?(t!=="input"&&st(e,t,"name",s.name,s,null),st(e,t,"formEncType",s.formEncType,s,null),st(e,t,"formMethod",s.formMethod,s,null),st(e,t,"formTarget",s.formTarget,s,null)):(st(e,t,"encType",s.encType,s,null),st(e,t,"method",s.method,s,null),st(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(l);break}n=fs(""+n),e.setAttribute(l,n);break;case"onClick":n!=null&&(e.onclick=Ca);break;case"onScroll":n!=null&&Ge("scroll",e);break;case"onScrollEnd":n!=null&&Ge("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(f(61));if(l=n.__html,l!=null){if(s.children!=null)throw Error(f(60));e.innerHTML=l}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}l=fs(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(l,""+n):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":n===!0?e.setAttribute(l,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(l,n):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(l,n):e.removeAttribute(l);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(l):e.setAttribute(l,n);break;case"popover":Ge("beforetoggle",e),Ge("toggle",e),us(e,"popover",n);break;case"xlinkActuate":Sa(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Sa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Sa(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Sa(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Sa(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Sa(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Sa(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Sa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Sa(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":us(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=mm.get(l)||l,us(e,l,n))}}function pc(e,t,l,n,s,r){switch(l){case"style":lo(e,n,r);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(f(61));if(l=n.__html,l!=null){if(s.children!=null)throw Error(f(60));e.innerHTML=l}}break;case"children":typeof n=="string"?Ol(e,n):(typeof n=="number"||typeof n=="bigint")&&Ol(e,""+n);break;case"onScroll":n!=null&&Ge("scroll",e);break;case"onScrollEnd":n!=null&&Ge("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(s=l.endsWith("Capture"),t=l.slice(2,s?l.length-7:void 0),r=e[Jt]||null,r=r!=null?r[l]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof n=="function")){typeof r!="function"&&r!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,n,s);break e}l in e?e[l]=n:n===!0?e.setAttribute(l,""):us(e,l,n)}}}function Lt(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",e),Ge("load",e);var n=!1,s=!1,r;for(r in l)if(l.hasOwnProperty(r)){var i=l[r];if(i!=null)switch(r){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(f(137,t));default:st(e,t,r,i,l,null)}}s&&st(e,t,"srcSet",l.srcSet,l,null),n&&st(e,t,"src",l.src,l,null);return;case"input":Ge("invalid",e);var c=r=i=s=null,x=null,R=null;for(n in l)if(l.hasOwnProperty(n)){var Y=l[n];if(Y!=null)switch(n){case"name":s=Y;break;case"type":i=Y;break;case"checked":x=Y;break;case"defaultChecked":R=Y;break;case"value":r=Y;break;case"defaultValue":c=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(f(137,t));break;default:st(e,t,n,Y,l,null)}}Kc(e,r,c,x,R,i,s,!1);return;case"select":Ge("invalid",e),n=i=r=null;for(s in l)if(l.hasOwnProperty(s)&&(c=l[s],c!=null))switch(s){case"value":r=c;break;case"defaultValue":i=c;break;case"multiple":n=c;default:st(e,t,s,c,l,null)}t=r,l=i,e.multiple=!!n,t!=null?Il(e,!!n,t,!1):l!=null&&Il(e,!!n,l,!0);return;case"textarea":Ge("invalid",e),r=s=n=null;for(i in l)if(l.hasOwnProperty(i)&&(c=l[i],c!=null))switch(i){case"value":n=c;break;case"defaultValue":s=c;break;case"children":r=c;break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(f(91));break;default:st(e,t,i,c,l,null)}to(e,n,s,r);return;case"option":for(x in l)if(l.hasOwnProperty(x)&&(n=l[x],n!=null))switch(x){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:st(e,t,x,n,l,null)}return;case"dialog":Ge("beforetoggle",e),Ge("toggle",e),Ge("cancel",e),Ge("close",e);break;case"iframe":case"object":Ge("load",e);break;case"video":case"audio":for(n=0;n<Wn.length;n++)Ge(Wn[n],e);break;case"image":Ge("error",e),Ge("load",e);break;case"details":Ge("toggle",e);break;case"embed":case"source":case"link":Ge("error",e),Ge("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in l)if(l.hasOwnProperty(R)&&(n=l[R],n!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(f(137,t));default:st(e,t,R,n,l,null)}return;default:if(Dr(t)){for(Y in l)l.hasOwnProperty(Y)&&(n=l[Y],n!==void 0&&pc(e,t,Y,n,l,void 0));return}}for(c in l)l.hasOwnProperty(c)&&(n=l[c],n!=null&&st(e,t,c,n,l,null))}function Hf(e,t,l,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,i=null,c=null,x=null,R=null,Y=null;for(U in l){var X=l[U];if(l.hasOwnProperty(U)&&X!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":x=X;default:n.hasOwnProperty(U)||st(e,t,U,null,n,X)}}for(var B in n){var U=n[B];if(X=l[B],n.hasOwnProperty(B)&&(U!=null||X!=null))switch(B){case"type":r=U;break;case"name":s=U;break;case"checked":R=U;break;case"defaultChecked":Y=U;break;case"value":i=U;break;case"defaultValue":c=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(f(137,t));break;default:U!==X&&st(e,t,B,U,n,X)}}Er(e,i,c,x,R,Y,r,s);return;case"select":U=i=c=B=null;for(r in l)if(x=l[r],l.hasOwnProperty(r)&&x!=null)switch(r){case"value":break;case"multiple":U=x;default:n.hasOwnProperty(r)||st(e,t,r,null,n,x)}for(s in n)if(r=n[s],x=l[s],n.hasOwnProperty(s)&&(r!=null||x!=null))switch(s){case"value":B=r;break;case"defaultValue":c=r;break;case"multiple":i=r;default:r!==x&&st(e,t,s,r,n,x)}t=c,l=i,n=U,B!=null?Il(e,!!l,B,!1):!!n!=!!l&&(t!=null?Il(e,!!l,t,!0):Il(e,!!l,l?[]:"",!1));return;case"textarea":U=B=null;for(c in l)if(s=l[c],l.hasOwnProperty(c)&&s!=null&&!n.hasOwnProperty(c))switch(c){case"value":break;case"children":break;default:st(e,t,c,null,n,s)}for(i in n)if(s=n[i],r=l[i],n.hasOwnProperty(i)&&(s!=null||r!=null))switch(i){case"value":B=s;break;case"defaultValue":U=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(f(91));break;default:s!==r&&st(e,t,i,s,n,r)}eo(e,B,U);return;case"option":for(var we in l)if(B=l[we],l.hasOwnProperty(we)&&B!=null&&!n.hasOwnProperty(we))switch(we){case"selected":e.selected=!1;break;default:st(e,t,we,null,n,B)}for(x in n)if(B=n[x],U=l[x],n.hasOwnProperty(x)&&B!==U&&(B!=null||U!=null))switch(x){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:st(e,t,x,B,n,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in l)B=l[De],l.hasOwnProperty(De)&&B!=null&&!n.hasOwnProperty(De)&&st(e,t,De,null,n,B);for(R in n)if(B=n[R],U=l[R],n.hasOwnProperty(R)&&B!==U&&(B!=null||U!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(f(137,t));break;default:st(e,t,R,B,n,U)}return;default:if(Dr(t)){for(var rt in l)B=l[rt],l.hasOwnProperty(rt)&&B!==void 0&&!n.hasOwnProperty(rt)&&pc(e,t,rt,void 0,n,B);for(Y in n)B=n[Y],U=l[Y],!n.hasOwnProperty(Y)||B===U||B===void 0&&U===void 0||pc(e,t,Y,B,n,U);return}}for(var S in l)B=l[S],l.hasOwnProperty(S)&&B!=null&&!n.hasOwnProperty(S)&&st(e,t,S,null,n,B);for(X in n)B=n[X],U=l[X],!n.hasOwnProperty(X)||B===U||B==null&&U==null||st(e,t,X,B,n,U)}function s0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Gf(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,l=performance.getEntriesByType("resource"),n=0;n<l.length;n++){var s=l[n],r=s.transferSize,i=s.initiatorType,c=s.duration;if(r&&c&&s0(i)){for(i=0,c=s.responseEnd,n+=1;n<l.length;n++){var x=l[n],R=x.startTime;if(R>c)break;var Y=x.transferSize,X=x.initiatorType;Y&&s0(X)&&(x=x.responseEnd,i+=Y*(x<c?1:(c-R)/(x-R)))}if(--n,t+=8*(r+i)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var vc=null,bc=null;function cr(e){return e.nodeType===9?e:e.ownerDocument}function r0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function i0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function yc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jc=null;function Jf(){var e=window.event;return e&&e.type==="popstate"?e===jc?!1:(jc=e,!0):(jc=null,!1)}var c0=typeof setTimeout=="function"?setTimeout:void 0,qf=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,Qf=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(e){return o0.resolve(null).then(e).catch(Yf)}:c0;function Yf(e){setTimeout(function(){throw e})}function cl(e){return e==="head"}function u0(e,t){var l=t,n=0;do{var s=l.nextSibling;if(e.removeChild(l),s&&s.nodeType===8)if(l=s.data,l==="/$"||l==="/&"){if(n===0){e.removeChild(s),hn(t);return}n--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")n++;else if(l==="html")es(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,es(l);for(var r=l.firstChild;r;){var i=r.nextSibling,c=r.nodeName;r[vn]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&r.rel.toLowerCase()==="stylesheet"||l.removeChild(r),r=i}}else l==="body"&&es(e.ownerDocument.body);l=s}while(l);hn(t)}function d0(e,t){var l=e;e=0;do{var n=l.nextSibling;if(l.nodeType===1?t?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(t?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),n&&n.nodeType===8)if(l=n.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=n}while(l)}function Nc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Nc(l),kr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Vf(e,t,l,n){for(;e.nodeType===1;){var s=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[vn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=ma(e.nextSibling),e===null)break}return null}function Zf(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=ma(e.nextSibling),e===null))return null;return e}function m0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ma(e.nextSibling),e===null))return null;return e}function wc(e){return e.data==="$?"||e.data==="$~"}function Sc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ff(e,t){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||l.readyState!=="loading")t();else{var n=function(){t(),l.removeEventListener("DOMContentLoaded",n)};l.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function ma(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Cc=null;function f0(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(t===0)return ma(e.nextSibling);t--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||t++}e=e.nextSibling}return null}function g0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(t===0)return e;t--}else l!=="/$"&&l!=="/&"||t++}e=e.previousSibling}return null}function h0(e,t,l){switch(t=cr(l),e){case"html":if(e=t.documentElement,!e)throw Error(f(452));return e;case"head":if(e=t.head,!e)throw Error(f(453));return e;case"body":if(e=t.body,!e)throw Error(f(454));return e;default:throw Error(f(451))}}function es(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);kr(e)}var fa=new Map,x0=new Set;function or(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ga=k.d;k.d={f:Xf,r:Pf,D:$f,C:Wf,L:Kf,m:eg,X:ag,S:tg,M:lg};function Xf(){var e=Ga.f(),t=er();return e||t}function Pf(e){var t=Rl(e);t!==null&&t.tag===5&&t.type==="form"?Ru(t):Ga.r(e)}var mn=typeof document>"u"?null:document;function p0(e,t,l){var n=mn;if(n&&typeof t=="string"&&t){var s=sa(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof l=="string"&&(s+='[crossorigin="'+l+'"]'),x0.has(s)||(x0.add(s),e={rel:e,crossOrigin:l,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),Lt(t,"link",e),At(t),n.head.appendChild(t)))}}function $f(e){Ga.D(e),p0("dns-prefetch",e,null)}function Wf(e,t){Ga.C(e,t),p0("preconnect",e,t)}function Kf(e,t,l){Ga.L(e,t,l);var n=mn;if(n&&e&&t){var s='link[rel="preload"][as="'+sa(t)+'"]';t==="image"&&l&&l.imageSrcSet?(s+='[imagesrcset="'+sa(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(s+='[imagesizes="'+sa(l.imageSizes)+'"]')):s+='[href="'+sa(e)+'"]';var r=s;switch(t){case"style":r=fn(e);break;case"script":r=gn(e)}fa.has(r)||(e=J({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),fa.set(r,e),n.querySelector(s)!==null||t==="style"&&n.querySelector(ts(r))||t==="script"&&n.querySelector(as(r))||(t=n.createElement("link"),Lt(t,"link",e),At(t),n.head.appendChild(t)))}}function eg(e,t){Ga.m(e,t);var l=mn;if(l&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+sa(n)+'"][href="'+sa(e)+'"]',r=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=gn(e)}if(!fa.has(r)&&(e=J({rel:"modulepreload",href:e},t),fa.set(r,e),l.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(as(r)))return}n=l.createElement("link"),Lt(n,"link",e),At(n),l.head.appendChild(n)}}}function tg(e,t,l){Ga.S(e,t,l);var n=mn;if(n&&e){var s=Ll(n).hoistableStyles,r=fn(e);t=t||"default";var i=s.get(r);if(!i){var c={loading:0,preload:null};if(i=n.querySelector(ts(r)))c.loading=5;else{e=J({rel:"stylesheet",href:e,"data-precedence":t},l),(l=fa.get(r))&&Mc(e,l);var x=i=n.createElement("link");At(x),Lt(x,"link",e),x._p=new Promise(function(R,Y){x.onload=R,x.onerror=Y}),x.addEventListener("load",function(){c.loading|=1}),x.addEventListener("error",function(){c.loading|=2}),c.loading|=4,ur(i,t,n)}i={type:"stylesheet",instance:i,count:1,state:c},s.set(r,i)}}}function ag(e,t){Ga.X(e,t);var l=mn;if(l&&e){var n=Ll(l).hoistableScripts,s=gn(e),r=n.get(s);r||(r=l.querySelector(as(s)),r||(e=J({src:e,async:!0},t),(t=fa.get(s))&&kc(e,t),r=l.createElement("script"),At(r),Lt(r,"link",e),l.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}}function lg(e,t){Ga.M(e,t);var l=mn;if(l&&e){var n=Ll(l).hoistableScripts,s=gn(e),r=n.get(s);r||(r=l.querySelector(as(s)),r||(e=J({src:e,async:!0,type:"module"},t),(t=fa.get(s))&&kc(e,t),r=l.createElement("script"),At(r),Lt(r,"link",e),l.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}}function v0(e,t,l,n){var s=(s=w.current)?or(s):null;if(!s)throw Error(f(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=fn(l.href),l=Ll(s).hoistableStyles,n=l.get(t),n||(n={type:"style",instance:null,count:0,state:null},l.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=fn(l.href);var r=Ll(s).hoistableStyles,i=r.get(e);if(i||(s=s.ownerDocument||s,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,i),(r=s.querySelector(ts(e)))&&!r._p&&(i.instance=r,i.state.loading=5),fa.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},fa.set(e,l),r||ng(s,e,l,i.state))),t&&n===null)throw Error(f(528,""));return i}if(t&&n!==null)throw Error(f(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=gn(l),l=Ll(s).hoistableScripts,n=l.get(t),n||(n={type:"script",instance:null,count:0,state:null},l.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(f(444,e))}}function fn(e){return'href="'+sa(e)+'"'}function ts(e){return'link[rel="stylesheet"]['+e+"]"}function b0(e){return J({},e,{"data-precedence":e.precedence,precedence:null})}function ng(e,t,l,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Lt(t,"link",l),At(t),e.head.appendChild(t))}function gn(e){return'[src="'+sa(e)+'"]'}function as(e){return"script[async]"+e}function y0(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+sa(l.href)+'"]');if(n)return t.instance=n,At(n),n;var s=J({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),At(n),Lt(n,"style",s),ur(n,l.precedence,e),t.instance=n;case"stylesheet":s=fn(l.href);var r=e.querySelector(ts(s));if(r)return t.state.loading|=4,t.instance=r,At(r),r;n=b0(l),(s=fa.get(s))&&Mc(n,s),r=(e.ownerDocument||e).createElement("link"),At(r);var i=r;return i._p=new Promise(function(c,x){i.onload=c,i.onerror=x}),Lt(r,"link",n),t.state.loading|=4,ur(r,l.precedence,e),t.instance=r;case"script":return r=gn(l.src),(s=e.querySelector(as(r)))?(t.instance=s,At(s),s):(n=l,(s=fa.get(r))&&(n=J({},l),kc(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),At(s),Lt(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(f(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,ur(n,l.precedence,e));return t.instance}function ur(e,t,l){for(var n=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,r=s,i=0;i<n.length;i++){var c=n[i];if(c.dataset.precedence===t)r=c;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function Mc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function kc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var dr=null;function j0(e,t,l){if(dr===null){var n=new Map,s=dr=new Map;s.set(l,n)}else s=dr,n=s.get(l),n||(n=new Map,s.set(l,n));if(n.has(e))return n;for(n.set(e,null),l=l.getElementsByTagName(e),s=0;s<l.length;s++){var r=l[s];if(!(r[vn]||r[zt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var i=r.getAttribute(t)||"";i=e+i;var c=n.get(i);c?c.push(r):n.set(i,[r])}}return n}function N0(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function sg(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function w0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function rg(e,t,l,n){if(l.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var s=fn(n.href),r=t.querySelector(ts(s));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=mr.bind(e),t.then(e,e)),l.state.loading|=4,l.instance=r,At(r);return}r=t.ownerDocument||t,n=b0(n),(s=fa.get(s))&&Mc(n,s),r=r.createElement("link"),At(r);var i=r;i._p=new Promise(function(c,x){i.onload=c,i.onerror=x}),Lt(r,"link",n),l.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,t),(t=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=mr.bind(e),t.addEventListener("load",l),t.addEventListener("error",l))}}var Ac=0;function ig(e,t){return e.stylesheets&&e.count===0&&gr(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var n=setTimeout(function(){if(e.stylesheets&&gr(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&Ac===0&&(Ac=62500*Gf());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&gr(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>Ac?50:800)+t);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(s)}}:null}function mr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fr=null;function gr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fr=new Map,t.forEach(cg,e),fr=null,mr.call(e))}function cg(e,t){if(!(t.state.loading&4)){var l=fr.get(e);if(l)var n=l.get(null);else{l=new Map,fr.set(e,l);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var i=s[r];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(l.set(i.dataset.precedence,i),n=i)}n&&l.set(null,n)}s=t.instance,i=s.getAttribute("data-precedence"),r=l.get(i)||n,r===n&&l.set(null,s),l.set(i,s),this.count++,n=mr.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var ls={$$typeof:Me,Provider:null,Consumer:null,_currentValue:p,_currentValue2:p,_threadCount:0};function og(e,t,l,n,s,r,i,c,x){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=la(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.hiddenUpdates=la(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function S0(e,t,l,n,s,r,i,c,x,R,Y,X){return e=new og(e,t,l,i,x,R,Y,X,c),t=1,r===!0&&(t|=24),r=$t(3,null,null,t),e.current=r,r.stateNode=e,t=ii(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:n,isDehydrated:l,cache:t},di(r),e}function C0(e){return e?(e=Ql,e):Ql}function M0(e,t,l,n,s,r){s=C0(s),n.context===null?n.context=s:n.pendingContext=s,n=$a(t),n.payload={element:l},r=r===void 0?null:r,r!==null&&(n.callback=r),l=Wa(e,n,t),l!==null&&(Ft(l,e,t),Bn(l,e,t))}function k0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function Ec(e,t){k0(e,t),(e=e.alternate)&&k0(e,t)}function A0(e){if(e.tag===13||e.tag===31){var t=vl(e,67108864);t!==null&&Ft(t,e,67108864),Ec(e,67108864)}}function E0(e){if(e.tag===13||e.tag===31){var t=aa();t=pn(t);var l=vl(e,t);l!==null&&Ft(l,e,t),Ec(e,t)}}var hr=!0;function ug(e,t,l,n){var s=o.T;o.T=null;var r=k.p;try{k.p=2,zc(e,t,l,n)}finally{k.p=r,o.T=s}}function dg(e,t,l,n){var s=o.T;o.T=null;var r=k.p;try{k.p=8,zc(e,t,l,n)}finally{k.p=r,o.T=s}}function zc(e,t,l,n){if(hr){var s=Dc(n);if(s===null)xc(e,t,n,xr,l),D0(e,n);else if(fg(s,e,t,l,n))n.stopPropagation();else if(D0(e,n),t&4&&-1<mg.indexOf(e)){for(;s!==null;){var r=Rl(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var i=Fe(r.pendingLanes);if(i!==0){var c=r;for(c.pendingLanes|=2,c.entangledLanes|=2;i;){var x=1<<31-b(i);c.entanglements[1]|=x,i&=~x}Na(r),(et&6)===0&&(Ws=K()+500,$n(0))}}break;case 31:case 13:c=vl(r,2),c!==null&&Ft(c,r,2),er(),Ec(r,2)}if(r=Dc(n),r===null&&xc(e,t,n,xr,l),r===s)break;s=r}s!==null&&n.stopPropagation()}else xc(e,t,n,null,l)}}function Dc(e){return e=Rr(e),Tc(e)}var xr=null;function Tc(e){if(xr=null,e=Tl(e),e!==null){var t=A(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=y(t),e!==null)return e;e=null}else if(l===31){if(e=te(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return xr=e,null}function z0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case Te:return 2;case Xe:return 8;case Pe:case ft:return 32;case ot:return 268435456;default:return 32}default:return 32}}var Rc=!1,ol=null,ul=null,dl=null,ns=new Map,ss=new Map,ml=[],mg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D0(e,t){switch(e){case"focusin":case"focusout":ol=null;break;case"dragenter":case"dragleave":ul=null;break;case"mouseover":case"mouseout":dl=null;break;case"pointerover":case"pointerout":ns.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ss.delete(t.pointerId)}}function rs(e,t,l,n,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:l,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},t!==null&&(t=Rl(t),t!==null&&A0(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function fg(e,t,l,n,s){switch(t){case"focusin":return ol=rs(ol,e,t,l,n,s),!0;case"dragenter":return ul=rs(ul,e,t,l,n,s),!0;case"mouseover":return dl=rs(dl,e,t,l,n,s),!0;case"pointerover":var r=s.pointerId;return ns.set(r,rs(ns.get(r)||null,e,t,l,n,s)),!0;case"gotpointercapture":return r=s.pointerId,ss.set(r,rs(ss.get(r)||null,e,t,l,n,s)),!0}return!1}function T0(e){var t=Tl(e.target);if(t!==null){var l=A(t);if(l!==null){if(t=l.tag,t===13){if(t=y(l),t!==null){e.blockedOn=t,Yc(e.priority,function(){E0(l)});return}}else if(t===31){if(t=te(l),t!==null){e.blockedOn=t,Yc(e.priority,function(){E0(l)});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=Dc(e.nativeEvent);if(l===null){l=e.nativeEvent;var n=new l.constructor(l.type,l);Tr=n,l.target.dispatchEvent(n),Tr=null}else return t=Rl(l),t!==null&&A0(t),e.blockedOn=l,!1;t.shift()}return!0}function R0(e,t,l){pr(e)&&l.delete(t)}function gg(){Rc=!1,ol!==null&&pr(ol)&&(ol=null),ul!==null&&pr(ul)&&(ul=null),dl!==null&&pr(dl)&&(dl=null),ns.forEach(R0),ss.forEach(R0)}function vr(e,t){e.blockedOn===t&&(e.blockedOn=null,Rc||(Rc=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,gg)))}var br=null;function L0(e){br!==e&&(br=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){br===e&&(br=null);for(var t=0;t<e.length;t+=3){var l=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(Tc(n||l)===null)continue;break}var r=Rl(l);r!==null&&(e.splice(t,3),t-=3,Di(r,{pending:!0,data:s,method:l.method,action:n},n,s))}}))}function hn(e){function t(x){return vr(x,e)}ol!==null&&vr(ol,e),ul!==null&&vr(ul,e),dl!==null&&vr(dl,e),ns.forEach(t),ss.forEach(t);for(var l=0;l<ml.length;l++){var n=ml[l];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ml.length&&(l=ml[0],l.blockedOn===null);)T0(l),l.blockedOn===null&&ml.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(n=0;n<l.length;n+=3){var s=l[n],r=l[n+1],i=s[Jt]||null;if(typeof r=="function")i||L0(l);else if(i){var c=null;if(r&&r.hasAttribute("formAction")){if(s=r,i=r[Jt]||null)c=i.formAction;else if(Tc(s)!==null)continue}else c=i.action;typeof c=="function"?l[n+1]=c:(l.splice(n,3),n-=3),L0(l)}}}function B0(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(i){return s=i})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),n||setTimeout(l,20)}function l(){if(!n&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(l,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function Lc(e){this._internalRoot=e}yr.prototype.render=Lc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(f(409));var l=t.current,n=aa();M0(l,n,e,t,null,null)},yr.prototype.unmount=Lc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;M0(e.current,2,null,e,null,null),er(),t[Dl]=null}};function yr(e){this._internalRoot=e}yr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qc();e={blockedOn:null,target:e,priority:t};for(var l=0;l<ml.length&&t!==0&&t<ml[l].priority;l++);ml.splice(l,0,e),l===0&&T0(e)}};var I0=H.version;if(I0!=="19.2.0")throw Error(f(527,I0,"19.2.0"));k.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(f(188)):(e=Object.keys(e).join(","),Error(f(268,e)));return e=g(t),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var hg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:o,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jr.isDisabled&&jr.supportsFiber)try{de=jr.inject(hg),Ne=jr}catch{}}return cs.createRoot=function(e,t){if(!C(e))throw Error(f(299));var l=!1,n="",s=qu,r=Qu,i=Yu;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=S0(e,1,!1,null,null,l,n,null,s,r,i,B0),e[Dl]=t.current,hc(e),new Lc(t)},cs.hydrateRoot=function(e,t,l){if(!C(e))throw Error(f(299));var n=!1,s="",r=qu,i=Qu,c=Yu,x=null;return l!=null&&(l.unstable_strictMode===!0&&(n=!0),l.identifierPrefix!==void 0&&(s=l.identifierPrefix),l.onUncaughtError!==void 0&&(r=l.onUncaughtError),l.onCaughtError!==void 0&&(i=l.onCaughtError),l.onRecoverableError!==void 0&&(c=l.onRecoverableError),l.formState!==void 0&&(x=l.formState)),t=S0(e,1,!0,t,l??null,n,s,x,r,i,c,B0),t.context=C0(null),l=t.current,n=aa(),n=pn(n),s=$a(n),s.callback=null,Wa(l,s,n),l=n,t.current.lanes=l,Mt(t,l),Na(t),e[Dl]=t.current,hc(e),new yr(t)},cs.version="19.2.0",cs}var V0;function Sg(){if(V0)return Oc.exports;V0=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(H){console.error(H)}}return u(),Oc.exports=wg(),Oc.exports}var Cg=Sg();/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kg=u=>u.replace(/^([A-Z])|[\s-_]+(\w)/g,(H,I,f)=>f?f.toUpperCase():I.toLowerCase()),Z0=u=>{const H=kg(u);return H.charAt(0).toUpperCase()+H.slice(1)},W0=(...u)=>u.filter((H,I,f)=>!!H&&H.trim()!==""&&f.indexOf(H)===I).join(" ").trim(),Ag=u=>{for(const H in u)if(H.startsWith("aria-")||H==="role"||H==="title")return!0};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=m.forwardRef(({color:u="currentColor",size:H=24,strokeWidth:I=2,absoluteStrokeWidth:f,className:C="",children:A,iconNode:y,...te},j)=>m.createElement("svg",{ref:j,...Eg,width:H,height:H,stroke:u,strokeWidth:f?Number(I)*24/Number(H):I,className:W0("lucide",C),...!A&&!Ag(te)&&{"aria-hidden":"true"},...te},[...y.map(([g,_])=>m.createElement(g,_)),...Array.isArray(A)?A:[A]]));/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=(u,H)=>{const I=m.forwardRef(({className:f,...C},A)=>m.createElement(zg,{ref:A,iconNode:H,className:W0(`lucide-${Mg(Z0(u))}`,`lucide-${u}`,f),...C}));return I.displayName=Z0(u),I};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Sr=Xt("circle-alert",Dg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],K0=Xt("circle-check-big",Tg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],em=Xt("cog",Rg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Bg=Xt("eye-off",Lg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Og=Xt("eye",Ig);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Ug=Xt("file",_g);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],qc=Xt("folder-open",Hg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],tm=Xt("key",Gg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],F0=Xt("loader-circle",Jg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],am=Xt("refresh-cw",qg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Yg=Xt("save",Qg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],os=Xt("settings",Vg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],Fg=Xt("sliders-vertical",Zg);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wr=Xt("x",Xg),ct=({checked:u,onChange:H,disabled:I=!1,className:f="",ariaLabel:C})=>a.jsx("button",{type:"button",role:"switch","aria-checked":u,"aria-label":C,disabled:I,onClick:()=>!I&&H(!u),style:{position:"relative",display:"inline-flex",alignItems:"center",width:"44px",height:"24px",borderRadius:"12px",border:"none",cursor:I?"not-allowed":"pointer",backgroundColor:u?"#2563eb":"#e5e7eb",transition:"background-color 0.2s ease-in-out",opacity:I?.5:1,outline:"none"},className:f,children:a.jsx("span",{style:{position:"absolute",left:u?"22px":"2px",width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease-in-out",transform:"translateX(0)"}})}),xn=({label:u,value:H,onChange:I,onValidation:f,type:C,fileTypes:A=[],accept:y,placeholder:te="Select file or directory",disabled:j=!1,required:g=!1,className:_,error:J})=>{const[P,re]=m.useState("idle"),[se,me]=m.useState(""),[$,Se]=m.useState("idle"),[xe,Me]=m.useState([]),[ye,ke]=m.useState(!1),[be,le]=m.useState(!1),je=m.useRef(null),O=m.useRef(null),pe=m.useRef(null),z=m.useMemo(()=>y?y.split(",").map(G=>G.trim().startsWith(".")?G.trim():`.${G.trim()}`):A,[y,A]);m.useEffect(()=>{},[]),m.useEffect(()=>{H&&window.electronAPI?.validatePath?ee(H):(re("idle"),me(""),f?.(!1))},[H,f]),m.useEffect(()=>{const G=d=>{pe.current&&!pe.current.contains(d.target)&&ke(!1)};return document.addEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[]);const q=async G=>{},ee=m.useCallback(async G=>{if(!G||G.trim()==="")return{isValid:!1,message:g?"Path is required":""};re("validating");try{if(window.electronAPI?.validatePath){const d=await window.electronAPI.validatePath(G,C,z);return d.isValid?(re("valid"),me(""),f?.(!0),{isValid:!0}):(re("invalid"),me(d.message||"Invalid path"),f?.(!1),{isValid:!1,message:d.message})}else{const d=G.length>0;return re(d?"valid":"invalid"),me(d?"":"Invalid path"),f?.(d),{isValid:d}}}catch{return re("invalid"),me("Error validating path"),f?.(!1),{isValid:!1,message:"Error validating path"}}},[C,z,g,f]),ve=m.useCallback(async()=>{if(!(j||be))try{if(le(!0),window.electronAPI?.selectFile){const G=await window.electronAPI.selectFile({type:C,fileTypes:z.length>0?z:void 0,title:`Select ${C==="directory"?"Directory":"File"}`});G.success&&G.filePath&&(I(G.filePath),await q(G.filePath))}else console.warn("Electron API not available - file dialog not supported in test environment")}catch(G){console.error("Error opening file dialog:",G),me("Error opening file dialog")}finally{le(!1)}},[j,be,C,z,H,I]),ne=m.useCallback(G=>{const d=G.target.value;I(d)},[I]);m.useCallback(G=>{G.preventDefault(),G.stopPropagation(),j||Se("dragover")},[j]),m.useCallback(G=>{G.preventDefault(),G.stopPropagation(),je.current?.contains(G.relatedTarget)||Se("idle")},[]),m.useCallback(async G=>{if(G.preventDefault(),G.stopPropagation(),Se("idle"),!j)try{const d=Array.from(G.dataTransfer.files);if(d.length===0)return;if(z.length>0){const ce=d[0].name.toLowerCase();if(!z.some(w=>ce.endsWith(w.toLowerCase()))){me("Unsupported file type"),f?.(!1);return}}const L=d[0];if(window.electronAPI?.selectFile){console.log("Drag-and-drop detected, but using file dialog for path selection"),me("Please use the Browse button to select files"),f?.(!1);return}else{console.log("Drag-and-drop not supported in web environment"),me("Drag-and-drop not supported in this environment"),f?.(!1);return}}catch(d){console.error("Error handling dropped files:",d),me("Error processing dropped files")}},[j,C,I,z,f]),m.useCallback(async G=>{I(G),ke(!1),await q()},[I]);const o=m.useCallback(()=>{I(""),ke(!1)},[I]),k=()=>{const G="flex-1 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors",d=_||"";return j?`${G} bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed ${d}`:J||P==="invalid"&&se?`${G} border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500 ${d}`:P==="valid"?`${G} border-green-300 text-green-900 focus:ring-green-500 focus:border-green-500 ${d}`:`${G} border-gray-300 focus:ring-blue-500 focus:border-blue-500 ${d}`},p=()=>null,V=()=>P==="validating"?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[a.jsx(F0,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Validating path..."})]}):P==="valid"?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[a.jsx(K0,{className:"w-4 h-4"}),a.jsx("span",{children:"Valid path"})]}):P==="invalid"&&se?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",role:"alert",children:[a.jsx(Sr,{className:"w-4 h-4"}),a.jsx("span",{children:se})]}):null;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{htmlFor:`file-selector-${u.replace(/\s+/g,"-").toLowerCase()}`,className:"block text-sm font-medium text-gray-700",children:[u,g&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:O,id:`file-selector-${u.replace(/\s+/g,"-").toLowerCase()}`,type:"text",value:H,onChange:ne,className:k(),placeholder:te,disabled:j,readOnly:C!=="file"&&C!=="directory","aria-describedby":`${u}-help ${u}-error`,"aria-invalid":P==="invalid"}),H&&a.jsx("button",{type:"button",onClick:o,disabled:j,className:"px-3 py-2 border border-gray-300 rounded-md text-gray-600 hover:text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Clear path",children:a.jsx(wr,{className:"w-4 h-4"})}),a.jsxs("button",{type:"button",onClick:ve,disabled:j||be,className:"px-4 py-2 bg-blue-600 text-white border border-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[be?a.jsx(F0,{className:"w-4 h-4 animate-spin"}):C==="directory"?a.jsx(qc,{className:"w-4 h-4"}):a.jsx(Ug,{className:"w-4 h-4"}),"Browse"]})]}),a.jsx(p,{}),a.jsx(V,{}),J&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",role:"alert",children:[a.jsx(Sr,{className:"w-4 h-4"}),a.jsx("span",{children:J})]}),a.jsx("div",{id:`${u}-help`,className:"text-xs text-gray-500",children:C==="directory"?"Select a directory":"Select a file"})]})},Pg=({isOpen:u,title:H="Reset to Defaults",description:I="Choose how you want to reset. You can reset everything (including API keys) or keep your API keys and reset all other settings.",onClose:f,onFullReset:C,onSoftReset:A})=>u?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:H}),a.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 transition-colors p-1","aria-label":"Close",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),I&&a.jsx("p",{className:"text-gray-600 mb-4",children:I}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:C,className:"w-full box-border bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-normal break-words text-center",children:"Full Reset (clear API keys)"}),a.jsx("button",{onClick:A,className:"w-full box-border bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-normal break-words text-center",children:"Reset (keep API keys)"}),a.jsx("button",{onClick:f,className:"w-full box-border bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors whitespace-normal break-words text-center",children:"Cancel"})]})]})}):null,Nr={apiKeys:{openai:"",piapi:"",runware:"",removeBg:""},filePaths:{outputDirectory:"",tempDirectory:"",systemPromptFile:"",keywordsFile:"",qualityCheckPromptFile:"",metadataPromptFile:""},parameters:{processMode:"relax",aspectRatios:["1:1","16:9","9:16"],mjVersion:"6.1",openaiModel:"gpt-4o",runwareModel:"runware:101@1",runwareDimensionsCsv:"",runwareFormat:"png",variations:1,label:"",pollingTimeout:15,pollingInterval:1,enablePollingTimeout:!0,keywordRandom:!1,count:1,generationRetryAttempts:1,generationRetryBackoffMs:0},processing:{removeBg:!1,imageConvert:!1,imageEnhancement:!1,sharpening:5,saturation:1.4,convertToJpg:!1,trimTransparentBackground:!1,jpgBackground:"white",jpgQuality:100,pngQuality:100,removeBgSize:"auto"},ai:{runQualityCheck:!0,runMetadataGen:!0},advanced:{debugMode:!1}},$g=[{id:"api-keys",label:"API Keys",icon:tm},{id:"files",label:"File Paths",icon:qc},{id:"parameters",label:"Parameters",icon:Fg},{id:"processing",label:"Processing",icon:em},{id:"ai",label:"AI Features",icon:os},{id:"advanced",label:"Advanced",icon:os}],Wg=({onSave:u,onReset:H,onBack:I,onOpenDashboard:f,isLoading:C=!1,error:A=null,success:y=null})=>{const[te,j]=m.useState(Nr),[g,_]=m.useState(Nr),[J,P]=m.useState(0),[re,se]=m.useState("api-keys"),[me,$]=m.useState(!1),[Se,xe]=m.useState({openai:!1,piapi:!1,runware:!1,removeBg:!1}),[Me,ye]=m.useState(!1),[ke,be]=m.useState(!1),[le,je]=m.useState(!1),[O,pe]=m.useState(!1),z=m.useRef({});m.useEffect(()=>{(async()=>{try{if(window.electronAPI&&window.electronAPI.getSettings){const w=await window.electronAPI.getSettings();w&&w.success&&w.settings&&(j(w.settings),_(w.settings))}else console.log("Electron API not available, using default settings")}catch(w){console.error("Error loading settings:",w)}})()},[]);const q=(M,w)=>ae=>{const fe=ae.target,lt=fe.type==="number"?fe.value===""?"":parseInt(fe.value,10):fe.value;_(Ve=>({...Ve,[M]:{...Ve[M],[w]:lt}})),$(!0)},ee=(M,w)=>ae=>{_(fe=>({...fe,[M]:{...fe[M],[w]:ae}})),$(!0)},ve=M=>{xe(w=>({...w,[M]:!w[M]}))};m.useEffect(()=>{const M=w=>{w.key==="Escape"&&(ye(!1),be(!1))};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[]);const ne=async()=>{try{window.electronAPI&&window.electronAPI.saveSettings&&await window.electronAPI.saveSettings(g),j(g),$(!1),be(!0),setTimeout(()=>be(!1),3e3),u&&u(te)}catch(M){console.error("Error saving settings:",M),ye(!0),setTimeout(()=>ye(!1),3e3)}},o=()=>{pe(!0)},k=M=>{const w=M?Nr.apiKeys:g.apiKeys,ae={...Nr,apiKeys:w};j(ae),_(ae),$(!0),P(fe=>fe+1),pe(!1),H&&H()};m.useEffect(()=>{A&&ye(!0)},[A]),m.useEffect(()=>{y&&(be(!0),setTimeout(()=>be(!1),3e3))},[y]);const p=()=>a.jsxs("div",{className:"space-y-6","data-testid":"api-keys-section",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"API Keys"}),a.jsx(tm,{className:"h-5 w-5 text-gray-400"})]}),a.jsx("div",{className:"space-y-4",children:Object.entries({openai:"OpenAI API Key",runware:"Runware API Key",removeBg:"Remove.bg API Key"}).map(([M,w])=>{const ae=`apiKeys-${M}`;return a.jsxs("div",{children:[a.jsx("label",{htmlFor:`${M}-key`,className:"block text-sm font-medium text-gray-700 mb-2",children:w}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:`${M}-key`,"data-testid":`${M}-api-key-input`,ref:fe=>{z.current[ae]=fe},type:Se[M]?"text":"password",defaultValue:g.apiKeys[M],onBlur:fe=>{const Re=fe.currentTarget.value;_(lt=>({...lt,apiKeys:{...lt.apiKeys,[M]:Re}})),$(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`Enter ${M} API key...`}),a.jsx("button",{type:"button",onClick:()=>ve(M),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:Se[M]?a.jsx(Bg,{className:"h-4 w-4 text-gray-400"}):a.jsx(Og,{className:"h-4 w-4 text-gray-400"})})]})]},M)})})]}),V=()=>a.jsxs("div",{className:"space-y-6","data-testid":"file-paths-section",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"File Paths"}),a.jsx(qc,{className:"h-5 w-5 text-gray-400"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(xn,{label:"Output Directory",value:g.filePaths.outputDirectory,onChange:M=>q("filePaths","outputDirectory")({target:{value:M}}),type:"directory",placeholder:"Select directory for processed images",required:!1}),a.jsx(xn,{label:"Temp Directory",value:g.filePaths.tempDirectory,onChange:M=>q("filePaths","tempDirectory")({target:{value:M}}),type:"directory",placeholder:"Select directory for temporary files",required:!1}),a.jsx(xn,{label:"System Prompt File",value:g.filePaths.systemPromptFile,onChange:M=>q("filePaths","systemPromptFile")({target:{value:M}}),type:"file",fileTypes:[".txt"],placeholder:"Select system prompt file (.txt only)",required:!1}),a.jsx(xn,{label:"Keywords File",value:g.filePaths.keywordsFile,onChange:M=>q("filePaths","keywordsFile")({target:{value:M}}),type:"file",fileTypes:[".txt",".csv"],placeholder:"Select keywords file (.txt or .csv)",required:!1}),a.jsx(xn,{label:"Quality Check Prompt File",value:g.filePaths.qualityCheckPromptFile,onChange:M=>q("filePaths","qualityCheckPromptFile")({target:{value:M}}),type:"file",fileTypes:[".txt"],placeholder:"Select quality check prompt file (.txt only)",required:!1}),a.jsx(xn,{label:"Metadata Prompt File",value:g.filePaths.metadataPromptFile,onChange:M=>q("filePaths","metadataPromptFile")({target:{value:M}}),type:"file",fileTypes:[".txt"],placeholder:"Select metadata prompt file (.txt only)",required:!1})]})]}),G=()=>a.jsxs("div",{className:"space-y-6","data-testid":"parameters-section",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI Model Parameters"}),a.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure parameters for Runware and OpenAI."})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"job-label",className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Name / Label"}),a.jsx("input",{id:"job-label",type:"text",defaultValue:g.parameters?.label||"",onBlur:M=>{const w=M.currentTarget.value;_(ae=>({...ae,parameters:{...ae.parameters,label:w}})),$(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional label shown in Dashboard and Job views"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If empty, a default job_timestamp label will be used."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Runware Settings"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"runware-model",className:"block text-sm font-medium text-gray-700 mb-2",children:"Runware Model"}),a.jsx("input",{id:"runware-model",type:"text",defaultValue:g.parameters.runwareModel||"runware:101@1",onBlur:M=>{const w=M.currentTarget.value;_(ae=>({...ae,parameters:{...ae.parameters,runwareModel:w||"runware:101@1"}})),$(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"runware:101@1"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Freeform model id. Defaults to runware:101@1."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"runware-dimensions",className:"block text-sm font-medium text-gray-700 mb-2",children:"Image Dimensions (CSV)"}),a.jsx("input",{id:"runware-dimensions",type:"text",defaultValue:g.parameters.runwareDimensionsCsv||"",onBlur:M=>{const w=(M.currentTarget.value||"").trim();_(ae=>({...ae,parameters:{...ae.parameters,runwareDimensionsCsv:w}})),$(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"1024x1024,1280x720,720x1280"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to use provider defaults (typically square)."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"runware-format",className:"block text-sm font-medium text-gray-700 mb-2",children:"Output Format"}),a.jsxs("select",{id:"runware-format",value:g.parameters.runwareFormat||"png",onChange:q("parameters","runwareFormat"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"png",children:"PNG"}),a.jsx("option",{value:"jpg",children:"JPG"}),a.jsx("option",{value:"webp",children:"WEBP"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Processing conversions support JPG/PNG only in this story."})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"OpenAI Settings"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"openai-model",className:"block text-sm font-medium text-gray-700 mb-2",children:"OpenAI Model"}),a.jsx("input",{id:"openai-model",type:"text",defaultValue:g.parameters.openaiModel,onBlur:M=>{const w=M.currentTarget.value;_(ae=>({...ae,parameters:{...ae.parameters,openaiModel:w}})),$(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., gpt-4o, gpt-4.1, gpt-4o-mini"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Type any supported model identifier."})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enable Generation Timeout"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Use custom generation timeout instead of default (30 seconds)"})]}),a.jsx(ct,{checked:g.parameters.enablePollingTimeout,onChange:ee("parameters","enablePollingTimeout")})]}),g.parameters.enablePollingTimeout&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"polling-timeout",className:"block text-sm font-medium text-gray-700 mb-2",children:"Generation Timeout (minutes)"}),a.jsx("input",{id:"polling-timeout",ref:M=>{z.current["parameters-pollingTimeout"]=M},type:"number",defaultValue:String(g.parameters.pollingTimeout),onBlur:M=>{const w=parseInt(M.currentTarget.value||"0",10),ae=Math.min(60,Math.max(1,isNaN(w)?1:w));_(fe=>({...fe,parameters:{...fe.parameters,pollingTimeout:ae}})),$(!0)},onWheel:M=>{M.currentTarget.blur()},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"60"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used as HTTP timeout for Runware (minutes)"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Runware Advanced Controls"}),a.jsx(ct,{checked:le,onChange:M=>je(M)})]}),a.jsx("p",{className:"text-xs text-gray-600",children:"Note: Check Runware model docs for valid ranges and supported fields. Defaults may be used if fields are empty. Not all models support these settings."}),le&&a.jsxs("div",{children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"runware-lora",className:"block text-sm font-medium text-gray-700 mb-2",children:"LoRA list (model:weight per line)"}),a.jsx("textarea",{id:"runware-lora",defaultValue:Array.isArray(g.parameters.runwareAdvanced?.lora)?g.parameters.runwareAdvanced.lora.map(M=>`${M.model}:${M.weight??1}`).join(`
`):"",onBlur:M=>{const ae=M.currentTarget.value.split(`
`).map(fe=>fe.trim()).filter(Boolean).map(fe=>{const[Re,lt]=fe.split(":").map(Ve=>Ve.trim());return Re?{model:Re,weight:Number(lt)||1}:null}).filter(Boolean);_(fe=>({...fe,parameters:{...fe.parameters,runwareAdvanced:{...fe.parameters.runwareAdvanced||{},lora:ae}}})),$(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:`flux-lora:0.8
artist-style:0.5`})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"runware-cfg",className:"block text-sm font-medium text-gray-700 mb-2",children:"CFG Scale"}),a.jsx("input",{id:"runware-cfg",type:"number",defaultValue:String(g.parameters.runwareAdvanced?.CFGScale??""),onBlur:M=>{const w=M.currentTarget.value.trim(),ae=w===""?void 0:Number(w);_(fe=>({...fe,parameters:{...fe.parameters,runwareAdvanced:{...fe.parameters.runwareAdvanced||{},CFGScale:isNaN(Number(ae))?void 0:ae}}})),$(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"runware-steps",className:"block text-sm font-medium text-gray-700 mb-2",children:"Steps"}),a.jsx("input",{id:"runware-steps",type:"number",defaultValue:String(g.parameters.runwareAdvanced?.steps??""),onBlur:M=>{const w=M.currentTarget.value.trim(),ae=w===""?void 0:Number(w);_(fe=>({...fe,parameters:{...fe.parameters,runwareAdvanced:{...fe.parameters.runwareAdvanced||{},steps:isNaN(Number(ae))?void 0:ae}}})),$(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check NSFW"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Provider-side NSFW checking"})]}),a.jsx(ct,{checked:!!g.parameters.runwareAdvanced?.checkNSFW,onChange:M=>{_(w=>({...w,parameters:{...w.parameters,runwareAdvanced:{...w.parameters.runwareAdvanced||{},checkNSFW:M}}})),$(!0)}})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"runware-scheduler",className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduler"}),a.jsx("input",{id:"runware-scheduler",type:"text",defaultValue:g.parameters.runwareAdvanced?.scheduler||"",onBlur:M=>{const w=M.currentTarget.value.trim();_(ae=>({...ae,parameters:{...ae.parameters,runwareAdvanced:{...ae.parameters.runwareAdvanced||{},scheduler:w||void 0}}})),$(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(optional)"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Generation Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"count",className:"block text-sm font-medium text-gray-700 mb-2",children:"Generations count"}),a.jsx("input",{id:"count",type:"number",defaultValue:String(g.parameters.count),onBlur:M=>{const w=parseInt(M.currentTarget.value||"1",10),ae=Math.min(2500,Math.max(1,isNaN(w)?1:w)),fe=Math.max(1,Math.min(20,Number(g.parameters.variations||1))),Re=Math.max(1,Math.min(20,Math.floor(1e4/ae))),lt=Math.min(fe,Re);_(Ve=>({...Ve,parameters:{...Ve.parameters,count:ae,variations:lt}})),$(!0)},onWheel:M=>{M.currentTarget.blur()},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"2500"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of generations (up to 2500 generations)."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"runware-variations",className:"block text-sm font-medium text-gray-700 mb-2",children:"Variations per generation (120)"}),a.jsx("input",{id:"runware-variations",type:"number",defaultValue:String(g.parameters.variations??1),onBlur:M=>{const w=parseInt(M.currentTarget.value||"1",10),ae=Math.max(1,Math.min(20,isNaN(w)?1:w)),fe=Math.max(1,Number(g.parameters.count||1)),Re=Math.max(1,Math.floor(1e4/ae)),lt=Math.min(fe,Re);_(Ve=>({...Ve,parameters:{...Ve.parameters,variations:ae,count:lt}})),$(!0)},onWheel:M=>{M.currentTarget.blur()},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"20"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total images = Generations  Variations (cap 10,000)"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Random Keywords"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Use random keywords from the keywords file"})]}),a.jsx(ct,{checked:g.parameters.keywordRandom,onChange:ee("parameters","keywordRandom")})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gen-retry-attempts",className:"block text-sm font-medium text-gray-700 mb-2",children:"Generation Retry Attempts"}),a.jsx("input",{id:"gen-retry-attempts",type:"number",defaultValue:String(g.parameters.generationRetryAttempts??1),onBlur:M=>{const w=parseInt(M.currentTarget.value||"0",10),ae=Math.min(5,Math.max(0,isNaN(w)?0:w));_(fe=>({...fe,parameters:{...fe.parameters,generationRetryAttempts:ae}})),$(!0)},onWheel:M=>{M.currentTarget.blur()},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"5"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of automatic retries per generation (05)."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gen-retry-backoff",className:"block text-sm font-medium text-gray-700 mb-2",children:"Retry Backoff (ms)"}),a.jsx("input",{id:"gen-retry-backoff",type:"number",defaultValue:String(g.parameters.generationRetryBackoffMs??0),onBlur:M=>{const w=parseInt(M.currentTarget.value||"0",10),ae=Math.min(6e4,Math.max(0,isNaN(w)?0:w));_(fe=>({...fe,parameters:{...fe.parameters,generationRetryBackoffMs:ae}})),$(!0)},onWheel:M=>{M.currentTarget.blur()},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"60000",step:"100"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Delay between retries (060000 ms)."})]})]})]})]}),d=()=>{const M=g.processing.removeBg,w=g.processing.imageConvert,ae=g.processing.removeBg,fe=g.processing.removeBg&&g.processing.imageConvert&&g.processing.convertToJpg,Re=g.processing.imageConvert;return a.jsxs("div",{className:"space-y-6","data-testid":"processing-section",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Image Processing"}),a.jsx(em,{className:"h-5 w-5 text-gray-400"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remove Background"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Remove background from generated images"})]}),a.jsx(ct,{checked:g.processing.removeBg,onChange:ee("processing","removeBg")})]}),M&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"remove-bg-size",className:"block text-sm font-medium text-gray-700 mb-2",children:"Remove.bg Size"}),a.jsxs("select",{id:"remove-bg-size",value:g.processing.removeBgSize,onChange:q("processing","removeBgSize"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"auto",children:"Auto"}),a.jsx("option",{value:"preview",children:"Preview"}),a.jsx("option",{value:"full",children:"Full"}),a.jsx("option",{value:"50MP",children:"50MP"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Size setting for Remove.bg API"})]}),ae&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trim Transparent Background"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Remove transparent areas from images (PNG only)"})]}),a.jsx(ct,{checked:g.processing.trimTransparentBackground,onChange:ee("processing","trimTransparentBackground")})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image Convert"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Enable image conversion and processing"})]}),a.jsx(ct,{checked:g.processing.imageConvert,onChange:ee("processing","imageConvert")})]}),w&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"convert-format",className:"block text-sm font-medium text-gray-700 mb-2",children:"Convert Format"}),a.jsxs("select",{id:"convert-format",value:g.processing.convertToJpg?"jpg":"png",onChange:lt=>{const Ve=lt.target.value==="jpg";_(gt=>({...gt,processing:{...gt.processing,convertToJpg:Ve}})),$(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"png",children:"PNG"}),a.jsx("option",{value:"jpg",children:"JPG"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Convert images to this format"})]}),Re&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"jpg-quality",className:"block text-sm font-medium text-gray-700 mb-2",children:"JPG Quality (1-100)"}),a.jsx("input",{id:"jpg-quality",type:"number",value:g.processing.jpgQuality,onChange:q("processing","jpgQuality"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"100"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quality setting for JPG conversion"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"png-quality",className:"block text-sm font-medium text-gray-700 mb-2",children:"PNG Quality (1-100)"}),a.jsx("input",{id:"png-quality",type:"number",value:g.processing.pngQuality,onChange:q("processing","pngQuality"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"100"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quality setting for PNG conversion"})]}),fe&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"jpg-background",className:"block text-sm font-medium text-gray-700 mb-2",children:"JPG Background Colour"}),a.jsxs("select",{id:"jpg-background",value:g.processing.jpgBackground,onChange:q("processing","jpgBackground"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"white",children:"White"}),a.jsx("option",{value:"black",children:"Black"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Background color for JPG conversion (JPG cannot be transparent)"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image Enhancement"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Apply sharpening and saturation effects"})]}),a.jsx(ct,{checked:g.processing.imageEnhancement,onChange:ee("processing","imageEnhancement")})]}),g.processing.imageEnhancement&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"sharpening",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sharpening Intensity (0-10)"}),a.jsx("input",{id:"sharpening",type:"range",min:"0",max:"10",step:"0.5",value:g.processing.sharpening,onChange:q("processing","sharpening"),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"0 (None)"}),a.jsx("span",{children:g.processing.sharpening}),a.jsx("span",{children:"10 (Maximum)"})]})]}),g.processing.imageEnhancement&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"saturation",className:"block text-sm font-medium text-gray-700 mb-2",children:"Saturation Level (0-2)"}),a.jsx("input",{id:"saturation",type:"range",min:"0",max:"2",step:"0.1",value:g.processing.saturation,onChange:q("processing","saturation"),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"0 (Grayscale)"}),a.jsx("span",{children:g.processing.saturation}),a.jsx("span",{children:"2 (Vibrant)"})]})]})]})]})]})]})},L=()=>a.jsxs("div",{className:"space-y-6","data-testid":"ai-section",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Features"}),a.jsx(os,{className:"h-5 w-5 text-gray-400"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Quality Check"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Use AI to check image quality"})]}),a.jsx(ct,{checked:g.ai.runQualityCheck,onChange:ee("ai","runQualityCheck")})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Metadata Generation"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Generate metadata using AI"})]}),a.jsx(ct,{checked:g.ai.runMetadataGen,onChange:ee("ai","runMetadataGen")})]})]})]}),Z=()=>a.jsxs("div",{className:"space-y-6","data-testid":"advanced-section",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Advanced Settings"}),a.jsx(os,{className:"h-5 w-5 text-gray-400"})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Debug Mode"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Enable detailed logging and debugging"})]}),a.jsx(ct,{checked:g.advanced.debugMode,onChange:ee("advanced","debugMode")})]})})]}),ce=()=>{switch(re){case"api-keys":return a.jsx(p,{});case"files":return a.jsx(V,{});case"parameters":return a.jsx(G,{});case"processing":return a.jsx(d,{});case"ai":return a.jsx(L,{});case"advanced":return a.jsx(Z,{});default:return null}};return a.jsxs("div",{className:"flex h-screen bg-gray-50","data-testid":"settings-panel",children:[a.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(os,{className:"w-6 h-6 text-blue-600"}),a.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Settings"})]}),I&&a.jsx("button",{onClick:I,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Back to main view",children:a.jsx(wr,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Configure your application settings and API keys"}),f&&a.jsx("div",{className:"mt-4 pl-6 pr-16",children:a.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center gap-2 px-3 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors","aria-label":"Open Dashboard",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]})})]}),a.jsx("nav",{className:"flex-1 p-4 pr-8",children:a.jsx("ul",{className:"space-y-1",role:"tablist",children:$g.map(M=>{const w=M.icon,ae=re===M.id;return a.jsx("li",{className:"flex justify-center",children:a.jsxs("button",{role:"tab","aria-selected":ae,"aria-controls":`${M.id}-panel`,"data-testid":`${M.id}-tab`,onClick:()=>se(M.id),onKeyDown:fe=>{(fe.key==="Enter"||fe.key===" ")&&(fe.preventDefault(),se(M.id))},className:`flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors ${ae?"bg-blue-100 text-blue-700 border-blue-200":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[a.jsx(w,{className:"w-4 h-4"}),M.label]})},M.id)})})})]}),a.jsxs("main",{className:"flex-1 flex flex-col",children:[Me&&A&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 m-4 rounded-md",role:"alert","data-testid":"error-message",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Sr,{className:"w-5 h-5 text-red-400 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:A})]}),a.jsx("button",{onClick:()=>ye(!1),className:"text-red-400 hover:text-red-600 transition-colors","aria-label":"Dismiss error",children:a.jsx(wr,{className:"w-4 h-4"})})]})}),ke&&y&&a.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 m-4 rounded-md",role:"alert","data-testid":"success-message",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(K0,{className:"w-5 h-5 text-green-400 mr-2"}),a.jsx("p",{className:"text-sm text-green-700",children:y})]}),a.jsx("button",{onClick:()=>be(!1),className:"text-green-400 hover:text-green-600 transition-colors","aria-label":"Dismiss success",children:a.jsx(wr,{className:"w-4 h-4"})})]})}),a.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:ce()},J)}),a.jsx("div",{className:"border-t border-gray-200 bg-white p-4",children:a.jsxs("div",{className:"flex flex-col items-center justify-center max-w-4xl mx-auto gap-3",children:[a.jsx("div",{className:"h-6 flex items-center justify-center",children:me&&a.jsxs("div",{className:"text-sm text-amber-600 flex items-center gap-2",children:[a.jsx(Sr,{className:"w-4 h-4"}),"You have unsaved changes"]})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:ne,disabled:C||!me,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"save-button",children:[a.jsx(Yg,{className:"w-4 h-4"}),C?"Saving...":"Save Settings"]}),a.jsxs("button",{onClick:o,disabled:C,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"reset-button",children:[a.jsx(am,{className:"w-4 h-4"}),"Reset to Defaults"]})]})]})})]}),a.jsx(Pg,{isOpen:O,onClose:()=>pe(!1),onFullReset:()=>k(!0),onSoftReset:()=>k(!1),title:"Reset Settings",description:"Reset all settings to defaults. Choose Full Reset to also clear API keys, or Reset to keep your API keys."})]})},Kg=({jobStatus:u,onStartJob:H,onStopJob:I,onRefresh:f,isLoading:C})=>{const A=u==="running"||u==="starting",y=u==="idle"||u==="completed"||u==="failed"||u==="stopped",te=A;return a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:H,onKeyDown:j=>{j.key==="Enter"&&y&&!C&&H()},disabled:!y||C,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${y&&!C?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-label":"Start job",children:C&&u==="starting"?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Starting..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Start Job"]})}),a.jsx("button",{onClick:I,onKeyDown:j=>{j.key==="Enter"&&te&&!C&&I()},disabled:!te||C,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${te&&!C?"bg-red-600 hover:bg-red-700 focus:ring-red-500 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,"aria-label":"Stop job",children:C&&(u==="running"||u==="stopping")?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Stopping..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})}),"Stop Job"]})}),a.jsxs("button",{onClick:f,onKeyDown:j=>{j.key==="Enter"&&!C&&f()},disabled:C,className:`inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${C?"bg-gray-100 text-gray-400 cursor-not-allowed border-gray-200":"bg-white hover:bg-gray-50 focus:ring-blue-500 text-gray-700 border-gray-300"}`,"aria-label":"Refresh data",title:"Refresh job history and statistics",children:[a.jsxs("svg",{className:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]}),"Refresh"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${u==="idle"?"bg-gray-400":u==="starting"?"bg-yellow-400":u==="running"?"bg-green-400":u==="completed"?"bg-blue-400":u==="failed"?"bg-red-400":"bg-gray-400"}`}),a.jsxs("span",{className:`text-sm ${u==="idle"?"bg-green-100 text-green-800 px-2 py-1 rounded-full":u==="starting"?"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full":u==="running"?"bg-blue-100 text-blue-800 px-2 py-1 rounded-full":u==="completed"?"bg-green-100 text-green-800 px-2 py-1 rounded-full":u==="failed"?"bg-red-100 text-red-800 px-2 py-1 rounded-full":"bg-gray-100 text-gray-800 px-2 py-1 rounded-full"}`,children:[u==="idle"&&"Ready",u==="starting"&&"Starting...",u==="running"&&"Running",u==="completed"&&"Completed",u==="failed"&&"Failed",u==="stopped"&&"Stopped"]})]})]})},lm=({logs:u,jobStatus:H,isLoading:I=!1,onRefresh:f,minHeight:C=144,maxHeight:A=320,height:y,disableInternalScroll:te=!1})=>{const[j,g]=m.useState("standard"),[_,J]=m.useState(!0),[P,re]=m.useState(""),[se,me]=m.useState("all"),[$,Se]=m.useState(0),xe=m.useRef(null),Me=O=>{g(O)};m.useEffect(()=>{_&&xe.current&&(xe.current.scrollTop=xe.current.scrollHeight)},[u,_]);const ye=u.filter(O=>!(j==="standard"&&O.level==="debug"||se!=="all"&&O.level!==se||P&&!O.message.includes(P))),ke=O=>{switch(O){case"error":return a.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{clipRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",fillRule:"evenodd"})});case"warn":return a.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{clipRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",fillRule:"evenodd"})});case"info":return a.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{clipRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",fillRule:"evenodd"})});default:return a.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{clipRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",fillRule:"evenodd"})})}},be=O=>new Date(O).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"UTC"}),le=()=>{const pe=(ye&&ye.length>0?ye:u).map(z=>`[${be(z.timestamp)}] [${z.level.toUpperCase()}] ${z.message}`).join(`
`);if(typeof window>"u"||!window.URL||!window.URL.createObjectURL){console.log("Export logs:",pe),typeof window<"u"&&window.open&&window.open("data:text/plain;charset=utf-8,"+encodeURIComponent(pe),"_blank");return}try{const z=new Blob([pe],{type:"text/plain;charset=utf-8"}),q=URL.createObjectURL(z),ee=document.createElement("a");ee.href=q,ee.download="logs.txt",document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),setTimeout(()=>URL.revokeObjectURL(q),200)}catch(z){console.error("Failed to export logs:",z)}},je=()=>{f?f():window.location.reload()};return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Logs"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mode:"}),a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",role:"tablist","aria-label":"Log viewing mode",children:[a.jsx("button",{onClick:()=>Me("standard"),role:"tab","aria-selected":j==="standard","aria-label":"Standard log mode",className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${j==="standard"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Standard"}),a.jsx("button",{onClick:()=>Me("debug"),role:"tab","aria-selected":j==="debug","aria-label":"Debug log mode",className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${j==="debug"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Debug"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Level:"}),a.jsxs("select",{className:"ui-select h-8",value:se,onChange:O=>me(O.target.value),"aria-label":"Filter logs by level",children:[a.jsx("option",{value:"all",children:"All Levels"}),a.jsx("option",{value:"info",children:"Info"}),a.jsx("option",{value:"warn",children:"Warning"}),a.jsx("option",{value:"error",children:"Error"}),a.jsx("option",{value:"debug",children:"Debug Level"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:_,onChange:O=>J(O.target.checked),"aria-label":"Auto-scroll to bottom",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{children:"Auto-scroll"})]}),a.jsxs("button",{onClick:je,"aria-label":"Refresh logs",className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("span",{className:"w-3 h-3 mr-1 inline-flex items-center justify-center",children:a.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]})}),"Refresh"]}),a.jsxs("button",{onClick:le,"aria-label":"Export logs",className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]})]})]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("div",{className:"flex-1 max-w-md",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"log-search",type:"text",placeholder:"Search logs...",value:P,onChange:O=>re(O.target.value),"aria-label":"Search logs",className:"w-full px-3 py-2 pl-8 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("svg",{className:"absolute left-2.5 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})})]}),a.jsxs("div",{className:"px-6 py-4 flex-1 flex flex-col min-h-0",children:[a.jsx("div",{ref:xe,role:"list","aria-label":"Log entries",className:"flex-1 font-mono text-sm bg-gray-50 rounded-lg p-4 min-h-0 logs-scroll border border-gray-200",style:{minHeight:`${C}px`,maxHeight:te||A==="none"?"none":typeof A=="number"?`${A}px`:A,height:y?typeof y=="number"?`${y}px`:y:void 0,overflowY:te?"visible":"auto"},children:I?a.jsxs("div",{className:"text-center text-gray-500 py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading logs..."})]}):u.length===0?a.jsxs("div",{className:"text-center text-gray-500 py-8",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No logs available"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Logs will appear here when a job is running or has completed."})]}):ye.length===0?a.jsx("div",{className:"text-center text-gray-500 py-8",children:"No logs match the current filters."}):a.jsx("div",{className:"space-y-1",children:ye.map((O,pe)=>a.jsxs("div",{"aria-label":`Log entry ${pe+1}: ${O.level} level message`,className:`flex items-start space-x-3 p-2 rounded-md border ${O.level==="error"?"bg-red-50 border-red-200":O.level==="warn"?"bg-yellow-50 border-yellow-200":O.level==="info"?"bg-blue-50 border-blue-200":"bg-white border-gray-200"}`,children:[a.jsx("div",{className:"flex-shrink-0 text-xs text-gray-500 w-20",children:be(O.timestamp)}),a.jsxs("div",{className:`flex-shrink-0 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${O.level==="error"?"text-red-600 bg-red-100 border-red-300":O.level==="warn"?"text-yellow-600 bg-yellow-100 border-yellow-300":O.level==="info"?"text-blue-600 bg-blue-100 border-blue-300":"text-gray-600 bg-gray-100 border-gray-300"}`,children:[ke(O.level),a.jsx("span",{className:"ml-1",children:O.level.toUpperCase()})]}),a.jsxs("div",{className:"flex-1 text-gray-900 break-words whitespace-pre",children:[O.message,a.jsxs("div",{className:"mt-1 text-xs text-gray-600 space-y-1",children:[(O.stepName||O.subStep)&&a.jsxs("div",{className:"flex items-center space-x-2",children:[O.stepName&&a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:O.stepName}),O.subStep&&a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:O.subStep})]}),O.imageIndex!==null&&O.imageIndex!==void 0&&a.jsxs("div",{className:"text-purple-600",children:["Image ",O.imageIndex+1]}),O.durationMs!==null&&O.durationMs!==void 0&&a.jsxs("div",{className:"text-orange-600",children:[" ",O.durationMs,"ms"]}),(O.progress!==void 0||O.totalImages!==void 0)&&a.jsxs("div",{className:"text-gray-600",children:[O.progress!==void 0&&`Progress: ${O.progress}%`,O.totalImages!==void 0&&` | Images: ${O.successfulImages||0}/${O.totalImages}`]}),O.metadata&&Object.keys(O.metadata).length>0&&a.jsxs("details",{className:"mt-1",children:[a.jsxs("summary",{className:"cursor-pointer text-gray-500 hover:text-gray-700",children:["Metadata (",Object.keys(O.metadata).length," fields)"]}),a.jsx("div",{className:"mt-1 pl-2 text-gray-600",children:Object.entries(O.metadata).map(([z,q])=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"font-medium",children:[z,":"]}),a.jsx("span",{className:"ml-2",children:typeof q=="object"?JSON.stringify(q):String(q)})]},z))})]})]})]}),O.source&&a.jsx("div",{className:"flex-shrink-0 text-xs text-gray-500",children:O.source})]},`${O.id}-${pe}`))})}),a.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500 flex-shrink-0",children:[a.jsxs("div",{children:[`${u.length} logs`,P&&` matching "${P}"`]}),a.jsx("div",{children:H==="running"&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{children:"Live updates"})]})})]})]})]})},eh="inline-flex items-center gap-1 px-2 py-1 rounded-full text-sm font-medium border";function th({status:u}){switch(u){case"completed":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"processing":case"running":return a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]});case"failed":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"pending":case"starting":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});case"stopped":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6M5 6h14v12H5z"})});default:return null}}function ah({status:u}){switch(u){case"qc_failed":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v4m0 4h.01M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"})});case"retry_pending":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});case"processing":return a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]});case"approved":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"failed_retry":return a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});default:return null}}function lh(u){switch(u){case"completed":return{classes:"bg-green-100 text-green-800 border-green-200",label:"Completed"};case"processing":case"running":return{classes:"bg-blue-100 text-blue-800 border-blue-200",label:"In Progress"};case"failed":return{classes:"bg-red-100 text-red-800 border-red-200",label:"Failed"};case"pending":case"starting":return{classes:"bg-yellow-100 text-yellow-800 border-yellow-200",label:"Pending"};case"stopped":return{classes:"bg-gray-100 text-gray-800 border-gray-200",label:"Stopped"};default:return{classes:"bg-gray-100 text-gray-800 border-gray-200",label:u}}}function nh(u){switch(u){case"qc_failed":return{classes:"bg-red-100 text-red-800 border-red-200",label:"QC Failed"};case"retry_pending":return{classes:"bg-amber-100 text-amber-800 border-amber-200",label:"Pending Retry"};case"processing":return{classes:"bg-blue-100 text-blue-800 border-blue-200",label:"Processing Retry"};case"approved":return{classes:"bg-green-100 text-green-800 border-green-200",label:"Approved"};case"failed_retry":return{classes:"bg-orange-100 text-orange-800 border-orange-200",label:"Failed Retry"};default:return{classes:"bg-gray-100 text-gray-800 border-gray-200",label:u}}}const wa=({variant:u,status:H,className:I="",labelOverride:f})=>{if(!H)return null;const C=String(H).toLowerCase(),{classes:A,label:y}=u==="job"?lh(C):nh(C),te=u==="job"?th:ah;return a.jsxs("span",{className:`${eh} ${A} ${I}`.trim(),children:[a.jsx(te,{status:C}),f??y]})},sh=({jobs:u,onJobAction:H,onDeleteJob:I,isLoading:f,statusFilter:C,sortBy:A})=>{const[y,te]=m.useState(null),[j,g]=m.useState(null),[_,J]=m.useState({x:0,y:0}),[P,re]=m.useState(0),[se,me]=m.useState(null),$=m.useRef(null),Se=Qe.useMemo(()=>{if(!u||!Array.isArray(u))return[];const z=C!==void 0?C:"all",q=A!==void 0?A:"newest";let ee=u;return z!=="all"&&(ee=ee.filter(ne=>ne.status===z)),[...ee].sort((ne,o)=>{switch(q){case"oldest":return!ne.startedAt&&!o.startedAt?0:ne.startedAt?o.startedAt?new Date(ne.startedAt).getTime()-new Date(o.startedAt).getTime():-1:1;case"newest":return!ne.startedAt&&!o.startedAt?0:ne.startedAt?o.startedAt?new Date(o.startedAt).getTime()-new Date(ne.startedAt).getTime():-1:1;case"name":const k=ne.configurationName||"Unknown",p=o.configurationName||"Unknown";return k.localeCompare(p);default:return 0}})},[u,C,A]),xe=z=>{te(z),H("view",z)},Me=(z,q)=>{z.preventDefault(),g(q),J({x:z.clientX,y:z.clientY})},ye=(z,q)=>{switch(g(null),z){case"view":H("view",q);break;case"export":H("export",q);break;case"rerun":console.log(" DEBUG RERUN: JobHistory rerun case triggered for jobId:",q),console.log(" DEBUG RERUN: Timestamp:",new Date().toISOString()),console.log(" DEBUG RERUN: Stack trace:",new Error().stack),H("rerun",q);break;case"delete":me(q);break}},ke=z=>{I&&I(z),me(null)},be=z=>{const q=z.displayLabel||z.label||z.configurationName;if(q&&String(q).trim()!==""){const ee=String(q).trim();return ee.endsWith("(Rerun)")?ee.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(z.id).slice(-3)})`:ee}return"Unknown"},le=()=>{me(null)},je=(z,q)=>{if(!z)return"Unknown";if(!q)return"In Progress";const ee=q.getTime()-z.getTime(),ve=Math.floor(ee/(1e3*60)),ne=Math.floor(ve/60);return ne>0?`${ne}h ${ve%60}m`:`${ve}m`},O=z=>z?z.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown",pe=z=>{switch(z){case"completed":return a.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"failed":return a.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"running":return a.jsxs("svg",{className:"w-5 h-5 text-blue-600 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]});default:return a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return m.useEffect(()=>{$.current&&P>0&&requestAnimationFrame(()=>{$.current&&($.current.scrollTop=P)})},[Se,P]),m.useEffect(()=>{if($.current){const z=()=>{$.current&&re($.current.scrollTop)},q=$.current;return q.addEventListener("scroll",z),()=>{q.removeEventListener("scroll",z)}}},[]),m.useEffect(()=>{const z=q=>{if(j){const ee=q.target,ve=document.querySelector(".context-menu");ve&&!ve.contains(ee)&&g(null)}};return document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[j]),f?a.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex-shrink-0",children:"Job History"}),a.jsxs("div",{className:"flex-1 flex items-center justify-center py-8 min-h-0",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading job history..."})]})]}):Se.length===0?a.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex-shrink-0",children:"Job History"}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-8 min-h-0",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No job history available"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start your first job to see it here."})]})]}):a.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[a.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 min-h-0",role:"list",ref:$,children:[Se.length>5&&a.jsxs("div",{className:"text-xs text-gray-500 text-center py-2 border-b border-gray-200",children:["Job History area - scroll when content overflows (",Se.length," total)"]}),Se.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No jobs found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Jobs will appear here once you start processing images."})]}),Se.map(z=>a.jsx("div",{role:"listitem",tabIndex:0,"aria-label":`${be(z)} - ${z.status}`,className:`bg-white border rounded-lg p-4 cursor-pointer transition-colors ${y===z.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>xe(z.id),onContextMenu:q=>Me(q,z.id),onKeyDown:q=>{q.key==="Enter"&&H("view",z.id)},children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[pe(z.status),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:be(z)}),a.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Job ID: ",z.id]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsx("span",{children:O(z.startedAt)}),z.completedAt?a.jsx("span",{children:je(z.startedAt,z.completedAt)}):null,a.jsx(wa,{variant:"job",status:z.status})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[z.status==="running"&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium",children:"Running"}),a.jsx("div",{className:"text-xs",children:"Processing images"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Images:"}),a.jsxs("div",{children:[z.totalImages??0," total (",z.successfulImages??0," successful, ",z.failedImages??0," failed)"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:q=>{q.stopPropagation(),H("view",z.id)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"View job details",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:q=>{q.stopPropagation(),H("export",z.id)},className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"Export to Excel",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsx("button",{onClick:q=>{q.stopPropagation(),H("rerun",z.id)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Rerun job",disabled:z.status==="running",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]})}),a.jsx("button",{onClick:q=>{q.stopPropagation(),I&&I(z.id)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete job",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})},z.id))]}),j&&a.jsxs("div",{className:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg py-1 context-menu min-w-48",style:{left:_.x,top:_.y},children:[a.jsxs("button",{onClick:()=>ye("view",j),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[a.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Details"]}),a.jsxs("button",{onClick:()=>ye("export",j),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to Excel"]}),a.jsxs("button",{onClick:()=>ye("rerun",j),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",disabled:u.find(z=>z.id===j)?.status==="running",children:[a.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]}),"Rerun Job"]}),a.jsxs("button",{onClick:()=>ye("delete",j),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Job"]})]}),se&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delete Job"}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Are you sure you want to delete this job? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:le,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancel"}),a.jsx("button",{onClick:()=>ke(se),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})};var Ja=$0();const rh=P0(Ja),ih={details:{label:"Details",id:"details"},metadata:{label:"AI Metadata",id:"metadata"},processing:{label:"Processing",id:"processing"}},ch=({image:u,isOpen:H,onClose:I,onPrevious:f,onNext:C,hasPrevious:A=!1,hasNext:y=!1,onDelete:te})=>{const[j,g]=m.useState("details"),_=m.useRef(null),J=m.useRef(null),[P,re]=m.useState(1),[se,me]=m.useState({x:0,y:0}),[$,Se]=m.useState(!1),[xe,Me]=m.useState(!1),ye=m.useRef({x:0,y:0}),ke=m.useRef({x:0,y:0});m.useEffect(()=>{const ne=o=>{o.key==="Escape"&&H&&I()};return H&&(document.addEventListener("keydown",ne),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",ne),document.body.style.overflow="unset"}},[H,I]),m.useEffect(()=>{H&&u&&(g("details"),re(1),me({x:0,y:0}))},[H,u]);const be=m.useCallback(()=>{const ne=J.current,o=_.current;if(!ne||!o)return;const k=ne.naturalWidth||ne.width,p=ne.naturalHeight||ne.height,V=o.getBoundingClientRect(),G=V.width-32,d=V.height-32;if(k<=0||p<=0||G<=0||d<=0)return;const L=Math.min(G/k,d/p,1);re(L),me({x:0,y:0})},[]);m.useEffect(()=>{if(H){const ne=requestAnimationFrame(be);return()=>cancelAnimationFrame(ne)}},[H,u,be]);const le=(ne,o)=>{re(k=>{const p=Math.min(Math.max(k+ne,.2),5);if(o&&_.current){const V=_.current.getBoundingClientRect(),G=o.x-V.left-V.width/2,d=o.y-V.top-V.height/2,L=p/k-1;me(Z=>({x:Z.x-G*L,y:Z.y-d*L}))}return p})},je=ne=>{if(ne.ctrlKey||ne.metaKey){ne.preventDefault();const o=ne.deltaY>0?-.1:.1;le(o,{x:ne.clientX,y:ne.clientY})}},O=ne=>{ne.button===0&&(Se(!0),ye.current={x:ne.clientX,y:ne.clientY},ke.current={...se})},pe=ne=>{if(!$)return;const o=ne.clientX-ye.current.x,k=ne.clientY-ye.current.y;me({x:ke.current.x+o,y:ke.current.y+k})},z=()=>Se(!1);if(!H)return null;if(!u)return a.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:I,"aria-hidden":"true"}),a.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Image Details"})}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:I,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors","aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),a.jsx("div",{className:"flex items-center justify-center p-10",children:a.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[a.jsx("svg",{className:"w-5 h-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 3v3m0 12v3m9-9h-3M6 12H3m15.364 6.364-2.121-2.121M8.757 8.757 6.636 6.636m10.728 0-2.121 2.121M8.757 15.243 6.636 17.364"})}),a.jsx("span",{className:"text-sm",children:"Loading image"})]})})]})})]});const q=ne=>new Date(ne).toLocaleString();let ee={};if(typeof u.metadata=="string")try{ee=JSON.parse(u.metadata),console.log(" Parsed metadata from string:",ee)}catch(ne){console.error(" Failed to parse metadata string:",ne),ee={}}else u.metadata&&(ee=u.metadata,console.log(" Metadata is already an object:",ee));const ve=u?.processingSettings??{};return a.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:I,"aria-hidden":"true"}),a.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Image Details"}),a.jsx(wa,{variant:"qc",status:u.qcStatus||"approved"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{type:"button",onClick:async()=>{u&&te&&await te(String(u.id))},className:"review-modal-button bg-red-600 text-white hover:bg-red-700","aria-label":"Delete image permanently",title:"Delete image permanently",children:[a.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]}),a.jsx("button",{type:"button",onClick:()=>Me(ne=>!ne),className:"px-2 py-1 text-xs bg-white hover:bg-gray-50 border border-gray-200 text-gray-700 rounded","aria-label":"Image Control Info",title:"Image Control Info",children:"Image Control Info"}),(A||y)&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:f,disabled:!A,className:`p-2 rounded-md transition-colors ${A?"text-gray-600 hover:text-gray-900 hover:bg-gray-100":"text-gray-300 cursor-not-allowed"}`,"aria-label":"Previous image",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:C,disabled:!y,className:`p-2 rounded-md transition-colors ${y?"text-gray-600 hover:text-gray-900 hover:bg-gray-100":"text-gray-300 cursor-not-allowed"}`,"aria-label":"Next image",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),a.jsx("button",{onClick:I,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors","aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),xe&&a.jsxs("div",{className:"absolute top-14 right-4 w-80 bg-white border border-gray-200 rounded-md shadow-lg p-3 text-xs text-gray-700 z-20",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Image viewer controls"}),a.jsx("button",{type:"button",className:"p-1 text-gray-500 hover:text-gray-700",onClick:()=>Me(!1),"aria-label":"Close help",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("ul",{className:"space-y-1 list-disc pl-4",children:[a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Pan"}),": Click and drag on the image"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Zoom"}),": Ctrl (Windows/Linux) or  Cmd (macOS) + mouse wheel"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Fit"}),": Doubleclick image"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Toolbar (bottomright)"}),": Zoom out (), Zoom in (+), Reset, Fit to screen"]})]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(90vh-80px)]",children:[a.jsxs("div",{ref:_,className:"relative flex-1 flex items-center justify-center bg-gray-50 p-4",onWheel:je,onDoubleClick:be,children:[a.jsx("div",{className:"relative w-full h-full overflow-hidden rounded",children:a.jsx("img",{ref:J,src:`local-file://${u.finalImagePath||u.tempImagePath||""}`,alt:"Generated image",className:`${$?"cursor-grabbing":"cursor-grab"}`,style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) translate(${se.x}px, ${se.y}px) scale(${P})`,transformOrigin:"center center",transition:$?"none":"transform 80ms ease-out",maxWidth:"100%",maxHeight:"100%",userSelect:"none",pointerEvents:"auto"},onMouseDown:O,onMouseMove:pe,onMouseUp:z,onMouseLeave:z,onError:ne=>{ne.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCA1MEgxNTBWNzVINzVWMTI1SDUwVjUwWiIgZmlsbD0iI0QxRDVEM0EiLz4KPHN2ZyB4PSI3NSIgeT0iODAiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0NSIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMTkgM0g1QzMuOSAzIDMgMy45IDMgNVYxOUMzIDIwLjEgMy45IDIxIDUgMjFIMTlDMjAuMSAyMSAyMSAyMC4xIDIxIDE5VjVDMjEgMy45IDIwLjEgMyAxOSAzWk0xOSAxOUg1VjVIMTlWMTlaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0xNCAxM0gxMFYxN0gxNFYxM1oiIGZpbGw9IiM5QjlCQTAiLz4KPC9zdmc+Cjwvc3ZnPgo="}})}),a.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center space-x-2 bg-white/90 border border-gray-200 rounded-md shadow px-2 py-1 z-10",children:[a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>le(-.1),title:"Zoom out","aria-label":"Zoom out",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),a.jsxs("div",{className:"text-xs text-gray-600 w-12 text-center",children:[Math.round(P*100),"%"]}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>le(.1),title:"Zoom in","aria-label":"Zoom in",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>{re(1),me({x:0,y:0})},title:"Reset","aria-label":"Reset zoom",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582M20 12A8.001 8.001 0 004.582 9m0 0H9"})})}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:be,title:"Fit to screen","aria-label":"Fit to screen",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h7M3 3v7M21 21h-7M21 21v-7"})})})]})]}),a.jsxs("div",{className:"w-full lg:w-96 border-l border-gray-200 flex flex-col",children:[a.jsx("div",{className:"flex border-b border-gray-200",children:Object.values(ih).map(ne=>a.jsx("button",{onClick:()=>g(ne.id),className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${j===ne.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:ne.label},ne.id))}),a.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4",children:[j==="details"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image ID"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:u.id})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Execution"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:u.executionId})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Generation Prompt"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:u.generationPrompt})]}),u.seed&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seed"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:u.seed})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"QC Status"}),a.jsxs("div",{className:"flex flex-wrap items-start gap-2 whitespace-normal",children:[a.jsx(wa,{variant:"qc",status:u.qcStatus||"approved"}),u.qcReason&&a.jsxs("span",{className:"text-sm text-gray-600 break-words whitespace-pre-wrap flex-1 min-w-0",children:["- ",u.qcReason]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created"}),a.jsx("p",{className:"text-sm text-gray-900",children:u.createdAt?q(u.createdAt):""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File Path"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono break-all",children:u.finalImagePath})]})]}),j==="metadata"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI-Generated Metadata"}),a.jsxs("button",{onClick:async()=>{try{const ne=window.electronAPI;if(!ne||!ne.generatedImages||typeof ne.generatedImages.getGeneratedImage!="function")return;const o=await ne.generatedImages.getGeneratedImage(u.id);o&&o.success&&console.log(" Metadata refreshed. Close and reopen the modal to see changes.")}catch(ne){console.error(" Failed to refresh metadata:",ne)}},className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]}),"Refresh Metadata"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Title"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:typeof ee.title=="object"?ee.title.en||"":ee.title||"No title generated"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Description"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:typeof ee.description=="object"?ee.description.en||"":ee.description||"No description generated"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Tags"}),a.jsx("div",{className:"bg-gray-50 p-3 rounded-md border",children:(()=>{let ne=[];return ee.uploadTags?.en?ne=String(ee.uploadTags.en).split(",").map(o=>o.trim()).filter(o=>!!o):Array.isArray(ee.tags)?ne=ee.tags:typeof ee.tags=="string"&&ee.tags.trim()&&(ne=ee.tags.split(",").map(o=>o.trim()).filter(o=>!!o)),ne.length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:ne.map((o,k)=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:o},k))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No tags generated"})})()})]})]}),j==="processing"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Enhancement"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.imageEnhancement?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sharpening"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.imageEnhancement?ve.sharpening||0:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Enhancement OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saturation"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.imageEnhancement?ve.saturation||1.4:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Enhancement OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Convert"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.imageConvert?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Convert Format"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.imageConvert?ve.convertToJpg?"JPG":"PNG":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Convert OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"JPG Quality"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.imageConvert&&ve.convertToJpg?ve.jpgQuality||100:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Convert Format is not JPG)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PNG Quality"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.imageConvert&&!ve.convertToJpg?ve.pngQuality||100:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Convert Format is not PNG)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remove Background"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.removeBg?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remove.bg Size"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.removeBg?ve.removeBgSize||"auto":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Remove Background OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trim Transparent"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.trimTransparentBackground?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"JPG Background Colour"}),a.jsx("p",{className:"text-sm text-gray-900",children:ve.imageConvert&&ve.convertToJpg&&ve.removeBg?ve.jpgBackground||"white":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Remove Background, Image Convert are set to OFF and Convert Format is not JPG)"})})]})]})})]})]})]})]})})]})},oh=({images:u,onImageAction:H,onBulkAction:I,isLoading:f,jobStatus:C="idle",viewMode:A="grid",onViewModeChange:y,jobFilter:te="all",searchQuery:j="",sortBy:g="newest",jobIdToLabel:_={},dateFrom:J=null,dateTo:P=null,selectedIds:re,onSelectionChange:se,onClearFilters:me})=>{if(!u||!Array.isArray(u))return a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsx("div",{className:"text-center text-gray-500",children:f?"Loading images...":"No images available"})});const[$,Se]=m.useState(new Set),xe=re??$,Me=o=>{se?se(o):Se(o)},[ye,ke]=m.useState(null),[be,le]=m.useState(null),je=Qe.useRef(!1),O=Qe.useRef(!1),pe=o=>{if(!o)return{};if(typeof o=="string")try{return JSON.parse(o)}catch{return{}}return o};Qe.useEffect(()=>{Me(new Set)},[te]);const z=Qe.useMemo(()=>!u||!Array.isArray(u)?[]:[...u.filter(p=>{if(te!=="all"&&p.executionId!=te)return!1;if(j){const V=j.toLowerCase(),G=pe(p.metadata),d=p.generationPrompt.toLowerCase().includes(V),Z=(typeof G?.prompt=="string"?G.prompt.toLowerCase():"").includes(V),M=(typeof G?.title=="string"?G.title:G?.title?.en||"").toLowerCase().includes(V),ae=(typeof G?.description=="string"?G.description:G?.description?.en||"").toLowerCase().includes(V),Re=(Array.isArray(G?.tags)?G.tags.join(" ").toLowerCase():"").includes(V);if(!d&&!Z&&!M&&!ae&&!Re)return!1}if(J||P){if(!p.createdAt)return!1;const V=new Date(p.createdAt),G=V.getFullYear(),d=String(V.getMonth()+1).padStart(2,"0"),L=String(V.getDate()).padStart(2,"0"),Z=`${G}-${d}-${L}`;if(J&&Z<J||P&&Z>P)return!1}return!0})].sort((p,V)=>{switch(g){case"newest":return(V.createdAt?new Date(V.createdAt).getTime():0)-(p.createdAt?new Date(p.createdAt).getTime():0);case"oldest":return(p.createdAt?new Date(p.createdAt).getTime():0)-(V.createdAt?new Date(V.createdAt).getTime():0);case"name":return p.generationPrompt.localeCompare(V.generationPrompt);default:return 0}}),[u,te,j,g,J,P]),q=o=>{const k=new Set(xe);k.has(o)?k.delete(o):k.add(o),Me(k)},ee=o=>new Date(o).toLocaleDateString()+" "+new Date(o).toLocaleTimeString(),ve=o=>{if(!ye)return;const k=z.findIndex(G=>String(G.id)===String(ye));if(k===-1)return;let p;o==="next"?p=k+1<z.length?k+1:k:p=k-1>=0?k-1:k;const V=z[p];le(null),ke(V?.id||null)},ne=()=>{if(!ye)return{hasPrevious:!1,hasNext:!1};const o=z.findIndex(k=>String(k.id)===String(ye));return{hasPrevious:o>0,hasNext:o<z.length-1}};return a.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[a.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:z.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500","aria-live":"polite",children:[a.jsx("div",{children:"No images match the current filters."}),me&&a.jsx("button",{onClick:me,className:"mt-3 inline-flex items-center px-3 py-1 text-sm rounded-md bg-gray-100 hover:bg-gray-200 text-gray-800 border border-gray-300",children:"Clear filters"})]}):a.jsx(a.Fragment,{children:A==="grid"?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4 p-4",children:z.map(o=>a.jsxs("div",{className:`relative bg-white border rounded-lg overflow-hidden transition-colors ${xe.has(o.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[a.jsx("div",{className:"absolute top-2 right-2 z-10",children:a.jsx("input",{type:"checkbox",checked:xe.has(o.id),onChange:()=>q(o.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-label":`Select ${o.generationPrompt}`})}),a.jsxs("div",{className:"relative aspect-square",children:[a.jsx("div",{className:"absolute top-2 left-2 z-10",children:a.jsx(wa,{variant:"qc",status:"approved"})}),o.finalImagePath||o.tempImagePath?a.jsx("img",{src:`local-file://${o.finalImagePath||o.tempImagePath}`,alt:o.generationPrompt,className:"w-full h-full object-cover cursor-pointer",onClick:()=>{le(o),ke(o.id)},onError:k=>{k.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCA1MEgxNTBWNzVINzVWMTI1SDUwVjUwWiIgZmlsbD0iI0QxRDVEM0EiLz4KPHN2ZyB4PSI3NSIgeT0iODAiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0NSIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iI0QxRDVEM0EiLz4KPHN2ZyB4PSI3NSIgeT0iODAiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0NSIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0Oi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xOSAzSDVDMy45IDMgMyAzLjkgMyA1VjE5QzMgMjAuMSAzLjkgMjEgNSAyMUgxOUMyMC4xIDIxIDIxIDIwLjEgMjEgMTlWNUMxMSAzLjkgMjAuMSAzIDE5IDNaTTE5IDE5SDVWNUgxOVYxOVoiIGZpbGw9IiM5QjlCQTAiLz4KPHBhdGggZD0iTTE0IDEzSDEwVjE3SDE0VjEzWiIgZmlsbD0iI0QxRDVEM0EiLz4KPC9zdmc+Cjwvc3ZnPgo="}}):a.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center opacity-0 hover:opacity-100",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:k=>{k.stopPropagation(),le(o),ke(o.id)},className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700",title:"View full size","aria-label":"View full size",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:k=>{k.stopPropagation(),H("delete",o.id)},className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700",title:"Delete","aria-label":"Delete",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]}),a.jsxs("div",{className:"p-3 space-y-2",children:[(()=>{const k=pe(o.metadata),p=(k?.title&&typeof k.title=="object"?k.title.en:k?.title)||"",V=typeof p=="string"&&p.trim()?p:o.generationPrompt||"Untitled",G=_&&_[String(o.executionId)]||`Job ${String(o.executionId)}`;return a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-2",title:V,children:V}),a.jsx("div",{className:"text-xs text-gray-500 truncate mt-1",title:G,children:G})]})})(),o.metadata?.tags&&Array.isArray(o.metadata.tags)&&o.metadata.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[o.metadata.tags.slice(0,3).map((k,p)=>a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",title:k,children:k.length>8?`${k.slice(0,8)}...`:k},p)),o.metadata.tags.length>3&&a.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-500",children:["+",o.metadata.tags.length-3]})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-2",children:[a.jsx("div",{className:"flex items-center space-x-2",children:o.seed&&a.jsxs("span",{className:"font-mono",title:`Seed: ${o.seed}`,children:["Seed: ",o.seed]})}),a.jsx("div",{title:o.createdAt?ee(o.createdAt):"",children:o.createdAt?new Date(o.createdAt).toLocaleDateString():""})]})]})]},o.id))}):a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-12 gap-4 px-4 py-3 text-xs font-medium text-gray-700 uppercase tracking-wider",children:[a.jsx("div",{className:"col-span-1",children:a.jsx("input",{type:"checkbox",checked:xe.size===z.length&&z.length>0,onChange:o=>{o.target.checked?Me(new Set(z.map(k=>k.id))):Me(new Set)},className:"rounded border-gray-300"})}),a.jsx("div",{className:"col-span-2",children:"Image"}),a.jsx("div",{className:"col-span-2",children:"Title"}),a.jsx("div",{className:"col-span-3",children:"Prompt"}),a.jsx("div",{className:"col-span-1",children:"Seed"}),a.jsx("div",{className:"col-span-1",children:"Date"}),a.jsx("div",{className:"col-span-2",children:"Actions"})]})}),a.jsx("div",{className:"divide-y divide-gray-200",children:z.map(o=>a.jsxs("div",{className:`grid grid-cols-12 gap-4 px-4 py-3 hover:bg-gray-50 transition-colors ${xe.has(o.id)?"bg-blue-50":""}`,children:[a.jsx("div",{className:"col-span-1 flex items-center",children:a.jsx("input",{type:"checkbox",checked:xe.has(o.id),onChange:k=>{const p=new Set(xe);k.target.checked?p.add(o.id):p.delete(o.id),Me(p)},className:"rounded border-gray-300"})}),a.jsx("div",{className:"col-span-2",children:a.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100",children:a.jsx("img",{src:o.finalImagePath||o.tempImagePath?`local-file://${o.finalImagePath||o.tempImagePath}`:"",alt:(()=>{const k=pe(o.metadata),p=(k?.title&&typeof k.title=="object"?k.title.en:k?.title)||"Generated Image";return typeof p=="string"?p:"Generated Image"})(),className:"w-full h-full object-cover cursor-pointer",onClick:()=>{le(o),ke(o.id)},onError:k=>{const p=k.target;p.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNCAyNEg0MFY0MEgyNFYyNFoiIGZpbGw9IiNEMUQ1REIiLz4KPC9zdmc+"}})})}),a.jsx("div",{className:"col-span-2 flex items-center",children:a.jsx("div",{className:"truncate",children:(()=>{const k=pe(o.metadata),p=(k?.title&&typeof k.title=="object"?k.title.en:k?.title)||"",G=(typeof p=="string"&&p.trim()?p:"")||o.generationPrompt||"Untitled";return a.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",title:G,children:G})})()})}),a.jsx("div",{className:"col-span-3 flex items-center",children:(()=>{const k=_&&_[String(o.executionId)]||`Job ${String(o.executionId)}`;return a.jsx("div",{className:"text-sm text-gray-700 truncate",title:k,children:k})})()}),a.jsx("div",{className:"col-span-1 flex items-center",children:a.jsx("div",{className:"text-sm font-mono text-gray-500",title:`Seed: ${o.seed}`,children:o.seed})}),a.jsx("div",{className:"col-span-1 flex items-center",children:a.jsx("div",{className:"text-sm text-gray-500",title:o.createdAt?ee(o.createdAt):"",children:o.createdAt?new Date(o.createdAt).toLocaleDateString():""})}),a.jsxs("div",{className:"col-span-2 flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>ke(o.id),className:"p-1 text-blue-600 hover:text-blue-800",title:"View full size",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:()=>H("delete",o.id),className:"p-1 text-red-600 hover:text-red-800",title:"Delete",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},o.id))})]})})})}),ye&&(()=>{const o=be||z.find(k=>String(k.id)===String(ye));return!o&&!je.current?(setTimeout(()=>{je.current||(ke(null),le(null))},0),null):a.jsx(ch,{image:o||null,isOpen:!0,onClose:()=>{je.current||O.current||(ke(null),le(null),je.current=!1,O.current=!1)},onNext:()=>ve("next"),onPrevious:()=>ve("previous"),...ne(),onDelete:async k=>{je.current=!0,O.current=!0;const p=z.findIndex(d=>String(d.id)===String(k));let V=null,G=null;if(p>=0&&(p<z.length-1?(G=z[p+1],V=G.id):p>0&&(G=z[p-1],V=G.id)),V&&G){Ja.flushSync(()=>{le(G),ke(V)});try{await window.electronAPI.jobManagement.deleteGeneratedImage(k),await new Promise(d=>setTimeout(d,100)),setTimeout(()=>{H("delete",k)},50)}catch(d){console.error("Failed to delete image:",d)}finally{je.current=!1,O.current=!1}}else{Ja.flushSync(()=>{ke(null),le(null)});try{await H("delete",k)}finally{je.current=!1,O.current=!1}}}})})()]})},uh=`
  .export-zip-modal-btn {
    line-height: 1 !important;
    height: 2.25rem !important;
    max-height: 2.25rem !important;
  }
  .export-zip-modal-btn.bg-blue-600,
  .export-zip-modal-btn.bg-green-600 {
    padding: 0 1rem !important;
  }
  .export-zip-modal input[type="radio"]:focus,
  .export-zip-modal input[type="checkbox"]:focus {
    outline: none !important;
    box-shadow: none !important;
    border-color: inherit !important;
  }
`,dh=({isOpen:u,count:H,defaultFilename:I,initialMode:f="default",initialIncludeExcel:C=!0,step:A=null,isBusy:y=!1,onClose:te,onExport:j})=>{const[g,_]=Qe.useState(f),[J,P]=Qe.useState(""),[re,se]=Qe.useState(I),[me,$]=Qe.useState(C),[Se,xe]=Qe.useState("append"),[Me,ye]=Qe.useState(null),[ke,be]=Qe.useState(""),le=Qe.useRef(!1);if(Qe.useEffect(()=>{if(u&&!le.current){le.current=!0,_(f),se(I),$(C),xe("append"),ye(null);try{window.electronAPI?.getExportsFolderPath?.().then(ee=>{ee&&ee.success&&be(ee.path)}).catch(()=>{})}catch{}}!u&&le.current&&(le.current=!1)},[u]),!u)return null;const je=q=>q.replace(/[\\/:*?"<>|]/g,"_"),O=q=>q.toLowerCase().endsWith(".zip")?q:`${q}.zip`,pe=async()=>{ye(null);try{const ee=await window.electronAPI.selectFile?.({mode:"save",title:"Save ZIP As",defaultPath:re,filters:[{name:"ZIP Archive",extensions:["zip"]}]});if(ee&&ee.success&&ee.filePath){_("custom"),P(ee.filePath);const ve=ee.filePath.split(/\\|\//).pop()||re;se(ve)}}catch(q){ye(q?.message||"Failed to open Save dialog")}},z=()=>{const q=O(je(re.trim()||I));j({mode:g,outputPath:g==="custom"?J||q:void 0,filename:q,includeExcel:me,duplicatePolicy:Se})};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:[a.jsx("style",{children:uh}),a.jsxs("div",{className:"export-zip-modal bg-white border border-gray-200 rounded-lg shadow-lg w-full max-w-3xl",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Export Selected Images (",H,")"]}),a.jsx("button",{onClick:te,"aria-label":"Close",className:"text-gray-500 hover:text-gray-700 text-xl leading-none p-2 -m-2",children:""})]}),a.jsxs("div",{className:"px-5 py-4 space-y-4 max-h-[84vh] overflow-y-auto overflow-x-hidden",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Destination"}),a.jsxs("label",{className:"grid grid-cols-[auto_1fr] items-start gap-2 rounded hover:bg-gray-50 p-0 cursor-pointer",children:[a.jsx("input",{type:"radio",className:"mt-0.5 focus:ring-0",checked:g==="default",onChange:()=>_("default")}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-900",children:"Default app Exports folder"}),a.jsx("input",{className:"mt-2 w-full h-9 border rounded px-2 text-sm text-gray-600 bg-gray-50",value:ke||"App data exports folder (recommended)",disabled:!0}),a.jsx("button",{type:"button",onClick:async()=>{try{await window.electronAPI.openExportsFolder()}catch{}},className:"export-zip-modal-btn mt-2 h-9 max-h-9 px-4 text-sm leading-none rounded border border-gray-300 text-gray-700 bg-gray-100 hover:bg-gray-200 min-w-[140px] inline-flex items-center justify-center shrink-0 self-start",children:"Open Exports Folder"})]})]}),a.jsxs("label",{className:"grid grid-cols-[auto_1fr] items-start gap-2 rounded hover:bg-gray-50 p-0 cursor-pointer",children:[a.jsx("input",{type:"radio",className:"mt-0.5 focus:ring-0",checked:g==="custom",onChange:()=>_("custom")}),a.jsxs("div",{className:"w-full",children:[a.jsx("div",{className:"text-sm text-gray-900",children:"Save to another location"}),a.jsxs("div",{className:"mt-2 grid grid-cols-12 gap-2 items-center",children:[a.jsx("span",{className:"col-span-2 text-sm text-gray-900",children:"Location:"}),a.jsx("input",{className:"col-span-7 h-9 border rounded px-2 text-sm disabled:bg-gray-50",placeholder:"/path/to/file.zip",value:J,onChange:q=>P(q.target.value),disabled:g!=="custom"}),a.jsx("button",{type:"button",onClick:async()=>{try{const ee=await window.electronAPI?.selectFile?.({type:"directory",title:"Select Folder"});ee&&ee.success&&ee.filePath&&P(ee.filePath)}catch{}},className:"export-zip-modal-btn col-span-2 h-9 max-h-9 px-4 text-sm leading-none rounded border border-blue-600 text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 whitespace-nowrap justify-self-start self-center min-w-[100px] inline-flex items-center justify-center shrink-0",disabled:g!=="custom",children:"Browse"}),a.jsx("span",{className:"col-span-2 text-sm text-gray-900",children:"Filename:"}),a.jsx("input",{className:"col-span-10 h-9 border rounded px-2 text-sm disabled:bg-gray-50",value:re,onChange:q=>se(q.target.value),disabled:g!=="custom"})]})]})]})]}),a.jsxs("div",{className:"pt-1 border-t border-gray-100",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500 mb-2",children:"Package options"}),a.jsxs("label",{className:"grid grid-cols-[auto_1fr] items-start gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"mt-0.5 focus:ring-0",checked:me,onChange:q=>$(q.target.checked)}),a.jsx("span",{className:"text-sm text-gray-700",children:"Include Excel metadata (metadata.xlsx)"})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500 mb-1",children:"Folder layout inside ZIP:"}),a.jsxs("div",{className:"text-xs text-gray-700 font-mono leading-5",children:[a.jsxs("div",{children:["images/ ",a.jsx("span",{className:"text-gray-500",children:"(image files)"})]}),a.jsx("div",{children:"metadata.xlsx"})]})]})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Conflicts & naming"}),a.jsx("div",{className:"text-[11px] text-gray-500 -mt-0.5 mb-2",children:"(applies only for custom locations)"}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("label",{className:"inline-flex items-center space-x-1",children:[a.jsx("input",{type:"radio",checked:Se==="append",onChange:()=>xe("append")}),a.jsx("span",{className:"text-sm text-gray-700",children:"Auto-append number"})]}),a.jsxs("label",{className:"inline-flex items-center space-x-1",children:[a.jsx("input",{type:"radio",checked:Se==="overwrite",onChange:()=>xe("overwrite")}),a.jsx("span",{className:"text-sm text-gray-700",children:"Overwrite (confirm)"})]})]}),Me&&a.jsx("div",{className:"text-xs text-red-600 mt-2",children:Me})]}),a.jsxs("div",{className:"pt-1 border-t border-gray-100",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500 mb-2",children:"Status"}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-700",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${A==="gathering-files"?"text-gray-900 font-medium":""}`,children:[a.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${A==="gathering-files"?"bg-blue-600":"bg-gray-300"}`}),a.jsx("span",{children:"Gathering files"})]}),a.jsxs("div",{className:`flex items-center space-x-2 ${A==="creating-excel"?"text-gray-900 font-medium":""}`,children:[a.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${A==="creating-excel"?"bg-blue-600":"bg-gray-300"}`}),a.jsx("span",{children:"Creating Excel"})]}),a.jsxs("div",{className:`flex items-center space-x-2 ${A==="zipping"?"text-gray-900 font-medium":""}`,children:[a.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${A==="zipping"?"bg-blue-600":"bg-gray-300"}`}),a.jsx("span",{children:"Zipping"})]})]})]})]}),a.jsxs("div",{className:"px-5 py-3 border-t border-gray-200 flex items-center justify-between space-x-2",children:[a.jsx("button",{type:"button",disabled:y,onClick:te,className:`export-zip-modal-btn h-9 max-h-9 px-4 text-sm leading-none rounded border border-gray-300 min-w-[100px] inline-flex items-center justify-center shrink-0 self-center ${y?"bg-gray-100 text-gray-400":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:"Cancel"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{type:"button",disabled:y,onClick:async()=>{_("custom"),await pe()},className:`export-zip-modal-btn h-9 max-h-9 px-4 whitespace-nowrap text-sm leading-none rounded border border-blue-600 text-white min-w-[180px] inline-flex items-center justify-center shrink-0 self-center ${y?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:"Save to another location"}),a.jsx("button",{type:"button",disabled:y,onClick:z,className:`export-zip-modal-btn h-9 max-h-9 px-4 whitespace-nowrap text-sm leading-none rounded border border-green-600 text-white min-w-[100px] inline-flex items-center justify-center shrink-0 self-center ${y?"bg-green-400":"bg-green-600 hover:bg-green-700"}`,children:"Export"})]})]})]})]})},mh=({onForceStop:u,isLoading:H})=>{const[I,f]=m.useState(!1);Qe.useEffect(()=>{if(!I)return;const A=y=>{y.key==="Escape"&&f(!1)};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[I]);const C=()=>{f(!1),u()};return a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>f(!0),disabled:H,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors bg-red-600 hover:bg-red-700 focus:ring-red-500 text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"Force stop all processes",children:H?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Stopping..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Force Stop"]})}),I&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:()=>f(!1),children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:A=>A.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Force Stop All Processes"})})]}),a.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Emergency Stop"}),a.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[a.jsx("p",{children:"This will immediately terminate all running processes, including:"}),a.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Image generation processes"}),a.jsx("li",{children:"Quality check operations"}),a.jsx("li",{children:"Background tasks"}),a.jsx("li",{children:"Any other running jobs"})]}),a.jsx("p",{className:"mt-2 font-medium text-red-600",children:"This action cannot be undone and may result in data loss."})]})]})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 bg-gray-50 rounded-b-lg",children:[a.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),a.jsx("button",{onClick:C,disabled:H,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:H?a.jsxs("div",{className:"flex items-center",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Stopping..."]}):"Force Stop All"})]})]})})]})},fh=`
  .export-file-modal-btn {
    line-height: 1 !important;
    height: 2.25rem !important;
    max-height: 2.25rem !important;
  }
  .export-file-modal-btn.bg-blue-600,
  .export-file-modal-btn.bg-green-600 {
    padding: 0 1rem !important;
  }
  .export-file-modal input[type="radio"]:focus,
  .export-file-modal input[type="checkbox"]:focus {
    outline: none !important;
    box-shadow: none !important;
    border-color: inherit !important;
  }
`,Gc=({isOpen:u,count:H=0,title:I="Export",defaultFilename:f,fileKind:C,initialMode:A="default",isBusy:y=!1,onClose:te,onExport:j})=>{const[g,_]=Qe.useState(A),[J,P]=Qe.useState(""),[re,se]=Qe.useState(f),[me,$]=Qe.useState("append"),[Se,xe]=Qe.useState(null),[Me,ye]=Qe.useState(""),ke=Qe.useRef(!1);if(Qe.useEffect(()=>{if(u&&!ke.current){ke.current=!0,_(A),se(f),$("append"),xe(null);try{window.electronAPI?.getExportsFolderPath?.().then(z=>{z&&z.success&&ye(z.path)}).catch(()=>{})}catch{}try{const pe=C==="xlsx"?"lastExportPath:xlsx":"lastExportPath:zip",z=localStorage.getItem(pe);z&&typeof z=="string"&&z.trim()!==""&&(P(z),_("custom"))}catch{}}!u&&ke.current&&(ke.current=!1)},[u,A,f]),!u)return null;const be=pe=>pe.replace(/[\\/:*?"<>|]/g,"_"),le=pe=>{const z=pe.toLowerCase();return C==="xlsx"?z.endsWith(".xlsx")?pe:`${pe}.xlsx`:z.endsWith(".zip")?pe:`${pe}.zip`},je=async()=>{xe(null);try{const pe=window.electronAPI,z=C==="xlsx"?[{name:"Excel Workbook",extensions:["xlsx"]}]:[{name:"ZIP Archive",extensions:["zip"]}],q=await pe.selectFile?.({mode:"save",title:"Save As",defaultPath:re,filters:z});if(q&&q.success&&q.filePath){_("custom"),P(q.filePath);const ee=q.filePath.split(/\\|\//).pop()||re;se(ee);try{const ve=C==="xlsx"?"lastExportPath:xlsx":"lastExportPath:zip";localStorage.setItem(ve,q.filePath)}catch{}}}catch(pe){xe(pe?.message||"Failed to open Save dialog")}},O=()=>{const pe=le(be(re.trim()||f));j({mode:g,outputPath:g==="custom"?J||pe:void 0,filename:pe,duplicatePolicy:me})};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:[a.jsx("style",{children:fh}),a.jsxs("div",{className:"export-file-modal bg-white border border-gray-200 rounded-lg shadow-lg w-full max-w-3xl",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:[I,H?` (${H})`:""]}),a.jsx("button",{onClick:te,"aria-label":"Close",className:"text-gray-500 hover:text-gray-700 text-xl leading-none p-2 -m-2",children:""})]}),a.jsxs("div",{className:"px-5 py-4 space-y-4 max-h-[84vh] overflow-y-auto overflow-x-hidden",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Destination"}),a.jsxs("label",{className:"grid grid-cols-[auto_1fr] items-start gap-2 rounded hover:bg-gray-50 p-0 cursor-pointer",children:[a.jsx("input",{type:"radio",className:"mt-0.5 focus:ring-0",checked:g==="default",onChange:()=>_("default")}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-900",children:"Default app Exports folder"}),a.jsx("input",{className:"mt-2 w-full h-9 border rounded px-2 text-sm text-gray-600 bg-gray-50",value:Me||"App data exports folder (recommended)",disabled:!0}),a.jsx("button",{type:"button",onClick:async()=>{try{await window.electronAPI.openExportsFolder()}catch{}},className:"export-file-modal-btn mt-2 h-9 max-h-9 px-4 text-sm leading-none rounded border border-gray-300 text-gray-700 bg-gray-100 hover:bg-gray-200 min-w-[140px] inline-flex items-center justify-center shrink-0 self-start",children:"Open Exports Folder"})]})]}),a.jsxs("label",{className:"grid grid-cols-[auto_1fr] items-start gap-2 rounded hover:bg-gray-50 p-0 cursor-pointer",children:[a.jsx("input",{type:"radio",className:"mt-0.5 focus:ring-0",checked:g==="custom",onChange:()=>_("custom")}),a.jsxs("div",{className:"w-full",children:[a.jsx("div",{className:"text-sm text-gray-900",children:"Save to another location"}),a.jsxs("div",{className:"mt-2 grid grid-cols-12 gap-2 items-center",children:[a.jsx("span",{className:"col-span-2 text-sm text-gray-900",children:"Location:"}),a.jsx("input",{className:"col-span-7 h-9 border rounded px-2 text-sm disabled:bg-gray-50",placeholder:C==="xlsx"?"/path/to/file.xlsx":"/path/to/file.zip",value:J,onChange:pe=>P(pe.target.value),disabled:g!=="custom"}),a.jsx("button",{type:"button",onClick:async()=>{try{const z=await window.electronAPI?.selectFile?.({type:"directory",title:"Select Folder"});if(z&&z.success&&z.filePath){P(z.filePath);try{const q=C==="xlsx"?"lastExportPath:xlsx":"lastExportPath:zip";localStorage.setItem(q,z.filePath)}catch{}}}catch{}},className:"export-file-modal-btn col-span-2 h-9 max-h-9 px-4 text-sm leading-none rounded border border-blue-600 text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 whitespace-nowrap justify-self-start self-center min-w-[100px] inline-flex items-center justify-center shrink-0",disabled:g!=="custom",children:"Browse"}),a.jsx("span",{className:"col-span-2 text-sm text-gray-900",children:"Filename:"}),a.jsx("input",{className:"col-span-10 h-9 border rounded px-2 text-sm disabled:bg-gray-50",value:re,onChange:pe=>se(pe.target.value),disabled:g!=="custom"})]})]})]})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Conflicts & naming"}),a.jsx("div",{className:"text-[11px] text-gray-500 -mt-0.5 mb-2",children:"(applies only for custom locations)"}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("label",{className:"inline-flex items-center space-x-1",children:[a.jsx("input",{type:"radio",checked:me==="append",onChange:()=>$("append")}),a.jsx("span",{className:"text-sm text-gray-700",children:"Auto-append number"})]}),a.jsxs("label",{className:"inline-flex items-center space-x-1",children:[a.jsx("input",{type:"radio",checked:me==="overwrite",onChange:()=>$("overwrite")}),a.jsx("span",{className:"text-sm text-gray-700",children:"Overwrite (confirm)"})]})]}),Se&&a.jsx("div",{className:"text-xs text-red-600 mt-2",children:Se})]})]}),a.jsxs("div",{className:"px-5 py-3 border-t border-gray-200 flex items-center justify-between space-x-2",children:[a.jsx("button",{type:"button",disabled:y,onClick:te,className:`export-file-modal-btn h-9 max-h-9 px-4 text-sm leading-none rounded border border-gray-300 min-w-[100px] inline-flex items-center justify-center shrink-0 self-center ${y?"bg-gray-100 text-gray-400":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:"Cancel"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{type:"button",disabled:y,onClick:async()=>{_("custom"),await je()},className:`export-file-modal-btn h-9 max-h-9 px-4 whitespace-nowrap text-sm leading-none rounded border border-blue-600 text-white min-w-[180px] inline-flex items-center justify-center shrink-0 self-center ${y?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:"Save to another location"}),a.jsx("button",{type:"button",disabled:y,onClick:O,className:`export-file-modal-btn h-9 max-h-9 px-4 whitespace-nowrap text-sm leading-none rounded border border-green-600 text-white min-w-[100px] inline-flex items-center justify-center shrink-0 self-center ${y?"bg-green-400":"bg-green-600 hover:bg-green-700"}`,children:"Export"})]})]})]})]})},gh=({onOpenFailedImagesReview:u,onOpenSettings:H,onOpenJobs:I})=>{const[f,C]=Qe.useState(!1),[A,y]=Qe.useState({top:0,left:0}),te=Qe.useRef(null),j=320;return a.jsxs("div",{className:"relative",children:[a.jsx("button",{"aria-label":"Open menu",title:"Menu",ref:te,onClick:()=>{const g=te.current?.getBoundingClientRect();if(g){const _=g.bottom+8,J=g.right-j,P=window.innerWidth-j-8,re=Math.max(8,Math.min(J,P));y({top:_,left:re})}C(_=>!_)},className:"p-2 rounded-md hover:bg-gray-100 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),f&&a.jsx("div",{className:"fixed min-w-[20rem] bg-white border border-gray-200 rounded-lg shadow-xl z-50 overflow-hidden",style:{top:`${A.top}px`,left:`${A.left}px`,width:`${j}px`},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide text-center",children:"Navigate"}),a.jsxs("button",{onClick:()=>{C(!1),u&&u()},className:"w-full py-2 text-sm text-gray-700 hover:bg-gray-50 grid place-items-center grid-flow-col auto-cols-max gap-2",children:[a.jsxs("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),a.jsx("span",{children:"Failed Images Review"})]}),a.jsxs("button",{onClick:()=>{C(!1),H&&H()},className:"w-full py-2 text-sm text-gray-700 hover:bg-gray-50 grid place-items-center grid-flow-col auto-cols-max gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),a.jsx("span",{children:"Settings"})]}),a.jsxs("button",{onClick:()=>{C(!1),I&&I()},className:"w-full py-2 text-sm text-gray-700 hover:bg-gray-50 grid place-items-center grid-flow-col auto-cols-max gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-6h13M9 7h13M5 7h.01M5 17h.01M5 12h.01"})}),a.jsx("span",{children:"Job Management"})]})]})}),f&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>C(!1)})]})},hh=({onBack:u,onOpenFailedImagesReview:H,onOpenSettings:I,onOpenJobs:f,onOpenSingleJobView:C})=>{const[A,y]=m.useState({state:"idle",progress:0,currentStep:1,totalSteps:2}),[te,j]=m.useState([]),[g,_]=m.useState([]),[J,P]=m.useState([]),[re,se]=m.useState({totalJobs:0,completedJobs:0,failedJobs:0,averageExecutionTime:0,totalImagesGenerated:0,successRate:0}),[me,$]=m.useState(null),[Se,xe]=m.useState(!1),[Me,ye]=m.useState(null),[ke,be]=m.useState(!1),[le,je]=m.useState(null),[O,pe]=m.useState("overview"),[z,q]=m.useState("grid"),[ee,ve]=m.useState("all"),[ne,o]=m.useState(""),[k,p]=m.useState("newest"),[V,G]=m.useState(null),[d,L]=m.useState(null),[Z,ce]=m.useState(new Set),[M,w]=m.useState(!1),[ae,fe]=m.useState(null),[Re,lt]=m.useState(!1),[Ve,gt]=m.useState(!1),[ga,Oe]=m.useState("");m.useEffect(()=>{const b=window.electronAPI;if(!b?.generatedImages)return;const oe=Ae=>fe(Ae?.step||null),ue=Ae=>{fe(null),w(!1)},ge=Ae=>{fe(null),w(!1)};try{b.generatedImages.onZipExportProgress(oe),b.generatedImages.onZipExportCompleted(ue),b.generatedImages.onZipExportError(ge)}catch{}return()=>{try{b.generatedImages.removeZipExportProgress(oe),b.generatedImages.removeZipExportCompleted(ue),b.generatedImages.removeZipExportError(ge)}catch{}}},[]);const _t=Qe.useCallback(()=>{const b=g||[],oe=ge=>{if(!ge)return{};if(typeof ge=="string")try{return JSON.parse(ge)}catch{return{}}return ge};return b.filter(ge=>{if(ee!=="all"&&ge.executionId!=ee)return!1;if(ne){const Ae=ne.toLowerCase(),Le=oe(ge.metadata),$e=typeof Le?.title=="string"?Le.title:Le?.title?.en||"",Fe=typeof Le?.description=="string"?Le.description:Le?.description?.en||"",Be=Array.isArray(Le?.tags)?Le.tags.join(" "):"",vt=typeof Le?.prompt=="string"?Le.prompt:"";if(!((ge.generationPrompt||"").toLowerCase().includes(Ae)||$e.toLowerCase().includes(Ae)||Fe.toLowerCase().includes(Ae)||Be.toLowerCase().includes(Ae)||vt.toLowerCase().includes(Ae)))return!1}if(V||d){if(!ge.createdAt)return!1;const Ae=new Date(ge.createdAt),Le=Ae.getFullYear(),$e=String(Ae.getMonth()+1).padStart(2,"0"),Fe=String(Ae.getDate()).padStart(2,"0"),Be=`${Le}-${$e}-${Fe}`;if(V&&Be<V||d&&Be>d)return!1}return!0}).map(ge=>ge.id)},[g,ee,ne,V,d]),Ht=Qe.useMemo(()=>_t().length,[_t]),[D,h]=m.useState("all"),[E,Q]=m.useState("newest");m.useEffect(()=>{const b=async()=>{try{const ge={...await window.electronAPI.jobManagement.getJobStatus()};ge&&ge.state==="running"&&typeof ge.progress=="number"&&ge.progress>=.999&&(ge.state="completed"),y(ge)}catch(ue){console.error("Failed to get job status:",ue)}},oe=setInterval(b,500);return b(),()=>clearInterval(oe)},[]);const W=async()=>{try{const b=await window.electronAPI.jobManagement.getConfiguration();b?.success&&je(b.settings)}catch(b){console.error("Failed to load job configuration:",b)}};m.useEffect(()=>{ie(),K(),Ee(),Te(),W()},[]);const he=Qe.useRef(null);m.useEffect(()=>{A.state==="completed"&&(he.current=Date.now()),A.state==="running"&&(he.current=null,ie()),Te()},[A.state]),m.useEffect(()=>{const b=setInterval(()=>{const oe=he.current!==null&&Date.now()-he.current<6e4;A.state==="running"||oe?Te():P([])},2e3);return()=>clearInterval(b)},[A.state]),m.useEffect(()=>{if(A.state!=="running")return;const b=setInterval(()=>{Ee()},1500);return()=>clearInterval(b)},[A.state]),m.useEffect(()=>{A.state==="completed"?(console.log(" Job completed, refreshing data..."),ie(),K(),setTimeout(()=>{console.log(" Delayed refresh of generated images to ensure metadata is complete..."),Ee()},500)):A.state==="failed"&&(console.log(" Job failed, refreshing data..."),ie(),K(),he.current=Date.now())},[A.state]);const ie=async()=>{try{xe(!0),$(null);const oe=await(window.electronAPI?.jobManagement).getJobHistory();console.log("Job history loaded:",oe);let ue=Array.isArray(oe)?[...oe]:[];Array.isArray(oe)||(console.warn("getJobHistory returned non-array:",oe),ue=[]);const ge=A?.currentJob;if(ge){const Ae=ge?.executionId||ge?.id,Le=String(ge?.status||A?.state||"").toLowerCase();if(Ae&&(Le==="running"||Le==="processing")){const $e=ue.findIndex(It=>String(It?.id)===String(Ae));let Fe="";if(!Fe&&ge?.configurationId&&window.electronAPI?.getJobConfigurationById)try{const It=await window.electronAPI.getJobConfigurationById(ge.configurationId),Gt=It?.configuration?.settings||{};Fe=String(Gt?.parameters?.label||It?.configuration?.name||"").trim()}catch{}if(!Fe&&ge?.executionId&&window.electronAPI?.jobManagement?.getJobExecution)try{const It=await window.electronAPI.jobManagement.getJobExecution(ge.executionId),Gt=It?.execution||It,va=String(Gt&&(Gt.label||Gt.displayLabel)||"").trim();va&&(Fe=va)}catch{}if(!Fe&&ge?.executionId&&window.electronAPI?.jobManagement?.getParentJobForRerun)try{const It=await window.electronAPI.jobManagement.getParentJobForRerun(ge.executionId),Gt=It?.job||It,va=String(Gt&&(Gt.label||Gt.configurationName)||"").trim();va&&(Fe=va+" (Rerun)")}catch{}const Be=$e>=0?ue[$e]:null,vt=Fe||Be?.displayLabel||Be?.label||ge?.displayLabel||ge?.configurationName||`job_${new Date().toISOString().replace(/[-:T.Z]/g,"").slice(0,14)}`,Bt=Be?.startedAt||ge?.startedAt||new Date,jt=String(Be?.label||ge?.label||Fe||ge?.configurationName||`Job ${Ae}`).trim(),Mt=jt.endsWith("(Rerun)")?jt.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(Ae).slice(-6)})`:jt,qa={...$e>=0?ue[$e]:{},...ge,status:"running",id:Be?.id||Ae,label:jt,displayLabel:Mt,configurationName:Mt,startedAt:Bt};$e>=0?(ue.splice($e,1),ue=[qa,...ue]):ue=[qa,...ue]}}j(ue)}catch(b){console.error("Failed to load job history:",b),$("Failed to load job history"),j([])}finally{xe(!1)}},K=async()=>{try{const b=await window.electronAPI.jobManagement.getJobStatistics();console.log("Statistics loaded:",b),se(b)}catch(b){console.error("Failed to load statistics:",b)}},Ee=async()=>{try{const b=await window.electronAPI.jobManagement.getAllGeneratedImages();if(console.log("Generated images loaded:",b),b&&Array.isArray(b)){const oe=b.filter(ue=>ue.qcStatus==="approved");_(oe),console.log(" Showing approved images:",oe.length,"out of",b.length,"total")}else console.warn("getAllGeneratedImages returned non-array:",b),_([])}catch(b){console.error("Failed to load generated images:",b),_([])}},Te=async()=>{try{const b=he.current!==null&&Date.now()-he.current<6e4,oe=A.state==="failed";if(!(A.state==="running"||b||oe)){P([]);return}let ue="standard";try{(await window.electronAPI.getSettings?.())?.settings?.advanced?.debugMode&&(ue="debug")}catch{}const ge=await window.electronAPI.jobManagement.getJobLogs(ue);console.log("Logs loaded:",ge),ge&&Array.isArray(ge)?P(ge):console.warn("getJobLogs returned non-array:",ge)}catch(b){console.error("Failed to load logs:",b),P([])}},Xe=Qe.useMemo(()=>{const b=Array.isArray(te)?te:[],oe=b.length,ue=b.filter(Be=>String(Be.status).toLowerCase()==="completed").length,ge=b.filter(Be=>String(Be.status).toLowerCase()==="failed").length,Ae=b.reduce((Be,vt)=>Be+(Number(vt.successfulImages)||0),0),Le=b.reduce((Be,vt)=>Be+(Number(vt.totalImages)||0),0),$e=(()=>{const Be=b.filter(Bt=>Bt.completedAt&&Bt.startedAt);if(Be.length===0)return 0;const vt=Be.reduce((Bt,jt)=>{const la=jt.startedAt?new Date(jt.startedAt).getTime():0,Mt=jt.completedAt?new Date(jt.completedAt).getTime():0,qa=Mt&&la&&Mt>la?(Mt-la)/1e3:0;return Bt+qa},0);return Math.round(vt/Be.length)})(),Fe=Le>0?Math.round(Ae/Le*100):re.successRate||0;return{totalJobs:oe||re.totalJobs||0,completedJobs:ue||re.completedJobs||0,failedJobs:ge||re.failedJobs||0,averageExecutionTime:$e||re.averageExecutionTime||0,totalImagesGenerated:Ae||re.totalImagesGenerated||0,successRate:Fe||0}},[te,re]),Pe=async()=>{try{console.log(" handleStartJob called - starting job execution..."),xe(!0),$(null),console.log(" Getting current configuration...");const b=await window.electronAPI.jobManagement.getConfiguration();if(console.log(" Configuration response loaded:",b),!b.success||!b.settings)throw new Error("Failed to load configuration or invalid response structure");const oe=b.settings;console.log(" Configuration extracted:",oe),console.log(" Starting the job with config...");const ue=await window.electronAPI.jobManagement.jobStart(oe);console.log(" Job start result:",ue),console.log(" Reloading data..."),await Promise.all([ie(),K()]),console.log(" Data reloaded successfully")}catch(b){console.error(" Failed to start job:",b),$("Failed to start job")}finally{console.log(" handleStartJob completed, setting loading to false"),xe(!1)}},ft=async()=>{try{xe(!0),$(null),await window.electronAPI.jobManagement.jobStop(),await Promise.all([ie(),K()])}catch(b){$("Failed to stop job"),console.error("Failed to stop job:",b)}finally{xe(!1)}},ot=async()=>{try{xe(!0),$(null),await window.electronAPI.jobManagement.jobForceStop(),await Promise.all([ie(),K()])}catch(b){$("Failed to force stop job"),console.error("Failed to force stop job:",b)}finally{xe(!1)}},pt=async(b,oe)=>{try{switch($(null),b){case"view":C&&C(oe);break;case"export":ye(oe),be(!0);break;case"delete":await window.electronAPI.jobManagement.deleteJobExecution(oe),await ie(),await K();break;case"rerun":console.log(" DEBUG RERUN: DashboardPanel rerun case triggered for jobId:",oe),console.log(" DEBUG RERUN: Timestamp:",new Date().toISOString()),console.log(" DEBUG RERUN: Stack trace:",new Error().stack);try{console.log(" DEBUG RERUN: About to call rerunJobExecution...");const ue=await window.electronAPI.jobManagement.rerunJobExecution(oe);console.log(" DEBUG RERUN: rerunJobExecution result:",ue),ue&&ue.success?(console.log(" DEBUG RERUN: Rerun successful, waiting for job registration..."),setTimeout(async()=>{console.log(" Refreshing UI after rerun..."),await ie(),await K()},1e3)):(console.error(" DEBUG RERUN: Rerun failed:",ue),$(`Failed to rerun job: ${ue?.error||"Unknown error"}`))}catch(ue){console.error(" DEBUG RERUN: Exception during rerun:",ue),$(`Failed to rerun job: ${ue?.message??String(ue)}`)}break}}catch(ue){$(`Failed to ${b} job`),console.error(`Failed to ${b} job:`,ue)}},N=async(b,oe,ue)=>{try{switch($(null),b){case"delete":await window.electronAPI.jobManagement.deleteGeneratedImage(oe),await Ee();break;case"view":break;case"update-qc-status":ue&&(await window.electronAPI.jobManagement.updateQCStatus(oe,ue),await Ee());break}}catch(ge){$(`Failed to ${b} image`),console.error(`Failed to ${b} image:`,ge)}},de=async(b,oe)=>{try{if($(null),oe.length===0)return;switch(b){case"delete":await window.electronAPI.jobManagement.bulkDeleteImages(oe),ce(new Set);break}await Ee()}catch(ue){$(`Failed to bulk ${b} images`),console.error(`Failed to bulk ${b} images:`,ue)}},Ne=b=>{if(!b)return[];const oe=[{name:"Initialization",icon:"",description:"Setup & Parameters",required:!0,completed:!0,weight:20}],ue=[];return ue.push("AI Generation"),b.ai?.runMetadataGen&&ue.push("Metadata"),b.ai?.runQualityCheck&&ue.push("QC"),b.processing?.removeBg&&ue.push("Background Removal"),b.processing&&(b.processing.imageEnhancement||b.processing.imageConvert||b.processing.sharpening>0||b.processing.saturation!==1||b.processing.convertToJpg||b.processing.trimTransparentBackground)&&ue.push("Processing"),ue.length>0&&oe.push({name:"Image Generation",icon:"",description:ue.join(" + "),required:!0,completed:!1,weight:80}),oe},Ze=(b,oe)=>{const ue=Math.max(1,Number(oe?.currentJob?.totalGenerations||0)),ge=Math.max(1,Number(b?.parameters?.count||1)),Ae=ue||ge,Le=Math.max(1,Math.min(20,Number(oe?.currentJob?.variations||0))),$e=Math.max(1,Math.min(20,Number(b?.parameters?.variations||1))),Fe=Le||$e,Be=oe?.state,vt=!!b?.ai?.runQualityCheck;let Bt=0;Be==="completed"?Bt=100:Bt=0;let jt=0,la=1,Mt=0;try{const It=oe?.currentJob?.executionId||oe?.currentJob?.id,Gt=Number(oe?.currentJob?.gensDone||0);if(Ae>1){if(oe?.currentJob)Mt=Math.min(Gt,Ae),jt=Math.round(Math.min(100,Mt/Ae*100));else if(It&&Array.isArray(g)){const va=g.filter(pn=>String(pn.executionId)===String(It));Mt=Math.floor((va.length||0)/Fe),jt=Math.round(Math.min(100,Mt/Ae*100))}vt&&Be!=="completed"&&(jt=Math.min(jt,95)),Be==="completed"&&(jt=100),la=Math.min(Ae,Math.max(1,Mt+1))}else jt=Bt,la=1}catch{}const qa=Math.floor(Bt/100*Fe);return{overallGenerationProgress:jt,current:Bt,currentGeneration:la,totalGenerations:Ae,generatedImages:qa,totalImages:Fe,gensDone:Mt}};return a.jsxs("div",{className:"dashboard-panel min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 py-3 md:py-4 flex items-center px-6 relative",children:a.jsxs("div",{className:"flex items-center justify-between w-full flex-wrap gap-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[u&&a.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Close dashboard",title:"Close",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx(gh,{onOpenFailedImagesReview:H,onOpenSettings:I,onOpenJobs:f}),a.jsx(Kg,{jobStatus:A.state,onStartJob:Pe,onStopJob:ft,onRefresh:()=>{ie(),K(),Ee()},isLoading:Se}),a.jsx(mh,{onForceStop:ot,isLoading:Se})]}),a.jsxs("div",{className:"flex items-center flex-wrap gap-x-6 gap-y-2 justify-end ml-auto",children:[a.jsxs("div",{className:"text-sm whitespace-nowrap",children:[a.jsx("span",{className:"text-gray-600",children:"Total Jobs:"}),a.jsx("span",{className:"ml-1 font-semibold text-blue-600",children:Xe.totalJobs})]}),a.jsxs("div",{className:"text-sm whitespace-nowrap",children:[a.jsx("span",{className:"text-gray-600",children:"Success Rate:"}),a.jsxs("span",{className:"ml-1 font-semibold text-green-600",children:[Xe.successRate,"%"]})]}),a.jsxs("div",{className:"text-sm whitespace-nowrap",children:[a.jsx("span",{className:"text-gray-600",children:"Images Generated:"}),a.jsx("span",{className:"ml-1 font-semibold text-purple-600",children:Xe.totalImagesGenerated})]}),a.jsxs("div",{className:"text-sm whitespace-nowrap",children:[a.jsx("span",{className:"text-gray-600",children:"Avg Duration:"}),a.jsxs("span",{className:"ml-1 font-semibold text-orange-600",children:[Xe.averageExecutionTime,"s"]})]})]})]})}),a.jsxs("div",{className:"tab-navigation",children:[a.jsx("button",{className:`tab-button ${O==="overview"?"active":""}`,onClick:()=>pe("overview"),children:"Overview"}),a.jsx("button",{className:`tab-button ${O==="image-gallery"?"active":""}`,onClick:()=>pe("image-gallery"),children:"Image Gallery"})]}),a.jsxs("div",{className:"tab-content-container",children:[O==="overview"&&a.jsxs("div",{className:"unified-panel-container",children:[a.jsxs("div",{className:"dashboard-panel job-progress",children:[a.jsx("div",{className:"panel-header",children:a.jsxs("div",{className:"section-header-with-icon",children:[a.jsx("svg",{className:"section-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Job Progress"]})}),a.jsxs("div",{className:"panel-content",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h4",{className:"text-sm font-medium mb-3 text-gray-700",children:["Generation Progress (",Ze(le,A).totalGenerations," ",Ze(le,A).totalGenerations>1?"generations":"generation",")"]}),a.jsx("div",{className:"progress-container",children:a.jsx("div",{className:"progress-fill",style:{width:`${Ze(le,A).totalGenerations>1?Ze(le,A).overallGenerationProgress:Ze(le,A).current}%`}})}),a.jsx("p",{className:"text-sm text-gray-600",children:Ze(le,A).totalGenerations>1?`Completed ${Ze(le,A).gensDone} of ${Ze(le,A).totalGenerations} generations (${Ze(le,A).overallGenerationProgress}% complete)`:A.state==="completed"?"Completed":"Running"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-3 text-gray-700",children:"Progress Steps"}),a.jsx("div",{className:"progress-steps",children:Ne(le).map((b,oe)=>{const ue=A?.state,ge=Number(A?.currentStep||A?.currentJob?.currentStep||1);let Ae="pending";return ue==="failed"?Ae="failed":ue==="completed"?Ae="completed":b.name==="Initialization"?Ae=ge>1?"completed":"active":b.name==="Image Generation"&&(Ae=ge>=2?"active":"pending"),a.jsxs(Qe.Fragment,{children:[a.jsxs("div",{className:"progress-step",children:[a.jsx("div",{className:`step-icon ${Ae}`,children:b.name==="Initialization"?a.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),a.jsxs("div",{className:"step-info",children:[a.jsx("div",{className:"step-name",children:b.name}),a.jsx("div",{className:"step-subtitle",children:b.description})]})]}),oe<Ne(le).length-1&&a.jsx("div",{className:"progress-connector"})]},b.name)})})]})]})]}),a.jsxs("div",{className:"dashboard-panel",children:[a.jsx("div",{className:"panel-header",children:a.jsxs("div",{className:"section-header-with-icon",children:[a.jsx("svg",{className:"section-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Job History"]})}),a.jsxs("div",{className:"panel-content",style:{padding:0},children:[a.jsx("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",background:"white"},children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status:"}),a.jsxs("select",{className:"control-select",value:D,onChange:b=>h(b.target.value),children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"running",children:"Running"}),a.jsx("option",{value:"pending",children:"Pending"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sort:"}),a.jsxs("select",{className:"control-select",value:E,onChange:b=>Q(b.target.value),children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"oldest",children:"Oldest First"}),a.jsx("option",{value:"name",children:"By Name"})]})]})]})}),a.jsx("div",{className:"job-history-content",children:a.jsx(sh,{jobs:te,onJobAction:pt,onDeleteJob:b=>pt("delete",b),isLoading:Se,statusFilter:D,sortBy:E})})]})]}),a.jsxs("div",{className:"dashboard-panel",children:[a.jsx("div",{className:"panel-header",children:a.jsxs("div",{className:"section-header-with-icon",children:[a.jsx("svg",{className:"section-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Logs Panel"]})}),a.jsx("div",{className:"panel-content",children:a.jsx(lm,{logs:J,jobStatus:A.state,onRefresh:Te})})]})]}),O==="image-gallery"&&a.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[a.jsxs("div",{className:"px-6 pt-4 pb-0 flex-shrink-0",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Generated Images"})}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg mb-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[g.length," Total Images"]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsxs("span",{className:"text-sm text-gray-700",children:[g.filter(b=>b.qcStatus==="approved").length," Success Images"]})]})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-gray-50 rounded-lg mb-4 flex-shrink-0",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View:"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>q("grid"),className:`p-2 rounded-md transition-all duration-200 ${z==="grid"?"bg-gray-200 text-gray-900 border border-gray-300":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 border border-transparent"}`,title:"Grid View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{onClick:()=>q("list"),className:`p-2 rounded-md transition-all duration-200 ${z==="list"?"bg-gray-200 text-gray-900 border border-gray-300":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 border border-transparent"}`,title:"List View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Job:"}),a.jsxs("button",{type:"button",onClick:()=>gt(b=>!b),className:"relative text-sm border border-gray-300 rounded-md px-3 py-1 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[14rem] text-left pr-8","aria-haspopup":"listbox","aria-expanded":Ve,children:[ee==="all"?"All Jobs":(()=>{const b=te.find(ue=>String(ue.id)===String(ee)),oe=b?.displayLabel||b?.label||b?.configurationName;if(oe&&String(oe).trim()!==""){const ue=String(oe).trim();return ue.endsWith("(Rerun)")?ue.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(b?.id).slice(-3)})`:ue}return`Job ${String(ee).slice(0,8)}`})(),a.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-slate-700",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z"})})})]})]}),Ve&&a.jsxs("div",{className:"absolute z-20 mt-2 w-[18rem] bg-white border border-gray-200 rounded-md shadow-lg overflow-x-hidden",children:[a.jsx("div",{className:"p-2 border-b border-gray-200",children:a.jsx("input",{type:"text",value:ga,onChange:b=>Oe(b.target.value),placeholder:"Search jobs...",className:"w-full text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})}),a.jsxs("ul",{role:"listbox",className:"max-h-72 overflow-y-auto overflow-x-hidden py-1",children:[a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>{ve("all"),gt(!1),Oe("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 whitespace-normal break-words ${ee==="all"?"bg-gray-100":""}`,role:"option","aria-selected":ee==="all",children:"All Jobs"})}),Array.from(new Set(g.map(b=>b.executionId))).map(b=>({id:b,label:(()=>{const oe=te.find(ge=>String(ge.id)===String(b)),ue=oe?.displayLabel||oe?.label||oe?.configurationName;if(ue&&String(ue).trim()!==""){const ge=String(ue).trim();return ge.endsWith("(Rerun)")?ge.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(b).slice(-3)})`:ge}return`Job ${String(b).slice(0,8)}`})()})).filter(b=>b.label.toLowerCase().includes(ga.toLowerCase())).map(b=>a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>{ve(String(b.id)),gt(!1),Oe("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 whitespace-normal break-words ${String(ee)===String(b.id)?"bg-gray-100":""}`,role:"option","aria-selected":String(ee)===String(b.id),title:b.label,children:b.label})},b.id))]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-300 rounded-md h-9 px-2",children:[a.jsx("input",{type:"date",className:"bg-transparent px-2 h-full text-sm focus:outline-none",value:V??"",onChange:b=>G(b.target.value||null)}),a.jsx("div",{className:"h-4 w-px bg-gray-300"}),a.jsx("input",{type:"date",className:"bg-transparent px-2 h-full text-sm focus:outline-none",value:d??"",onChange:b=>L(b.target.value||null)})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>{const b=new Date,oe=b.getFullYear(),ue=String(b.getMonth()+1).padStart(2,"0"),ge=String(b.getDate()).padStart(2,"0"),Ae=`${oe}-${ue}-${ge}`;G(Ae),L(Ae)},className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",children:"Today"}),a.jsx("button",{onClick:()=>{const b=new Date,oe=b.getFullYear(),ue=String(b.getMonth()+1).padStart(2,"0"),ge=String(b.getDate()).padStart(2,"0"),Ae=`${oe}-${ue}-${ge}`,Le=new Date(b);Le.setDate(Le.getDate()-7);const $e=Le.getFullYear(),Fe=String(Le.getMonth()+1).padStart(2,"0"),Be=String(Le.getDate()).padStart(2,"0"),vt=`${$e}-${Fe}-${Be}`;G(vt),L(Ae)},className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",children:"Week"}),a.jsx("button",{onClick:()=>{const b=new Date,oe=b.getFullYear(),ue=String(b.getMonth()+1).padStart(2,"0"),ge=String(b.getDate()).padStart(2,"0"),Ae=`${oe}-${ue}-${ge}`,Le=new Date(b);Le.setMonth(Le.getMonth()-1);const $e=Le.getFullYear(),Fe=String(Le.getMonth()+1).padStart(2,"0"),Be=String(Le.getDate()).padStart(2,"0"),vt=`${$e}-${Fe}-${Be}`;G(vt),L(Ae)},className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-100",children:"Month"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Search:"}),a.jsx("input",{type:"text",placeholder:"Search images...",value:ne,onChange:b=>o(b.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sort:"}),a.jsxs("select",{value:k,onChange:b=>p(b.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"oldest",children:"Oldest First"}),a.jsx("option",{value:"name",children:"By Name"})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:Z.size===Ht&&Ht>0,onChange:b=>{if(b.target.checked){const oe=_t();ce(new Set(oe))}else ce(new Set)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Select All (",Z.size,"/",Ht,")"]})]}),a.jsx("button",{onClick:()=>{ve("all"),o(""),p("newest"),G(null),L(null),ce(new Set)},className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:"Clear"}),a.jsxs("button",{onClick:()=>lt(!0),disabled:Z.size===0||M,className:`px-4 py-2 text-sm rounded-md transition-colors flex items-center gap-2 ${Z.size===0||M?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,title:Z.size===0?"Select images to enable export":"Export selected images to ZIP",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("span",{children:M?ae==="creating-excel"?"Excel":ae==="zipping"?"Zipping":"Exporting":"Export ZIP"})]}),Z.size>0&&a.jsxs("button",{onClick:()=>de("delete",Array.from(Z)),className:"px-4 py-2 text-sm rounded-md transition-colors flex items-center gap-2 bg-red-600 text-white hover:bg-red-700",title:`Delete ${Z.size} selected image${Z.size===1?"":"s"}`,children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),a.jsxs("span",{children:["Delete Selected (",Z.size,")"]})]})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 px-6 pb-6",style:{maxHeight:"60vh",overflowY:"auto"},children:a.jsx(oh,{images:g,onImageAction:N,onBulkAction:de,viewMode:z,onViewModeChange:q,isLoading:Se,jobStatus:A.state,jobFilter:ee,searchQuery:ne,sortBy:k,jobIdToLabel:Object.fromEntries(te.map(b=>{const oe=b.label||b.displayLabel||b.configurationName||`Job ${b.id}`,ge=oe.endsWith("(Rerun)")?oe.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(b.id).slice(-6)})`:oe;return[b.id,ge]})),dateFrom:V,dateTo:d,selectedIds:Z,onSelectionChange:ce,onClearFilters:()=>{ve("all"),o(""),p("newest"),G(null),L(null),ce(new Set)}})}),a.jsx(dh,{isOpen:Re,count:Z.size,defaultFilename:`exported-images-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.zip`,step:ae,isBusy:M,onClose:()=>lt(!1),onExport:async({mode:b,outputPath:oe,filename:ue,includeExcel:ge,duplicatePolicy:Ae})=>{try{w(!0),fe("gathering-files");const Le=Array.from(Z);if(Le.length===0)return;let $e;b==="custom"&&(oe&&!/\.zip$/i.test(oe)?$e=`${oe.replace(/[\\/]+$/,"")}/${ue}`:$e=oe||ue);const Fe=b==="custom"?{outputPath:$e||ue,duplicatePolicy:Ae}:void 0,Be=await window.electronAPI.generatedImages.exportZip(Le,ge!==!1,Fe);if(!Be||!Be.success)console.error(Be?.error||"Export failed");else{console.log("ZIP created at",Be.zipPath);try{Be.zipPath?await window.electronAPI.revealInFolder(Be.zipPath):await window.electronAPI.openExportsFolder()}catch{}}}catch(Le){console.error(Le?.message||"Export failed")}finally{}}})]})]}),me&&a.jsx("div",{className:"fixed top-4 right-4 bg-red-50 border border-red-200 rounded-lg p-4 max-w-md",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800",children:me})}),a.jsx("div",{className:"ml-auto pl-3",children:a.jsx("button",{onClick:()=>$(null),className:"text-red-400 hover:text-red-600",children:a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})}),A.state==="running"&&a.jsx("div",{className:"fixed bottom-4 left-4 z-50 bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md shadow-lg",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-blue-800",children:"Only one job can run at a time. Please wait for the current job to complete."})})]})}),a.jsx(Gc,{isOpen:ke,title:"Export Job",count:0,fileKind:"xlsx",defaultFilename:(()=>{const b=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),oe=te.find(Le=>String(Le.id)===String(Me)),ue=Me?String(Me).slice(-6):"",ge=oe&&(oe.displayLabel||oe.label||oe.configurationName)||ue||"Job";return`${String(ge).replace(/[^a-zA-Z0-9-_]/g,"_")}_${b}.xlsx`})(),onClose:()=>{be(!1),ye(null)},onExport:async({mode:b,outputPath:oe,filename:ue,duplicatePolicy:ge})=>{try{if(!Me)return;let Ae;b==="custom"&&(oe&&!/\.xlsx$/i.test(oe)?Ae=`${oe.replace(/[\\/]+$/,"")}/${ue}`:Ae=oe||ue);const Le=b==="custom"?{outputPath:Ae||ue,duplicatePolicy:ge}:void 0,$e=await window.electronAPI.jobManagement.exportJobToExcel(Me,Le);if($e&&$e.success&&$e.filePath)try{await window.electronAPI.revealInFolder($e.filePath)}catch{}}finally{be(!1),ye(null)}}})]})},xh=({image:u,isSelected:H,onSelect:I,onAction:f})=>{const C=te=>te?new Date(te).toLocaleDateString():"",A=()=>{const te=u?.metadata;try{const j=typeof te=="string"?JSON.parse(te):te||{},g=typeof j?.title=="object"?j.title.en||"":j?.title||"";return g&&String(g).trim()||String(u.generationPrompt||"")}catch{return String(u.generationPrompt||"")}},y=()=>a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx(wa,{variant:"qc",status:u.qcStatus})});return a.jsxs("div",{"data-testid":`failed-image-card-${u.id}`,className:"relative bg-white border rounded-lg overflow-hidden transition-colors border-gray-200 hover:border-gray-300 hover:bg-gray-50",children:[a.jsx("div",{className:"absolute top-2 right-2 z-10",children:a.jsx("input",{"data-testid":`select-${u.id}`,type:"checkbox",checked:H,onChange:I,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:te=>te.stopPropagation()})}),a.jsxs("div",{className:"relative aspect-square",onClick:()=>f("view",String(u.id)),children:[u.finalImagePath||u.tempImagePath?a.jsx("img",{src:`local-file://${u.finalImagePath||u.tempImagePath||""}`,alt:`Failed image ${u.id}`,className:"w-full h-full object-cover",onError:te=>{te.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik02NCAzMkM3Ny4yNTQ4IDMyIDg4IDQyLjc0NTIgODggNTZDODggNjkuMjU0OCA3Ny4yNTQ4IDgwIDY0IDgwQzUwLjc0NTIgODAgNDAgNjkuMjU0OCA0MCA1NkM0MCA0Mi43NDUyIDUwLjc0NTIgMzIgNjQgMzJaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0yNCA4OEgxMDRDMTEwLjYyNyA4OCAxMTYgOTMuMzcyNiAxMTYgMTAwVjExMkMxMTYgMTE4LjYyNyAxMTAuNjI3IDEyNCAxMDQgMTI0SDI0QzE3LjM3MjYgMTI0IDEyIDExOC42MjcgMTIgMTEyVjEwMEMxMiA5My4zNzI2IDE3LjM3MjYgODggMjQgODhaIiBmaWxsPSIjOUI5QkEwIi8+Cjwvc3ZnPgo="}}):a.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),y(),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-40 transition-all duration-200 flex items-center justify-center opacity-0 hover:opacity-100",children:a.jsxs("div",{className:"flex items-center space-x-2",onClick:te=>te.stopPropagation(),children:[a.jsx("button",{onClick:()=>f("view",String(u.id)),className:"p-2 bg-gray-600 text-white rounded-full hover:bg-gray-700",title:"View","aria-label":"View",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:()=>f("approve",String(u.id)),className:"p-2 bg-green-600 text-white rounded-full hover:bg-green-700",title:"Approve","aria-label":"Approve",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>f("retry",String(u.id)),className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700",title:"Add to Retry","aria-label":"Add to Retry",children:a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m15 14 5-5-5-5"}),a.jsx("path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5 5.5 5.5 0 0 0 9.5 20H13"})]})}),a.jsx("button",{onClick:()=>f("delete",String(u.id)),className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700",title:"Delete","aria-label":"Delete",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 truncate mb-2",title:A(),children:A()}),u.qcReason&&a.jsxs("div",{className:"text-xs text-red-600 mb-2 p-2 bg-red-50 rounded border border-red-200",children:[a.jsx("strong",{children:"Failure:"})," ",u.qcReason]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[a.jsx("div",{className:"flex items-center space-x-2",children:u.seed&&a.jsx("span",{className:"font-mono",title:`Seed: ${u.seed}`,children:u.seed})}),a.jsx("div",{title:C(u.createdAt),children:C(u.createdAt)})]})]})]})},ph=({image:u,isOpen:H,onClose:I,onAction:f,onApprove:C,onRetry:A,onPrevious:y,onNext:te,onDelete:j})=>{if(!H)return null;const[g,_]=m.useState("details"),J=m.useRef(null),P=m.useRef(null),[re,se]=m.useState(1),[me,$]=m.useState({x:0,y:0}),[Se,xe]=m.useState(!1),[Me,ye]=m.useState(!1),ke=m.useRef({x:0,y:0}),be=m.useRef({x:0,y:0}),le=m.useRef(null),je=p=>{if(!p)return{};if(typeof p=="string")try{return JSON.parse(p)}catch{return{}}return p},O=p=>{f(p,String(u.id)),I()},pe=p=>{p.target===p.currentTarget&&I()},z=p=>{p.key==="Escape"&&I()};m.useEffect(()=>()=>{},[]),m.useEffect(()=>{if(H){const p=document.querySelector('[aria-label="Close modal"]');p&&p.focus()}},[H]);const q=m.useCallback(()=>{const p=P.current,V=J.current;if(!p||!V)return;const G=p.naturalWidth||p.width,d=p.naturalHeight||p.height,L=V.getBoundingClientRect(),Z=L.width-32,ce=L.height-32;if(G<=0||d<=0||Z<=0||ce<=0)return;const M=Math.min(Z/G,ce/d,1);se(M>0?M:1),$({x:0,y:0})},[]);m.useEffect(()=>{if(H&&u){const p=u.id,V=le.current,G=V===null,d=V!==null&&String(V)!==String(p);G?(_("details"),se(1),$({x:0,y:0}),requestAnimationFrame(q),le.current=p):d&&(le.current=p)}else H||(le.current=null)},[H,u,q]);const ee=(p,V)=>{se(G=>{const d=Math.min(Math.max(G+p,.2),5);if(V&&J.current){const L=J.current.getBoundingClientRect(),Z=V.x-L.left-L.width/2,ce=V.y-L.top-L.height/2,M=d/G-1;$(w=>({x:w.x-Z*M,y:w.y-ce*M}))}return d})},ve=p=>{if(p.ctrlKey||p.metaKey){p.preventDefault();const V=p.deltaY>0?-.1:.1;ee(V,{x:p.clientX,y:p.clientY})}},ne=p=>{p.button===0&&(xe(!0),ke.current={x:p.clientX,y:p.clientY},be.current={...me})},o=p=>{if(!Se)return;const V=p.clientX-ke.current.x,G=p.clientY-ke.current.y;$({x:be.current.x+V,y:be.current.y+G})},k=()=>xe(!1);return a.jsx("div",{"data-testid":"failed-image-review-modal",className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-hidden",onKeyDown:z,onClick:pe,children:a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{"data-testid":"modal-header",className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Image Details"}),a.jsx("div",{className:"inline-flex items-center",children:a.jsx(wa,{variant:"qc",status:u?.qcStatus||"qc_failed"})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:async()=>{C?await C(String(u.id)):O("approve")},className:"review-modal-button bg-green-600 text-white hover:bg-green-700",title:"Approve image (move to success)",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Approve"]}),a.jsxs("button",{onClick:async()=>{A?await A(String(u.id)):O("retry")},className:"review-modal-button bg-blue-600 text-white hover:bg-blue-700",title:"Add image to retry pool",children:[a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m15 14 5-5-5-5"}),a.jsx("path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5 5.5 5.5 0 0 0 9.5 20H13"})]}),"Add to Retry"]}),a.jsxs("button",{onClick:async()=>{j?await j(String(u.id)):O("delete")},className:"review-modal-button bg-red-600 text-white hover:bg-red-700",title:"Delete image permanently",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]}),a.jsx("button",{type:"button",onClick:()=>ye(p=>!p),className:"px-2 py-1 text-xs bg-white hover:bg-gray-50 border border-gray-200 text-gray-700 rounded","aria-label":"Image Control Info",title:"Image Control Info",children:"Image Control Info"}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:y,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100","aria-label":"Previous image",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:te,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100","aria-label":"Next image",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),a.jsx("button",{type:"button",onClick:I,className:"p-2 text-gray-400 hover:text-gray-600","aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),Me&&a.jsxs("div",{className:"absolute top-14 right-4 w-80 bg-white border border-gray-200 rounded-md shadow-lg p-3 text-xs text-gray-700 z-20",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Image viewer controls"}),a.jsx("button",{type:"button",className:"p-1 text-gray-500 hover:text-gray-700",onClick:()=>ye(!1),"aria-label":"Close help",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("ul",{className:"space-y-1 list-disc pl-4",children:[a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Pan"}),": Click and drag on the image"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Zoom"}),": Ctrl (Windows/Linux) or  Cmd (macOS) + mouse wheel"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Fit"}),": Doubleclick image"]}),a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:"Toolbar (bottomright)"}),": Zoom out (), Zoom in (+), Reset, Fit to screen"]})]})]}),a.jsxs("div",{"data-testid":"modal-content",className:"flex flex-col lg:flex-row h-[calc(90vh-80px)] overflow-hidden",children:[a.jsx("div",{className:"lg:w-2/3 p-6 bg-gray-50 flex flex-col h-full",children:a.jsx("div",{"data-testid":"image-container",className:"relative flex-1 h-full min-h-0",children:u.finalImagePath||u.tempImagePath?a.jsxs("div",{ref:J,className:"relative w-full h-full overflow-hidden rounded bg-white border",onWheel:ve,onDoubleClick:q,children:[a.jsx("img",{ref:P,src:`local-file://${u.finalImagePath||u.tempImagePath||""}`,alt:"Failed image",className:`${Se?"cursor-grabbing":"cursor-grab"}`,style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) translate(${me.x}px, ${me.y}px) scale(${re})`,transformOrigin:"center center",transition:Se?"none":"transform 80ms ease-out",maxWidth:"100%",maxHeight:"100%",userSelect:"none",pointerEvents:"auto"},onMouseDown:ne,onMouseMove:o,onMouseUp:k,onMouseLeave:k,onError:p=>{p.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCA1MEgxNTBWNzVINzVWMTI1SDUwVjUwWiIgZmlsbD0iI0QxRDVEM0EiLz4KPHN2ZyB4PSI3NSIgeT0iODAiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0NSIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMTkgM0g1QzMuOSAzIDMgMy45IDMgNVYxOUMzIDIwLjEgMy45IDIxIDUgMjFIMTlDMjAuMSAyMSAyMSAyMC4xIDIxIDE5VjVDMjEgMy45IDIwLjEgMyAxOSAzWk0xOSAxOUg1VjVIMTlWMTlaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0xNCAxM0gxMFYxN0gxNFYxM1oiIGZpbGw9IiM5QjlCQTAiLz4KPC9zdmc+Cjwvc3ZnPgo="}}),a.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center space-x-2 bg-white/90 border border-gray-200 rounded-md shadow px-2 py-1 z-10",children:[a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>ee(-.1),title:"Zoom out","aria-label":"Zoom out",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),a.jsxs("div",{className:"text-xs text-gray-600 w-12 text-center",children:[Math.round(re*100),"%"]}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>ee(.1),title:"Zoom in","aria-label":"Zoom in",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:()=>{se(1),$({x:0,y:0})},title:"Reset","aria-label":"Reset zoom",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582M20 12A8.001 8.001 0 004.582 9m0 0H9"})})}),a.jsx("button",{className:"p-1 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded",onClick:q,title:"Fit to screen","aria-label":"Fit to screen",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h7M3 3v7M21 21h-7M21 21v-7"})})})]})]}):a.jsxs("div",{className:"w-full h-64 bg-gray-100 flex items-center justify-center rounded-lg",children:[a.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsx("span",{className:"sr-only",children:"No Image Available"})]})})}),a.jsxs("div",{className:"w-full lg:w-1/3 p-6 overflow-hidden border-l border-gray-200 flex flex-col min-h-0",children:[a.jsx("div",{className:"flex border-b border-gray-200 mb-4",children:["details","metadata","processing"].map(p=>a.jsx("button",{onClick:()=>_(p),className:`flex-1 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${g===p?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:p==="details"?"Details":p==="metadata"?"AI Metadata":"Processing"},p))}),a.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[g==="details"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Id"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:u.executionId})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Id"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono",children:u.id})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Failure Analysis"}),a.jsx("div",{className:u.qcReason?"bg-red-50 border border-red-200 rounded-lg p-4":"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("svg",{className:`w-5 h-5 mt-0.5 mr-2 ${u.qcReason?"text-red-400":"text-yellow-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:u.qcReason?"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z":"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("h4",{className:`text-sm font-medium ${u.qcReason?"text-red-800":"text-yellow-800"}`,children:u.qcReason?"Failure Reason":"No Specific Reason"}),a.jsx("p",{className:`${u.qcReason?"text-red-700":"text-yellow-700"} text-sm mt-1`,children:u.qcReason||"Image failed quality check but no specific reason provided."})]})]})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Generation Details"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prompt"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded border",children:u.generationPrompt})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),a.jsx("p",{className:"text-sm text-gray-900",children:u.createdAt?new Date(u.createdAt).toLocaleDateString():""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File Path"}),a.jsx("p",{className:"text-sm text-gray-900 font-mono break-all",children:u.finalImagePath||u.tempImagePath||""})]})]})]})]}),g==="metadata"&&a.jsx("div",{className:"space-y-4",children:(()=>{const p=je(u.metadata),V=typeof p?.title=="object"?p.title.en||"":p?.title||"",G=typeof p?.description=="object"?p.description.en||"":p?.description||"";let d=[];return p?.uploadTags?.en?d=String(p.uploadTags.en).split(",").map(L=>L.trim()).filter(Boolean):Array.isArray(p?.tags)?d=p.tags:typeof p?.tags=="string"&&(d=String(p.tags).split(",").map(L=>L.trim()).filter(Boolean)),!V&&!G&&d.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No AI metadata available."}):a.jsxs(a.Fragment,{children:[V&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Title"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:V})]}),G&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Description"}),a.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md border",children:G})]}),d.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI-Generated Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:d.map((L,Z)=>a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:L},Z))})]})]})})()}),g==="processing"&&a.jsx("div",{className:"space-y-4",children:(()=>{const p=u.processingSettings||{};return a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Enhancement"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.imageEnhancement?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sharpening"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.imageEnhancement?p.sharpening||0:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Enhancement OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saturation"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.imageEnhancement?p.saturation||1.4:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Enhancement OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Convert"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.imageConvert?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Convert Format"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.imageConvert?p.convertToJpg?"JPG":"PNG":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Image Convert OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"JPG Quality"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.imageConvert&&p.convertToJpg?p.jpgQuality||100:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Convert Format is not JPG)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PNG Quality"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.imageConvert&&!p.convertToJpg?p.pngQuality||100:a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Convert Format is not PNG)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remove Background"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.removeBg?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remove.bg Size"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.removeBg?p.removeBgSize||"auto":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Remove Background OFF)"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trim Transparent"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.trimTransparentBackground?"Yes":"No"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"JPG Background Colour"}),a.jsx("p",{className:"text-sm text-gray-900",children:p.imageConvert&&p.convertToJpg&&p.removeBg?p.jpgBackground||"white":a.jsx("span",{className:"text-gray-500 italic",children:"Not applied (Remove Background, Image Convert are set to OFF and Convert Format is not JPG)"})})]})]})})()})]})]})]})]})})},nm=({selectedImage:u,allImages:H,onClose:I,onAction:f,onApprove:C,onRetry:A,onDelete:y,onPreviousImage:te,onNextImage:j,hasPrevious:g,hasNext:_})=>{const[J,P]=m.useState(null),re=m.useRef(!1),se=m.useRef(!1),me=u?J||H.find(je=>String(je.id)===String(u.id)):null;!me&&!re.current&&u&&setTimeout(()=>{re.current||I()},0);const $=()=>{re.current||se.current||I()},Se=async je=>{re.current=!0,se.current=!0;try{await C(je),setTimeout(()=>{P(null)},200)}finally{re.current=!1,se.current=!1}},xe=async je=>{re.current=!0,se.current=!0;try{await A(je),setTimeout(()=>{P(null)},200)}finally{re.current=!1,se.current=!1}},Me=async je=>{re.current=!0,se.current=!0;try{await y(je),setTimeout(()=>{P(null)},200)}finally{re.current=!1,se.current=!1}},ye=u&&g(u)?()=>{P(null),te(u)}:void 0,ke=u&&_(u)?()=>{P(null),j(u)}:void 0,be=me||u||{id:"",filePath:"",prompt:"",qcStatus:"qc_failed"},le=!!u;return rh.createPortal(a.jsx(ph,{image:be,isOpen:le,onClose:$,onAction:f,onApprove:Se,onRetry:xe,onPrevious:ye,onNext:ke,hasPrevious:u?g(u):!1,hasNext:u?_(u):!1,onDelete:Me}),document.body)};nm.displayName="FailedImageModalContainer";const vh=({isOpen:u,onClose:H,onRetry:I,selectedCount:f})=>{const[C,A]=m.useState(!0),[y,te]=m.useState(!1),[j,g]=m.useState({imageEnhancement:!1,sharpening:5,saturation:1,imageConvert:!1,convertToJpg:!0,jpgQuality:85,pngQuality:100,removeBg:!1,removeBgSize:"auto",trimTransparentBackground:!1,jpgBackground:"#FFFFFF"}),_=m.useRef(null),J=m.useRef(null),P=m.useRef(null),re=m.useRef(null),se=m.useRef(null);if(m.useEffect(()=>{},[C,u]),!u)return null;const me=()=>{console.log(" ProcessingSettingsModal: handleRetry called"),console.log(" ProcessingSettingsModal: useOriginalSettings:",C),console.log(" ProcessingSettingsModal: includeMetadata:",y),console.log(" ProcessingSettingsModal: batchSettings keys:",Object.keys(j)),C?(console.log(" ProcessingSettingsModal: Retrying with original settings"),I(!0,void 0,y)):(console.log(" ProcessingSettingsModal: Retrying with modified settings keys:",Object.keys(j)),I(!1,j,y))},$=(O,pe)=>{g(z=>({...z,[O]:pe}))},Se=j.imageEnhancement,xe=j.imageEnhancement,Me=j.imageConvert,ye=j.imageConvert,ke=j.imageConvert&&j.convertToJpg,be=j.imageConvert&&!j.convertToJpg,le=j.removeBg,je=j.removeBg&&j.imageConvert&&j.convertToJpg;return a.jsx("div",{"data-testid":"processing-settings-modal",className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{"data-testid":"modal-header",className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Retry Processing Settings"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Configure how to process ",f," selected images for retry"]})]}),a.jsx("button",{type:"button",onClick:H,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{"data-testid":"modal-content",ref:J,className:"p-6 overflow-y-auto flex-1 min-h-0 retry-modal-scroll",style:{scrollbarGutter:"stable both-edges"},children:[a.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("svg",{className:"w-5 h-5 text-blue-400 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Batch Processing"}),a.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["All ",f," selected images will be processed together with the same settings. This ensures consistent results across the entire batch."]})]})]})}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Batch Processing Method"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsx("input",{type:"radio",name:"processingMethod",value:"original","aria-label":"Retry with Original Settings",checked:C,onChange:()=>A(!0),className:"text-blue-600 focus:ring-0 focus:outline-none focus-visible:outline-none mt-1.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Retry with Original Settings"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Process all images with their original job settings (Metadata, processing)"})]})]}),a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsx("input",{type:"radio",name:"processingMethod",value:"modified","aria-label":"Retry with Modified Settings",checked:!C,onChange:()=>A(!1),className:"text-blue-600 focus:ring-0 focus:outline-none focus-visible:outline-none mt-1.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Retry with Modified Settings"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Process all images with new settings (Metadata, processing)  no image regeneration"})]})]})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Metadata Options"}),a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("svg",{className:"w-5 h-5 text-blue-400 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Metadata Regeneration"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Choose whether to regenerate metadata for the selected images during retry processing."}),a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-blue-800 font-medium",children:"Also regenerate metadata (titles, descriptions, tags)"}),a.jsx(ct,{checked:y,onChange:te})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"This will regenerate AI-generated metadata for all selected images using the current AI model settings."})]})]})]})})]}),!C&&a.jsxs("div",{ref:_,className:"space-y-8 scroll-mt-4",children:[a.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("svg",{className:"w-5 h-5 text-yellow-400 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Important Note"}),a.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["These settings will be applied to all ",f," images in the batch. Images will NOT be regenerated and Quality Controlled - only metadata or/and processing will be updated."]}),a.jsxs("p",{className:"text-sm text-yellow-600 mt-2",children:[a.jsx("strong",{children:"Current defaults:"})," Image conversion enabled, converting to JPG at 85% quality"]})]})]})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Batch Processing Configuration"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Image Enhancement"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image Enhancement"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Enable image enhancement effects (sharpening, saturation)"})]}),a.jsx(ct,{ariaLabel:"Enable image enhancement",checked:j.imageEnhancement,onChange:O=>{$("imageEnhancement",O),O&&setTimeout(()=>{P.current?.scrollIntoView({behavior:"smooth",block:"start"})},0)}})]}),Se&&a.jsxs("div",{ref:P,className:"scroll-mt-4",children:[a.jsx("label",{htmlFor:"sharpening",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sharpening Level (0-10)"}),a.jsx("input",{id:"sharpening",type:"number",value:j.sharpening,onChange:O=>$("sharpening",parseInt(O.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"10"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sharpening intensity for image enhancement"})]}),xe&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"saturation",className:"block text-sm font-medium text-gray-700 mb-2",children:"Saturation Level (0.0-2.0)"}),a.jsx("input",{id:"saturation",type:"number",value:j.saturation,onChange:O=>$("saturation",parseFloat(O.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0.0",max:"2.0",step:"0.1"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Saturation adjustment for image enhancement"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Image Conversion"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image Convert"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Enable image conversion and processing"})]}),a.jsx(ct,{ariaLabel:"Enable image conversion",checked:j.imageConvert,onChange:O=>{$("imageConvert",O),O&&setTimeout(()=>{re.current?.scrollIntoView({behavior:"smooth",block:"start"})},0)}})]}),Me&&a.jsxs("div",{ref:re,className:"scroll-mt-4",children:[a.jsx("label",{htmlFor:"convert-format",className:"block text-sm font-medium text-gray-700 mb-2",children:"Convert Format"}),a.jsxs("select",{id:"convert-format","aria-label":"Convert Format",value:j.convertToJpg?"jpg":"png",onChange:O=>{const pe=O.target.value==="jpg";$("convertToJpg",pe)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"png",children:"PNG"}),a.jsx("option",{value:"jpg",children:"JPG"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Convert images to this format"})]}),ye&&a.jsxs("div",{className:"space-y-4",children:[ke&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"jpg-quality",className:"block text-sm font-medium text-gray-700 mb-2",children:"JPG Quality (1-100)"}),a.jsx("input",{id:"jpg-quality",type:"number",value:j.jpgQuality,onChange:O=>$("jpgQuality",parseInt(O.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"100"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quality setting for JPG conversion"})]}),be&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"png-quality",className:"block text-sm font-medium text-gray-700 mb-2",children:"PNG Quality (1-100)"}),a.jsx("input",{id:"png-quality",type:"number",value:j.pngQuality,onChange:O=>$("pngQuality",parseInt(O.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"100"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG quality setting used by sharp (1=lowest, 100=highest)"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Background Processing"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remove Background"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Remove background using Remove.bg API"})]}),a.jsx(ct,{ariaLabel:"Remove background",checked:j.removeBg,onChange:O=>{$("removeBg",O),O&&setTimeout(()=>{se.current?.scrollIntoView({behavior:"smooth",block:"start"})},0)}})]}),j.removeBg&&a.jsxs("div",{ref:se,className:"scroll-mt-4",children:[a.jsx("label",{htmlFor:"remove-bg-size",className:"block text-sm font-medium text-gray-700 mb-2",children:"Remove BG Size"}),a.jsxs("select",{id:"remove-bg-size",value:j.removeBgSize,onChange:O=>$("removeBgSize",O.target.value),className:"ui-select",children:[a.jsx("option",{value:"auto",children:"Auto"}),a.jsx("option",{value:"preview",children:"Preview"}),a.jsx("option",{value:"full",children:"Full"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Size setting for background removal"})]}),le&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trim Transparent Background"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Remove transparent areas from images (PNG only)"})]}),a.jsx(ct,{ariaLabel:"Trim transparent background",checked:j.trimTransparentBackground,onChange:O=>$("trimTransparentBackground",O)})]}),je&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"jpg-background",className:"block text-sm font-medium text-gray-700 mb-2",children:"JPG Background Color"}),a.jsxs("select",{id:"jpg-background",value:j.jpgBackground,onChange:O=>$("jpgBackground",O.target.value),className:"ui-select",children:[a.jsx("option",{value:"#FFFFFF",children:"White"}),a.jsx("option",{value:"#000000",children:"Black"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Background color for JPG images (required when removing background)"})]})]})]})]}),a.jsxs("div",{"data-testid":"modal-footer",className:"flex justify-end space-x-3 p-6 border-t border-gray-200",children:[a.jsx("button",{onClick:H,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:me,className:"px-6 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium",children:[C?"Retry with Original Settings":"Retry with Modified Settings"," (",f," images)"]})]})]})})},bh=({onBack:u,onBackToSingleJob:H})=>{console.log(" FailedImagesReviewPanel: Component mounting...");const[I,f]=m.useState([]),[C,A]=m.useState([]),[y,te]=m.useState([]),[j,g]=m.useState([]),[_,J]=m.useState(new Set),[P,re]=m.useState(null),[se,me]=m.useState(new Set),[$,Se]=m.useState(!1),[xe,Me]=m.useState("qc_failed"),[ye]=m.useState({imageEnhancement:!1,sharpening:0,saturation:1,imageConvert:!1,convertToJpg:!0,jpgQuality:90,pngQuality:100,removeBg:!1,removeBgSize:"auto",trimTransparentBackground:!1,jpgBackground:"#FFFFFF"}),[ke,be]=m.useState(!1),[le,je]=m.useState(null),[O,pe]=m.useState("all"),[z,q]=m.useState(""),[ee,ve]=m.useState("newest"),[ne,o]=m.useState(!1),[k,p]=m.useState(""),[V,G]=m.useState({isProcessing:!1,queueLength:0,pendingJobs:0,processingJobs:0,completedJobs:0,failedJobs:0}),[d,L]=m.useState("grid"),[Z,ce]=m.useState({});m.useEffect(()=>{console.log(" FailedImagesReviewPanel: useEffect running..."),w(),M();const h=(K,Ee)=>{console.log(" Retry progress event received:",Ee),w(),M()},E=async(K,Ee)=>{console.log(" Retry completed event received:",Ee);try{const Te=Ee?.result?.newPath||Ee?.result?.processedImagePath;if(Te&&window.electronAPI?.refreshProtocolRoots){const Xe=Te.replace(/\\[^/]*$/,"").replace(/\/[^/]*$/,"");await window.electronAPI.refreshProtocolRoots([Xe])}}catch(Te){console.warn(" Failed to refresh protocol roots after retry-completed:",Te?.message||Te)}w(),M()},Q=(K,Ee)=>{console.log(" Retry error event received:",Ee),je(`Retry error: ${Ee.error}`),w(),M()},W=(K,Ee)=>{console.log(" Retry queue updated event received"),M()},he=(K,Ee)=>{console.log(" Retry status updated event received"),w(),M()};window.electronAPI.onRetryProgress(h),window.electronAPI.onRetryCompleted(E),window.electronAPI.onRetryError(Q),window.electronAPI.onRetryQueueUpdated(W),window.electronAPI.onRetryStatusUpdated(he);const ie=setInterval(()=>{M(),V.isProcessing&&w()},5e3);return()=>{clearInterval(ie),window.electronAPI.removeRetryProgress(h),window.electronAPI.removeRetryCompleted(E),window.electronAPI.removeRetryError(Q),window.electronAPI.removeRetryQueueUpdated(W),window.electronAPI.removeRetryStatusUpdated(he)}},[]);const M=async()=>{try{const h=await window.electronAPI.getRetryQueueStatus();h.success&&h.queueStatus&&G(h.queueStatus)}catch(h){console.error("Failed to load retry queue status:",h)}},w=async()=>{console.log(" loadAllImageStatuses: Starting...");try{be(!0),je(null);const[h,E,Q,W]=await Promise.all([window.electronAPI.generatedImages.getImagesByQCStatus("qc_failed"),window.electronAPI.generatedImages.getImagesByQCStatus("retry_pending"),window.electronAPI.generatedImages.getImagesByQCStatus("processing"),window.electronAPI.generatedImages.getImagesByQCStatus("retry_failed")]),he=ie=>ie&&typeof ie=="object"&&ie.success!==void 0?ie.images||[]:Array.isArray(ie)?ie:[];f(he(h)),A(he(E)),te(he(Q)),g(he(W));try{const ie=await window.electronAPI?.jobManagement?.getAllJobExecutions?.({});let K=[];Array.isArray(ie?.executions)?K=ie.executions:Array.isArray(ie?.jobs)?K=ie.jobs:Array.isArray(ie?.data)&&(K=ie.data);const Ee={};K.forEach(Te=>{const Xe=String(Te?.id),Pe=(Te?.label||Te?.configurationName||"").toString();Xe&&(Ee[Xe]=Pe)}),ce(Ee)}catch{}try{const ie=await window.electronAPI?.jobManagement?.getAllJobExecutions?.({});let K=[];Array.isArray(ie?.executions)?K=ie.executions:Array.isArray(ie?.jobs)?K=ie.jobs:Array.isArray(ie?.data)&&(K=ie.data);const Ee={};K.forEach(Te=>{const Xe=String(Te?.id),Pe=(Te?.label||Te?.configurationName||"").toString();Xe&&(Ee[Xe]=Pe)})}catch{}}catch(h){console.error(" loadAllImageStatuses: Error occurred:",h),je("Failed to load images")}finally{be(!1),console.log(" loadAllImageStatuses: Loading complete")}},ae=async(h,E=6e4,Q=2e3)=>{try{const W=K=>K&&typeof K=="object"&&K.success!==void 0?K.images||[]:Array.isArray(K)?K:[],he=K=>K.some(Ee=>h.includes(String(Ee.id))),ie=Date.now();for(await w(),await M();Date.now()-ie<E;){const[K,Ee]=await Promise.all([window.electronAPI.generatedImages.getImagesByQCStatus("retry_pending"),window.electronAPI.generatedImages.getImagesByQCStatus("processing")]),Te=W(K),Xe=W(Ee);if(await w(),await M(),!(he(Te)||he(Xe)))break;await new Promise(ft=>setTimeout(ft,Q))}}catch{}},fe=()=>{switch(xe){case"qc_failed":return I;case"retry_pending":return C;case"processing":return y;case"retry_failed":return j;case"approved":return[...I,...C,...y,...j];default:return I}},Re=h=>{const E=new Set(_);E.has(h)?E.delete(h):E.add(h),J(E)},lt=()=>{const h=fe();_.size===h.length?J(new Set):J(new Set(h.map(E=>String(E.id))))},Ve=async(h,E)=>{try{switch(je(null),h){case"approve":let Q=null;window.electronAPI?.generatedImages?.manualApproveImage?Q=await window.electronAPI.generatedImages.manualApproveImage(E):Q=await window.electronAPI.generatedImages.updateQCStatus(E,"approved");try{const K=Q?.outputDirectory,Ee=Q?.finalImagePath,Te=Ee&&typeof Ee=="string"?Ee.replace(/\\[^/]*$/,"").replace(/\/[^/]*$/,""):null,Xe=K||Te||null;Xe&&window.electronAPI?.refreshProtocolRoots&&await window.electronAPI.refreshProtocolRoots([Xe])}catch(K){console.warn(" refreshProtocolRoots failed (non-blocking):",K?.message||K)}await w();break;case"retry":const W=new Set(_);W.add(E),J(W),console.log(" Image added to retry selection:",E,"Total selected:",W.size);break;case"delete":await window.electronAPI.generatedImages.deleteGeneratedImage(E),await w();break;case"view":const ie=[...I,...C,...y,...j].find(K=>String(K.id)===E);ie&&re(ie);break}}catch(Q){je(`Failed to ${h} image`),console.error(`Failed to ${h} image:`,Q)}},gt=async h=>{if(_.size!==0)try{switch(je(null),h){case"approve":for(const E of _)window.electronAPI?.generatedImages?.manualApproveImage?await window.electronAPI.generatedImages.manualApproveImage(E):await window.electronAPI.generatedImages.updateQCStatus(E,"approved");break;case"retry":Se(!0);return;case"delete":for(const E of _)await window.electronAPI.generatedImages.deleteGeneratedImage(E);break}await w(),J(new Set)}catch(E){je(`Failed to bulk ${h} images`),console.error(`Failed to bulk ${h} images:`,E)}},ga=async(h,E,Q)=>{if(console.log(" FailedImagesReviewPanel: handleRetryWithSettings called"),console.log(" FailedImagesReviewPanel: useOriginalSettings:",h),console.log(" FailedImagesReviewPanel: modifiedSettings keys:",E?Object.keys(E):"undefined"),console.log(" FailedImagesReviewPanel: includeMetadata:",Q),console.log(" FailedImagesReviewPanel: selectedImages count:",_.size),_.size!==0)try{je(null);const W=Array.from(_);console.log(" FailedImagesReviewPanel: Calling retryFailedImagesBatch with imageIds:",W);const he=await window.electronAPI.retryFailedImagesBatch(W,h,h?null:E||ye,Q);if(console.log(" FailedImagesReviewPanel: retryFailedImagesBatch result:",he),he.success){console.log(" FailedImagesReviewPanel: Retry successful, refreshing data..."),await w(),await M(),J(new Set),Se(!1),console.log(" FailedImagesReviewPanel: Retry processing complete");try{const ie=W.map(K=>String(K));ae(ie).catch(()=>{})}catch{}}else console.error(" FailedImagesReviewPanel: Retry failed:",he.error),je(he.error||"Failed to process retry operations")}catch(W){console.error(" FailedImagesReviewPanel: Exception occurred:",W),je("Failed to process retry operations"),console.error("Failed to process retry operations:",W)}},Oe=Qe.useMemo(()=>[...fe().filter(W=>{if(se.has(String(W.id))||O!=="all"&&String(W.executionId)!==O)return!1;if(z){const he=z.toLowerCase(),ie=W.metadata||{},K=W.generationPrompt.toLowerCase().includes(he),Te=(typeof ie?.prompt=="string"?ie.prompt.toLowerCase():"").includes(he),Pe=(typeof ie?.title=="string"?ie.title:ie?.title?.en||"").toLowerCase().includes(he),ot=(typeof ie?.description=="string"?ie.description:ie?.description?.en||"").toLowerCase().includes(he),N=(Array.isArray(ie?.tags)?ie.tags.join(" ").toLowerCase():"").includes(he);if(!K&&!Te&&!Pe&&!ot&&!N)return!1}return!0})].sort((W,he)=>{switch(ee){case"newest":return(he.createdAt?new Date(he.createdAt).getTime():0)-(W.createdAt?new Date(W.createdAt).getTime():0);case"oldest":return(W.createdAt?new Date(W.createdAt).getTime():0)-(he.createdAt?new Date(he.createdAt).getTime():0);case"name":return W.generationPrompt.localeCompare(he.generationPrompt);default:return 0}}),[xe,I,C,y,j,O,z,ee,se]),_t=Array.from(new Set([...I.map(h=>String(h.executionId)),...C.map(h=>String(h.executionId)),...y.map(h=>String(h.executionId)),...j.map(h=>String(h.executionId))])),Ht=h=>{switch(h){case"qc_failed":return I.length;case"retry_pending":return C.length;case"processing":return y.length;case"retry_failed":return j.length;case"approved":return I.length+C.length+y.length+j.length;default:return 0}},D=h=>{switch(h){case"qc_failed":return"text-red-600 bg-red-50 border-red-200";case"retry_pending":return"text-amber-600 bg-amber-50 border-amber-200";case"processing":return"text-blue-600 bg-blue-50 border-blue-200";case"retry_failed":return"text-orange-600 bg-orange-50 border-orange-200";case"approved":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return ke?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading images..."})]})}):a.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col overflow-hidden",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 relative",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Back to dashboard",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),H&&a.jsx("button",{onClick:H,className:"text-blue-500 hover:text-blue-700 transition-colors","aria-label":"Back to single job view",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Failed Images Review"}),a.jsx("p",{className:"text-gray-600",children:"Review and manage images that failed quality assurance checks"})]})]}),a.jsx("div",{className:"flex items-center space-x-4 ml-auto",children:a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:Ht("qc_failed")}),a.jsx("div",{className:"text-sm text-gray-500",children:"Failed Images"})]})})]})}),(V.isProcessing||V.queueLength>0)&&a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-lg font-semibold text-blue-900 flex items-center gap-2",children:[a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]}),"Retry Queue Status"]}),a.jsx("div",{className:"text-sm text-blue-700",children:V.isProcessing?"Currently Processing":"Queued Jobs"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:V.processingJobs}),a.jsx("div",{className:"text-sm text-blue-700",children:"Processing"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-600",children:V.pendingJobs}),a.jsx("div",{className:"text-sm text-amber-700",children:"Queued"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:V.completedJobs}),a.jsx("div",{className:"text-sm text-green-700",children:"Completed"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:V.failedJobs}),a.jsx("div",{className:"text-sm text-red-700",children:"Failed"})]})]}),V.currentJob&&a.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-blue-900",children:["Current Job: #",V.currentJob.id]}),a.jsxs("span",{className:"text-xs text-blue-600",children:[V.currentJob.settings," settings + ",V.currentJob.metadata?"metadata":"no metadata"]})]}),a.jsx("div",{className:"space-y-2",children:y.map(h=>a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"text-blue-800",children:[" Image ",h.id,": Processing..."]}),a.jsx("div",{className:"w-24 bg-blue-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})})]},h.id))})]})]})}),a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-2",children:a.jsx("div",{className:"flex space-x-1",children:["qc_failed","retry_pending","processing","retry_failed","approved"].map(h=>a.jsxs("button",{onClick:()=>Me(h),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-colors ${xe===h?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:[h==="qc_failed"&&"Failed",h==="retry_pending"&&"Retry Pending",h==="processing"&&"Processing",h==="retry_failed"&&"Retry Failed",h==="approved"&&"All",a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full border ${D(h)}`,children:Ht(h)})]},h))})}),a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-3",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View:"}),a.jsx("button",{onClick:()=>L("grid"),className:`p-2 rounded-md transition-all duration-200 ${d==="grid"?"bg-gray-200 text-gray-900 border border-gray-300":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 border border-transparent"}`,"aria-label":"Grid View",title:"Grid View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{onClick:()=>L("list"),className:`p-2 rounded-md transition-all duration-200 ${d==="list"?"bg-gray-200 text-gray-900 border border-gray-300":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 border border-transparent"}`,"aria-label":"List View",title:"List View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Job:"}),a.jsxs("button",{type:"button",onClick:()=>o(h=>!h),className:"relative text-sm border border-gray-300 rounded-md px-3 py-1 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[14rem] text-left pr-8","aria-haspopup":"listbox","aria-expanded":ne,children:[O==="all"?"All Jobs":(()=>{const h=Z[String(O)];if(h&&h.trim()!==""){const E=h.trim();return E.endsWith("(Rerun)")?E.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(O).slice(-3)})`:E}return`Job ${String(O).slice(0,8)}`})(),a.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-slate-700",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z"})})})]})]}),ne&&a.jsxs("div",{className:"absolute z-20 mt-2 w-[18rem] bg-white border border-gray-200 rounded-md shadow-lg overflow-x-hidden",children:[a.jsx("div",{className:"p-2 border-b border-gray-200",children:a.jsx("input",{type:"text",value:k,onChange:h=>p(h.target.value),placeholder:"Search jobs...",className:"w-full text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})}),a.jsxs("ul",{role:"listbox",className:"max-h-72 overflow-y-auto overflow-x-hidden py-1",children:[a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>{pe("all"),o(!1),p("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 whitespace-normal break-words ${O==="all"?"bg-gray-100":""}`,role:"option","aria-selected":O==="all",children:"All Jobs"})}),_t.map(h=>({id:h,label:Z[String(h)]||`Job ${String(h).slice(0,8)}`})).filter(h=>h.label.toLowerCase().includes(k.toLowerCase())).map(h=>a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>{pe(String(h.id)),o(!1),p("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 whitespace-normal break-words ${String(O)===String(h.id)?"bg-gray-100":""}`,role:"option","aria-selected":String(O)===String(h.id),title:(()=>{const E=h.label.trim();return E.endsWith("(Rerun)")?E.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(h.id).slice(-3)})`:E})(),children:(()=>{const E=h.label.trim();return E.endsWith("(Rerun)")?E.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(h.id).slice(-3)})`:E})()})},h.id))]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Search:"}),a.jsx("input",{type:"text",placeholder:"Search images...",value:z,onChange:h=>q(h.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sort:"}),a.jsxs("select",{value:ee,onChange:h=>ve(h.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"oldest",children:"Oldest First"}),a.jsx("option",{value:"name",children:"By Name"})]})]}),a.jsx("button",{onClick:()=>{pe("all"),q(""),ve("newest"),J(new Set)},className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:"Clear"})]}),a.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:_.size===Oe.length&&Oe.length>0,onChange:lt,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Select All (",_.size,"/",Oe.length,")"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>gt("approve"),disabled:_.size===0,className:`flex items-center px-3 py-2 text-sm rounded-md transition-colors ${_.size===0?"bg-green-200 text-green-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,title:_.size===0?"Select images to enable":"Approve selected images",children:"Approve Selected"}),a.jsxs("button",{onClick:()=>gt("retry"),disabled:_.size===0||V.isProcessing,className:`flex items-center px-3 py-2 text-sm rounded-md transition-colors ${_.size===0||V.isProcessing?"bg-blue-200 text-blue-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,title:_.size===0?"Select images to enable":V.isProcessing?"Retry is currently processing. Please wait for completion.":"Retry selected images (batch)",children:["Retry Selected",V.isProcessing&&a.jsxs("svg",{className:"ml-1 w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V2A10 10 0 002 12h2zm2 5.291A7.962 7.962 0 04 12H2c0 3.042 1.135 5.824 3 7.938l1-0.647z"})]})]}),a.jsx("button",{onClick:()=>gt("delete"),disabled:_.size===0,className:`flex items-center px-3 py-2 text-sm rounded-md transition-colors ${_.size===0?"bg-red-200 text-red-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,title:_.size===0?"Select images to enable":"Delete selected images",children:"Delete Selected"})]})]})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.jsx("div",{className:"p-6",children:Oe.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",xe==="qc_failed"?"Failed":xe==="retry_pending"?"Retry Pending":xe==="processing"?"Processing":xe==="retry_failed"?"Retry Failed":"Images"]}),a.jsx("p",{className:"text-gray-500",children:xe==="qc_failed"?"All images have passed quality checks or are pending review.":xe==="retry_pending"?"No images are currently queued for retry.":xe==="processing"?"No images are currently being processed.":xe==="retry_failed"?"No images have failed retry attempts.":"No images match the current criteria."})]}):a.jsx(a.Fragment,{children:d==="grid"?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:Oe.map(h=>a.jsx(xh,{image:h,isSelected:_.has(String(h.id)),onSelect:()=>Re(String(h.id)),onAction:(E,Q)=>Ve(E,Q)},h.id))}):a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full table-fixed divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"w-12 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Select"}),a.jsx("th",{className:"w-20 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),a.jsx("th",{className:"w-28 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"QC Status"}),a.jsx("th",{className:"w-[40%] px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),a.jsx("th",{className:"w-[18%] px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Job Name/Label"}),a.jsx("th",{className:"w-28 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"w-28 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Oe.map(h=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"w-12 px-4 py-2 align-top",children:a.jsx("input",{type:"checkbox",checked:_.has(String(h.id)),onChange:()=>Re(String(h.id)),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),a.jsx("td",{className:"w-20 px-4 py-2 align-top",children:a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded overflow-hidden flex items-center justify-center",title:(function(){const E=h?.metadata,Q=(W,he=140)=>W.length>he?W.slice(0,he-1)+"":W;try{const W=typeof E=="string"?JSON.parse(E):E||{},he=typeof W?.title=="object"?W.title.en||"":W?.title||"";if(he&&String(he).trim())return String(he).trim();const ie=String(h.generationPrompt||"");return Q(ie)}catch{const W=String(h.generationPrompt||"");return Q(W)}})(),children:h.finalImagePath||h.tempImagePath?a.jsx("img",{src:`local-file://${h.finalImagePath||h.tempImagePath}`,alt:"thumb",className:"w-full h-full object-cover",onError:E=>{E.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI0YzRjRGNiIvPgo8cGF0aCBkPSJNNTAgNTBIMTUwVjc1SDc1VjEyNUg1MFY1MFoiIGZpbGw9IiNEMUQ1RDNBIi8+Cjwvc3ZnPg=="}}):a.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),a.jsx("td",{className:"w-28 px-4 py-2 align-top",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border bg-red-50 text-red-700 border-red-200",children:String(h.qcStatus)==="qc_failed"?"QC failed":String(h.qcStatus)==="retry_failed"?"Retry failed":String(h.qcStatus)==="retry_pending"?"Pending retry":String(h.qcStatus)==="processing"?"Processing":String(h.qcStatus)})}),a.jsx("td",{className:"w-[40%] px-4 py-2 text-sm text-gray-700 whitespace-normal break-words align-top",children:h.qcReason||"-"}),a.jsx("td",{className:"w-[18%] px-4 py-2 text-sm text-gray-700 align-top",children:Z[String(h.executionId)]||`Job ${h.executionId}`}),a.jsx("td",{className:"w-28 px-4 py-2 text-sm text-gray-700 align-top",children:h.createdAt?new Date(h.createdAt).toLocaleDateString():"-"}),a.jsx("td",{className:"w-28 px-4 py-2 align-top",children:a.jsxs("div",{className:"flex items-center gap-3 justify-start flex-wrap",children:[a.jsx("button",{onClick:()=>Ve("view",String(h.id)),className:"text-gray-600 hover:text-gray-900",title:"View","aria-label":"View",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:()=>Ve("approve",String(h.id)),className:"text-green-600 hover:text-green-700",title:"Approve","aria-label":"Approve",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>Ve("retry",String(h.id)),className:"text-blue-600 hover:text-blue-700",title:"Add to Retry","aria-label":"Add to Retry",children:a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"m15 14 5-5-5-5"}),a.jsx("path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5 5.5 5.5 0 0 0 9.5 20H13"})]})}),a.jsx("button",{onClick:()=>Ve("delete",String(h.id)),className:"text-red-600 hover:text-red-700",title:"Delete","aria-label":"Delete",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},h.id))})]})})})}),(V.completedJobs>0||V.failedJobs>0)&&a.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Retry History"]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[V.completedJobs>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsxs("span",{children:["Completed: ",V.completedJobs," retry jobs"]})]}),V.failedJobs>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a.jsxs("span",{children:["Failed: ",V.failedJobs," retry jobs"]})]})]})]})})]}),le&&a.jsx("div",{className:"fixed top-4 right-4 bg-red-50 border border-red-200 rounded-lg p-4 max-w-md",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800",children:le})}),a.jsx("div",{className:"ml-auto pl-3",children:a.jsx("button",{onClick:()=>je(null),className:"text-red-400 hover:text-red-600",children:a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})}),a.jsx(nm,{selectedImage:P,allImages:Oe,onClose:()=>{re(null),me(new Set),w()},onAction:Ve,onApprove:async h=>{const E=Oe.findIndex(W=>String(W.id)===String(h));let Q=null;E>=0&&(E<Oe.length-1?Q=Oe[E+1]:E>0&&(Q=Oe[E-1]));try{window.electronAPI?.generatedImages?.manualApproveImage?await window.electronAPI.generatedImages.manualApproveImage(h):await window.electronAPI.generatedImages.updateQCStatus(h,"approved"),me(W=>new Set(W).add(String(h))),Q?Ja.flushSync(()=>{re(Q)}):Ja.flushSync(()=>{re(null)})}catch(W){console.error("Failed to approve image:",W)}},onRetry:async h=>{const E=Oe.findIndex(he=>String(he.id)===String(h));let Q=null;E>=0&&(E<Oe.length-1?Q=Oe[E+1]:E>0&&(Q=Oe[E-1]));const W=new Set(_);W.add(h),J(W),console.log(" Image added to retry selection:",h,"Total selected:",W.size),Q?Ja.flushSync(()=>{re(Q)}):Ja.flushSync(()=>{re(null)})},onDelete:async h=>{const E=Oe.findIndex(W=>String(W.id)===String(h));let Q=null;E>=0&&(E<Oe.length-1?Q=Oe[E+1]:E>0&&(Q=Oe[E-1]));try{await window.electronAPI.generatedImages.deleteGeneratedImage(h),me(W=>new Set(W).add(String(h))),Q?Ja.flushSync(()=>{re(Q)}):Ja.flushSync(()=>{re(null)})}catch(W){console.error("Failed to delete image:",W)}},onPreviousImage:h=>{const E=Oe.findIndex(Q=>String(Q.id)===String(h.id));E>0&&re(Oe[E-1])},onNextImage:h=>{const E=Oe.findIndex(Q=>String(Q.id)===String(h.id));E>=0&&E<Oe.length-1&&re(Oe[E+1])},hasPrevious:h=>Oe.findIndex(Q=>String(Q.id)===String(h.id))>0,hasNext:h=>{const E=Oe.findIndex(Q=>String(Q.id)===String(h.id));return E>=0&&E<Oe.length-1}},"failed-image-modal-container"),$&&a.jsx(vh,{isOpen:$,onClose:()=>Se(!1),onRetry:ga,selectedCount:_.size})]})},yh=({options:u,value:H,onChange:I,buttonClassName:f,menuWidthClassName:C,ariaLabel:A,disabled:y})=>{const[te,j]=Qe.useState(!1),g=Qe.useRef(null),_=Qe.useMemo(()=>u.find(J=>String(J.value)===String(H))||u[0],[u,H]);return Qe.useEffect(()=>{const J=re=>{g.current&&(g.current.contains(re.target)||j(!1))},P=re=>{re.key==="Escape"&&j(!1)};return document.addEventListener("mousedown",J),document.addEventListener("keydown",P),()=>{document.removeEventListener("mousedown",J),document.removeEventListener("keydown",P)}},[]),a.jsxs("div",{className:"relative",ref:g,children:[a.jsxs("button",{type:"button",onClick:()=>!y&&j(J=>!J),"aria-haspopup":"listbox","aria-expanded":te,"aria-label":A,disabled:y,className:`${f||"text-sm border border-gray-300 rounded-md px-3 py-1 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[10rem] text-left"} relative pr-8`,children:[_?.label,a.jsx("span",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-slate-700",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z"})})})]}),te&&a.jsx("div",{className:`absolute z-30 mt-2 ${C||"w-[12rem]"} bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden`,children:a.jsx("ul",{role:"listbox",className:"py-1",children:u.map(J=>a.jsx("li",{children:a.jsx("button",{type:"button",onClick:()=>{I(J.value),j(!1)},role:"option","aria-selected":String(H)===String(J.value),className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${String(H)===String(J.value)?"bg-gray-100":""}`,children:J.label})},String(J.value)))})})]})},jh=({onOpenSingleJob:u,onBack:H})=>{const[I,f]=m.useState([]),[C,A]=m.useState(new Set),[y,te]=m.useState({status:"all",dateRange:"all",label:"",minImages:0,maxImages:void 0,hasPendingRetries:!1}),[j,g]=m.useState(""),[_]=m.useState("startedAt"),[J]=m.useState("desc"),[P,re]=m.useState(1),[se,me]=m.useState(25),[$,Se]=m.useState(0),[xe,Me]=m.useState(!0),[ye,ke]=m.useState(null),[be,le]=m.useState(!1),[je,O]=m.useState(!1),[pe,z]=m.useState("single"),[q,ee]=m.useState(null),[ve,ne]=m.useState(null),o=m.useRef(null),k=m.useMemo(()=>{let D=0;return y.status&&y.status!=="all"&&D++,y.dateFrom&&D++,y.dateTo&&D++,y.label&&y.label.trim()!==""&&D++,typeof y.minImages=="number"&&y.minImages>0&&D++,typeof y.maxImages=="number"&&typeof y.maxImages=="number"&&D++,j&&j.trim()!==""&&D++,y.hasPendingRetries&&D++,D},[y,j]),p=m.useCallback(D=>D?new Date(D).toISOString().slice(0,10):"",[]),V=m.useMemo(()=>{if(!I.length)return[];let D=[...I];if(j.trim()){const E=j.toLowerCase();D=D.filter(Q=>Q.label?.toLowerCase().includes(E)||Q.id.toString().includes(E)||Q.status.toLowerCase().includes(E))}if(y.status!=="all"){const E=y.status;E==="processing"?D=D.filter(Q=>{const W=String(Q.status);return W==="processing"||W==="running"}):E==="pending"?D=D.filter(Q=>{const W=String(Q.status);return W==="pending"||W==="queued"}):D=D.filter(Q=>String(Q.status)===E)}if(y.hasPendingRetries&&(D=D.filter(E=>typeof E.pendingJobs=="number"&&E.pendingJobs>0||!1)),y.dateRange!=="all"){let E=new Date;switch(y.dateRange){case"today":E.setHours(0,0,0,0),D=D.filter(Q=>new Date(Q.startedAt||0)>=E);break;case"week":E.setDate(E.getDate()-7),D=D.filter(Q=>new Date(Q.startedAt||0)>=E);break;case"month":E.setMonth(E.getMonth()-1),D=D.filter(Q=>new Date(Q.startedAt||0)>=E);break}}if((y.label||"").trim()){const E=(y.label||"").toLowerCase();D=D.filter(Q=>Q.label?.toLowerCase().includes(E))}const h=y.minImages??0;return h>0&&(D=D.filter(E=>(E.totalImages||0)>=h)),typeof y.maxImages=="number"&&(D=D.filter(E=>(E.totalImages||0)<=y.maxImages)),D},[I,j,y]),G=m.useMemo(()=>V.length?[...V].sort((h,E)=>{let Q=h[_],W=E[_];if((_==="startedAt"||_==="completedAt")&&(Q=new Date(Q||0).getTime(),W=new Date(W||0).getTime()),typeof Q=="number"&&typeof W=="number")return J==="asc"?Q-W:W-Q;if(typeof Q=="string"&&typeof W=="string"){const he=Q.localeCompare(W);return J==="asc"?he:-he}return Q==null&&W==null?0:Q==null?J==="asc"?-1:1:W==null?J==="asc"?1:-1:0}):[],[V,_,J]),d=m.useMemo(()=>{const D=(P-1)*se,h=D+se;return G.slice(D,h)},[G,P,se]),L=m.useMemo(()=>Math.ceil(G.length/se),[G.length,se]),Z=m.useMemo(()=>{const D=I.filter(ie=>ie.status==="completed").length,h=I.filter(ie=>ie.status==="failed").length,E=I.filter(ie=>{const K=String(ie.status);return K==="processing"||K==="running"}).length,Q=I.filter(ie=>{const K=String(ie.status);return K==="pending"||K==="queued"}).length,W=I.reduce((ie,K)=>ie+(K.totalImages||0),0),he=I.length>0?W/I.length:0;return{totalJobs:ve?.total??I.length,completedJobs:ve?.completed??D,failedJobs:ve?.failed??h,processingJobs:ve?.processing??E,pendingJobs:ve?.pending??Q,totalImages:W,averageImagesPerJob:he}},[I,ve]),ce=m.useMemo(()=>{const D=Date.now(),h=1440*60*1e3,E=7*h,Q=D-E,W=D-2*E,he=Q,ie=ot=>{if(!ot)return 0;const pt=new Date(ot).getTime();return isNaN(pt)?0:pt},K=I.filter(ot=>{const pt=ie(ot.startedAt||ot.completedAt);return pt>=Q&&pt<=D}).length,Ee=I.filter(ot=>{const pt=ie(ot.startedAt||ot.completedAt);return pt>=W&&pt<he}).length;let Te=0,Xe="flat";Ee>0?(Te=Math.round((K-Ee)/Ee*100),Te>0?Xe="up":Te<0&&(Xe="down")):K>0&&(Te=100,Xe="up");const Pe=I.filter(ot=>{if(String(ot.status).toLowerCase()!=="failed")return!1;const pt=ie(ot.completedAt||ot.startedAt);return pt>=D-h&&pt<=D}).length,ft=Z.totalJobs>0?Math.round((Z.completedJobs||0)/Z.totalJobs*100):0;return{weeklyDeltaPct:Te,weeklyTrend:Xe,failedLast24h:Pe,completionRate:ft}},[I,Z]),M=m.useCallback(D=>{g(D),re(1),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{},300)},[]),w=m.useCallback(async(D=!1)=>{try{D||Me(!0),ke(null);const{hasPendingRetries:h,...E}=y,Q=await window.electronAPI.jobManagement.getJobExecutionsWithFilters(E,P,se);if(Q.success){let W=Array.isArray(Q.executions)?Q.executions:Array.isArray(Q.jobs)?Q.jobs:Array.isArray(Q.data)?Q.data:[];W=W.map(he=>{const ie=String(he.status||"");return{...he,status:ie==="queued"?"pending":ie}});try{const he=await window.electronAPI?.jobManagement?.getJobStatus?.(),ie=he?.currentJob,K=String(he?.state||ie?.status||"").toLowerCase(),Ee=ie?.executionId||he?.executionId;if(ie&&Ee&&(K==="running"||K==="processing")){const Te=W.findIndex(de=>String(de.id)===String(Ee)),Xe=W.some(de=>String(de.status).toLowerCase()==="running"),Pe=Te>=0?W[Te]:null;let ft=String(Pe?.label||Pe?.displayLabel||ie?.label||ie?.configurationName||`Job ${Ee}`).trim();const pt=ft.endsWith("(Rerun)")?ft.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(Ee).slice(-6)})`:ft,N={...Te>=0?W[Te]:{},...ie,status:"running",id:Ee,label:ft,displayLabel:pt};if(!N.startedAt){const de=ie?.startedAt||ie?.startTime||he?.startTime;de&&(N.startedAt=new Date(de))}Te>=0?W[Te]=N:Xe||(W=[N,...W])}}catch{}f(W),Se(Q.count||Q.totalCount||W.length||0)}else throw new Error(Q.error||"Failed to load jobs")}catch(h){ke(h instanceof Error?h.message:"Failed to load jobs"),console.error("Error loading jobs:",h),f([]),Se(0)}finally{D||Me(!1)}},[y,P,se]),ae=m.useCallback(async()=>{try{const D=window.electronAPI?.jobManagement;if(!D)return;const h=Pe=>Number(Pe&&(Pe.count??Pe.totalCount??Pe)||0),E=async Pe=>{try{if(D.getJobExecutionsCount){const ft=await D.getJobExecutionsCount({status:Pe}),ot=h(ft);if(!Number.isNaN(ot))return ot}}catch{}try{const ft=await D.getJobExecutionsWithFilters({status:Pe},1,1);return h(ft)||(Array.isArray(ft?.executions)?ft.executions.length:0)}catch{return 0}},[Q,W,he,ie,K,Ee,Te,Xe]=await Promise.all([E("all"),E("completed"),E("failed"),E("processing"),E("running"),E("pending"),E("queued"),(async()=>{try{const Pe=await D.getBulkRerunQueueSize?.();return Number(Pe&&(Pe.count??0)||0)}catch{return 0}})()]);ne({total:Q,completed:W,failed:he,processing:ie+K,pending:Math.max(Ee+Te,Xe)})}catch{}},[]);m.useEffect(()=>{w(),ae()},[w]),m.useEffect(()=>{let D=null;return I.some(E=>{const Q=String(E.status);return Q==="running"||Q==="processing"||Q==="pending"})&&(D=setInterval(()=>{w(!0),ae()},3e3)),()=>{D&&clearInterval(D)}},[I,w,ae]),m.useEffect(()=>{const D=setInterval(()=>{ae()},3e3);return()=>clearInterval(D)},[ae]),m.useEffect(()=>{re(1)},[y]);const fe=m.useCallback(D=>{te(D)},[]),Re=m.useCallback(D=>{re(D)},[]),lt=m.useCallback(D=>{me(D),re(1)},[]),Ve=m.useCallback((D,h)=>{A(E=>{const Q=new Set(E);return h?Q.add(D):Q.delete(D),Q})},[]),gt=m.useCallback(D=>{A(D?new Set(d.map(h=>h.id)):new Set)},[d]),ga=m.useCallback(D=>{const h=D.displayLabel||D.label||D.configurationName;if(h&&String(h).trim()!==""){const Q=String(h).trim();return Q.endsWith("(Rerun)")?Q.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(D.id).slice(-6)})`:Q}const E=D.startedAt?new Date(D.startedAt):null;if(E&&!isNaN(E.getTime())){const Q=he=>he.toString().padStart(2,"0");return`job_${`${E.getFullYear()}${Q(E.getMonth()+1)}${Q(E.getDate())}_${Q(E.getHours())}${Q(E.getMinutes())}${Q(E.getSeconds())}`}`}return`Job ${D.id}`},[]),Oe=m.useCallback(async()=>{if(C.size!==0)try{le(!0);const D=Array.from(C),h=await window.electronAPI.jobManagement.bulkRerunJobExecutions(D);h.success?(console.log("Bulk rerun started:",h.message),await w(),await ae(),A(new Set)):(console.error("Bulk rerun failed:",h.error),alert(`Bulk rerun failed: ${h.error}`))}catch(D){console.error("Error rerunning jobs:",D);const h=D instanceof Error?D.message:String(D);alert(`Error rerunning jobs: ${h}`)}finally{le(!1)}},[C,w,ae]),_t=m.useCallback(async()=>{if(C.size!==0)try{le(!0);const D=Array.from(C);for(const h of D)await window.electronAPI.jobManagement.deleteJobExecution(h);await w(),await ae(),A(new Set)}catch(D){console.error("Error deleting jobs:",D)}finally{le(!1)}},[C,w,ae]),Ht=m.useCallback(D=>{u(D)},[u]);return m.useEffect(()=>{const D=h=>{h.ctrlKey&&h.key==="a"&&(h.preventDefault(),gt(!0)),h.key==="Delete"&&C.size>0&&(h.preventDefault(),_t()),h.key==="Escape"&&A(new Set)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[C.size,gt,_t]),m.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]),ye?a.jsx("div",{className:"min-h-screen bg-[--background] text-[--foreground] flex flex-col overflow-hidden",children:a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-600 mb-4",children:" Error"}),a.jsx("p",{className:"text-gray-600",children:ye}),a.jsx("button",{onClick:()=>w(!1),className:"mt-4 bg-[--primary] text-white px-4 py-2 rounded hover:opacity-90",children:"Retry"})]})})}):a.jsxs("div",{className:"min-h-screen bg-[--background] text-[--foreground] flex flex-col overflow-hidden",children:[a.jsx("header",{className:"job-management-header relative py-3 md:py-4",children:a.jsxs("div",{className:"header-content relative",children:[a.jsxs("div",{className:"header-left",children:[a.jsx("button",{onClick:H,className:"back-button","aria-label":"Go back to dashboard",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),a.jsx("h1",{className:"header-title",children:"Job Management"})]}),a.jsx("div",{className:"header-actions ml-auto",children:a.jsx("button",{onClick:()=>w(!1),className:"refresh-button",disabled:xe,"aria-label":"Refresh jobs",children:a.jsx(am,{className:"w-5 h-5"})})})]})}),a.jsxs("div",{className:"grid grid-cols-5 gap-4 p-6 shrink-0",children:[a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"text-sm text-[--muted-foreground]",children:"Total Jobs"}),a.jsx("div",{className:"text-2xl font-semibold mt-1",children:Z.totalJobs}),a.jsxs("div",{className:"text-xs text-[--primary] mt-1",children:[ce.weeklyTrend==="up"&&` ${ce.weeklyDeltaPct}% from last week`,ce.weeklyTrend==="down"&&` ${Math.abs(ce.weeklyDeltaPct)}% from last week`,ce.weeklyTrend==="flat"&&"No change from last week"]})]}),a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"text-sm text-[--muted-foreground]",children:"Completed"}),a.jsx("div",{className:"text-2xl font-semibold mt-1 text-[--status-completed]",children:Z.completedJobs}),a.jsxs("div",{className:"text-xs text-[--muted-foreground] mt-1",children:["Completion rate ",ce.completionRate,"%"]})]}),a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"text-sm text-[--muted-foreground]",children:"In Progress"}),a.jsx("div",{className:"text-2xl font-semibold mt-1 text-[--status-in-progress]",children:Z.processingJobs}),a.jsx("div",{className:"text-xs text-[--muted-foreground] mt-1",children:"Currently processing"})]}),a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"text-sm text-[--muted-foreground]",children:"Failed"}),a.jsx("div",{className:"text-2xl font-semibold mt-1 text-[--status-failed]",children:Z.failedJobs}),a.jsxs("div",{className:"text-xs text-[--muted-foreground] mt-1",children:[ce.failedLast24h," failed in last 24h"]})]}),a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"text-sm text-[--muted-foreground]",children:"Pending"}),a.jsx("div",{className:"text-2xl font-semibold mt-1 text-[--status-pending]",children:Z.pendingJobs}),a.jsx("div",{className:"text-xs text-[--muted-foreground] mt-1",children:"In queue"})]})]}),a.jsxs("div",{className:"px-6 py-4 space-y-4 border-b border-[--border] shrink-0",children:[a.jsxs("div",{className:"job-filters-row flex flex-wrap items-center gap-x-8 gap-y-4",children:[a.jsx("div",{className:"relative flex-none mr-4",children:(()=>{const D=[{value:"all",label:"All Status"},{value:"completed",label:"Completed"},{value:"processing",label:"In Progress"},{value:"failed",label:"Failed"}];return a.jsx(yh,{options:D,value:y.status||"all",onChange:h=>fe({...y,status:h}),buttonClassName:"text-sm border border-gray-300 rounded-md px-3 py-1 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[12rem] text-left",menuWidthClassName:"w-[14rem]",ariaLabel:"Filter jobs by status"})})()}),a.jsx("div",{className:"flex items-center gap-2 flex-none",children:a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:!!y.hasPendingRetries,onChange:D=>fe({...y,hasPendingRetries:D.target.checked}),className:"outline-none focus:outline-none ring-0 focus:ring-0 focus-visible:outline-none focus-visible:ring-0"}),"Has pending retries"]})}),a.jsx("div",{className:"relative flex items-center gap-2 flex-nowrap flex-none w-[300px] z-0 ml-4",children:a.jsxs("div",{className:"flex items-center gap-2 bg-[--background] border border-[--border] rounded-lg h-10 px-2",children:[a.jsx("input",{type:"date",className:"bg-transparent px-2 h-full focus:outline-none",placeholder:"From",value:p(y.dateFrom),onChange:D=>{const h=D.target.value,E=h?new Date(h):void 0;fe({...y,dateFrom:E})}}),a.jsx("div",{className:"h-4 w-px bg-[--border]"}),a.jsx("input",{type:"date",className:"bg-transparent px-2 h-full focus:outline-none",placeholder:"To",value:p(y.dateTo),onChange:D=>{const h=D.target.value,E=h?new Date(h):void 0;fe({...y,dateTo:E})}})]})}),a.jsxs("div",{className:"relative flex-[1_1_24rem] min-w-[16rem] max-w-[42rem] h-10 ml-6",children:[a.jsx("input",{type:"text",value:j,onChange:D=>M(D.target.value),placeholder:"Search jobs...",className:"w-full h-10 bg-[--background] border border-[--border] rounded-lg px-4 pl-10 pr-10 focus:outline-none focus:ring-2 focus:ring-[--ring]"}),a.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[--muted-foreground]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),j&&a.jsx("button",{onClick:()=>M(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[--muted-foreground] hover:text-[--foreground]",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsxs("span",{className:"text-[--muted-foreground]",children:[k," active filter",k===1?"":"s"]}),a.jsx("button",{onClick:()=>{te({status:"all",dateRange:"all",label:"",minImages:0,maxImages:void 0,dateFrom:void 0,dateTo:void 0}),g("")},className:"text-[--primary] hover:underline text-sm",children:"Clear all"})]}),a.jsx("div",{className:"h-4 border-r border-[--border]"}),a.jsx("div",{className:"flex items-center gap-2"})]})})]}),a.jsx("div",{className:"job-table-container",children:a.jsx("div",{className:"job-table-scroll",children:a.jsxs("table",{className:"job-table w-full",children:[a.jsx("thead",{className:"sticky top-0 bg-[--background] z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"w-12",children:a.jsx("div",{className:"checkbox-wrapper",role:"checkbox","aria-checked":d.length>0&&d.every(D=>C.has(D.id)),tabIndex:0,onClick:()=>gt(!d.every(D=>C.has(D.id))),children:d.length>0&&d.every(D=>C.has(D.id))&&a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),a.jsxs("th",{className:"w-32",children:["Job ID",a.jsx("span",{className:"sort-indicator",children:""})]}),a.jsx("th",{className:"w-64",children:"Name/Label"}),a.jsx("th",{className:"w-32",children:"Status"}),a.jsxs("th",{className:"w-40",children:["Date",a.jsx("span",{className:"sort-indicator",children:""})]}),a.jsx("th",{className:"w-24",children:"Duration"}),a.jsx("th",{className:"w-24",children:"Images"}),a.jsx("th",{className:"w-40",children:"Actions"})]})}),a.jsx("tbody",{children:d.map(D=>a.jsxs("tr",{className:`job-row ${C.has(D.id)?"selected":""}`,children:[a.jsx("td",{children:a.jsx("div",{className:"checkbox-wrapper","aria-checked":C.has(D.id),onClick:h=>{h.stopPropagation(),Ve(D.id,!C.has(D.id))},role:"checkbox",tabIndex:0,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),h.stopPropagation(),Ve(D.id,!C.has(D.id)))},children:C.has(D.id)&&a.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),a.jsx("td",{children:a.jsxs("span",{className:"job-id",children:["#",D.id]})}),a.jsx("td",{children:a.jsx("span",{className:"job-label",children:ga(D)})}),a.jsx("td",{children:a.jsx(wa,{variant:"job",status:D.status})}),a.jsx("td",{children:a.jsx("span",{className:"timestamp",children:D.startedAt?new Date(D.startedAt).toLocaleDateString():"Unknown"})}),a.jsx("td",{children:D.startedAt&&D.completedAt?`${Math.round((new Date(D.completedAt).getTime()-new Date(D.startedAt).getTime())/(1e3*60))}m`:"N/A"}),a.jsx("td",{children:a.jsxs("span",{className:"flex items-center gap-1",children:[D.totalImages||0,a.jsx("svg",{className:"w-4 h-4 text-[--muted-foreground]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})}),a.jsx("td",{children:a.jsxs("div",{className:"quick-actions flex items-center gap-2",children:[a.jsx("button",{onClick:()=>Ht(D.id),className:"p-1 hover:bg-[--secondary] rounded transition-colors",title:"View Job Details",children:a.jsxs("svg",{className:"w-4 h-4 text-[--action-view]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:async h=>{h.preventDefault(),h.stopPropagation(),console.log(" DEBUG RERUN: JobManagementPanel rerun button clicked for job:",D.id),console.log(" DEBUG RERUN: Timestamp:",new Date().toISOString()),console.log(" DEBUG RERUN: Event type:",h.type),console.log(" DEBUG RERUN: Event target:",h.target),console.log(" DEBUG RERUN: Event currentTarget:",h.currentTarget);try{await window.electronAPI.jobManagement.rerunJobExecution(D.id),console.log(" Waiting for job registration to complete..."),setTimeout(async()=>{console.log(" Refreshing Job Management UI after rerun..."),await w()},1e3)}catch(E){console.error("Failed to rerun job:",E)}},className:"p-1 hover:bg-[--secondary] rounded transition-colors",title:"Rerun Job",children:a.jsxs("svg",{className:"w-4 h-4 text-[--action-rerun]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 01-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]})}),a.jsx("button",{onClick:()=>{z("single"),ee(D.id),O(!0)},className:"p-1 hover:bg-[--secondary] rounded transition-colors",title:"Export Job",children:a.jsx("svg",{className:"w-4 h-4 text-[--action-export]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsx("button",{onClick:async()=>{try{const h=await window.electronAPI.jobManagement.deleteJobExecution(D.id);h.success?await w():console.error("Failed to delete job:",h.error)}catch(h){console.error("Error deleting job:",h)}},className:"p-1 hover:bg-[--secondary] rounded transition-colors",title:"Delete Job",children:a.jsx("svg",{className:"w-4 h-4 text-[--action-delete]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},D.id))})]})})}),C.size>0&&a.jsx("div",{className:"border-t border-[--border] p-4 shrink-0",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"text-sm text-[--muted-foreground]",children:["Selected: ",C.size," (",Math.round(C.size/d.length*100),"%)"]}),a.jsx("button",{onClick:()=>A(new Set),className:"text-[--primary] hover:underline text-sm",children:"Clear"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Oe,disabled:be,className:"bg-[--action-rerun] text-white px-4 py-2 rounded-lg hover:opacity-90 disabled:opacity-50 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Rerun Selected"]}),a.jsxs("button",{onClick:()=>{z("bulk"),ee(null),O(!0)},disabled:be,className:"bg-[--action-export] text-white px-4 py-2 rounded-lg hover:opacity-90 disabled:opacity-50 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Selected"]}),a.jsxs("button",{onClick:_t,disabled:be,className:"bg-[--action-delete] text-white px-4 py-2 rounded-lg hover:opacity-90 disabled:opacity-50 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Selected"]})]})]})}),a.jsx("div",{className:"border-t border-[--border] p-4 shrink-0",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>Re(P-1),disabled:P===1,className:"p-2 hover:bg-[--secondary] rounded-lg transition-colors disabled:opacity-50",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsxs("span",{className:"text-sm text-[--muted-foreground]",children:["Page ",P," of ",L]}),a.jsx("button",{onClick:()=>Re(P+1),disabled:P===L,className:"p-2 hover:bg-[--secondary] rounded-lg transition-colors disabled:opacity-50",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("select",{value:se,onChange:D=>lt(Number(D.target.value)),className:"bg-[--background] border border-[--border] rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-[--ring]",children:[a.jsx("option",{value:25,children:"25 per page"}),a.jsx("option",{value:50,children:"50 per page"}),a.jsx("option",{value:100,children:"100 per page"})]}),a.jsxs("span",{className:"text-sm text-[--muted-foreground]",children:["Total: ",$," jobs"]})]})]})}),xe&&a.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[--primary] mx-auto"}),a.jsx("p",{className:"mt-4 text-[--muted-foreground]",children:"Loading jobs..."})]})}),je&&(pe==="single"?a.jsx(Gc,{isOpen:!0,title:"Export Job",fileKind:"xlsx",defaultFilename:(()=>{const D=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),h=I.find(he=>String(he.id)===String(q)),E=q?String(q).slice(-6):"",Q=h&&(h.displayLabel||h.label||h.configurationName)||E||"Job";return`${String(Q).replace(/[^a-zA-Z0-9-_]/g,"_")}_${D}.xlsx`})(),onClose:()=>{O(!1),z("single"),ee(null)},onExport:async({mode:D,outputPath:h,filename:E,duplicatePolicy:Q})=>{try{if(!q)return;let W;D==="custom"&&(h&&!/\.xlsx$/i.test(h)?W=`${h.replace(/[\\/]+$/,"")}/${E}`:W=h||E);const he=D==="custom"?{outputPath:W||E,duplicatePolicy:Q}:void 0,ie=await window.electronAPI.jobManagement.exportJobToExcel(q,he);if(ie&&ie.success&&ie.filePath)try{await window.electronAPI.revealInFolder(ie.filePath)}catch{}}finally{O(!1),z("single"),ee(null)}}}):a.jsx(Gc,{isOpen:!0,title:`Export ${C.size} Jobs`,fileKind:"zip",defaultFilename:`bulk_export_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.zip`,onClose:()=>{O(!1),z("single")},onExport:async({mode:D,outputPath:h,filename:E,duplicatePolicy:Q})=>{try{const W=Array.from(C);let he;D==="custom"&&(h&&!/\.zip$/i.test(h)?he=`${h.replace(/[\\/]+$/,"")}/${E}`:he=h||E);const ie=D==="custom"?{outputPath:he||E,duplicatePolicy:Q}:void 0,K=await window.electronAPI.jobManagement.bulkExportJobExecutions(W,ie);if(K&&K.success&&K.zipPath)try{await window.electronAPI.revealInFolder(K.zipPath)}catch{}}finally{O(!1),z("single")}}}))]})},Nh=({isOpen:u,onClose:H,onExport:I,title:f,description:C})=>{const[A,y]=m.useState(!1),[te,j]=m.useState(null),g=m.useCallback(async()=>{y(!0),j(null);try{j({success:!0,message:"Starting export...",isProgress:!0});const P=await I();await new Promise(re=>setTimeout(re,500)),j(P),P.success&&setTimeout(()=>{J()},5e3)}catch(P){j({success:!1,error:P instanceof Error?P.message:"Unknown error occurred"})}finally{y(!1)}},[I,H]),_=m.useCallback(async()=>{try{await window.electronAPI.openExportsFolder()}catch(P){console.error("Failed to open exports folder:",P)}},[]),J=m.useCallback(()=>{y(!1),j(null),H()},[H]);return u?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f}),a.jsx("button",{onClick:J,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:A,children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C&&a.jsx("p",{className:"text-gray-600 mb-4",children:C}),!te&&!A&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-700",children:"Ready to export. Click Export to continue."}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:g,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Export"}),a.jsx("button",{onClick:J,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}),A&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),a.jsx("span",{className:"text-gray-700",children:"Exporting..."})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Creating Excel file with job details and settings..."}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:"100%"}})}),te?.isProgress&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-blue-800",children:te.message})})]}),te&&a.jsx("div",{className:"space-y-4",children:te.success?a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:a.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Successful!"}),te.message&&a.jsx("p",{className:"text-gray-600 mb-2",children:te.message}),te.filename&&a.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["File: ",te.filename]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:_,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Open Exports Folder"}),a.jsx("button",{onClick:J,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Close"})]})]}):a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Failed"}),a.jsx("p",{className:"text-red-600 mb-4",children:te.error}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:g,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"}),a.jsx("button",{onClick:J,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Close"})]})]})})]})}):null},wh=({jobId:u,onBack:H,onRerun:I,onDelete:f})=>{const[C,A]=m.useState("overview"),[y,te]=m.useState(null),[j,g]=m.useState([]),[_,J]=m.useState([]),[P,re]=m.useState(!0),[se,me]=m.useState(null),[$,Se]=m.useState(!1),[xe,Me]=m.useState("grid"),[ye,ke]=m.useState("all"),[be,le]=m.useState(""),[je,O]=m.useState(!1),[pe,z]=m.useState(null),q=m.useRef(null),ee=m.useCallback(()=>{const N=y?.label;if(N&&N.trim()!=="")return N.endsWith("(Rerun)")?N.replace(/\s*\(Rerun\)$/,"")+` (Rerun ${String(y?.id).slice(-6)})`:N;const de=y?.startedAt?new Date(y.startedAt):null;if(de&&!isNaN(de.getTime())){const Ne=b=>b.toString().padStart(2,"0");return`job_${`${de.getFullYear()}${Ne(de.getMonth()+1)}${Ne(de.getDate())}_${Ne(de.getHours())}${Ne(de.getMinutes())}${Ne(de.getSeconds())}`}`}return`Job ${y?.id??""}`.trim()},[y]),[ve,ne]=m.useState(!1),[o,k]=m.useState(null),[p,V]=m.useState(!1),[G,d]=m.useState(null),[L,Z]=m.useState(!1),[ce,M]=m.useState(!1),[w,ae]=m.useState(null),[fe,Re]=m.useState(!1);m.useEffect(()=>{lt()},[u]);const lt=async()=>{console.log(" SingleJobView: loadJobData called"),re(!0),me(null);try{const N=await window.electronAPI.jobManagement.getJobExecution(u);if(N.success){te(N.execution);const de=N.execution.label;if(!de||de.trim()===""){const Ne=N.execution.startedAt?new Date(N.execution.startedAt):null;if(Ne&&!isNaN(Ne.getTime())){const Ze=oe=>oe.toString().padStart(2,"0"),b=`${Ne.getFullYear()}${Ze(Ne.getMonth()+1)}${Ze(Ne.getDate())}_${Ze(Ne.getHours())}${Ze(Ne.getMinutes())}${Ze(Ne.getSeconds())}`;le(`job_${b}`)}else le(`Job ${N.execution.id}`)}else le(de);if(N.execution.id){console.log(" SingleJobView: Calculating statistics for execution ID:",N.execution.id);try{const Ne=await window.electronAPI.calculateJobExecutionStatistics(N.execution.id);Ne.success&&(console.log(" SingleJobView: Calculated statistics:",Ne.statistics),te(Ze=>{const b=Ze??{};return{...b,id:b?.id??N.execution.id,configurationId:b?.configurationId??N.execution.configurationId,configurationName:b?.configurationName,startedAt:b?.startedAt??N.execution.startedAt,completedAt:b?.completedAt??N.execution.completedAt,status:b?.status??N.execution.status,totalImages:Ne.statistics.totalImages,successfulImages:Ne.statistics.successfulImages,failedImages:Ne.statistics.failedImages,approvedImages:Ne.statistics.approvedImages,qcFailedImages:Ne.statistics.qcFailedImages,label:b?.label??N.execution.label}}))}catch(Ne){console.warn("Failed to calculate statistics:",Ne)}}}else me(N.error||"Failed to load job details");if(N.execution?.id){console.log(" SingleJobView: Loading images for execution ID:",N.execution.id);const de=await window.electronAPI.generatedImages.getGeneratedImagesByExecution(N.execution.id);console.log(" SingleJobView: Images result:",de),de.success?(console.log(" SingleJobView: Setting images:",de.images),console.log(" SingleJobView: Images QC statuses:",de.images?.map(Ne=>({id:Ne.id,qcStatus:Ne.qcStatus}))),g(de.images||[])):(console.warn("Failed to load images:",de.error),g([]))}else console.warn("Job execution has no numeric ID, cannot load images"),g([]);try{const de=await window.electronAPI.jobManagement.getJobLogs("standard");de&&Array.isArray(de)?J(de):J([])}catch{J([])}if(console.log(" DEBUG: jobResult structure:",N),console.log(" DEBUG: jobResult.execution:",N.execution),console.log(" DEBUG: jobResult.execution?.configurationId:",N.execution?.configurationId),N.execution?.configurationId)try{console.log(" DEBUG: About to call getJobConfigurationById with:",N.execution.configurationId);const de=await window.electronAPI.getJobConfigurationById(N.execution.configurationId);console.log(" DEBUG: getJobConfigurationById result:",de),de.success&&de.configuration?(console.log(" DEBUG: Setting job configuration:",de.configuration),ae(de.configuration)):console.warn(" DEBUG: getJobConfigurationById failed:",de)}catch(de){console.warn("Failed to load job configuration:",de)}else console.warn(" DEBUG: No configurationId found in jobResult.execution")}catch(N){console.error("Error loading job data:",N),me("Failed to load job data")}finally{re(!1)}},Ve=m.useCallback(N=>{A(N),N==="logs"&&h()},[]),gt=m.useCallback(()=>{H()},[H]),ga=m.useCallback(async()=>{Re(!0)},[]),Oe=m.useCallback(()=>{console.log(" DEBUG RERUN: SingleJobView rerun button clicked for jobId:",u),console.log(" DEBUG RERUN: Timestamp:",new Date().toISOString()),console.log(" DEBUG RERUN: Stack trace:",new Error().stack),I(u)},[I,u]),_t=m.useCallback(()=>{Se(!0)},[]),Ht=m.useCallback(()=>{f(u),Se(!1)},[f,u]),D=m.useCallback(()=>{Se(!1)},[]),h=m.useCallback(async()=>{try{let N="standard";try{(await window.electronAPI.getSettings?.())?.settings?.advanced?.debugMode&&(N="debug")}catch{}const de=await window.electronAPI.jobManagement.getJobLogs(N);J(Array.isArray(de)?de:[])}catch{J([])}},[]);m.useCallback(()=>{z(null),setTimeout(()=>{if(q.current){q.current.focus();const N=document.createRange();N.selectNodeContents(q.current);const de=window.getSelection();de&&(de.removeAllRanges(),de.addRange(N))}},10)},[]);const E=m.useCallback(async()=>{if(!(!y||!be.trim())){O(!0),z(null);try{const N=be.trim()==="No label"?"":be.trim(),de=await window.electronAPI.jobManagement.renameJobExecution(y.id,N);de.success?(te(Ne=>Ne?{...Ne,label:N}:null),console.log("Job label updated successfully")):z(de.error||"Failed to save label")}catch(N){console.error("Error saving job label:",N),z("Failed to save label")}finally{O(!1)}}},[y,be]),Q=m.useCallback(()=>{const N=y?.label;!N||N.trim()===""?le("No label"):le(N),z(null)},[y]);m.useCallback(N=>{N.key==="Enter"?(N.preventDefault(),E()):N.key==="Escape"&&(N.preventDefault(),Q())},[E,Q]),m.useCallback(()=>{const N=y?.label||"",de=N&&N.trim()!==""?N:ee();be!==de&&E()},[be,y,E,ee]);const W=m.useCallback(async()=>{console.log("Edit button clicked, job:",y),console.log("Job configurationId:",y?.configurationId),console.log("Already loaded jobConfiguration:",w),ne(!0),d(null),Z(!1);try{if(w?.settings)console.log("Using already-loaded job configuration:",w.settings),k(w.settings);else if(y?.configurationId){console.log("Job configuration not loaded yet, fetching from backend for ID:",y.configurationId),Z(!0);const N=await window.electronAPI.getJobConfigurationById(y.configurationId);console.log("Configuration load result:",N),N.success&&N.configuration?.settings?(k(N.configuration.settings),console.log("Loaded job configuration from backend:",N.configuration.settings)):(console.warn("Job configuration not found, showing error in modal"),d("Job configuration not found. This job may be corrupted."))}else console.log("Job has no configurationId - this is a dashboard-created job"),d("This job was created from the dashboard and has no saved configuration. You can view the job details and generated images, but cannot edit settings. This is normal behavior for dashboard-created jobs.")}catch(N){console.error("Error loading job settings:",N),d("Failed to load job settings")}finally{Z(!1)}},[y?.configurationId,w]),he=m.useCallback(async()=>{if(!(!o||!y?.configurationId)){V(!0),d(null);try{const N=await window.electronAPI.updateJobConfiguration(y.configurationId,o);if(N.success){try{const de=await window.electronAPI.getJobConfigurationById(y.configurationId);de?.success&&de?.configuration?.settings?ae(de.configuration):ae(Ne=>Ne?{...Ne,settings:o}:{settings:o})}catch{ae(Ne=>Ne?{...Ne,settings:o}:{settings:o})}ne(!1),console.log("Job settings updated successfully")}else d(N.error||"Failed to save job settings")}catch(N){console.error("Error saving job settings:",N),d("Failed to save job settings")}finally{V(!1)}}},[o,y?.configurationId]),ie=m.useCallback(()=>{ne(!1),k(null),d(null)},[]),K=m.useCallback((N,de,Ne)=>{o&&k(Ze=>Ze&&{...Ze,[N]:{...Ze[N],[de]:Ne}})},[o]),Ee=m.useCallback((N,de)=>Ne=>{K(N,de,Ne)},[K]),Te=m.useCallback(N=>{const de=(N||"").toLowerCase();return de==="approved"||de==="complete"||de==="completed"?"approved":"qc_failed"},[]),Xe=N=>{if(!N)return{};if(typeof N=="string")try{return JSON.parse(N)}catch{return{}}return N},Pe=m.useCallback(N=>{const de=Xe(N?.metadata),Ne=typeof de?.title=="string"?de.title:de?.title?.en||"";return Ne&&Ne.trim()!==""?Ne:`Image ${N?.id}`},[]),ft=m.useMemo(()=>ye==="all"?j:j.filter(N=>Te(N.qcStatus)===ye),[j,ye,Te]),ot=N=>N instanceof Date?N.toLocaleString():new Date(N).toLocaleString(),pt=(N,de)=>{if(!de)return"In Progress";const Ne=N instanceof Date?N:new Date(N),b=(de instanceof Date?de:new Date(de)).getTime()-Ne.getTime(),oe=Math.floor(b/36e5),ue=Math.floor(b%36e5/6e4);return oe>0?`${oe}h ${ue}m`:`${ue}m`};return P?a.jsx("div",{className:"single-job-view",role:"main","aria-label":"Loading job details",children:a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading job details..."})]})}):se?a.jsx("div",{className:"single-job-view",role:"main","aria-label":"Job error",children:a.jsxs("div",{className:"error-container",children:[a.jsx("div",{className:"error-icon",children:a.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h3",{children:"Error Loading Job"}),a.jsx("p",{children:se}),a.jsx("button",{onClick:gt,className:"btn-primary",children:"Go Back"})]})}):y?a.jsxs("div",{className:"single-job-view",children:[a.jsxs("header",{className:"job-header",children:[a.jsx("div",{className:"header-content",children:a.jsxs("div",{className:"header-left",children:[a.jsx("button",{onClick:gt,className:"back-button","aria-label":"Go back to job list",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),a.jsxs("h1",{className:"job-title-main",children:["Job #",y.id]})]})}),a.jsx("div",{className:"job-title-section",children:a.jsx("div",{className:"job-title-static",children:a.jsx("span",{className:"job-title-text",children:ee()})})})]}),a.jsxs("div",{className:"tab-navigation",children:[a.jsx("button",{className:`tab-button ${C==="overview"?"active":""}`,onClick:()=>Ve("overview"),"data-tab":"overview",children:"Overview"}),a.jsx("button",{className:`tab-button ${C==="images"?"active":""}`,onClick:()=>Ve("images"),"data-tab":"images",children:"Images"}),y?.status==="running"&&a.jsx("button",{className:`tab-button ${C==="logs"?"active":""}`,onClick:()=>Ve("logs"),"data-tab":"logs",children:"Logs"})]}),a.jsxs("main",{className:"tab-content-container",children:[a.jsx("div",{id:"overview",className:`tab-content ${C==="overview"?"active":""}`,children:a.jsxs("div",{className:"overview-content",children:[a.jsxs("div",{className:"info-grid",children:[a.jsxs("div",{className:"info-card",children:[a.jsx("div",{className:"info-label",children:"Job ID"}),a.jsxs("div",{className:"info-value",children:["JOB-",y.id]})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("div",{className:"info-label",children:"Status"}),a.jsx("div",{className:"info-value",children:a.jsx(wa,{variant:"job",status:y.status})})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("div",{className:"info-label",children:"Start Time"}),a.jsx("div",{className:"info-value",children:y.startedAt?ot(y.startedAt):"Not started"})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("div",{className:"info-label",children:"Duration"}),a.jsx("div",{className:"info-value",children:y.startedAt&&y.completedAt?pt(y.startedAt,y.completedAt):"In Progress"})]}),a.jsxs("div",{className:"info-card",children:[a.jsx("div",{className:"info-label",children:"Success Rate"}),a.jsx("div",{className:"info-value",children:y.totalImages?`${Math.round((y.successfulImages||0)/y.totalImages*100)}% (${y.successfulImages||0}/${y.totalImages})`:"N/A"})]})]}),a.jsx("h2",{className:"section-title",children:"Generated Images Summary"}),a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"stats-label",children:"Total Images"}),a.jsx("div",{className:"stats-value",children:y.totalImages||0})]}),a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"stats-label",children:"Successful"}),a.jsx("div",{className:"stats-value success",children:y.successfulImages||0}),(y.successfulImages||0)>0&&a.jsxs("div",{className:"stats-breakdown",children:[a.jsxs("div",{className:"breakdown-item approved",children:[a.jsx("span",{className:"breakdown-label",children:"Approved:"}),a.jsx("span",{className:"breakdown-value",children:y.approvedImages||0})]}),a.jsxs("div",{className:"breakdown-item qc-failed",children:[a.jsx("span",{className:"breakdown-label",children:"QC Failed:"}),a.jsx("span",{className:"breakdown-value",children:y.qcFailedImages||0})]})]})]}),a.jsxs("div",{className:"stats-card",children:[a.jsx("div",{className:"stats-label",children:"Failed"}),a.jsx("div",{className:"stats-value failed",children:y.failedImages||0}),a.jsx("div",{className:"stats-note",children:"Generation failed"})]})]}),a.jsxs("div",{className:"settings-section",children:[a.jsxs("div",{className:"settings-header",children:[a.jsx("h2",{className:"section-title",children:"Settings"}),a.jsxs("div",{className:"settings-actions",children:[a.jsx("button",{className:"refresh-button",onClick:lt,title:"Refresh job data",disabled:P,children:P?"Refreshing...":a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",strokeWidth:"2.5"}),a.jsx("path",{d:"M21 3v5h-5",strokeWidth:"2.5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",strokeWidth:"2.5"}),a.jsx("path",{d:"M8 16H3v5",strokeWidth:"2.5"})]}),"Refresh"]})}),a.jsx("button",{className:"edit-button",onClick:W,title:"Edit job settings",children:"Edit"})]})]}),a.jsx("div",{className:"settings-content",children:w?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"setting-group",children:[a.jsx("h3",{children:"Model Configuration"}),a.jsxs("div",{className:"setting-details",children:[a.jsx("div",{children:" Provider: Runware"}),a.jsxs("div",{children:[" Runware Model: ",w.settings?.parameters?.runwareModel||"Not specified"]}),a.jsxs("div",{children:[" Generations: ",w.settings?.parameters?.count??"Not specified"]}),a.jsxs("div",{children:[" Variations: ",w.settings?.parameters?.variations??"Not specified"]})]})]}),a.jsxs("div",{className:"setting-group",children:[a.jsx("h3",{children:"Image Settings"}),a.jsxs("div",{className:"setting-details",children:[a.jsxs("div",{children:[" Dimensions: ",w.settings?.parameters?.runwareDimensionsCsv||"Not specified"]}),a.jsxs("div",{children:[" Format: ",w.settings?.parameters?.runwareFormat||"Not specified"]}),a.jsxs("div",{children:[" Convert to JPG: ",w.settings?.processing?.convertToJpg?"Yes":"No"]})]})]}),w.settings?.parameters?.runwareAdvanced&&a.jsxs("div",{className:"setting-group",children:[a.jsx("h3",{children:"Runware Advanced"}),a.jsxs("div",{className:"setting-details",children:[a.jsxs("div",{children:[" CFG Scale: ",w.settings?.parameters?.runwareAdvanced?.CFGScale??"Not specified"]}),a.jsxs("div",{children:[" Steps: ",w.settings?.parameters?.runwareAdvanced?.steps??"Not specified"]}),a.jsxs("div",{children:[" Scheduler: ",w.settings?.parameters?.runwareAdvanced?.scheduler||"Not specified"]}),a.jsxs("div",{children:[" NSFW Check: ",w.settings?.parameters?.runwareAdvanced?.checkNSFW?"Enabled":"Disabled"]}),a.jsxs("div",{children:[" LoRA: ",Array.isArray(w.settings?.parameters?.runwareAdvanced?.lora)?`${w.settings?.parameters?.runwareAdvanced?.lora?.length} configured`:"None"]})]})]}),a.jsxs("div",{className:"setting-group",children:[a.jsx("h3",{children:"Processing Options"}),a.jsxs("div",{className:"setting-details",children:[a.jsxs("div",{children:[" Remove Background: ",w.settings?.processing?.removeBg?"Yes":"No"]}),a.jsxs("div",{children:[" Remove.bg Size: ",w.settings?.processing?.removeBg?w.settings?.processing?.removeBgSize||"auto":"Not applied (Remove Background OFF)"]}),a.jsxs("div",{children:[" Image Enhancement: ",w.settings?.processing?.imageEnhancement?"Yes":"No"]}),a.jsxs("div",{children:[" Sharpening: ",w.settings?.processing?.imageEnhancement?w.settings?.processing?.sharpening||0:"Not applied (Image Enhancement OFF)"]}),a.jsxs("div",{children:[" Saturation: ",w.settings?.processing?.imageEnhancement?w.settings?.processing?.saturation||1.4:"Not applied (Image Enhancement OFF)"]}),a.jsxs("div",{children:[" Image Convert: ",w.settings?.processing?.imageConvert?"Yes":"No"]}),a.jsxs("div",{children:[" Convert Format: ",w.settings?.processing?.imageConvert?w.settings?.processing?.convertToJpg?"JPG":"PNG":"Not applied (Image Convert OFF)"]}),a.jsxs("div",{children:[" JPG Quality: ",w.settings?.processing?.imageConvert&&w.settings?.processing?.convertToJpg?w.settings?.processing?.jpgQuality||100:"Not applied (Convert Format is not JPG)"]}),a.jsxs("div",{children:[" PNG Quality: ",w.settings?.processing?.imageConvert&&!w.settings?.processing?.convertToJpg?w.settings?.processing?.pngQuality||100:"Not applied (Convert Format is not PNG)"]}),a.jsxs("div",{children:[" Trim Transparent: ",w.settings?.processing?.trimTransparentBackground?"Yes":"No"]}),a.jsxs("div",{children:[" JPG Background Colour: ",w.settings?.processing?.imageConvert&&w.settings?.processing?.convertToJpg&&w.settings?.processing?.removeBg?w.settings?.processing?.jpgBackground||"white":"Not applied (Remove Background, Image Convert are set to OFF and Convert Format is not JPG)"]}),a.jsxs("div",{children:[" Quality Check: ",w.settings?.ai?.runQualityCheck?"Yes":"No"]}),a.jsxs("div",{children:[" Metadata Generation: ",w.settings?.ai?.runMetadataGen?"Yes":"No"]})]})]})]}):a.jsxs("div",{className:"no-configuration",children:[a.jsx("p",{children:"No configuration available for this job."}),a.jsx("p",{children:"This job was run with default settings."})]})})]})]})}),a.jsx("div",{id:"images",className:`tab-content ${C==="images"?"active":""}`,children:a.jsxs("div",{className:"images-content",children:[a.jsxs("div",{className:"images-controls",children:[a.jsx("div",{className:"filter-controls",children:a.jsxs("select",{value:ye,onChange:N=>ke(N.target.value),className:"filter-select",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"qc_failed",children:"QC Failed"})]})}),a.jsxs("div",{className:"view-controls",children:[a.jsx("button",{className:`view-toggle ${xe==="grid"?"active":""}`,onClick:()=>Me("grid"),title:"Grid View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{className:`view-toggle ${xe==="list"?"active":""}`,onClick:()=>Me("list"),title:"List View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]}),a.jsxs("div",{className:"images-scroll-area",children:[xe==="grid"&&a.jsx("div",{className:"image-grid",children:ft.length===0?a.jsx("div",{className:"no-images",children:a.jsx("p",{children:"No images found with current filter."})}):ft.map(N=>a.jsxs("div",{className:"image-card",children:[a.jsxs("div",{className:"relative aspect-square rounded overflow-hidden",children:[N.finalImagePath||N.tempImagePath?a.jsx("img",{src:`local-file://${N.finalImagePath||N.tempImagePath}`,alt:`Generated image ${N.id}`,className:"w-full h-full object-cover",onError:de=>{console.error("Failed to load image:",N.finalImagePath),de.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik02NCAzMkM3Ny4yNTQ4IDMyIDg4IDQyLjc0NTIgODggNTZDODggNjkuMjU0OCA3Ny4yNTQ4IDgwIDY0IDgwQzUwLjc0NTIgODAgNDAgNjkuMjU0OCA0MCA1NkM0MCA0Mi43NDUyIDUwLjc0NTIgMzIgNjQgMzJaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0yNCA4OEgxMDRDMTEwLjYyNyA4OCAxMTYgOTMuMzcyNiAxMTYgMTAwVjExMkMxMTYgMTE4LjYyNyAxMTAuNjI3IDEyNCAxMDQgMTI0SDI0QzE3LjM3MjYgMTI0IDEyIDExOC42MjcgMTIgMTEyVjEwMEMxMiA5My4zNzI2IDE3LjM3MjYgODggMjQgODhaIiBmaWxsPSIjOUI5QkEwIi8+Cjwvc3ZnPgo="}}):a.jsx("div",{className:"w-full h-full bg-gray-100 rounded flex items-center justify-center",children:a.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx(wa,{variant:"qc",status:Te(N.qcStatus)==="approved"?"approved":String(N.qcStatus||"").toLowerCase()==="processing"?"processing":"qc_failed"})})]}),a.jsx("div",{className:"image-info",children:a.jsxs("div",{className:"image-text",children:[a.jsx("span",{className:"image-id",children:Pe(N)}),a.jsx("span",{className:"image-date",children:N?.createdAt?new Date(N.createdAt).toLocaleDateString():""})]})})]},N.id))}),xe==="list"&&a.jsxs("table",{className:"image-list",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Preview"}),a.jsx("th",{children:"ID/Title"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Generated At"})]})}),a.jsx("tbody",{children:ft.map(N=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("div",{className:"thumbnail",children:N.finalImagePath||N.tempImagePath?a.jsx("img",{src:`local-file://${N.finalImagePath||N.tempImagePath}`,alt:`Generated image ${N.id}`,className:"w-16 h-16 object-cover rounded-lg",onError:de=>{de.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNCAyNEg0MFY0MEgyNFYyNFoiIGZpbGw9IiNEMUQ1REIiLz4KPC9zdmc+"}}):a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})})}),a.jsx("td",{children:Pe(N)}),a.jsx("td",{children:a.jsx(wa,{variant:"qc",status:Te(N.qcStatus)==="approved"?"approved":String(N.qcStatus||"").toLowerCase()==="processing"?"processing":"qc_failed"})}),a.jsx("td",{children:N?.createdAt?new Date(N.createdAt).toLocaleDateString():""})]},N.id))})]})]})]})}),y?.status==="running"&&a.jsx("div",{id:"logs",className:`tab-content ${C==="logs"?"active":""}`,children:a.jsx("div",{className:"logs-content",style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:a.jsx(lm,{logs:_,jobStatus:y?.status==="running"||y?.status==="processing"?"running":y?.status==="completed"?"completed":y?.status==="failed"?"failed":"idle",onRefresh:h,minHeight:320,maxHeight:"70vh"})})})]}),a.jsx("footer",{className:"job-footer",children:a.jsxs("div",{className:"footer-actions",children:[a.jsxs("button",{onClick:Oe,className:"btn-rerun",children:[a.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",strokeWidth:"2.5"}),a.jsx("path",{d:"M21 3v5h-5",strokeWidth:"2.5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",strokeWidth:"2.5"}),a.jsx("path",{d:"M8 16H3v5",strokeWidth:"2.5"})]}),"Rerun Job"]}),a.jsxs("button",{onClick:ga,className:"btn-export",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Job"]}),a.jsxs("button",{onClick:_t,className:"btn-delete",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Job"]})]})}),$&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"delete-modal",children:[a.jsx("div",{className:"modal-header",children:a.jsx("h3",{children:"Confirm Deletion"})}),a.jsx("div",{className:"modal-body",children:a.jsx("p",{children:"Are you sure you want to delete this job? This action cannot be undone."})}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{onClick:D,className:"btn-cancel",children:"Cancel"}),a.jsx("button",{onClick:Ht,className:"btn-confirm-delete",children:"Delete Permanently"})]})]})}),ve&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"settings-modal",children:[a.jsxs("div",{className:"settings-header",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Job Settings"}),a.jsx("button",{onClick:ie,className:"close-button",title:"Close",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),L?a.jsxs("div",{className:"loading-state",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Loading current settings..."})]}):o?a.jsxs("div",{className:"settings-content",children:[a.jsxs("div",{className:"setting-group",children:[a.jsx("h4",{className:"setting-group-title",children:"API Keys"}),a.jsx("p",{className:"setting-hint",style:{fontSize:"12px",color:"#6b7280",marginTop:"-6px",marginBottom:"8px"},children:"API keys are managed in Settings. For security, edit them there."})]}),a.jsxs("div",{className:"setting-group",children:[a.jsx("h4",{className:"setting-group-title",children:"File Paths"}),a.jsx("p",{className:"setting-hint",style:{fontSize:"12px",color:"#6b7280",marginTop:"-6px",marginBottom:"8px"},children:"Edit file contents on disk; paths are reference-only here. Files are re-read at run/rerun. To change paths, use Settings."}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Output Directory"}),a.jsx("input",{type:"text",value:o.filePaths?.outputDirectory||"",onChange:()=>{},disabled:!0,placeholder:"Output directory path"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Temp Directory"}),a.jsx("input",{type:"text",value:o.filePaths?.tempDirectory||"",onChange:()=>{},disabled:!0,placeholder:"Temporary directory path"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"System Prompt File"}),a.jsx("input",{type:"text",value:o.filePaths?.systemPromptFile||"",onChange:()=>{},disabled:!0,placeholder:"Path to system prompt file"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Keywords File"}),a.jsx("input",{type:"text",value:o.filePaths?.keywordsFile||"",onChange:()=>{},disabled:!0,placeholder:"Path to keywords file"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Quality Check Prompt File"}),a.jsx("input",{type:"text",value:o.filePaths?.qualityCheckPromptFile||"",onChange:()=>{},disabled:!0,placeholder:"Path to QC prompt file"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Metadata Prompt File"}),a.jsx("input",{type:"text",value:o.filePaths?.metadataPromptFile||"",onChange:()=>{},disabled:!0,placeholder:"Path to metadata prompt file"})]})]}),a.jsxs("div",{className:"setting-group",children:[a.jsx("h4",{className:"setting-group-title",children:"Parameters"}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Job Name / Label"}),a.jsx("input",{type:"text",value:o.parameters?.label||"",onChange:N=>K("parameters","label",N.target.value),placeholder:"Optional label for this job"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Runware Model"}),a.jsx("input",{type:"text",value:o.parameters?.runwareModel||"",onChange:N=>K("parameters","runwareModel",N.target.value),placeholder:"e.g., runware:101@1"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Dimensions (WH or CSV)"}),a.jsx("input",{type:"text",value:o.parameters?.runwareDimensionsCsv||"",onChange:N=>K("parameters","runwareDimensionsCsv",N.target.value),placeholder:"e.g., 1024x1024 or 1024x1024,768x1024"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Output Format"}),a.jsxs("select",{className:"ui-select",value:o.parameters?.runwareFormat||"png",onChange:N=>K("parameters","runwareFormat",N.target.value),children:[a.jsx("option",{value:"png",children:"PNG"}),a.jsx("option",{value:"jpg",children:"JPG"}),a.jsx("option",{value:"webp",children:"WEBP"})]})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Generations count"}),a.jsx("input",{type:"number",value:o.parameters?.count||1,onChange:N=>K("parameters","count",parseInt(N.target.value)),min:"1",max:"2500"}),a.jsx("p",{className:"setting-description",children:"Number of generations (up to 2500 generations)."})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Variations"}),a.jsx("input",{type:"number",min:"1",max:"20",value:Number(o.parameters?.variations??1),onChange:N=>K("parameters","variations",Math.max(1,Math.min(20,Number(N.target.value||1))))})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Enable Generation Timeout"}),a.jsx(ct,{checked:o.parameters?.enablePollingTimeout||!1,onChange:N=>K("parameters","enablePollingTimeout",N)})]}),o.parameters?.enablePollingTimeout&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Generation Timeout (minutes)"}),a.jsx("input",{type:"number",value:o.parameters?.pollingTimeout||0,onChange:N=>K("parameters","pollingTimeout",parseInt(N.target.value)),min:"0"})]})}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{htmlFor:"gen-retry-attempts-modal",children:"Generation Retry Attempts"}),a.jsx("input",{id:"gen-retry-attempts-modal",type:"number",value:o.parameters?.generationRetryAttempts??1,onChange:N=>K("parameters","generationRetryAttempts",Math.max(0,Math.min(5,parseInt(N.target.value)))),min:"0",max:"5"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{htmlFor:"gen-retry-backoff-modal",children:"Retry Backoff (ms)"}),a.jsx("input",{id:"gen-retry-backoff-modal",type:"number",value:o.parameters?.generationRetryBackoffMs??0,onChange:N=>K("parameters","generationRetryBackoffMs",Math.max(0,Math.min(6e4,parseInt(N.target.value)))),min:"0",max:"60000",step:"100"})]}),a.jsxs("div",{className:"setting-row toggle-row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Runware Advanced Controls"}),a.jsx("p",{className:"setting-description",children:"Show advanced Runware generation controls"})]}),a.jsx(ct,{checked:ce,onChange:N=>M(N)})]}),ce&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Runware Advanced: CFG Scale"}),a.jsx("input",{type:"number",value:Number(o.parameters?.runwareAdvanced?.CFGScale??""),onChange:N=>K("parameters","runwareAdvanced",{...o.parameters?.runwareAdvanced||{},CFGScale:Number(N.target.value)||void 0})})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Runware Advanced: Steps"}),a.jsx("input",{type:"number",value:Number(o.parameters?.runwareAdvanced?.steps??""),onChange:N=>K("parameters","runwareAdvanced",{...o.parameters?.runwareAdvanced||{},steps:Number(N.target.value)||void 0})})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Runware Advanced: Scheduler"}),a.jsx("input",{type:"text",value:o.parameters?.runwareAdvanced?.scheduler||"",onChange:N=>K("parameters","runwareAdvanced",{...o.parameters?.runwareAdvanced||{},scheduler:N.target.value||void 0})})]})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"OpenAI Model"}),a.jsx("input",{type:"text",value:o.parameters?.openaiModel||"",onChange:N=>K("parameters","openaiModel",N.target.value),placeholder:"e.g., gpt-4o-mini"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Random Keywords"}),a.jsx(ct,{checked:o.parameters?.keywordRandom||!1,onChange:N=>K("parameters","keywordRandom",N)})]})]}),a.jsxs("div",{className:"setting-group",children:[a.jsx("h4",{className:"setting-group-title",children:"Image Processing"}),a.jsxs("div",{className:"setting-row toggle-row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Remove Background"}),a.jsx("p",{className:"setting-description",children:"Remove background from generated images"})]}),a.jsx(ct,{checked:o.processing?.removeBg||!1,onChange:Ee("processing","removeBg")})]}),o.processing?.removeBg&&a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Remove.bg Size"}),a.jsxs("select",{value:o.processing?.removeBgSize||"auto",onChange:N=>K("processing","removeBgSize",N.target.value),className:"ui-select",children:[a.jsx("option",{value:"auto",children:"Auto"}),a.jsx("option",{value:"preview",children:"Preview"}),a.jsx("option",{value:"full",children:"Full"}),a.jsx("option",{value:"50MP",children:"50MP"})]})]}),a.jsxs("div",{className:"setting-row toggle-row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Image Convert"}),a.jsx("p",{className:"setting-description",children:"Enable image conversion and processing"})]}),a.jsx(ct,{checked:o.processing?.imageConvert||!1,onChange:Ee("processing","imageConvert")})]}),o.processing?.imageConvert&&a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Convert Format"}),a.jsxs("select",{value:o.processing?.convertToJpg?"jpg":"png",onChange:N=>K("processing","convertToJpg",N.target.value==="jpg"),className:"ui-select",children:[a.jsx("option",{value:"png",children:"PNG"}),a.jsx("option",{value:"jpg",children:"JPG"})]})]}),o.processing?.imageConvert&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"JPG Quality (1-100)"}),a.jsx("input",{type:"number",value:o.processing?.jpgQuality||100,onChange:N=>K("processing","jpgQuality",parseInt(N.target.value)),min:"1",max:"100"})]}),a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"PNG Quality (1-100)"}),a.jsx("input",{type:"number",value:o.processing?.pngQuality||100,onChange:N=>K("processing","pngQuality",parseInt(N.target.value)),min:"1",max:"100"})]})]}),o.processing?.removeBg&&o.processing?.imageConvert&&o.processing?.convertToJpg&&a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"JPG Background Color"}),a.jsxs("select",{value:o.processing?.jpgBackground||"white",onChange:N=>K("processing","jpgBackground",N.target.value),className:"ui-select",children:[a.jsx("option",{value:"white",children:"White"}),a.jsx("option",{value:"black",children:"Black"})]})]}),o.processing?.removeBg&&a.jsxs("div",{className:"setting-row toggle-row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Trim Transparent Background"}),a.jsx("p",{className:"setting-description",children:"Remove transparent areas from images (PNG only)"})]}),a.jsx(ct,{checked:o.processing?.trimTransparentBackground||!1,onChange:Ee("processing","trimTransparentBackground")})]}),a.jsxs("div",{className:"setting-row toggle-row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Image Enhancement"}),a.jsx("p",{className:"setting-description",children:"Apply sharpening and saturation effects"})]}),a.jsx(ct,{checked:o.processing?.imageEnhancement||!1,onChange:Ee("processing","imageEnhancement")})]}),o.processing?.imageEnhancement&&a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Sharpening Intensity (0-10)"}),a.jsx("input",{type:"range",min:"0",max:"10",step:"0.5",value:o.processing?.sharpening||5,onChange:N=>K("processing","sharpening",parseFloat(N.target.value)),className:"range-slider"}),a.jsxs("div",{className:"range-labels",children:[a.jsx("span",{children:"0 (None)"}),a.jsx("span",{children:o.processing?.sharpening||5}),a.jsx("span",{children:"10 (Maximum)"})]})]}),o.processing?.imageEnhancement&&a.jsxs("div",{className:"setting-row",children:[a.jsx("label",{children:"Saturation Level (0-2)"}),a.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:o.processing?.saturation||1.4,onChange:N=>K("processing","saturation",parseFloat(N.target.value)),className:"range-slider"}),a.jsxs("div",{className:"range-labels",children:[a.jsx("span",{children:"0 (Grayscale)"}),a.jsx("span",{children:o.processing?.saturation||1.4}),a.jsx("span",{children:"2 (Vibrant)"})]})]})]}),a.jsxs("div",{className:"setting-group",children:[a.jsx("h4",{className:"setting-group-title",children:"AI Features"}),a.jsxs("div",{className:"setting-row toggle-row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"AI Quality Check"}),a.jsx("p",{className:"setting-description",children:"Use AI to check image quality"})]}),a.jsx(ct,{checked:o.ai?.runQualityCheck||!1,onChange:Ee("ai","runQualityCheck")})]}),a.jsxs("div",{className:"setting-row toggle-row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"AI Metadata Generation"}),a.jsx("p",{className:"setting-description",children:"Generate metadata using AI"})]}),a.jsx(ct,{checked:o.ai?.runMetadataGen||!1,onChange:Ee("ai","runMetadataGen")})]})]}),a.jsxs("div",{className:"setting-group",children:[a.jsx("h4",{className:"setting-group-title",children:"Advanced Settings"}),a.jsxs("div",{className:"setting-row toggle-row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Debug Mode"}),a.jsx("p",{className:"setting-description",children:"Enable detailed logging and debugging"})]}),a.jsx(ct,{checked:o.advanced?.debugMode||!1,onChange:Ee("advanced","debugMode")})]})]})]}):a.jsx("div",{className:"settings-content",children:a.jsxs("div",{className:"error-state",children:[a.jsx("p",{children:"Unable to load job settings. This job may be corrupted or missing configuration."}),a.jsx("p",{children:"Please check the error message below for more details."})]})}),G&&a.jsxs("div",{className:"settings-error",children:[a.jsx("span",{className:"error-icon",children:a.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),G]}),a.jsxs("div",{className:"settings-actions",children:[a.jsx("button",{onClick:ie,className:"btn-cancel",children:"Cancel"}),a.jsx("button",{onClick:he,disabled:p||L||!o,className:"btn-save",children:p?"Saving...":"Save Settings"})]})]})}),a.jsx(Nh,{isOpen:fe,onClose:()=>Re(!1),onExport:async()=>await window.electronAPI.exportJobToExcel(u),title:"Export Job",description:"Export this job to Excel format with all details and settings."})]}):a.jsx("div",{className:"single-job-view",role:"main","aria-label":"Job not found",children:a.jsxs("div",{className:"error-container",children:[a.jsx("h3",{children:"Job Not Found"}),a.jsx("p",{children:"The requested job could not be found."}),a.jsx("button",{onClick:gt,className:"btn-primary",children:"Go Back"})]})})},Sh=""+new URL("logo-banner-DUIGF7ij.svg",import.meta.url).href,Ch=""+new URL("logo-square-W1aN-qwA.svg",import.meta.url).href,X0={sm:"h-8",md:"h-10",lg:"h-12"},Mh=({variant:u="square",size:H="md",className:I="",alt:f,fit:C="none"})=>{const A=u==="banner"?Sh:Ch,y=X0[H]||X0.md,j=["select-none",C==="width"?"":y,C==="width"?"w-full h-auto object-contain":"",I].filter(Boolean).join(" ");return a.jsx("img",{src:A,alt:f||(u==="banner"?"Gen Image Factory Banner":"Gen Image Factory Logo"),className:j,draggable:!1})};function kh(){const[u,H]=m.useState("Testing..."),[I,f]=m.useState("Loading..."),[C,A]=m.useState("main"),[y,te]=m.useState(null),[j,g]=m.useState(0),[_,J]=m.useState(0);m.useEffect(()=>{const se=async()=>{try{const $=await window.electronAPI.ping();H($==="pong"?" IPC Working":" IPC Failed")}catch($){console.error("IPC Error:",$),H(" IPC Error: "+$.message)}},me=async()=>{try{const $=await window.electronAPI.getAppVersion();f($)}catch($){console.error("Version Error:",$),f("Error: "+$.message)}};se(),me()},[]);const P={height:44,lineHeight:"44px",padding:0,border:0,outline:"none",boxShadow:"none",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},re="block w-full p-0 m-0 text-center select-none rounded-md";return a.jsx("div",{className:"min-h-screen bg-gray-100",children:C==="settings"?a.jsx(Wg,{onBack:()=>A("main"),onOpenDashboard:()=>A("dashboard")}):C==="dashboard"?a.jsx(hh,{onBack:()=>A("main"),onOpenFailedImagesReview:()=>A("failed-review"),onOpenSettings:()=>A("settings"),onOpenJobs:()=>A("job-management"),onOpenSingleJobView:se=>{te(se),A("single-job")}},j):C==="failed-review"?a.jsx(bh,{onBack:()=>{A("dashboard"),g(se=>se+1)},onBackToSingleJob:()=>{A("single-job"),J(se=>se+1)}}):C==="job-management"?a.jsx(jh,{onOpenSingleJob:se=>{te(se.toString()),A("single-job")},onBack:()=>{A("dashboard"),g(se=>se+1)}}):C==="single-job"?a.jsx(wh,{jobId:y||"",onBack:()=>A("job-management"),onExport:se=>{console.log(`Export job ${se}`)},onRerun:se=>{console.log(` APP: Rerun job ${se} - calling backend rerun function`),window.electronAPI.jobManagement.rerunJobExecution(se)},onDelete:async se=>{try{console.log(`Deleting job ${se}`);const me=await window.electronAPI.jobManagement.deleteJobExecution(se);me.success?(console.log(`Job ${se} deleted successfully`),A("job-management")):console.error(`Failed to delete job ${se}:`,me.error)}catch(me){console.error(`Error deleting job ${se}:`,me)}}},_):a.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-lg px-6 py-5 text-center home-launch",children:[a.jsx("div",{className:"mb-3 mx-auto",children:a.jsx(Mh,{variant:"square",className:"h-28 md:h-32 lg:h-36 mx-auto"})}),a.jsxs("div",{className:"text-base text-gray-700 mb-3",children:["Version ",I]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx("button",{type:"button",onClick:()=>A("settings"),className:`${re} bg-blue-600 text-white hover:bg-blue-700 transition-colors`,style:P,children:"Open Settings"}),a.jsx("button",{type:"button",onClick:()=>A("dashboard"),className:`${re} bg-green-600 text-white hover:bg-green-700 transition-colors`,style:P,children:"Open Dashboard"})]})]})})})}const Ah=document.getElementById("root"),Eh=Cg.createRoot(Ah);Eh.render(a.jsx(kh,{}));
