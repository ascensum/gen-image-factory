# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## Release Notes Automation

**Note**: Release notes are automatically generated by GitHub using Conventional Commits and the `.github/release.yml` configuration. The release notes appear in GitHub Releases and are automatically displayed to users via `electron-updater`.

### Commit Message Format

To ensure proper categorization in release notes, use Conventional Commits format:

- `feat:` - New features
- `fix:` - Bug fixes
- `chore:` - Maintenance tasks
- `docs:` - Documentation changes
- `refactor:` - Code refactoring
- `perf:` - Performance improvements
- `test:` - Test additions/changes
- `security:` - Security fixes

**Examples**:
- `feat(ui): add dark mode toggle`
- `fix(tray): fix icon not disappearing on exit`
- `chore: update dependencies`
- `docs: update README with installation instructions`

### Dependabot Integration

Dependabot PRs are automatically labeled with `dependencies` and `automated`, and will appear under "üõ°Ô∏è Security & Dependencies" in release notes.

## [1.1.4] - 2026-01-04

### Fixed
- Restored metadata persistence by enforcing `mappingId` presence with a runtime invariant check, ensuring image metadata is reliably updated in the database

## [1.1.3] - 2026-01-04

### Fixed
- Fixed 403 Forbidden error for `factory://` protocol by using `net.fetch` and `pathToFileURL` in the main process handler
- Improved Windows path handling for the factory protocol to correctly manage drive letters

## [1.1.2] - 2026-01-04

### Fixed
- Hardened `factory://` protocol by enabling `bypassCSP: true` in privilege registration
- Implemented universal protocol handler with modern `protocol.handle` and `url.pathToFileURL` for perfect cross-platform path resolution
- Updated global Content Security Policy (CSP) in `index.html` to explicitly allow `factory:` and `blob:` schemes
- Migrated all remaining legacy `local-file:` and `file://` references in the renderer to the canonical `factory://` protocol
- Fixed E2E and integration tests to align with the refined protocol and security hardening

## [1.1.1] - 2026-01-04

### Fixed
- Implemented `factory://` protocol for secure local resource access, resolving "Not allowed to load local resource" errors in signed Windows builds
- Refined cross-platform tray icon logic with absolute pathing to ensure icons appear correctly on Windows, macOS, and Linux
- Fixed bundling gaps by adding missing `color` dependencies and ensuring `node_modules` are correctly included in the ASAR
- Updated test mocks to support `protocol.handle` and latest Electron features
- Increased smoke test timeout to improve CI reliability on slower environments

## [1.1.0] - 2026-01-02

### Added
- Multi-platform release support (Windows, macOS, Linux)
- Automatic SHA-256 checksum generation for release assets
- SBOM (Software Bill of Materials) generation for improved transparency

### Fixed
- Fixed Windows MSIX build failure caused by invalid applicationId formatting
- Resolved Windows installer icon issues by adding missing platform-specific assets
- Improved GitHub Release reliability by handling asset overwriting correctly during re-runs
- Fixed application identity validation for Microsoft Store submissions

## [Unreleased]

### Added
- Initial project setup

